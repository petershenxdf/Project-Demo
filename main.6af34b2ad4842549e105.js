(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return a}));var i=n("30Go"),r=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new r.a;this.instancesDeferred.set(e,n);try{var i=this.getOrInitializeService(e);i&&n.resolve(i)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(i.a)({identifier:s,optional:!1},t),n=e.optional,r=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(r);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(c){}try{for(var r=Object(i.h)(this.instancesDeferred.entries()),o=r.next();!o.done;o=r.next()){var a=Object(i.e)(o.value,2),u=a[1],l=this.normalizeInstanceIdentifier(a[0]);try{var h=this.getOrInitializeService(l);u.resolve(h)}catch(c){}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(i.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"30Go":function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return c}));var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function s(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{u(i.next(t))}catch(e){o(e)}}function a(t){try{u(i.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))}function a(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}function c(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,i=n("zIRd"),r=n("30Go"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.J)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.D)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),h=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new l},c=h("localStorage"),p=h("sessionStorage"),d=new s.b("@firebase/database"),f=(e=1,function(){return e++}),g=function(t){var e=Object(o.I)(t),n=new o.d;n.update(e);var i=n.digest();return o.h.encodeByteArray(i)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",i=0;i<t.length;i++){var r=t[i];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?n+=y.apply(null,r):n+="object"==typeof r?Object(o.J)(r):r,n+=" "}return n},m=null,v=!0,b=function(t,e){Object(o.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,m=d.log.bind(d),e&&p.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,p.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===m&&!0===p.get("logging_enabled")&&b(!0)),m){var n=y.apply(null,t);m(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(r.f)([t],e))}},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(r.f)(t));d.error(n)},P=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(r.f)(t));throw d.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(r.f)(t));d.warn(n)},I=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},O="[MIN_NAME]",S="[MAX_NAME]",T=function(t,e){if(t===e)return 0;if(t===O||e===S)return-1;if(e===O||t===S)return 1;var n=G(t),i=G(e);return null!==n?null!==i?n-i==0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1},E=function(t,e){return t===e?0:t<e?-1:1},k=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.J)(e))},A=function(t){if("object"!=typeof t||null===t)return Object(o.J)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var i="{",r=0;r<e.length;r++)0!==r&&(i+=","),i+=Object(o.J)(e[r]),i+=":",i+=A(t[e[r]]);return i+"}"},D=function(t,e){var n=t.length;if(n<=e)return[t];for(var i=[],r=0;r<n;r+=e)i.push(t.substring(r,r+e>n?n:r+e));return i};function j(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var R,M,N,F,V,L,U,B,H,W,z=function(t){var e,n,i,r,s;Object(o.f)(!I(t),"Invalid JSON number"),0===t?(n=0,i=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,i=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),l="";for(s=0;s<64;s+=8){var h=parseInt(u.substr(s,8),2).toString(16);1===h.length&&(h="0"+h),l+=h}return l.toLowerCase()},q=new RegExp("^-?(0*)\\d{1,10}$"),G=function(t){if(q.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Y=function(t){try{t()}catch(e){setTimeout((function(){throw C("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},K=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},X=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(e instanceof t)for(i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{var r=e.split("/");for(i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var i=e.getFront(),r=n.getFront();if(null===i)return n;if(i===r)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),i=e.slice(),r=0;r<n.length&&r<i.length;r++){var o=T(n[r],i[r]);if(0!==o)return o}return n.length===i.length?0:n.length<i.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Q=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.H)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.H)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.H)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),$="firebaseio.com",Z="websocket",J="long_polling",tt=function(){function t(t,e,n,i,r,o,s){void 0===r&&(r=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=c.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&c.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.f)("string"==typeof t,"typeof type must == string"),Object(o.f)("object"==typeof e,"typeof params must == object"),t===Z)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==J)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var i=[];return j(e,(function(t,e){i.push(t+"="+e)})),n+i.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),et=function(t,e){var n=nt(t),i=n.namespace;return"firebase.com"===n.domain&&P(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||P("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(n.host,n.secure,i,e,"ws"===n.scheme||"wss"===n.scheme,"",i!==n.subdomain),path:new X(n.pathString)}},nt=function(t){var e="",n="",i="",o="",s="",a=!0,u="https",l=443;if("string"==typeof t){var h=t.indexOf("//");h>=0&&(u=t.substring(0,h-1),t=t.substring(h+2));var c=t.indexOf("/");-1===c&&(c=t.length);var p=t.indexOf("?");-1===p&&(p=t.length),e=t.substring(0,Math.min(c,p)),c<p&&(o=function(t){for(var e="",n=t.split("/"),i=0;i<n.length;i++)if(n[i].length>0){var r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(o){}e+="/"+r}return e}(t.substring(c,p)));var d=function(t){var e,n,i={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(r.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?i[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}(t.substring(Math.min(t.length,p)));(h=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,l=parseInt(e.substring(h+1),10)):h=e.length;var f=e.slice(0,h);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{var g=e.indexOf(".");i=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=i}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:a,scheme:u,pathString:o,namespace:s}},it=/[\[\].#$\/\u0000-\u001F\u007F]/,rt=/[\[\].#$\u0000-\u001F\u007F]/,ot=10485760,st=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},ut=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!I(t)||t&&"object"==typeof t&&Object(o.k)(t,".sv")},lt=function(t,e,n,i,r){r&&void 0===n||ht(Object(o.o)(t,e,r),n,i)},ht=function(t,e,n){var i=n instanceof X?new Q(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+i.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+i.toErrorString()+" with contents = "+e.toString());if(I(e))throw new Error(t+"contains "+e.toString()+" "+i.toErrorString());if("string"==typeof e&&e.length>ot/3&&Object(o.H)(e)>ot)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var r=!1,s=!1;if(j(e,(function(e,n){if(".value"===e)r=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(e),ht(t,n,i),i.pop()})),r&&s)throw new Error(t+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},ct=function(t,e,n,i,r){if(!r||void 0!==n){var s=Object(o.o)(t,e,r);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];j(n,(function(t,e){var n=new X(t);if(ht(s,e,i.child(n)),".priority"===n.getBack()&&!ut(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,i;for(n=0;n<e.length;n++)for(var r=(i=e[n]).slice(),o=0;o<r.length;o++)if(".priority"===r[o]&&o===r.length-1);else if(!st(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X.comparePaths);var s=null;for(n=0;n<e.length;n++){if(i=e[n],null!==s&&s.contains(i))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}}(s,a)}},pt=function(t,e,n,i){if(!i||void 0!==n){if(I(n))throw new Error(Object(o.o)(t,e,i)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ut(n))throw new Error(Object(o.o)(t,e,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dt=function(t,e,n,i){if(!i||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.o)(t,e,i)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ft=function(t,e,n,i){if(!(i&&void 0===n||st(n)))throw new Error(Object(o.o)(t,e,i)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gt=function(t,e,n,i){if(!(i&&void 0===n||at(n)))throw new Error(Object(o.o)(t,e,i)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yt=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gt(t,e,n,i)},mt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},vt=function(t,e,n){var i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(i))throw new Error(Object(o.o)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,i){if((!i||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.o)(t,e,i)+"must be a boolean.")},_t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.K)("OnDisconnect.cancel",0,1,arguments.length),Object(o.L)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.K)("OnDisconnect.remove",0,1,arguments.length),mt("OnDisconnect.remove",this.path_),Object(o.L)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.K)("OnDisconnect.set",1,2,arguments.length),mt("OnDisconnect.set",this.path_),lt("OnDisconnect.set",1,t,this.path_,!1),Object(o.L)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.K)("OnDisconnect.setWithPriority",2,3,arguments.length),mt("OnDisconnect.setWithPriority",this.path_),lt("OnDisconnect.setWithPriority",1,t,this.path_,!1),pt("OnDisconnect.setWithPriority",2,e,!1),Object(o.L)("OnDisconnect.setWithPriority",3,n,!0);var i=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,i.wrapCallback(n)),i.promise},t.prototype.update=function(t,e){if(Object(o.K)("OnDisconnect.update",1,2,arguments.length),mt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ct("OnDisconnect.update",1,t,this.path_,!1),Object(o.L)("OnDisconnect.update",2,e,!0);var r=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,r.wrapCallback(e)),r.promise},t}(),wt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.K)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),xt=(R="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",M=0,N=[],function(t){var e,n=t===M;M=t;var i=new Array(8);for(e=7;e>=0;e--)i[e]=R.charAt(t%64),t=Math.floor(t/64);Object(o.f)(0===t,"Cannot push at time == 0");var r=i.join("");if(n){for(e=11;e>=0&&63===N[e];e--)N[e]=0;N[e]++}else for(e=0;e<12;e++)N[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)r+=R.charAt(N[e]);return Object(o.f)(20===r.length,"nextPushId: Length should be 20."),r}),Pt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ct=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Pt(O,t),i=new Pt(O,e);return 0!==this.compare(n,i)},t.prototype.minPost=function(){return Pt.MIN},t}(),It=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return F},set:function(t){F=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return T(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(S,F)},e.prototype.makePost=function(t,e){return Object(o.f)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Pt(t,F)},e.prototype.toString=function(){return".key"},e}(Ct),Ot=new It,St=function(t){return"number"==typeof t?"number:"+z(t):"string:"+t},Tt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.f)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.k)(e,".sv"),"Priority must be a string or number.")}else Object(o.f)(t===V||t.isEmpty(),"priority of unexpected type.");Object(o.f)(t===V||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Et=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.f)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Tt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return L},set:function(t){L=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var i=e.getFront();return null===i?n:n.isEmpty()&&".priority"!==i?this:(Object(o.f)(".priority"!==i||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+St(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?z(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,i=typeof this.value_,r=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(i);return Object(o.f)(r>=0,"Unknown leaf type: "+n),Object(o.f)(s>=0,"Unknown leaf type: "+i),r===s?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),i=e.node.getPriority(),r=n.compareTo(i);return 0===r?T(t.name,e.name):r},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(S,new Et("[PRIORITY-POST]",B))},e.prototype.makePost=function(t,e){var n=U(t);return new Pt(e,new Et("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ct)),At=function(){function t(t,e,n,i,r){void 0===r&&(r=null),this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Dt=function(){function t(e,n,i,r,o){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:Rt.EMPTY_NODE,this.right=null!=o?o:Rt.EMPTY_NODE}return t.prototype.copy=function(e,n,i,r,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Rt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,i;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Rt.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),jt=function(){function t(){}return t.prototype.copy=function(t,e,n,i,r){return this},t.prototype.insert=function(t,e,n){return new Dt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Rt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Dt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Dt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,i=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new At(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new At(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new At(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new At(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new jt,t}(),Mt=Math.log(2),Nt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Mt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Ft=function(t,e,n,i){t.sort(e);var r=function(e,i){var o,s,a=i-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Dt(s,o.node,Dt.BLACK,null,null);var u=parseInt(a/2,10)+e,l=r(e,u),h=r(u+1,i);return o=t[u],s=n?n(o):o,new Dt(s,o.node,Dt.BLACK,l,h)},o=function(e){for(var i=null,o=null,s=t.length,a=function(e,i){var o=s-e,a=s;s-=e;var l=r(o+1,a),h=t[o],c=n?n(h):h;u(new Dt(c,h.node,i,null,l))},u=function(t){i?(i.left=t,i=t):(o=t,i=t)},l=0;l<e.count;++l){var h=e.nextBitIsOne(),c=Math.pow(2,e.count-(l+1));h?a(c,Dt.BLACK):(a(c,Dt.BLACK),a(c,Dt.RED))}return o}(new Nt(t.length));return new Rt(i||e,o)},Vt={},Lt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.f)(Vt&&kt,"ChildrenNode.ts has not been loaded"),H=H||new t({".priority":Vt},{".priority":kt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.G)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Rt?e:null},t.prototype.hasIndex=function(t){return Object(o.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.f)(e!==Ot,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i,s=[],a=!1,u=n.getIterator(Pt.Wrap),l=u.getNext();l;)a=a||e.isDefinedOn(l.node),s.push(l),l=u.getNext();i=a?Ft(s,e.getCompare()):Vt;var h=e.toString(),c=Object(r.a)({},this.indexSet_);c[h]=e;var p=Object(r.a)({},this.indexes_);return p[h]=i,new t(p,c)},t.prototype.addToIndexes=function(e,n){var i=this;return new t(Object(o.E)(this.indexes_,(function(t,r){var s=Object(o.G)(i.indexSet_,r);if(Object(o.f)(s,"Missing index implementation for "+r),t===Vt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Pt.Wrap),l=u.getNext();l;)l.name!==e.name&&a.push(l),l=u.getNext();return a.push(e),Ft(a,s.getCompare())}return Vt}var h=n.get(e.name),c=t;return h&&(c=c.remove(new Pt(e.name,h))),c.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.E)(this.indexes_,(function(t){if(t===Vt)return t;var i=n.get(e.name);return i?t.remove(new Pt(e.name,i)):t})),this.indexSet_)},t}();function Ut(t,e){return T(t.name,e.name)}function Bt(t,e){return T(t,e)}var Ht=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Tt(this.priorityNode_),this.children_.isEmpty()&&Object(o.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return W||(W=new t(new Rt(Bt),null,Lt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||W},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?W:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var i=new Pt(e,n),r=void 0,s=void 0;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));var a=r.isEmpty()?W:this.priorityNode_;return new t(r,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.f)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var i=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,i)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},i=0,r=0,o=!0;if(this.forEachChild(kt,(function(s,a){n[s]=a.val(e),i++,o&&t.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):o=!1})),!e&&o&&r<2*i){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+St(this.getPriority().val())+":"),this.forEachChild(kt,(function(e,n){var i=n.hash();""!==i&&(t+=":"+e+":"+i)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var i=this.resolveIndex_(n);if(i){var r=i.getPredecessorKey(new Pt(t,e));return r?r.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var i=this.children_.getIteratorFrom(t.name,Pt.Wrap),r=i.peek();null!=r&&e.compare(r,t)<0;)i.getNext(),r=i.peek();return i},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var i=this.children_.getReverseIteratorFrom(t.name,Pt.Wrap),r=i.peek();null!=r&&e.compare(r,t)>0;)i.getNext(),r=i.peek();return i},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Wt?-1:0},t.prototype.withIndex=function(e){if(e===Ot||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ot||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(kt),i=e.getIterator(kt),r=n.getNext(),o=i.getNext();r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=n.getNext(),o=i.getNext()}return null===r&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ot?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Wt=new(function(t){function e(){return t.call(this,new Rt(Bt),Ht.EMPTY_NODE,Lt.Default)||this}return Object(r.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ht.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ht));function zt(t,e){if(void 0===e&&(e=null),null===t)return Ht.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.f)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Et(t,zt(e));if(t instanceof Array){var n=Ht.EMPTY_NODE;return j(t,(function(e,i){if(Object(o.k)(t,e)&&"."!==e.substring(0,1)){var r=zt(i);!r.isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(e,r))}})),n.updatePriority(zt(e))}var i=[],r=!1;if(j(t,(function(t,e){if("."!==t.substring(0,1)){var n=zt(e);n.isEmpty()||(r=r||!n.getPriority().isEmpty(),i.push(new Pt(t,n)))}})),0===i.length)return Ht.EMPTY_NODE;var s=Ft(i,Ut,(function(t){return t.name}),Bt);if(r){var a=Ft(i,kt.getCompare());return new Ht(s,zt(e),new Lt({".priority":a},{".priority":kt}))}return new Ht(s,zt(e),Lt.Default)}Object.defineProperties(Pt,{MIN:{value:new Pt(O,Ht.EMPTY_NODE)},MAX:{value:new Pt(S,Wt)}}),It.__EMPTY_NODE=Ht.EMPTY_NODE,Et.__childrenNodeConstructor=Ht,V=Wt,B=Wt,U=zt;var qt,Gt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?T(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return Pt.MAX},e.prototype.makePost=function(t,e){var n=zt(t);return new Pt(e,n)},e.prototype.toString=function(){return".value"},e}(Ct)),Yt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.f)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(r.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),i=this.extractChild(e.node),r=n.compareTo(i);return 0===r?T(t.name,e.name):r},e.prototype.makePost=function(t,e){var n=zt(t),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,n);return new Pt(e,i)},e.prototype.maxPost=function(){var t=Ht.EMPTY_NODE.updateChild(this.indexPath_,Wt);return new Pt(S,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ct),Kt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.K)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.K)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.K)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.K)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.K)("DataSnapshot.child",0,1,arguments.length),e=String(e),gt("DataSnapshot.child",1,e,!1);var n=new X(e),i=this.ref_.child(n);return new t(this.node_.getChild(n),i,kt)},t.prototype.hasChild=function(t){Object(o.K)("DataSnapshot.hasChild",1,1,arguments.length),gt("DataSnapshot.hasChild",1,t,!1);var e=new X(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.K)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.K)("DataSnapshot.forEach",1,1,arguments.length),Object(o.L)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var i=this.node_;return!!i.forEachChild(this.index_,(function(i,r){return e(new t(r,n.ref_.child(i),kt))}))},t.prototype.hasChildren=function(){return Object(o.K)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.K)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.K)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Xt=function(){function t(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.J)(this.snapshot.exportVal())},t}(),Qt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),$t=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Xt("value",this,new Kt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callback_;return function(){i.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Qt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Zt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.k)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Qt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.f)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),i=e.getQueryParams().getIndex();return new Xt(t.type,this,new Kt(t.snapshotNode,n,i),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callbacks_[t.eventType];return function(){i.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var i=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),o=i.length;if(o===r.length){if(1===o){var s=i[0],a=r[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return r.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Jt=function(){function t(t,e,n,i){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=i}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(qt,"Reference.ts has not been loaded"),qt},set:function(t){qt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ot){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==O)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==S)throw new Error(i);if("string"!=typeof n)throw new Error(r)}}else if(t.getIndex()===kt){if(null!=e&&!ut(e)||null!=n&&!ut(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.f)(t.getIndex()instanceof Yt||t.getIndex()===Gt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.K)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,i,r){Object(o.K)("Query.on",2,4,arguments.length),dt("Query.on",1,e,!1),Object(o.L)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",i,r);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var i=new $t(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,i)},t.prototype.onChildEvent=function(t,e,n){var i=new Zt(t,e,n);this.repo.addEventCallbackForQuery(this,i)},t.prototype.off=function(t,e,n){Object(o.K)("Query.off",0,3,arguments.length),dt("Query.off",1,t,!0),Object(o.L)("Query.off",2,e,!0),Object(o.M)("Query.off",3,n,!0);var i=null,r=null;if("value"===t){var s=e||null;i=new $t(s,null,n||null)}else t&&(e&&((r={})[t]=e),i=new Zt(r,null,n||null));this.repo.removeEventCallbackForQuery(this,i)},t.prototype.once=function(e,n,i,r){var s=this;Object(o.K)("Query.once",1,4,arguments.length),dt("Query.once",1,e,!1),Object(o.L)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",i,r),u=!0,l=new o.a;l.promise.catch((function(){}));var h=function(t){u&&(u=!1,s.off(e,h),n&&n.bind(a.context)(t),l.resolve(t))};return this.on(e,h,(function(t){s.off(e,h),a.cancel&&a.cancel.bind(a.context)(t),l.reject(t)})),l.promise},t.prototype.limitToFirst=function(e){if(Object(o.K)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.K)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.K)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');gt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new X(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var i=new Yt(n),r=this.queryParams_.orderBy(i);return t.validateQueryEndpoints_(r),new t(this.repo,this.path,r,!0)},t.prototype.orderByKey=function(){Object(o.K)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Ot);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.K)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.K)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAt",0,2,arguments.length),lt("Query.startAt",1,e,this.path,!0),ft("Query.startAt",2,n,!0);var i=this.queryParams_.startAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endAt",0,2,arguments.length),lt("Query.endAt",1,e,this.path,!0),ft("Query.endAt",2,n,!0);var i=this.queryParams_.endAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.K)("Query.equalTo",1,2,arguments.length),lt("Query.equalTo",1,t,this.path,!1),ft("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.K)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.K)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=A(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.K)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var i=this.repo===e.repo,r=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return i&&r&&s},t.getCancelAndContextArgs_=function(t,e,n){var i={cancel:null,context:null};if(e&&n)i.cancel=e,Object(o.L)(t,3,i.cancel,!0),i.context=n,Object(o.M)(t,4,i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error(Object(o.o)(t,3,!0)+" must either be a cancel callback or a context object.");i.cancel=e}return i},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ee=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ie(t[".sv"],e,n):"object"==typeof t[".sv"]?re(t[".sv"],e):void Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ie=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.f)(!1,"Unexpected server value: "+t)}},re=function(t,e,n){t.hasOwnProperty("increment")||Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var i=t.increment;"number"!=typeof i&&Object(o.f)(!1,"Unexpected increment value: "+i);var r=e.node();if(Object(o.f)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;var s=r.getValue();return"number"!=typeof s?i:s+i},oe=function(t,e,n,i){return ae(e,new ee(n,t),i)},se=function(t,e,n){return ae(t,new te(e),n)};function ae(t,e,n){var i,r=t.getPriority().val(),o=ne(r,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Et(a,zt(o)):t}var u=t;return i=u,o!==u.getPriority().val()&&(i=i.updatePriority(new Et(o))),u.forEachChild(kt,(function(t,r){var o=ae(r,e.getImmediateChild(t),n);o!==r&&(i=i.updateImmediateChild(t,o))})),i}var ue,le,he=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var i=e.getFront();this.children.has(i)||this.children.set(i,new t);var r=this.children.get(i);e=e.popFront(),r.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(kt,(function(t,e){n.remember(new X(t),e)})),this.forget(t)}if(this.children.size>0){var i=t.getFront();return t=t.popFront(),this.children.has(i)&&this.children.get(i).forget(t)&&this.children.delete(i),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,i){var r=new X(t.toString()+"/"+n);i.forEachTree(r,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),ce=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),pe=function(){function t(t,e,n,i){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=i,Object(o.f)(!i||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),de=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ce.ACK_USER_WRITE,this.source=pe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new X(e));return new t(X.Empty,n,this.revert)}return Object(o.f)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),fe=function(){function t(t,e){void 0===e&&(ue||(ue=new Rt(E)),e=ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return j(e,(function(t,e){n=n.set(new X(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:X.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),i=this.children.get(n);if(null!==i){var r=i.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=r?{path:new X(n).child(r.path),value:r.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),i=this.children.get(n);return null!==i?i.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var i=e.getFront(),r=(this.children.get(i)||t.Empty).set(e.popFront(),n),o=this.children.insert(i,r);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),i=this.children.get(n);if(i){var r=i.remove(e.popFront()),o=void 0;return o=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var i,r=e.getFront(),o=(this.children.get(r)||t.Empty).setTree(e.popFront(),n);return i=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,i)},t.prototype.fold=function(t){return this.fold_(X.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(i,r){n[i]=r.fold_(t.child(i),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,X.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var i=!!this.value&&n(e,this.value);if(i)return i;if(t.isEmpty())return null;var r=t.getFront(),o=this.children.get(r);return o?o.findOnPath_(t.popFront(),e.child(r),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,X.Empty,e)},t.prototype.foreachOnPath_=function(e,n,i){if(e.isEmpty())return this;this.value&&i(n,this.value);var r=e.getFront(),o=this.children.get(r);return o?o.foreachOnPath_(e.popFront(),n.child(r),i):t.Empty},t.prototype.foreach=function(t){this.foreach_(X.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,i){i.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),ge=function(){function t(t,e){this.source=t,this.path=e,this.type=ce.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty):new t(this.source,this.path.popFront())},t}(),ye=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ce.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),me=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ce.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new X(e));return n.isEmpty()?null:n.value?new ye(this.source,X.Empty,n.value):new t(this.source,X.Empty,n)}return Object(o.f)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ve=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,i){return new t(new ve(e,n,i),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,i){return new t(this.eventCache_,new ve(e,n,i))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ve(Ht.EMPTY_NODE,!1,!1),new ve(Ht.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,i,r){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=i,this.prevName=r}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,i){return new t(t.CHILD_CHANGED,n,e,i)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),we=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,i,r,s){Object(o.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(_e.childRemovedChange(e,a)):Object(o.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(_e.childAddedChange(e,n)):s.trackChildChange(_e.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(kt,(function(t,i){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,i))})),e.isLeafNode()||e.forEachChild(kt,(function(e,i){if(t.hasChild(e)){var r=t.getImmediateChild(e);r.equals(i)||n.trackChildChange(_e.childChangedChange(e,i,r))}else n.trackChildChange(_e.childAddedChange(e,i))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ht.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),xe=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.f)(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var i=this.changeMap.get(n);if(i){var r=i.type;if(e===_e.CHILD_ADDED&&r===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,i.snapshotNode));else if(e===_e.CHILD_REMOVED&&r===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&r===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,i.oldSnap));else if(e===_e.CHILD_CHANGED&&r===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||r!==_e.CHILD_CHANGED)throw Object(o.g)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Pe=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ce=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ve(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),r=this.writes_.calcIndexedSlice(i,e,1,n,t);return 0===r.length?null:r[0]},t}(),Ie=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Oe=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.f)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.f)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,i,r){var s,a,u=new xe;if(n.type===ce.OVERWRITE){var l=n;l.source.fromUser?s=this.applyUserOverwrite_(e,l.path,l.snap,i,r,u):(Object(o.f)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered()&&!l.path.isEmpty(),s=this.applyServerOverwrite_(e,l.path,l.snap,i,r,a,u))}else if(n.type===ce.MERGE){var h=n;h.source.fromUser?s=this.applyUserMerge_(e,h.path,h.children,i,r,u):(Object(o.f)(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,h.path,h.children,i,r,a,u))}else if(n.type===ce.ACK_USER_WRITE){var c=n;s=c.revert?this.revertUserWrite_(e,c.path,i,r,u):this.ackUserWrite_(e,c.path,c.affectedTree,i,r,u)}else{if(n.type!==ce.LISTEN_COMPLETE)throw Object(o.g)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,i,u)}var p=u.getChanges();return t.maybeAddValueEvent_(e,s,p),new Ie(s,p)},t.maybeAddValueEvent_=function(t,e,n){var i=e.getEventCache();if(i.isFullyInitialized()){var r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,i,r){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.f)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var l=t.getCompleteServerSnap(),h=n.calcCompleteEventChildren(l instanceof Ht?l:Ht.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,r)}else{var c=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),c,r)}else{var p=e.getFront();if(".priority"===p){Object(o.f)(1===e.getLength(),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var f=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=f?this.filter_.updatePriority(d,f):s.getNode()}else{var g=e.popFront(),y=void 0;if(s.isCompleteForChild(p)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);y=null!=m?s.getNode().getImmediateChild(p).updateChild(g,m):s.getNode().getImmediateChild(p)}else y=n.calcCompleteChild(p,t.getServerCache());a=null!=y?this.filter_.updateChild(s.getNode(),p,y,g,i,r):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,i,r,o,s){var a,u=t.getServerCache(),l=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=l.updateFullNode(u.getNode(),n,null);else if(l.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=l.updateFullNode(u.getNode(),h,null)}else{var c=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var p=e.popFront(),d=u.getNode().getImmediateChild(c).updateChild(p,n);a=".priority"===c?l.updatePriority(u.getNode(),d):l.updateChild(u.getNode(),c,d,p,Pe,null)}var f=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),l.filtersNodes()),g=new Ce(i,f,r);return this.generateEventCacheAfterServerEvent_(f,e,i,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,i,r,o){var s,a,u=t.getEventCache(),l=new Ce(i,t,r);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var c=e.popFront(),p=u.getNode().getImmediateChild(h),d=void 0;if(c.isEmpty())d=n;else{var f=l.getCompleteChild(h);d=null!=f?".priority"===c.getBack()&&f.getChild(c.parent()).isEmpty()?f:f.updateChild(c,n):Ht.EMPTY_NODE}if(p.equals(d))s=t;else{var g=this.filter_.updateChild(u.getNode(),h,d,c,l,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,i,r,o,s){var a=this,u=e;return i.foreach((function(i,l){var h=n.child(i);t.cacheHasChild_(e,h.getFront())&&(u=a.applyUserOverwrite_(u,h,l,r,o,s))})),i.foreach((function(i,l){var h=n.child(i);t.cacheHasChild_(e,h.getFront())||(u=a.applyUserOverwrite_(u,h,l,r,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,i,r,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,l=t;u=e.isEmpty()?n:fe.Empty.setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),c=a.applyMerge_(u,n);l=a.applyServerOverwrite_(l,new X(e),c,i,r,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var c=t.getServerCache().getNode().getImmediateChild(e),p=a.applyMerge_(c,n);l=a.applyServerOverwrite_(l,new X(e),p,i,r,o,s)}})),l},t.prototype.ackUserWrite_=function(t,e,n,i,r,o){if(null!=i.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),i,r,s,o);if(e.isEmpty()){var u=fe.Empty;return a.getNode().forEachChild(Ot,(function(t,e){u=u.set(new X(t),e)})),this.applyServerMerge_(t,e,u,i,r,s,o)}return t}var l=fe.Empty;return n.foreach((function(t,n){var i=e.child(t);a.isCompleteForPath(i)&&(l=l.set(t,a.getNode().getChild(i)))})),this.applyServerMerge_(t,e,l,i,r,s,o)},t.prototype.listenComplete_=function(t,e,n,i){var r=t.getServerCache(),o=t.updateServerSnap(r.getNode(),r.isFullyInitialized()||e.isEmpty(),r.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Pe,i)},t.prototype.revertUserWrite_=function(t,e,n,i,r){var s;if(null!=n.shadowingWrite(e))return t;var a=new Ce(n,t,i),u=t.getEventCache().getNode(),l=void 0;if(e.isEmpty()||".priority"===e.getFront()){var h=void 0;if(t.getServerCache().isFullyInitialized())h=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var c=t.getServerCache().getNode();Object(o.f)(c instanceof Ht,"serverChildren would be complete if leaf node"),h=n.calcCompleteEventChildren(c)}l=this.filter_.updateFullNode(u,h=h,r)}else{var p=e.getFront(),d=n.calcCompleteChild(p,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(p)&&(d=u.getImmediateChild(p)),(l=null!=d?this.filter_.updateChild(u,p,d,e.popFront(),a,r):t.getEventCache().getNode().hasChild(p)?this.filter_.updateChild(u,p,Ht.EMPTY_NODE,e.popFront(),a,r):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(l=this.filter_.updateFullNode(l,s,r))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(X.Empty),t.updateEventSnap(l,s,this.filter_.filtersNodes())},t}(),Se=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var i=this,r=[],o=[];return t.forEach((function(t){t.type===_e.CHILD_CHANGED&&i.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(r,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(r,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(r,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(r,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(r,_e.VALUE,t,n,e),r},t.prototype.generateEventsForType_=function(t,e,n,i,r){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,r);i.forEach((function(i){i.respondsTo(e.type)&&t.push(i.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.g)("Should only compare child_ events.");var n=new Pt(t.childName,t.snapshotNode),i=new Pt(e.childName,e.snapshotNode);return this.index_.compare(n,i)},t}(),Te=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),i=new we(n.getIndex()),r=n.getNodeFilter();this.processor_=new Oe(r);var o=e.getServerCache(),s=e.getEventCache(),a=i.updateFullNode(Ht.EMPTY_NODE,o.getNode(),null),u=r.updateFullNode(Ht.EMPTY_NODE,s.getNode(),null),l=new ve(a,o.isFullyInitialized(),i.filtersNodes()),h=new ve(u,s.isFullyInitialized(),r.filtersNodes());this.viewCache_=new be(h,l),this.eventGenerator_=new Se(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.f)(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach((function(t){var r=t.createCancelEvent(e=e,i);r&&n.push(r)}))}if(t){for(var r=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){r=r.concat(this.eventRegistrations_.slice(s+1));break}}else r.push(a)}this.eventRegistrations_=r}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===ce.MERGE&&null!==t.source.queryId&&(Object(o.f)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.f)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,r=this.processor_.applyOperation(i,t,e,n);return this.processor_.assertIndexed(r.viewCache),Object(o.f)(r.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=r.viewCache,this.generateEventsForChanges_(r.changes,r.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(kt,(function(t,e){n.push(_e.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Ee=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(le,"Reference.ts has not been loaded"),le},set:function(t){Object(o.f)(!le,"__referenceConstructor has already been defined"),le=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var i,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.f)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var l=[];try{for(var h=Object(r.h)(this.views.values()),c=h.next();!c.done;c=h.next())l=l.concat((u=c.value).applyOperation(t,e,n))}catch(p){i={error:p}}finally{try{c&&!c.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l},t.prototype.addEventRegistration=function(t,e,n,i,r){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(r?i:null),u=!1;a?u=!0:i instanceof Ht?(a=n.calcCompleteEventChildren(i),u=!1):(a=Ht.EMPTY_NODE,u=!1);var l=new be(new ve(a,u,!1),new ve(i,r,!1));s=new Te(t,l),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,i){var o,s,a=e.queryIdentifier(),u=[],l=[],h=this.hasCompleteView();if("default"===a)try{for(var c=Object(r.h)(this.views.entries()),p=c.next();!p.done;p=c.next()){var d,f=Object(r.e)(p.value,2),g=f[0];l=l.concat((d=f[1]).removeEventRegistration(n,i)),d.isEmpty()&&(this.views.delete(g),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){o={error:y}}finally{try{p&&!p.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(l=l.concat(d.removeEventRegistration(n,i)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return h&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:l}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var i=Object(r.h)(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,i=null;try{for(var o=Object(r.h)(this.views.values()),s=o.next();!s.done;s=o.next())i=i||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(r.h)(this.views.values()),i=n.next();!i.done;i=n.next()){var o=i.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),ke=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new fe(n));var i=this.writeTree_.findRootMostValueAndPath(e);if(null!=i){var r=i.path,o=i.value,s=X.relativePath(r,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(r,o))}var a=new fe(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return j(e,(function(e,i){n=n.addWrite(t.child(e),i)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,fe.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(X.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(kt,(function(e,n){t.push(new Pt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Pt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new fe(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,i){if(null!=n.value)return i.updateChild(e,n.value);var r=null;return n.children.inorderTraversal((function(n,s){".priority"===n?(Object(o.f)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):i=t(e.child(n),s,i)})),i.getChild(e).isEmpty()||null===r||(i=i.updateChild(e.child(".priority"),r)),i}(X.Empty,this.writeTree_,t)},t.Empty=new t(new fe(null)),t}(),Ae=function(){function t(){this.visibleWrites_=ke.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new De(t,this)},t.prototype.addOverwrite=function(t,e,n,i){Object(o.f)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:i}),i&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.f)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Object(o.f)(n>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[n];this.allWrites_.splice(n,1);for(var r=i.visible,s=!1,a=this.allWrites_.length-1;r&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,i.path)?r=!1:i.path.contains(u.path)&&(s=!0)),a--}return!!r&&(s?(this.resetTree_(),!0):(i.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(i.path):j(i.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(i.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,i,r){if(i||r){var o=this.visibleWrites_.childCompoundWrite(e);return!r&&o.isEmpty()?n:r||null!=n||o.hasCompleteWrite(X.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||r)&&(!i||!~i.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Ht.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(X.Empty)?a.apply(n||Ht.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ht.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(t);if(i)return i.isLeafNode()||i.forEachChild(kt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var r=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(kt,(function(t,e){var i=r.childCompoundWrite(new X(t)).apply(e);n=n.updateImmediateChild(t,i)})),r.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,i){Object(o.f)(n||i,"Either existingEventSnap or existingServerSnap must exist");var r=t.child(e);if(this.visibleWrites_.hasCompleteWrite(r))return null;var s=this.visibleWrites_.childCompoundWrite(r);return s.isEmpty()?i.getChild(e):s.apply(i.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var i=t.child(e),r=this.visibleWrites_.getCompleteNode(i);return null!=r?r:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(i).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,i,r,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(X.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),c=r?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),p=c.getNext();p&&l.length<i;)0!==h(p,n)&&l.push(p),p=c.getNext();return l},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,X.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var i=ke.Empty,r=0;r<t.length;++r){var s=t[r];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=X.relativePath(n,a),i=i.addWrite(u,s.snap)):a.contains(n)&&(u=X.relativePath(a,n),i=i.addWrite(X.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.g)("WriteRecord should have .snap or .children");if(n.contains(a))u=X.relativePath(n,a),i=i.addWrites(u,s.children);else if(a.contains(n))if((u=X.relativePath(a,n)).isEmpty())i=i.addWrites(X.Empty,s.children);else{var l=Object(o.G)(s.children,u.getFront());if(l){var h=l.getChild(u.popFront());i=i.addWrite(X.Empty,h)}}}}}return i},t}(),De=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,i,r){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,i,r)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),je=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=fe.Empty,this.pendingWriteTree_=new Ae,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,i){return this.pendingWriteTree_.addOverwrite(t,e,n,i),i?this.applyOperationToSyncPoints_(new ye(pe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var i=fe.fromObject(e);return this.applyOperationToSyncPoints_(new me(pe.User,t,i))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var i=fe.Empty;return null!=n.snap?i=i.set(X.Empty,!0):j(n.children,(function(t,e){i=i.set(new X(t),e)})),this.applyOperationToSyncPoints_(new de(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ye(pe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=fe.fromObject(e);return this.applyOperationToSyncPoints_(new me(pe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ge(pe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,i){var r=this.queryKeyForTag_(i);if(null!=r){var o=t.parseQueryKey_(r),s=o.path,a=o.queryId,u=X.relativePath(s,e),l=new ye(pe.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,i){var r=this.queryKeyForTag_(i);if(r){var o=t.parseQueryKey_(r),s=o.path,a=o.queryId,u=X.relativePath(s,e),l=fe.fromObject(n),h=new me(pe.forServerTaggedQuery(a),u,l);return this.applyTaggedOperation_(s,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var i=this.queryKeyForTag_(n);if(i){var r=t.parseQueryKey_(i),o=r.path,s=r.queryId,a=X.relativePath(o,e),u=new ge(pe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var i=e.path,r=null,s=!1;this.syncPointTree_.foreachOnPath(i,(function(t,e){var n=X.relativePath(t,i);r=r||e.getCompleteServerCache(n),s=s||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(i);u?(s=s||u.hasCompleteView(),r=r||u.getCompleteServerCache(X.Empty)):(u=new Ee,this.syncPointTree_=this.syncPointTree_.set(i,u)),null!=r?a=!0:(a=!1,r=Ht.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild((function(t,e){var n=e.getCompleteServerCache(X.Empty);n&&(r=r.updateImmediateChild(t,n))})));var l=u.viewExistsForQuery(e);if(!l&&!e.getQueryParams().loadsAllData()){var h=t.makeQueryKey_(e);Object(o.f)(!this.queryToTagMap.has(h),"View does not exist, but we have a tag");var c=t.getNextQueryTag_();this.queryToTagMap.set(h,c),this.tagToQueryMap.set(c,h)}var p=this.pendingWriteTree_.childWrites(i),d=u.addEventRegistration(e,n,p,r,a);if(!l&&!s){var f=u.viewForQuery(e);d=d.concat(this.setupListener_(e,f))}return d},t.prototype.removeEventRegistration=function(e,n,i){var r=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,i);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var l=u.removed;a=u.events;var h=-1!==l.findIndex((function(t){return t.getQueryParams().loadsAllData()})),c=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(h&&!c){var p=this.syncPointTree_.subtree(o);if(!p.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(p),f=0;f<d.length;++f){var g=d[f],y=g.getQuery(),m=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),m.hashFn,m.onComplete)}}!c&&l.length>0&&!i&&(h?this.listenProvider_.stopListening(t.queryForListening_(e),null):l.forEach((function(e){var n=r.queryToTagMap.get(t.makeQueryKey_(e));r.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(l)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,(function(e,n){var i=X.relativePath(e,t),r=n.getCompleteServerCache(i);if(r)return r}));return n.calcCompleteEventCache(t,i,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var i=[];return e&&(i=e.getQueryViews()),j(n,(function(t,e){i=i.concat(e)})),i}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var i=e[n];if(!i.getQueryParams().loadsAllData()){var r=t.makeQueryKey_(i),o=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var i=e.path,r=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),r,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(i);if(r)Object(o.f)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var i=[];return e&&(i=i.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),j(n,(function(t,e){i=i.concat(e)})),i})),h=0;h<l.length;++h){var c=l[h];this.listenProvider_.stopListening(t.queryForListening_(c),this.tagForQuery_(c))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),i=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ht.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?e.applyTaggedListenComplete(n.path,i):e.applyListenComplete(n.path);var r=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var i=new Error(t+" at "+e.path.toString()+": "+n);return i.code=t.toUpperCase(),i}(t,n);return e.removeEventRegistration(n,null,r)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new X(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.f)(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,i,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(X.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,i){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,i);var r=e.get(X.Empty);null==n&&null!=r&&(n=r.getCompleteServerCache(X.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var l=n?n.getImmediateChild(s):null,h=i.child(s);o=o.concat(this.applyOperationHelper_(a,u,l,h))}return r&&(o=o.concat(r.applyOperation(t,i,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,i){var r=this,o=e.get(X.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(X.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=i.child(e),l=t.operationForChild(e);l&&(s=s.concat(r.applyOperationDescendantsHelper_(l,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,i,n))),s},t.nextQueryTag_=1,t}(),Re=function(){function t(){this.rootNode_=Ht.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Me=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.m)(this.counters_)},t}(),Ne=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Me),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Fe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(r.a)({},t);return this.last_&&j(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Ve=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Fe(t);var n=1e4+2e4*Math.random();K(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},i=!1;j(e,(function(e,r){r>0&&Object(o.k)(t.statsToReport_,e)&&(n[e]=r,i=!0)})),i&&this.server_.reportStats(n),K(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Le=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],r=i.getPath();null===e||r.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ue(r)),e.add(i)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var i=this.eventLists_[n];i&&(t(i.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Ue=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();m&&_("event: "+e.toString()),Y(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Be=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var i=Object(r.f)(this.listeners_[t]),o=0;o<i.length;o++)i[o].callback.apply(i[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var i=this.getInitialEvent(t);i&&e.apply(n,i)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var i=this.listeners_[t]||[],r=0;r<i.length;r++)if(i[r].callback===e&&(!n||n===i[r].context))return void i.splice(r,1)},t.prototype.validateEventType_=function(t){Object(o.f)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),He=function(t){function e(){var e,n,i=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),i.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==i.visible_&&(i.visible_=t,i.trigger("visible",t))}),!1),i}return Object(r.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Be),We=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.x)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(r.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Be),ze=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=function(e){t[e]&&Y((function(){n.onMessage_(t[e])}))},i=0;i<t.length;++i)e(i);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==i(););},t}(),qe="start",Ge="close",Ye=function(){function t(t,e,n,i,r){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=i,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Ne.getCollection(e),this.urlFn=function(t){return e.connectionURL(J,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ze(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.z)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Ke((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Object(r.e)(t,5),o=i[0],s=i[1],a=i[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===qe)n.id=s,n.password=a;else{if(o!==Ge)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Object(r.e)(t,2),o=i[0],s=i[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf($)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.z)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.i)(e),i=D(n,1840),r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.z)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.J)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Ke=function(){function t(e,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.z)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=f(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",i=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var r=this.pendingSegs.shift();n=n+"&seg"+i+"="+r.seg+"&ts"+i+"="+r.ts+"&d"+i+"="+r.d,i++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var i=function(){n.outstandingRequests.delete(e),n.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(r),i()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.z)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var t=i.readyState;t&&"loaded"!==t&&"complete"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(r){}}),Math.floor(1))},t}(),Xe="";function Qe(t){Xe=t}var $e=null;"undefined"!=typeof MozWebSocket?$e=MozWebSocket:"undefined"!=typeof WebSocket&&($e=WebSocket);var Ze=function(){function t(e,n,i,r,o){this.connId=e,this.applicationId=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Ne.getCollection(n),this.connURL=t.connectionURL_(n,r,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var i={v:"5"};return!Object(o.z)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf($)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),t.connectionURL(Z,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,c.set("previous_websocket_failure",!0);try{if(Object(o.z)()){var i={headers:{"User-Agent":"Firebase/5/"+Xe+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},r=process.env,s=0===this.connURL.indexOf("wss://")?r.HTTPS_PROXY||r.https_proxy:r.HTTP_PROXY||r.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new $e(this.connURL,[],i)}else this.mySock=new $e(this.connURL,[],i={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==$e&&!t.forceDisallow_},t.previouslyFailed=function(){return c.isInMemoryStorage||!0===c.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){c.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.D)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.f)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=D(e,16384);n.length>1&&this.sendString_(String(n.length));for(var i=0;i<n.length;i++)this.sendString_(n[i])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Je=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ye,Ze]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,i,o=Ze&&Ze.isAvailable(),s=o&&!Ze.previouslyFailed();if(e.webSocketOnly&&(o||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ze];else{var a=this.transports_=[];try{for(var u=Object(r.h)(t.ALL_TRANSPORTS),l=u.next();!l.done;l=u.next()){var h=l.value;h&&h.isAvailable()&&a.push(h)}}catch(c){n={error:c}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),tn=function(){function t(t,e,n,i,r,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=i,this.onReady_=r,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Je(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,i)}),Math.floor(0));var r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=K((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(r)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=k("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?x("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):x("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),K((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):K((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(c.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),en=function(){function t(){}return t.prototype.put=function(t,e,n,i){},t.prototype.merge=function(t,e,n,i){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),nn=1e3,rn=function(t){function e(n,i,r,s,a,u,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=i,h.onDataUpdate_=r,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=w("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingPutCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=nn,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(o.z)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),He.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&We.getInstance().on("online",h.onOnline_,h),h}return Object(r.c)(e,t),e.prototype.sendRequest=function(t,e,n){var i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_(Object(o.J)(r)),Object(o.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)},e.prototype.listen=function(t,e,n,i){var r=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.f)(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");var a={onComplete:i,hashFn:e,query:t,tag:n};this.listens.get(s).set(r,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,i=t.query,r=i.path.toString(),o=i.queryIdentifier();this.log_("Listen on "+r+" for "+o);var s={p:r};t.tag&&(s.q=i.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,i),(n.listens.get(r)&&n.listens.get(r).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(r,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.k)(t,"w")){var n=Object(o.G)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',r=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+i+" at "+r+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.C)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(n,i,(function(n){var i=n.s,r=n.d||"error";t.authToken_===e&&("ok"===i?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(i,r))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),i=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+i),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);var r={p:t};i&&(r.q=n,r.t=i),this.sendRequest("n",r)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,i){var r={p:e,d:n};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,(function(t){i&&setTimeout((function(){i(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,i){this.putInternal("p",t,e,n,i)},e.prototype.merge=function(t,e,n,i){this.putInternal("m",t,e,n,i)},e.prototype.putInternal=function(t,e,n,i,r){var o={p:e,d:n};void 0!==r&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:i}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,(function(i){e.log_(n+" response",i),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),r&&r(i.s,i.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.J)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):x("Unrecognized action received from server: "+Object(o.J)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,l=!1,h=null,c=function(){h?h.close():(l=!0,r())};this.realtime_={close:c,sendRequest:function(t){Object(o.f)(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(t)}};var p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(p).then((function(t){l?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,h=new tn(s,a.repoInfo_,a.applicationId_,n,i,r,(function(t){C(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),l||(t.repoInfo_.nodeAdmin&&C(e),c())}))}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.u)(this.interruptReasons_)&&(this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return A(t)})).join("$"):"default";var i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,i=new X(t).toString();if(this.listens.has(i)){var r=this.listens.get(i);n=r.get(e),r.delete(e),0===r.size&&this.listens.delete(i)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,i;this.tryAuth();try{for(var o=Object(r.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(r.h)(a.values())),l=u.next();!l.done;l=u.next())this.sendListen_(l.value)}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.z)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Xe.replace(/\./g,"-")]=1,Object(o.x)()?t["framework.cordova"]=1:Object(o.A)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=We.getInstance().currentlyOnline();return Object(o.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(en),on=function(t){function e(e,n,i){var r=t.call(this)||this;return r.repoInfo_=e,r.onDataUpdate_=n,r.authTokenProvider_=i,r.log_=w("p:rest:"),r.listens_={},r}return Object(r.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.f)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,i,r){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,i),l={};this.listens_[u]=l;var h=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",h,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,i),Object(o.G)(s.listens_,u)===l&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var i=e.getListenId_(t,n);delete this.listens_[i]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var i=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(r){var s=r&&r.accessToken;s&&(e.auth=s);var a=(i.repoInfo_.secure?"https://":"http://")+i.repoInfo_.host+t+"?ns="+i.repoInfo_.namespace+Object(o.F)(e);i.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){i.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.D)(u.responseText)}catch(e){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(en),sn="repo_interrupt",an=function(){function t(t,e,n,i){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Le,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new he,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Ne.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new on(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.J)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new rn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=Ne.getOrCreateReporter(this.repoInfo_,(function(){return new Ve(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new Re,this.infoSyncTree_=new je({startListening:function(e,n,i,r){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new je({startListening:function(e,n,i,r){return t.server_.listen(e,i,n,(function(n,i){var o=r(n,i);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,i){this.dataUpdateCount++;var r=new X(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(i)if(n){var a=Object(o.E)(e,(function(t){return zt(t)}));s=this.serverSyncTree_.applyTaggedQueryMerge(r,a,i)}else{var u=zt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(r,u,i)}else if(n){var l=Object(o.E)(e,(function(t){return zt(t)}));s=this.serverSyncTree_.applyServerMerge(r,l)}else{var h=zt(e);s=this.serverSyncTree_.applyServerOverwrite(r,h)}var c=r;s.length>0&&(c=this.rerunTransactions_(r)),this.eventQueue_.raiseEventsForChangedPath(c,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;j(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new X("/.info/"+t),i=zt(e);this.infoData_.updateSnapshot(n,i);var r=this.infoSyncTree_.applyServerOverwrite(n,i);this.eventQueue_.raiseEventsForChangedPath(n,r)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,i){var r=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=zt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=se(s,a,o),l=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(t,u,l,!0);this.eventQueue_.queueEvents(h),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||C("set at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(l,!o);r.eventQueue_.raiseEventsForChangedPath(t,s),r.callOnCompleteCallback(i,e,n)}));var c=this.abortTransactions_(t);this.rerunTransactions_(c),this.eventQueue_.raiseEventsForChangedPath(c,[])},t.prototype.update=function(t,e,n){var i=this;this.log_("update",{path:t.toString(),value:e});var r=!0,o=this.generateServerValues(),s={};if(j(e,(function(e,n){r=!1,s[e]=oe(t.child(e),zt(n),i.serverSyncTree_,o)})),r)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,r){var o="ok"===e;o||C("update at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?i.rerunTransactions_(t):t;i.eventQueue_.raiseEventsForChangedPath(u,s),i.callOnCompleteCallback(n,e,r)})),j(e,(function(e){var n=i.abortTransactions_(t.child(e));i.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new he;this.onDisconnect_.forEachTree(X.Empty,(function(i,r){var o=oe(i,r,t.serverSyncTree_,e);n.remember(i,o)}));var i=[];n.forEachTree(X.Empty,(function(e,n){i=i.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var r=t.abortTransactions_(e);t.rerunTransactions_(r)})),this.onDisconnect_=new he,this.eventQueue_.raiseEventsForChangedPath(X.Empty,i)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(i,r){"ok"===i&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,i,r)}))},t.prototype.onDisconnectSet=function(t,e,n){var i=this,r=zt(e);this.server_.onDisconnectPut(t.toString(),r.val(!0),(function(e,o){"ok"===e&&i.onDisconnect_.remember(t,r),i.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,i){var r=this,o=zt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&r.onDisconnect_.remember(t,o),r.callOnCompleteCallback(i,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var i=this;if(Object(o.u)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(r,o){"ok"===r&&j(e,(function(e,n){var r=zt(n);i.onDisconnect_.remember(t.child(e),r)})),i.callOnCompleteCallback(n,r,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(sn)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(sn)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Fe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);j(e,(function(t,e){for(var i=t,r=t.length;r<n+2;r++)i+=" ";console.log(i+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(r.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Y((function(){if("ok"===e)t(null);else{var i=(e||"error").toUpperCase(),r=i;n&&(r+=": "+n);var o=new Error(r);o.code=i,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new bn(this))},enumerable:!1,configurable:!0}),t}(),un=function(){function t(e){this.indexedFilter_=new we(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,i,r,o){return this.matches(new Pt(e,n))||(n=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,r,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ht.EMPTY_NODE);var i=e.withIndex(this.index_);i=i.updatePriority(Ht.EMPTY_NODE);var r=this;return e.forEachChild(kt,(function(t,e){r.matches(new Pt(t,e))||(i=i.updateImmediateChild(t,Ht.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ln=function(){function t(t){this.rangedFilter_=new un(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,i,r,o){return this.rangedFilter_.matches(new Pt(e,n))||(n=Ht.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,r,o):this.fullLimitUpdateChild_(t,e,n,r,o)},t.prototype.updateFullNode=function(t,e,n){var i;if(e.isLeafNode()||e.isEmpty())i=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){i=Ht.EMPTY_NODE.withIndex(this.index_);var r=void 0;r=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;r.hasNext()&&o<this.limit_;){var s=r.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;i=i.updateImmediateChild(s.name,s.node),o++}}else{i=(i=e.withIndex(this.index_)).updatePriority(Ht.EMPTY_NODE);var a=void 0,u=void 0,l=void 0;if(r=void 0,this.reverse_){r=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(t,e){return h(e,t)}}else r=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;for(var c=!1;r.hasNext();)s=r.getNext(),!c&&l(a,s)<=0&&(c=!0),c&&o<this.limit_&&l(s,u)<=0?o++:i=i.updateImmediateChild(s.name,Ht.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,i,r){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.f)(u.numChildren()===this.limit_,"");var l=new Pt(e,n),h=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(u.hasChild(e)){for(var p=u.getImmediateChild(e),d=i.getChildAfterChild(this.index_,h,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);var f=null==d?1:s(d,l);if(c&&!n.isEmpty()&&f>=0)return null!=r&&r.trackChildChange(_e.childChangedChange(e,n,p)),u.updateImmediateChild(e,n);null!=r&&r.trackChildChange(_e.childRemovedChange(e,p));var g=u.updateImmediateChild(e,Ht.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=r&&r.trackChildChange(_e.childAddedChange(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:c&&s(h,l)>=0?(null!=r&&(r.trackChildChange(_e.childRemovedChange(h.name,h.node)),r.trackChildChange(_e.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(h.name,Ht.EMPTY_NODE)):t},t}(),hn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:O},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:S},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var i=this.viewFrom_;""===i&&(i=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=i}return this.index_!==kt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===kt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new we(this.getIndex()):this.hasLimit()?new ln(this):new un(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,i={};return this.isDefault()||(this.index_===kt?e=n.PRIORITY_INDEX:this.index_===Gt?e=n.VALUE_INDEX:this.index_===Ot?e=n.KEY_INDEX:(Object(o.f)(this.index_ instanceof Yt,"Unrecognized index type!"),e=this.index_.toString()),i[n.ORDER_BY]=Object(o.J)(e),this.startSet_&&(i[n.START_AT]=Object(o.J)(this.indexStartValue_),this.startNameSet_&&(i[n.START_AT]+=","+Object(o.J)(this.indexStartName_))),this.endSet_&&(i[n.END_AT]=Object(o.J)(this.indexEndValue_),this.endNameSet_&&(i[n.END_AT]+=","+Object(o.J)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?i[n.LIMIT_TO_FIRST]=this.limit_:i[n.LIMIT_TO_LAST]=this.limit_)),i},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),cn=function(t){function e(e,n){if(!(e instanceof an))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,hn.DEFAULT,!1)||this}return Object(r.c)(e,t),e.prototype.getKey=function(){return Object(o.K)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.K)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof X||(null===this.path.getFront()?yt("Reference.child",1,t,!1):gt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.K)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.K)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.K)("Reference.set",1,2,arguments.length),mt("Reference.set",this.path),lt("Reference.set",1,t,this.path,!1),Object(o.L)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.K)("Reference.update",1,2,arguments.length),mt("Reference.update",this.path),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ct("Reference.update",1,t,this.path,!1),Object(o.L)("Reference.update",2,e,!0);var r=new o.a;return this.repo.update(this.path,t,r.wrapCallback(e)),r.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.K)("Reference.setWithPriority",2,3,arguments.length),mt("Reference.setWithPriority",this.path),lt("Reference.setWithPriority",1,t,this.path,!1),pt("Reference.setWithPriority",2,e,!1),Object(o.L)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new o.a;return this.repo.setWithPriority(this.path,t,e,i.wrapCallback(n)),i.promise},e.prototype.remove=function(t){return Object(o.K)("Reference.remove",0,1,arguments.length),mt("Reference.remove",this.path),Object(o.L)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.K)("Reference.transaction",1,3,arguments.length),mt("Reference.transaction",this.path),Object(o.L)("Reference.transaction",1,t,!1),Object(o.L)("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var i=new o.a;"function"==typeof e&&i.promise.catch((function(){}));var r=function(t,n,r){t?i.reject(t):i.resolve(new wt(n,r)),"function"==typeof e&&e(t,n,r)};return this.repo.startTransaction(this.path,t,r,n),i.promise},e.prototype.setPriority=function(t,e){Object(o.K)("Reference.setPriority",1,2,arguments.length),mt("Reference.setPriority",this.path),pt("Reference.setPriority",1,t,!1),Object(o.L)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.K)("Reference.push",0,2,arguments.length),mt("Reference.push",this.path),lt("Reference.push",1,t,this.path,!0),Object(o.L)("Reference.push",2,e,!0);var n,i=this.repo.serverTime(),r=xt(i),s=this.child(r),a=this.child(r);return n=null!=t?s.set(t,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),s},e.prototype.onDisconnect=function(){return mt("Reference.onDisconnect",this.path),new _t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Jt);Jt.__referenceConstructor=cn,Ee.__referenceConstructor=cn;var pn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),dn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new pn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof X?e:new X(e),i=this,r=n.getFront();null!==r;)i=new t(r,i,Object(o.G)(i.node_.children,r)||new pn),r=(n=n.popFront()).getFront();return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.f)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;j(this.node_.children,(function(i,r){e(new t(i,n,r))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new X(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),i=Object(o.k)(this.node_.children,t);n&&i?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||i||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),fn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});an.MAX_TRANSACTION_RETRIES_=25,an.prototype.transactionsInit_=function(){this.transactionQueueTree_=new dn},an.prototype.startTransaction=function(t,e,n,i){this.log_("transaction on "+t);var r=function(){},s=new cn(this,t);s.on("value",r);var a={path:t,update:e,onComplete:n,status:null,order:f(),applyLocally:i,retryCount:0,unwatcher:function(){s.off("value",r)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var l=a.update(u.val());if(void 0===l){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var h=new Kt(a.currentInputSnapshot,new cn(this,a.path),kt);a.onComplete(null,!1,h)}}else{ht("transaction failed: Data returned ",l,a.path),a.status=fn.RUN;var c=this.transactionQueueTree_.subTree(t),p=c.getValue()||[];p.push(a),c.setValue(p);var d=void 0;"object"==typeof l&&null!==l&&Object(o.k)(l,".priority")?(d=Object(o.G)(l,".priority"),Object(o.f)(ut(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Ht.EMPTY_NODE).getPriority().val(),d=d;var g=this.generateServerValues(),y=zt(l,d),m=se(y,u,g);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,m,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},an.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ht.EMPTY_NODE},an.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.f)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===fn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},an.prototype.sendTransactionQueue_=function(t,e){for(var n=this,i=e.map((function(t){return t.currentWriteId})),r=this.getLatestState_(t,i),s=r,a=r.hash(),u=0;u<e.length;u++){var l=e[u];Object(o.f)(l.status===fn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=fn.SENT,l.retryCount++;var h=X.relativePath(t,l.path);s=s.updateChild(h,l.currentOutputSnapshotRaw)}var c=s.val(!0),p=t;this.server_.put(p.toString(),c,(function(i){n.log_("transaction put response",{path:p.toString(),status:i});var r=[];if("ok"===i){for(var o=[],s=0;s<e.length;s++){if(e[s].status=fn.COMPLETED,r=r.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new cn(n,e[s].path),l=new Kt(a,u,kt);o.push(e[s].onComplete.bind(null,null,!0,l))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,r),s=0;s<o.length;s++)Y(o[s])}else{if("datastale"===i)for(s=0;s<e.length;s++)e[s].status=e[s].status===fn.SENT_NEEDS_ABORT?fn.NEEDS_ABORT:fn.RUN;else for(C("transaction at "+p.toString()+" failed: "+i),s=0;s<e.length;s++)e[s].status=fn.NEEDS_ABORT,e[s].abortReason=i;n.rerunTransactions_(t)}}),a)},an.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),i=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(i,n),n},an.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],i=[],r=t.filter((function(t){return t.status===fn.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=X.relativePath(e,a.path),l=!1,h=void 0;if(Object(o.f)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===fn.NEEDS_ABORT)l=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===fn.RUN)if(a.retryCount>=an.MAX_TRANSACTION_RETRIES_)l=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var c=this.getLatestState_(a.path,r);a.currentInputSnapshot=c;var p=t[s].update(c.val());if(void 0!==p){ht("transaction failed: Data returned ",p,a.path);var d=zt(p);"object"==typeof p&&null!=p&&Object(o.k)(p,".priority")||(d=d.updatePriority(c.getPriority()));var f=a.currentWriteId,g=this.generateServerValues(),y=se(d,c,g);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),r.splice(r.indexOf(f),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(f,!0))}else l=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],l&&(t[s].status=fn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===h){var m=new cn(this,t[s].path),v=new Kt(t[s].currentInputSnapshot,m,kt);n.push(t[s].onComplete.bind(null,null,!1,v))}else n.push(t[s].onComplete.bind(null,new Error(h),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)Y(n[s]);this.sendReadyTransactions_()}},an.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},an.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},an.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,i=t.getValue();if(null!==i)for(var r=0;r<i.length;r++)e.push(i[r]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},an.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var i=0,r=0;r<n.length;r++)n[r].status!==fn.COMPLETED&&(n[i]=n[r],i++);n.length=i,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},an.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),i=this.transactionQueueTree_.subTree(t);return i.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(i),i.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},an.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],i=[],r=-1,s=0;s<e.length;s++)e[s].status===fn.SENT_NEEDS_ABORT||(e[s].status===fn.SENT?(Object(o.f)(r===s-1,"All SENT items should be at beginning of queue."),r=s,e[s].status=fn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.f)(e[s].status===fn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===r?t.setValue(null):e.length=r+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),i),s=0;s<n.length;s++)Y(n[s])}};var gn,yn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';C(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),mn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),vn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return gn||(gn=new t),gn},t.prototype.interrupt=function(){var t,e,n,i;try{for(var o=Object(r.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(r.h)(Object.keys(this.repos_[a]))),l=u.next();!l.done;l=u.next())this.repos_[a][l.value].interrupt()}catch(h){n={error:h}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,i;try{for(var o=Object(r.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(r.h)(Object.keys(this.repos_[a]))),l=u.next();!l.done;l=u.next())this.repos_[a][l.value].resume()}catch(h){n={error:h}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new tt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new mn)},t.prototype.databaseFromApp=function(t,e,n,i){var r=n||t.options.databaseURL;void 0===r&&(t.options.projectId||P("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),r=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=et(r,i),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=et(r="http://"+u+"?ns="+a.namespace,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new mn:new yn(t,e);return vt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||P("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,l).database},t.prototype.deleteRepo=function(t){var e=Object(o.G)(this.repos_,t.app.name);e&&Object(o.G)(e,t.key)===t||P("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var i=Object(o.G)(this.repos_,e.name);i||(this.repos_[e.name]=i={});var r=Object(o.G)(i,t.toURLString());return r&&P("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new an(t,this.useRestClient_,e,n),i[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),bn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(t){return this.checkDeleted_("delete"),vn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof an||P("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new cn(this.repo_,X.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?P("Cannot call useEmulator() after instance has already been initialized."):vn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.K)("database.ref",0,1,arguments.length),t instanceof cn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.K)(e,1,1,arguments.length);var n=et(t,this.repo_.repoInfo_.nodeAdmin);vt(e,1,n);var i=n.repoInfo;return i.isCustomHost()||i.host===this.repo_.repoInfo_.host||P(e+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&P("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.K)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.K)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),_n=Object.freeze({__proto__:null,forceLongPolling:function(){Ze.forceDisallow(),Ye.forceAllow()},forceWebSockets:function(){Ye.forceDisallow()},isWebSocketsAvailable:function(){return Ze.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,r=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Qe(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",(function(){return i}),"PRIVATE")),{instance:vn.getInstance().databaseFromApp(e,u,n,s),namespace:r}}}),wn=rn;rn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},rn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var xn=Object.freeze({__proto__:null,DataConnection:wn,RealTimeConnection:tn,hijackHash:function(t){var e=rn.prototype.put;return rn.prototype.put=function(n,i,r,o){void 0!==o&&(o=t()),e.call(this,n,i,r,o)},function(){rn.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){vn.getInstance().forceRestClient(t)}}),Pn=bn.ServerValue;!function(e){Qe(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return vn.getInstance().databaseFromApp(n,i,e)}),"PUBLIC").setServiceProps({Reference:cn,Query:Jt,Database:bn,DataSnapshot:Kt,enableLogging:b,INTERNAL:_n,ServerValue:Pn,TEST_ACCESS:xn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.7.1"),Object(o.z)()&&(t.exports=n)}(i.a)}).call(this,n("3UD+")(t))},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function i(t,e,i){var r,o=new Promise((function(o,s){n(r=t[e].apply(t,i)).then(o,s)}));return o.request=r,o}function r(t,e,n){var r=i(t,e,n);return r.then((function(t){if(t)return new h(t,r.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return this[e][i].apply(this[e],arguments)})}))}function u(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function l(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function c(t){this._store=t}function p(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new p(n)}function f(t){this._db=t}o(l,"_index",["name","keyPath","multiEntry","unique"]),s(l,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(l,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),s(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,i=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,i),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),c.prototype.createIndex=function(){return new l(this._store.createIndex.apply(this._store,arguments))},c.prototype.index=function(){return new l(this._store.index.apply(this._store,arguments))},o(c,"_store",["name","keyPath","indexNames","autoIncrement"]),s(c,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(c,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(c,"_store",IDBObjectStore,["deleteIndex"]),p.prototype.objectStore=function(){return new c(this._tx.objectStore.apply(this._tx,arguments))},o(p,"_tx",["objectStoreNames","mode"]),a(p,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new c(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new p(this._db.transaction.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[c,l].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),i=n[n.length-1],r=this._store||this._index,o=r[t].apply(r,n.slice(0,-1));o.onsuccess=function(){i(o.result)}})}))})),[l,c].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,i=[];return new Promise((function(r){n.iterateCursor(t,(function(t){t?(i.push(t.value),void 0===e||i.length!=e?t.continue():r(i)):r(i)}))}))})})),t.openDb=function(t,e,n){var r=i(indexedDB,"open",[t,e]),o=r.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),r.then((function(t){return new f(t)}))},t.deleteDb=function(t){return i(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},"q/0M":function(t,e,n){"use strict";function i(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}var r;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return d}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,l=((r={})[s.DEBUG]="log",r[s.VERBOSE]="log",r[s.INFO]="info",r[s.WARN]="warn",r[s.ERROR]="error",r),h=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=l[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,i(["["+o+"]  "+t.name+":"],n))}},c=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.DEBUG],t)),this._logHandler.apply(this,i([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.VERBOSE],t)),this._logHandler.apply(this,i([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.INFO],t)),this._logHandler.apply(this,i([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.WARN],t)),this._logHandler.apply(this,i([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.ERROR],t)),this._logHandler.apply(this,i([this,s.ERROR],t))},t}();function p(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var i=null;e&&e.level&&(i=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var a=r.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=i?i:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:r,type:e.name})}},i=0,r=o;i<r.length;i++)n(r[i])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return U})),n.d(e,"e",(function(){return I})),n.d(e,"f",(function(){return r})),n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return a})),n.d(e,"i",(function(){return u})),n.d(e,"j",(function(){return Q})),n.d(e,"k",(function(){return M})),n.d(e,"l",(function(){return B})),n.d(e,"m",(function(){return h})),n.d(e,"n",(function(){return c})),n.d(e,"o",(function(){return q})),n.d(e,"p",(function(){return d})),n.d(e,"q",(function(){return R})),n.d(e,"r",(function(){return y})),n.d(e,"s",(function(){return m})),n.d(e,"t",(function(){return b})),n.d(e,"u",(function(){return F})),n.d(e,"v",(function(){return _})),n.d(e,"w",(function(){return P})),n.d(e,"x",(function(){return f})),n.d(e,"y",(function(){return g})),n.d(e,"z",(function(){return x})),n.d(e,"A",(function(){return v})),n.d(e,"B",(function(){return w})),n.d(e,"C",(function(){return j})),n.d(e,"D",(function(){return k})),n.d(e,"E",(function(){return V})),n.d(e,"F",(function(){return L})),n.d(e,"G",(function(){return N})),n.d(e,"H",(function(){return X})),n.d(e,"I",(function(){return K})),n.d(e,"J",(function(){return A})),n.d(e,"K",(function(){return z})),n.d(e,"L",(function(){return G})),n.d(e,"M",(function(){return Y})),n.d(e,"N",(function(){return C}));var i=n("30Go"),r=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<t.length;r+=3){var o=t[r],s=r+1<t.length,a=s?t[r+1]:0,u=r+2<t.length,l=u?t[r+2]:0,h=(15&a)<<2|l>>6,c=63&l;u||(c=64,s||(h=64)),i.push(n[o>>2],n[(3&o)<<4|a>>4],n[h],n[c])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,i=0;n<t.length;){var r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){var o=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){var s=((7&r)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<t.length;){var o=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0,a=++r<t.length?n[t.charAt(r)]:64,u=++r<t.length?n[t.charAt(r)]:64;if(++r,null==o||null==s||null==a||null==u)throw Error();i.push(o<<2|s>>4),64!==a&&(i.push(s<<4&240|a>>2),64!==u&&i.push(a<<6&192|u))}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},l=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t){return c(void 0,t)}function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=c(t[n],e[n]));return t}var p=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,i))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function x(){return!1}function P(){return"indexedDB"in self&&null!=indexedDB}function C(){return new Promise((function(t,e){try{var n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=window.indexedDB.open(i);r.onsuccess=function(){r.result.close(),n||window.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=function(){n=!1},r.onerror=function(){var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function I(){return!(!navigator||!navigator.cookieEnabled)}var O=function(t){function e(n,i,r){var o=t.call(this,i)||this;return o.code=n,o.customData=r,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(i.c)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=e[0]||{},r=this.service+"/"+t,o=this.errors[t],s=o?T(o,i):"Error",a=this.serviceName+": "+s+" ("+r+").",u=new O(r,a,i);return u},t}();function T(t,e){return t.replace(E,(function(t,n){var i=e[n];return null!=i?String(i):"<"+n+"?>"}))}var E=/\{\$([^}]+)}/g;function k(t){return JSON.parse(t)}function A(t){return JSON.stringify(t)}var D=function(t){var e={},n={},i={},r="";try{var o=t.split(".");e=k(l(o[0])||""),n=k(l(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:i,signature:r}},j=function(t){var e=D(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},R=function(t){var e=D(t).claims;return"object"==typeof e&&!0===e.admin};function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function F(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function V(t,e,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},i=0,r=Object.entries(t);i<r.length;i++){var o=r[i];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var U=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++)n[i]=4294967295&((c=n[i-3]^n[i-8]^n[i-14]^n[i-16])<<1|c>>>31);var r,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(r=l^a&(u^l),o=1518500249):(r=a^u^l,o=1859775393):i<60?(r=a&u|l&(a|u),o=2400959708):(r=a^u^l,o=3395469782);var c=(s<<5|s>>>27)+r+h+o+n[i]&4294967295;h=l,l=u,u=4294967295&(a<<30|a>>>2),a=s,s=c}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=0,r=this.buf_,o=this.inbuf_;i<e;){if(0===o)for(;i<=n;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(r[o]=t.charCodeAt(i),++i,++o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<e;)if(r[o]=t[i],++i,++o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;r>=0;r-=8)t[i]=this.chain_[n]>>r&255,++i;return t},t}();function B(t,e){var n=new H(t,e);return n.subscribe.bind(n)}var H=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var i,r=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,i=["next","error","complete"];n<i.length;n++){var r=i[n];if(r in t&&"function"==typeof t[r])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(i.next=W),void 0===i.error&&(i.error=W),void 0===i.complete&&(i.complete=W);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(t){}})),this.observers.push(i),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function W(){}var z=function(t,e,n,i){var r;if(i<e?r="at least "+e:i>n&&(r=0===n?"none":"no more than "+n),r)throw new Error(t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")};function q(t,e,n){var i="";switch(e){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+i+" argument "}function G(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(q(t,e,i)+"must be a valid function.")}function Y(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(q(t,e,i)+"must be a valid context object.")}var K=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){var s=o-55296;i++,r(i<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},X=function(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};function Q(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var i=e*Math.pow(n,t),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}},t6oF:function(t,e,n){"use strict";var i=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,i){if(i){var r=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in r||(r[s]={}),r=r[s]}(i=i(o=r[t=t[t.length-1]]))!=o&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function i(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;i.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;i.prototype.c=function(t){s(t,0)},i.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(i){this.f(i)}}}this.a=null},i.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new i;return e.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(i){n.reject(i)}},e.prototype.then=function(t,n){function i(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(n){o(n)}}:e}var r,o,s=new e((function(t,e){r=t,o=e}));return this.Pa(i(t,r),i(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(i.b){case 1:t(i.c);break;case 2:e(i.c);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=o(t),s=i.next();!s.done;s=i.next())r(s.value).Pa(e,n)}))},e.all=function(t){var n=o(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Pa(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(){}function c(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){var e=c(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==c(t)}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++m)}var y="closure_uid_"+(1e9*Math.random()>>>0),m=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:b).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var x=Date.now||function(){return+new Date};function P(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function C(t,e,n){this.code=S+t,this.message=e||T[t]||"",this.a=n||null}function I(t){var e=t&&t.code;return e?new C(e.substring(S.length),t.message,t.serverResponse):null}P(C,Error),C.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},C.prototype.toJSON=function(){return this.w()};var O,S="auth/",T={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},E={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function k(t){for(var e in E)if(E[e].id===t)return{firebaseEndpoint:(t=E[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function A(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function j(t,e){for(var n="",i=(t=t.split("%s")).length-1,r=0;r<i;r++)n+=t[r]+(r<e.length?e[r]:"%s");D.call(this,n+t[i])}function R(t,e){throw new j("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function N(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}O=k("__EID__")?"__EID__":void 0,P(D,Error),D.prototype.name="CustomError",P(j,D),j.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new M((function(){return new U}),(function(t){t.reset()}));function L(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function U(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r="string"==typeof t?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)},W=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=[],r=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(i[r++]=a)}return i},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),r="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in r&&(i[o]=e.call(void 0,r[o],o,t));return i},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t))return!0;return!1};function G(t,e){return 0<=B(t,e)}function Y(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function K(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,i=t.length-1;0<=i;--i)i in n&&e.call(void 0,n[i],i,t)}(t,(function(n,i){e.call(void 0,n,i,t)&&Array.prototype.splice.call(t,i,1)}))}function X(t){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}var $,Z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,tt=/</g,et=/>/g,nt=/"/g,it=/'/g,rt=/\x00/g,ot=/[\x00&<>"']/;function st(t,e){return-1!=t.indexOf(e)}function at(t,e){return t<e?-1:t>e?1:0}t:{var ut=a.navigator;if(ut){var lt=ut.userAgent;if(lt){$=lt;break t}}$=""}function ht(t){return st($,t)}function ct(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function dt(t){var e,n={};for(e in t)n[e]=t[e];return n}var ft="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<ft.length;o++)n=ft[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,i=n&&(n.defaultView||n.parentWindow);if((i=i||a).Element&&i.Location){var r=i;break t}}catch(s){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(f(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function mt(t,e){this.a=t===_t&&e||"",this.b=bt}function vt(t){return t instanceof mt&&t.constructor===mt&&t.b===bt?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}mt.prototype.sa=!0,mt.prototype.ra=function(){return this.a},mt.prototype.toString=function(){return"Const{"+this.a+"}"};var bt={},_t={},wt=new mt(_t,"");function xt(t,e){this.a=t===Tt&&e||"",this.b=St}function Pt(t){return t instanceof xt&&t.constructor===xt&&t.b===St?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+c(t)),"type_error:TrustedResourceUrl")}function Ct(t,e){var n=vt(t);if(!Ot.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(It,(function(t,i){if(!Object.prototype.hasOwnProperty.call(e,i))throw Error('Found marker, "'+i+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[i])instanceof mt?vt(t):encodeURIComponent(String(t))})),new xt(Tt,t)}xt.prototype.sa=!0,xt.prototype.ra=function(){return this.a.toString()},xt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Ot=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={},Tt={};function Et(t,e){this.a=t===Rt&&e||"",this.b=jt}function kt(t){return t instanceof Et&&t.constructor===Et&&t.b===jt?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+c(t)),"type_error:SafeUrl")}Et.prototype.sa=!0,Et.prototype.ra=function(){return this.a.toString()},Et.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var At=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Dt(t){return t instanceof Et?t:(t="object"==typeof t&&t.sa?t.ra():String(t),At.test(t)||(t="about:invalid#zClosurez"),new Et(Rt,t))}var jt={},Rt={};function Mt(){this.a="",this.b=Ft}function Nt(t){return t instanceof Mt&&t.constructor===Mt&&t.b===Ft?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+c(t)),"type_error:SafeHtml")}Mt.prototype.sa=!0,Mt.prototype.ra=function(){return this.a.toString()},Mt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ft={};function Vt(t){var e=new Mt;return e.a=t,e}Vt("<!DOCTYPE html>");var Lt=Vt("");function Ut(t,e){for(var n=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}function Bt(t){return ot.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(tt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(et,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(nt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function Ht(t){return Ht[" "](t),t}Vt("<br>"),Ht[" "]=h;var Wt,zt,qt=ht("Opera"),Gt=ht("Trident")||ht("MSIE"),Yt=ht("Edge"),Kt=Yt||Gt,Xt=ht("Gecko")&&!(st($.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Qt=st($.toLowerCase(),"webkit")&&!ht("Edge");function $t(){var t=a.document;return t?t.documentMode:void 0}t:{var Zt="",Jt=(zt=$,Xt?/rv:([^\);]+)(\)|;)/.exec(zt):Yt?/Edge\/([\d\.]+)/.exec(zt):Gt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(zt):Qt?/WebKit\/(\S+)/.exec(zt):qt?/(?:Version)[ \/]?(\S+)/.exec(zt):void 0);if(Jt&&(Zt=Jt?Jt[1]:""),Gt){var te=$t();if(null!=te&&te>parseFloat(Zt)){Wt=String(te);break t}}Wt=Zt}var ee,ne={};function ie(t){return function(t,e){var n=ne;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Z(String(Wt)).split("."),i=Z(String(t)).split("."),r=Math.max(n.length,i.length),o=0;0==e&&o<r;o++){var s=n[o]||"",a=i[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=at(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||at(0==s[2].length,0==a[2].length)||at(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}ee=a.document&&Gt?$t():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(zt){}var re=!Gt||9<=Number(ee);function oe(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function se(t,e){ct(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:le.hasOwnProperty(n)?t.setAttribute(le[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ae,ue,le={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function he(t,e,n){function i(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var r=2;r<n.length;r++){var o=n[r];!p(o)||f(o)&&0<o.nodeType?i(o):H(pe(o)?Q(o):o,i)}}function ce(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){if(t&&"number"==typeof t.length){if(f(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function de(t){a.setTimeout((function(){throw t}),0)}function fe(t,e){ue||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);ue=function(){t.then(me)}}else ue=function(){var t=me;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!ht("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(ae||(ae=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=ce(document,"IFRAME");t.style.display="none",function(t){var e=new xt(Tt,vt(wt));yt(t,"HTMLIFrameElement"),t.src=Pt(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Nt(Lt)),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){i.next={Fb:t},i=i.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),ae(t)):a.setImmediate(t)}}(),ge||(ue(),ge=!0),ye.add(t,e)}var ge=!1,ye=new F;function me(){for(var t;t=L();){try{t.a.call(t.b)}catch(e){de(e)}N(V,t)}ge=!1}function ve(t,e){if(this.a=be,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Ae(n,_e,t)}),(function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Ae(n,we,t)}))}catch(i){Ae(this,we,i)}}var be=0,_e=2,we=3;function xe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}xe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Pe=new M((function(){return new xe}),(function(t){t.reset()}));function Ce(t,e,n){var i=Pe.get();return i.g=t,i.b=e,i.f=n,i}function Ie(t){if(t instanceof ve)return t;var e=new ve(h);return Ae(e,_e,t),e}function Oe(t){return new ve((function(e,n){n(t)}))}function Se(t,e,n){De(t,e,n,null)||fe(w(e,t))}function Te(t){return new ve((function(e){var n=t.length,i=[];if(n)for(var r=function(t,r,o){n--,i[t]=r?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(i)},o=0;o<t.length;o++)Se(t[o],w(r,o,!0),w(r,o,!1));else e(i)}))}function Ee(t,e){t.b||t.a!=_e&&t.a!=we||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function ke(t,e,n,i){var r=Ce(null,null,null);return r.a=new ve((function(t,o){r.g=e?function(n){try{var r=e.call(i,n);t(r)}catch(s){o(s)}}:t,r.b=n?function(e){try{var r=n.call(i,e);void 0===r&&e instanceof Ve?o(e):t(r)}catch(s){o(s)}}:o})),r.a.c=t,Ee(t,r),r.a}function Ae(t,e,n){t.a==be&&(t===n&&(e=we,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,je(t),e!=we||n instanceof Ve||function(t,e){t.g=!0,fe((function(){t.g&&Fe.call(null,e)}))}(t,n)))}function De(t,e,n,i){if(t instanceof ve)return Ee(t,Ce(e||h,n||null,i)),!0;if(A(t))return t.then(e,n,i),!0;if(f(t))try{var r=t.then;if(d(r))return function(t,e,n,i,r){function o(t){s||(s=!0,i.call(r,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(r,t))}),o)}catch(a){o(a)}}(t,r,e,n,i),!0}catch(o){return n.call(i,o),!0}return!1}function je(t){t.h||(t.h=!0,fe(t.fc,t))}function Re(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Me(t,e,n,i){if(n==we&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ne(e,n,i);else try{e.c?e.g.call(e.f):Ne(e,n,i)}catch(r){Fe.call(null,r)}N(Pe,e)}function Ne(t,e,n){e==_e?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ve.prototype.then=function(t,e,n){return ke(this,d(t)?t:null,d(e)?e:null,n)},ve.prototype.$goog_Thenable=!0,(t=ve.prototype).na=function(t,e){return(t=Ce(t,t,e)).c=!0,Ee(this,t),this},t.s=function(t,e){return ke(this,null,t,e)},t.cancel=function(t){if(this.a==be){var e=new Ve(t);fe((function(){!function t(e,n){if(e.a==be)if(e.c){var i=e.c;if(i.b){for(var r=0,o=null,s=null,a=i.b;a&&(a.c||(r++,a.a==e&&(o=a),!(o&&1<r)));a=a.next)o||(s=a);o&&(i.a==be&&1==r?t(i,n):(s?((r=s).next==i.f&&(i.f=r),r.next=r.next.next):Re(i),Me(i,o,we,n)))}e.c=null}else Ae(e,we,n)}(this,e)}),this)}},t.Zc=function(t){this.a=be,Ae(this,_e,t)},t.$c=function(t){this.a=be,Ae(this,we,t)},t.fc=function(){for(var t;t=Re(this);)Me(this,t,this.a,this.i);this.h=!1};var Fe=de;function Ve(t){D.call(this,t)}function Le(){0!=Ue&&(Be[g(this)]=this),this.xa=this.xa,this.oa=this.oa}P(Ve,D),Ve.prototype.name="cancel";var Ue=0,Be={};function He(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Ue)){var e=g(t);if(0!=Ue&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Be[e]}}Le.prototype.xa=!1,Le.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var We=Object.freeze||function(t){return t},ze=!Gt||9<=Number(ee),qe=Gt&&!ie("9"),Ge=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ke(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Ht(e.nodeName);var r=!0;break t}catch(o){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},P(Ke,Ye);var Xe=We({2:"touch",3:"pen",4:"mouse"});Ke.prototype.preventDefault=function(){Ke.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,qe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Ke.prototype.g=function(){return this.a};var Qe="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Ze(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.Ua=r,this.key=++$e,this.va=this.Oa=!1}function Je(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function tn(t){this.src=t,this.a={},this.b=0}function en(t,e){var n=e.type;n in t.a&&Y(t.a[n],e)&&(Je(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function nn(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==i)return r}return-1}tn.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=nn(t,e,i,r);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new Ze(e,this.src,o,!!i,r)).Oa=n,t.push(e)),e};var rn="closure_lm_"+(1e6*Math.random()|0),on={};function sn(t,e,n,i,r){if(i&&i.once)un(t,e,n,i,r);else if(Array.isArray(e))for(var o=0;o<e.length;o++)sn(t,e[o],n,i,r);else n=mn(n),t&&t[Qe]?bn(t,e,n,f(i)?!!i.capture:!!i,r):an(t,e,n,!1,i,r)}function an(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=f(r)?!!r.capture:!!r,a=gn(t);if(a||(t[rn]=a=new tn(t)),!(n=a.add(e,n,i,s,o)).proxy)if(i=function(){var t=fn,e=ze?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Ge||(r=s),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(cn(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}}function un(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,i,r);else n=mn(n),t&&t[Qe]?_n(t,e,n,f(i)?!!i.capture:!!i,r):an(t,e,n,!0,i,r)}function ln(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,i,r);else i=f(i)?!!i.capture:!!i,n=mn(n),t&&t[Qe]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=nn(o=t.a[e],n,i,r))&&(Je(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=nn(e,n,i,r)),(n=-1<t?e[t]:null)&&hn(n))}function hn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Qe])en(e.v,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(cn(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=gn(e))?(en(n,t),0==n.b&&(n.src=null,e[rn]=null)):Je(t)}}}function cn(t){return t in on?on[t]:on[t]="on"+t}function pn(t,e,n,i){var r=!0;if((t=gn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=dn(o,i),r=r&&!1!==o)}return r}function dn(t,e){var n=t.listener,i=t.Ua||t.src;return t.Oa&&hn(t),n.call(i,e)}function fn(t,e){if(t.va)return!0;if(!ze){if(!e)t:{e=["window","event"];for(var n=a,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(e=new Ke(i=e,this),n=!0,!(0>i.keyCode||null!=i.returnValue)){t:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(s){r=!0}(r||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=e.b;r;r=r.parentNode)i.push(r);for(t=t.type,r=i.length-1;0<=r;r--){e.b=i[r];var o=pn(i[r],t,!0,e);n=n&&o}for(r=0;r<i.length;r++)e.b=i[r],o=pn(i[r],t,!1,e),n=n&&o}return n}return dn(t,new Ke(e,this))}function gn(t){return(t=t[rn])instanceof tn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(t){return d(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function vn(){Le.call(this),this.v=new tn(this),this.$b=this,this.fb=null}function bn(t,e,n,i,r){t.v.add(String(e),n,!1,i,r)}function _n(t,e,n,i,r){t.v.add(String(e),n,!0,i,r)}function wn(t,e,n,i){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Ua||s.src;s.Oa&&en(t.v,s),r=!1!==a.call(u,i)&&r}}return r&&!i.defaultPrevented}function xn(t,e,n){if(d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Pn(t){var e=null;return new ve((function(n,i){-1==(e=xn((function(){n(void 0)}),t))&&i(Error("Failed to schedule timer."))})).s((function(t){throw a.clearTimeout(e),t}))}function Cn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function In(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var i in e=[],n=0,t)e[n++]=i;return e}}function On(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof On)for(n=t.Y(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Sn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];Tn(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var r={};for(n=e=0;e<t.a.length;)Tn(r,i=t.a[e])||(t.a[n++]=i,r[i]=1),e++;t.a.length=n}}function Tn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}P(vn,Le),vn.prototype[Qe]=!0,vn.prototype.addEventListener=function(t,e,n,i){sn(this,t,e,n,i)},vn.prototype.removeEventListener=function(t,e,n,i){ln(this,t,e,n,i)},vn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var i=t.type||t;if("string"==typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var r=t;gt(t=new Ye(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];r=wn(s,i,!0,t)&&r}if(r=wn(s=t.b=n,i,!0,t)&&r,r=wn(s,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=wn(s=t.b=e[o],i,!1,t)&&r;return r},vn.prototype.Da=function(){if(vn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)Je(n[i]);delete e.a[t],e.b--}}this.fb=null},(t=On.prototype).V=function(){Sn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Sn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Tn(this.b,t)?this.b[t]:e},t.set=function(t,e){Tn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var En=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof kn?(this.i=void 0!==e?e:t.i,An(this,t.f),this.l=t.l,this.a=t.a,Dn(this,t.g),this.c=t.c,jn(this,Zn(t.b)),this.h=t.h):t&&(n=String(t).match(En))?(this.i=!!e,An(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),Dn(this,n[4]),this.c=Vn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!e,this.b=new Gn(null,this.i))}function An(t,e,n){t.f=n?Vn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof Gn?(t.b=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),$n(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Ln(e,zn)),t.b=new Gn(e,t.i))}function Rn(t,e,n){t.b.set(e,n)}function Mn(t,e){return t.b.get(e)}function Nn(t){return t instanceof kn?new kn(t):new kn(t,void 0)}function Fn(t,e,n,i){var r=new kn(null,void 0);return t&&An(r,t),e&&(r.a=e),n&&Dn(r,n),i&&(r.c=i),r}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ln(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Un),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Un(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}kn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ln(e,Bn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Ln(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ln(n,"/"==n.charAt(0)?Wn:Hn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Ln(n,qn)),t.join("")},kn.prototype.resolve=function(t){var e=new kn(this),n=!!t.f;n?An(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var i=t.c;if(n)Dn(e,t.g);else if(n=!!t.c){if("/"!=i.charAt(0))if(this.a&&!this.c)i="/"+i;else{var r=e.c.lastIndexOf("/");-1!=r&&(i=e.c.substr(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(st(r,"./")||st(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.c=i:n=""!==t.b.toString(),n?jn(e,Zn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Bn=/[#\/\?@]/g,Hn=/[#\?:]/g,Wn=/[#\?]/g,zn=/[#\?@]/g,qn=/#/g;function Gn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new On,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Kn(t){var e=In(t);if(void 0===e)throw Error("Keys are undefined");var n=new Gn(null,void 0);t=Cn(t);for(var i=0;i<e.length;i++){var r=e[i],o=t[i];Array.isArray(o)?$n(n,r,o):n.add(r,o)}return n}function Xn(t,e){Yn(t),e=Jn(t,e),Tn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Tn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Sn(t)))}function Qn(t,e){return Yn(t),e=Jn(t,e),Tn(t.a.b,e)}function $n(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(Jn(t,e),Q(n)),t.b+=n.length)}function Zn(t){var e=new Gn;return e.c=t.c,t.a&&(e.a=new On(t.a),e.b=t.b),e}function Jn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ti(t){var e=[];return function t(e,n,i){if(null==n)i.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var r=n;n=r.length,i.push("[");for(var o="",s=0;s<n;s++)i.push(o),t(e,r[s],i),o=",";return void i.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(r in i.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,r)&&"function"!=typeof(s=n[r])&&(i.push(o),ri(r,i),i.push(":"),t(e,s,i),o=",");return void i.push("}")}n=n.valueOf()}switch(typeof n){case"string":ri(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":i.push(String(n));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new ei,t,e),e.join("")}function ei(){}(t=Gn.prototype).add=function(t,e){Yn(this),this.c=null,t=Jn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Yn(this),this.a.forEach((function(n,i){H(n,(function(n){t.call(e,n,i,this)}),this)}),this)},t.Y=function(){Yn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},t.V=function(t){Yn(this);var e=[];if("string"==typeof t)Qn(this,t)&&(e=X(e,this.a.get(Jn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},t.set=function(t,e){return Yn(this),this.c=null,Qn(this,t=Jn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.V(i);for(var o=0;o<i.length;o++){var s=r;""!==i[o]&&(s+="="+encodeURIComponent(String(i[o]))),t.push(s)}}return this.c=t.join("&")};var ni={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ii=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ri(t,e){e.push('"',t.replace(ii,(function(t){var e=ni[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ni[t]=e),e})),'"')}function oi(){var t=Ci();return Gt&&!!ee&&11==ee||/Edge\/\d+/.test(t)}function si(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function ai(t,e){e=e||a.window;var n="about:blank";t&&(n=kt(Dt(t))),e.location.href=n}function ui(t){return!!((t=(t||Ci()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function li(t){t=t||a.window;try{t.close()}catch(e){}}function hi(t,e,n){var i=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var r=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<r?r:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ci().toLowerCase(),i&&(e.target=i,st(n,"crios/")&&(e.target="_blank")),wi(Ci())==bi&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),i=window,e=n instanceof Et?n:Dt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,r=[],t)switch(s){case"width":case"height":case"top":case"left":r.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(s+"="+(t[s]?1:0))}var s=r.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(yt(s=ce(document,"A"),"HTMLAnchorElement"),e instanceof Et||e instanceof Et||(e="object"==typeof e&&e.sa?e.ra():String(e),At.test(e)||(e="about:invalid#zClosurez"),e=new Et(Rt,e)),s.href=kt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=i.open("",n,s),t=kt(e),s&&(Kt&&st(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Vt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">'),i=s.document)&&(i.write(Nt(t)),i.close())):(s=i.open(kt(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var ci=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pi=/^[^@]+@[^@]+$/;function di(){var t=null;return new ve((function(e){"complete"==a.document.readyState?e():(t=function(){e()},un(window,"load",t))})).s((function(e){throw ln(window,"load",t),e}))}function fi(t){return t=t||Ci(),!("file:"!==Ei()&&"ionic:"!==Ei()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function gi(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function yi(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function mi(){return i.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":i.a.INTERNAL.hasOwnProperty("node")?"Node":yi()?"Worker":"Browser"}function vi(){var t=mi();return"ReactNative"===t||"Node"===t}var bi="Firefox",_i="Chrome";function wi(t){var e=t.toLowerCase();return st(e,"opera/")||st(e,"opr/")||st(e,"opios/")?"Opera":st(e,"iemobile")?"IEMobile":st(e,"msie")||st(e,"trident/")?"IE":st(e,"edge/")?"Edge":st(e,"firefox/")?bi:st(e,"silk/")?"Silk":st(e,"blackberry")?"Blackberry":st(e,"webos")?"Webos":!st(e,"safari/")||st(e,"chrome/")||st(e,"crios/")||st(e,"android")?!st(e,"chrome/")&&!st(e,"crios/")||st(e,"edge/")?st(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":_i:"Safari"}var xi={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Pi(t,e){e=e||[];var n,i=[],r={};for(n in xi)r[xi[n]]=!0;for(n=0;n<e.length;n++)void 0!==r[e[n]]&&(delete r[e[n]],i.push(e[n]));return i.sort(),(e=i).length||(e=["FirebaseCore-web"]),"Browser"===(i=mi())?i=wi(r=Ci()):"Worker"===i&&(i=wi(r=Ci())+"-"+i),i+"/JsCore/"+t+"/"+e.join(",")}function Ci(){return a.navigator&&a.navigator.userAgent||""}function Ii(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Oi(){try{var t=a.localStorage,e=Ri();if(t)return t.setItem(e,"1"),t.removeItem(e),!oi()||!!a.indexedDB}catch(n){return yi()&&!!a.indexedDB}return!1}function Si(){return(Ti()||"chrome-extension:"===Ei()||fi())&&!vi()&&Oi()&&!yi()}function Ti(){return"http:"===Ei()||"https:"===Ei()}function Ei(){return a.location&&a.location.protocol||null}function ki(t){return!ui(t=t||Ci())&&wi(t)!=bi}function Ai(t){return void 0===t?null:ti(t)}function Di(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function ji(t){if(null!==t)return JSON.parse(t)}function Ri(t){return t||Math.floor(1e9*Math.random()).toString()}function Mi(t){return"Safari"!=wi(t=t||Ci())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ni(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Fi(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Ci(),e=mi(),this.b=ui(t)||"ReactNative"===e}function Vi(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Li(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Ui(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Bi(){return!(!Ii("fireauth.oauthhelper",a)&&!Ii("fireauth.iframe",a))}Fi.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Ti()&&"chrome-extension:"!==Ei()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hi,Wi={};function zi(t){Wi[t]||(Wi[t]=!0,Li(t))}try{var qi={};Object.defineProperty(qi,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(qi,"abcd",{configurable:!0,enumerable:!0,value:2}),Hi=2==qi.abcd}catch(zt){Hi=!1}function Gi(t,e,n){Hi?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yi(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Gi(t,n,e[n])}function Ki(t){var e={};return Yi(e,t),e}function Xi(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Gi(e,n,Xi(t[n]));return e}function Qi(t){var e=t&&(t[er]?"phone":null);if(!(e&&t&&t[tr]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");Gi(this,"uid",t[tr]),Gi(this,"displayName",t[Zi]||null);var n=null;t[Ji]&&(n=new Date(t[Ji]).toUTCString()),Gi(this,"enrollmentTime",n),Gi(this,"factorId",e)}function $i(t){try{var e=new nr(t)}catch(n){e=null}return e}Qi.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Zi="displayName",Ji="enrolledAt",tr="mfaEnrollmentId",er="phoneInfo";function nr(t){Qi.call(this,t),Gi(this,"phoneNumber",t[er])}function ir(t){var e={},n=t[ar],i=t[lr],r=t[hr];if(t=$i(t[ur]),!r||r!=or&&r!=sr&&!n||r==sr&&!i||r==rr&&!t)throw Error("Invalid checkActionCode response!");r==sr?(e[pr]=n||null,e[fr]=n||null,e[cr]=i):(e[pr]=i||null,e[fr]=i||null,e[cr]=n||null),e[dr]=t||null,Gi(this,yr,r),Gi(this,gr,Xi(e))}P(nr,Qi),nr.prototype.w=function(){var t=nr.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var rr="REVERT_SECOND_FACTOR_ADDITION",or="EMAIL_SIGNIN",sr="VERIFY_AND_CHANGE_EMAIL",ar="email",ur="mfaInfo",lr="newEmail",hr="requestType",cr="email",pr="fromEmail",dr="multiFactorInfo",fr="previousEmail",gr="data",yr="operation";function mr(t){var e=Mn(t=Nn(t),vr)||null,n=Mn(t,br)||null,i=Mn(t,xr)||null;if(i=i&&Cr[i]||null,!e||!n||!i)throw new C("argument-error",vr+", "+br+"and "+xr+" are required in a valid action code URL.");Yi(this,{apiKey:e,operation:i,code:n,continueUrl:Mn(t,_r)||null,languageCode:Mn(t,wr)||null,tenantId:Mn(t,Pr)||null})}var vr="apiKey",br="oobCode",_r="continueUrl",wr="languageCode",xr="mode",Pr="tenantId",Cr={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:rr,signIn:or,verifyAndChangeEmail:sr,verifyEmail:"VERIFY_EMAIL"};function Ir(t){try{return new mr(t)}catch(e){return null}}function Or(t){var e=t[Ar];if(void 0===e)throw new C("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new C("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Sr];if(n&&"object"==typeof n){e=n[Rr];var i=n[Dr];if(n=n[jr],"string"==typeof e&&e.length){if(this.a=e,void 0!==i&&"boolean"!=typeof i)throw new C("argument-error",Dr+" property must be a boolean when specified.");if(this.g=!!i,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new C("argument-error",jr+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new C("argument-error",Rr+" property must be a non empty string when specified.");if(void 0!==i||void 0!==n)throw new C("missing-android-pkg-name")}}else if(void 0!==n)throw new C("argument-error",Sr+" property must be a non null object when specified.");if(this.f=null,(e=t[kr])&&"object"==typeof e){if("string"==typeof(e=e[Mr])&&e.length)this.f=e;else if(void 0!==e)throw new C("argument-error",Mr+" property must be a non empty string when specified.")}else if(void 0!==e)throw new C("argument-error",kr+" property must be a non null object when specified.");if(void 0!==(e=t[Er])&&"boolean"!=typeof e)throw new C("argument-error",Er+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Tr])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new C("argument-error",Tr+" property must be a non empty string when specified.");this.i=t||null}var Sr="android",Tr="dynamicLinkDomain",Er="handleCodeInApp",kr="iOS",Ar="url",Dr="installApp",jr="minimumVersion",Rr="packageName",Mr="bundleId";function Nr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Fr=null;function Vr(t){var e=Ur(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,x(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Lr(t){try{return new Vr(t)}catch(e){return null}}function Ur(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;i<t.length;){var n=t.charAt(i++),r=Fr[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Fr){Fr={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var i=t.concat(e[n].split("")),r=0;r<i.length;r++){var o=i[r];void 0===Fr[o]&&(Fr[o]=r)}}}();for(var i=0;;){var r=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===r)break;e(r<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(i){}return null}Vr.prototype.S=function(){return this.f},Vr.prototype.i=function(){return this.b},Vr.prototype.toString=function(){return this.g};var Br="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hr=["client_id","response_type","scope","redirect_uri","state"],Wr={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Hr},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Hr},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Hr},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Br},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function zr(t){for(var e in Wr)if(Wr[e].fa==t)return Wr[e];return null}function qr(t){var e={};e["facebook.com"]=Qr,e["google.com"]=Zr,e["github.com"]=$r,e["twitter.com"]=Jr;var n=t&&t[Yr];try{if(n)return e[n]?new e[n](t):new Xr(t);if(void 0!==t[Gr])return new Kr(t)}catch(i){}return null}var Gr="idToken",Yr="providerId";function Kr(t){var e=t[Yr];if(!e&&t[Gr]){var n=Lr(t[Gr]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Gi(this,"providerId",e),Gi(this,"isNewUser",n)}function Xr(t){Kr.call(this,t),Gi(this,"profile",Xi((t=ji(t.rawUserInfo||"{}"))||{}))}function Qr(t){if(Xr.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function $r(t){if(Xr.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Gi(this,"username",this.profile&&this.profile.login||null)}function Zr(t){if(Xr.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Jr(t){if(Xr.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Gi(this,"username",t.screenName||null)}function to(t){var e=Nn(t),n=Mn(e,"link"),i=Mn(Nn(n),"link");return e=Mn(e,"deep_link_id"),Mn(Nn(e),"link")||e||i||n||t}function eo(t,e){if(!t&&!e)throw new C("internal-error","Internal assert: no raw session string available");if(t&&e)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?no:io}P(Xr,Kr),P(Qr,Xr),P($r,Xr),P(Zr,Xr),P(Jr,Xr);var no="enroll",io="signin";function ro(){}function oo(t,e){return t.then((function(t){if(t[qs]){var n=Lr(t[qs]);if(!n||e!=n.h)throw new C("user-mismatch");return t}throw new C("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==S+"user-not-found"?new C("user-mismatch"):t}))}function so(t,e){if(!e)throw new C("internal-error","failed to construct a credential");this.a=e,Gi(this,"providerId",t),Gi(this,"signInMethod",t)}function ao(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function uo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new so(t.providerId,t.pendingToken)}catch(e){}return null}function lo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Gi(this,"idToken",e.idToken),e.accessToken&&Gi(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Gi(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");Gi(this,"accessToken",e.oauthToken),Gi(this,"secret",e.oauthTokenSecret)}Gi(this,"providerId",t),Gi(this,"signInMethod",n)}function ho(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Kn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function co(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new lo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function po(t,e){this.Pc=e||[],Yi(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(zr(t)||{}).Ja||null,this.nb=null}function fo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');po.call(this,t,[])}function go(t){po.call(this,t,Hr),this.a=[]}function yo(){go.call(this,"facebook.com")}function mo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return f(t)&&(e=t.accessToken),(new yo).credential({accessToken:e})}function vo(){go.call(this,"github.com")}function bo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return f(t)&&(e=t.accessToken),(new vo).credential({accessToken:e})}function _o(){go.call(this,"google.com"),this.Ca("profile")}function wo(t,e){var n=t;return f(t)&&(n=t.idToken,e=t.accessToken),(new _o).credential({idToken:n,accessToken:e})}function xo(){po.call(this,"twitter.com",Br)}function Po(t,e){var n=t;if(f(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new lo("twitter.com",n,"twitter.com")}function Co(t,e,n){this.a=t,this.f=e,Gi(this,"providerId","password"),Gi(this,"signInMethod",n===Oo.EMAIL_LINK_SIGN_IN_METHOD?Oo.EMAIL_LINK_SIGN_IN_METHOD:Oo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Io(t){return t&&t.email&&t.password?new Co(t.email,t.password,t.signInMethod):null}function Oo(){Yi(this,{providerId:"password",isOAuthProvider:!1})}function So(t,e){if(!(e=To(e)))throw new C("argument-error","Invalid email link!");return new Co(t,e.code,Oo.EMAIL_LINK_SIGN_IN_METHOD)}function To(t){return(t=Ir(t=to(t)))&&t.operation===or?t:null}function Eo(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new C("internal-error");this.a=t,Gi(this,"providerId","phone"),this.fa="phone",Gi(this,"signInMethod","phone")}function ko(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Eo(e)}return null}function Ao(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Do(t){try{this.a=t||i.a.auth()}catch(e){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yi(this,{providerId:"phone",isOAuthProvider:!1})}function jo(t,e){if(!t)throw new C("missing-verification-id");if(!e)throw new C("missing-verification-code");return new Eo({cb:t,bb:e})}function Ro(t){if(t.temporaryProof&&t.phoneNumber)return new Eo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,i=t&&t.oauthTokenSecret,r=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return wo(o,n);case"facebook.com":return mo(n);case"github.com":return bo(n);case"twitter.com":return Po(n,i);default:return n||i||o||s?s?0==e.indexOf("saml.")?new so(e,s):new lo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new go(e).credential({idToken:o,accessToken:n,rawNonce:r}):null}}catch(a){return null}}function Mo(t){if(!t.isOAuthProvider)throw new C("invalid-oauth-provider")}function No(t,e,n,i,r,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=i||null,this.i=o||null,this.h=s||null,this.a=r||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function Fo(t){return(t=t||{}).type?new No(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&I(t.error),t.postBody,t.tenantId):null}function Vo(){this.b=null,this.a=[]}eo.prototype.Ha=function(){return Ie(this.a?this.a:this.b)},eo.prototype.w=function(){return this.type==no?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ro.prototype.ja=function(){},ro.prototype.b=function(){},ro.prototype.c=function(){},ro.prototype.w=function(){},so.prototype.ja=function(t){return pa(t,ao(this))},so.prototype.b=function(t,e){var n=ao(this);return n.idToken=e,da(t,n)},so.prototype.c=function(t,e){return oo(fa(t,ao(this)),e)},so.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},lo.prototype.ja=function(t){return pa(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,da(t,n)},lo.prototype.c=function(t,e){return oo(fa(t,ho(this)),e)},lo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},po.prototype.Ka=function(t){return this.Hb=dt(t),this},P(fo,po),P(go,po),go.prototype.Ca=function(t){return G(this.a,t)||this.a.push(t),this},go.prototype.Pb=function(){return Q(this.a)},go.prototype.credential=function(t,e){var n;if(!(n=f(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new lo(this.providerId,n,this.providerId)},P(yo,go),Gi(yo,"PROVIDER_ID","facebook.com"),Gi(yo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),P(vo,go),Gi(vo,"PROVIDER_ID","github.com"),Gi(vo,"GITHUB_SIGN_IN_METHOD","github.com"),P(_o,go),Gi(_o,"PROVIDER_ID","google.com"),Gi(_o,"GOOGLE_SIGN_IN_METHOD","google.com"),P(xo,po),Gi(xo,"PROVIDER_ID","twitter.com"),Gi(xo,"TWITTER_SIGN_IN_METHOD","twitter.com"),Co.prototype.ja=function(t){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?Xa(t,xa,{email:this.a,oobCode:this.f}):Xa(t,za,{email:this.a,password:this.f})},Co.prototype.b=function(t,e){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?Xa(t,Pa,{idToken:e,email:this.a,oobCode:this.f}):Xa(t,Na,{idToken:e,email:this.a,password:this.f})},Co.prototype.c=function(t,e){return oo(this.ja(t),e)},Co.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yi(Oo,{PROVIDER_ID:"password"}),Yi(Oo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yi(Oo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Eo.prototype.ja=function(t){return t.eb(Ao(this))},Eo.prototype.b=function(t,e){var n=Ao(this);return n.idToken=e,Xa(t,Ga,n)},Eo.prototype.c=function(t,e){var n=Ao(this);return n.operation="REAUTH",oo(t=Xa(t,Ya,n),e)},Eo.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Do.prototype.eb=function(t,e){var n=this.a.a;return Ie(e.verify()).then((function(i){if("string"!=typeof i)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var r=f(t)?t.session:null,o=f(t)?t.phoneNumber:t;return(r&&r.type==no?r.Ha().then((function(t){return function(t,e){return Xa(t,Va,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:i}})})):r&&r.type==io?r.Ha().then((function(e){return function(t,e){return Xa(t,La,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:i}})})):function(t,e){return Xa(t,Ra,e)}(n,{phoneNumber:o,recaptchaToken:i})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Yi(Do,{PROVIDER_ID:"phone"}),Yi(Do,{PHONE_SIGN_IN_METHOD:"phone"}),No.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},No.prototype.S=function(){return this.h},No.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Lo,Uo=null;function Bo(t){var e="unauthorized-domain",n=void 0,i=Nn(t);t=i.a,"chrome-extension"==(i=i.f)?n=Ut("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==i||"https"==i?n=Ut("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",C.call(this,e,n)}function Ho(t,e,n){C.call(this,t,n),(t=e||{}).Ib&&Gi(this,"email",t.Ib),t.ea&&Gi(this,"phoneNumber",t.ea),t.credential&&Gi(this,"credential",t.credential),t.Yb&&Gi(this,"tenantId",t.Yb)}function Wo(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:Ro(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new C(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function zo(){}function qo(){}function Go(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.f=i}catch(r){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Yo(){}function Ko(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.pc,this),this.a.onerror=_(this.Rb,this),this.a.onprogress=_(this.qc,this),this.a.ontimeout=_(this.uc,this)}function Xo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Qo(t,e,n){this.reset(t,e,n,void 0,void 0)}function $o(t){this.f=t,this.b=this.c=this.a=null}function Zo(t,e){this.name=t,this.value=e}P(Bo,C),P(Ho,C),Ho.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&gt(t,e),t},Ho.prototype.toJSON=function(){return this.w()},zo.prototype.c=null,P(qo,zo),qo.prototype.a=function(){var t=Go(this);return t?new ActiveXObject(t):new XMLHttpRequest},qo.prototype.b=function(){var t={};return Go(this)&&(t[0]=!0,t[1]=!0),t},Lo=new qo,P(Yo,zo),Yo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ko;throw Error("Unsupported browser")},Yo.prototype.b=function(){return{}},(t=Ko.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Xo(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",Xo(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,Xo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Qo.prototype.a=null,Qo.prototype.reset=function(t,e,n,i,r){i||x(),delete this.a},Zo.prototype.toString=function(){return this.name};var Jo=new Zo("SEVERE",1e3),ts=new Zo("WARNING",900),es=new Zo("CONFIG",700),ns=new Zo("FINE",500);$o.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(R("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Qo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var is={},rs=null;function os(t){var e;if(rs||(rs=new $o(""),is[""]=rs,rs.c=es),!(e=is[t])){e=new $o(t);var n=t.lastIndexOf("."),i=t.substr(n+1);(n=os(t.substr(0,n))).b||(n.b={}),n.b[i]=e,e.a=n,is[t]=e}return e}function ss(t,e){t&&t.log(ns,e,void 0)}function as(t){this.f=t}function us(t){vn.call(this),this.o=t,this.readyState=ls,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=os("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}P(as,zo),as.prototype.a=function(){return new us(this.f)},as.prototype.b=function(t){return function(){return t}}({}),P(us,vn);var ls=0;function hs(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function cs(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ps(t)}function ps(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ds(t){vn.call(this),this.headers=new On,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=fs,this.u=this.R=!1}(t=us.prototype).open=function(t,e){if(this.readyState!=ls)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ps(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,cs(this,!1)),this.readyState=ls},t.tc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ps(this)),this.a&&(this.readyState=3,ps(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,hs(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?cs(this,!0):ps(this),3==this.readyState&&hs(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,cs(this,!0))},t.rc=function(t){this.a&&(this.response=t,cs(this,!0))},t.Ta=function(t){var e=this.h;e&&e.log(ts,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&cs(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(ts,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(ts,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},P(ds,vn);var fs="";ds.prototype.b=os("goog.net.XhrIo");var gs=/^https?$/i,ys=["POST","PUT"];function ms(t){return"content-type"==t.toLowerCase()}function vs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,bs(t),ws(t)}function bs(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function _s(t){if(t.c&&void 0!==s)if(t.A[1]&&4==Ps(t)&&2==Cs(t))ss(t.b,Is(t,"Local request error detected and ignored"));else if(t.i&&4==Ps(t))xn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Ps(t)){ss(t.b,Is(t,"Request complete")),t.c=!1;try{var e,n=Cs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(e=i)){var r;if(r=0===n){var o=String(t.l).match(En)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}r=!gs.test(o?o.toLowerCase():"")}e=r}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var l=2<Ps(t)?t.a.statusText:""}catch(h){ss(t.b,"Can not get status: "+h.message),l=""}t.h=l+" ["+Cs(t)+"]",bs(t)}}finally{ws(t)}}}function ws(t,e){if(t.a){xs(t);var n=t.a,i=t.A[0]?h:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(r){(t=t.b)&&t.log(Jo,"Problem encountered resetting onreadystatechange: "+r.message,void 0)}}}function xs(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(a.clearTimeout(t.o),t.o=null)}function Ps(t){return t.a?t.a.readyState:0}function Cs(t){try{return 2<Ps(t)?t.a.status:-1}catch(e){return-1}}function Is(t,e){return e+" ["+t.P+" "+t.l+" "+Cs(t)+"]"}function Os(t){var e=Fs;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function Ss(t,e,n){t.a=!0,t.c=n,t.f=!e,As(t)}function Ts(t){if(t.a){if(!t.m)throw new Ds(t);t.m=!1}}function Es(t,e,n,i){t.g.push([e,n,i]),t.a&&As(t)}function ks(t){return q(t.g,(function(t){return d(t[1])}))}function As(t){if(t.h&&t.a&&ks(t)){var e=t.h,n=Ms[e];n&&(a.clearTimeout(n.a),delete Ms[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var i=n=!1;t.g.length&&!t.i;){var r=t.g.shift(),o=r[0],s=r[1];if(r=r[2],o=t.f?s:o)try{var u=o.call(r||t.o,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(A(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(i=!0,t.i=!0)}catch(l){e=l,t.f=!0,ks(t)||(n=!0)}}t.c=e,i&&(u=_(t.v,t,!0),i=_(t.v,t,!1),e instanceof Os?(Es(e,u,i),e.A=!0):e.then(u,i)),n&&(e=new Rs(e),Ms[e.a]=e,t.h=e.a)}function Ds(){D.call(this)}function js(){D.call(this)}function Rs(t){this.a=a.setTimeout(_(this.c,this),0),this.b=t}(t=ds.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ss(this.b,Is(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ss(this.b,Is(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ws(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ws(this,!0)),ds.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?_s(this):this.Ic())},t.Ic=function(){_s(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case fs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Jo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ss(this.b,"Can not get response: "+e.message),null}},Os.prototype.cancel=function(t){if(this.a)this.c instanceof Os&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new js(this),Ts(this),Ss(this,!1,t))}},Os.prototype.v=function(t,e){this.i=!1,Ss(this,t,e)},Os.prototype.then=function(t,e,n){var i,r,o=new ve((function(t,e){i=t,r=e}));return Es(this,i,(function(t){t instanceof js?o.cancel():r(t)})),o.then(t,e,n)},Os.prototype.$goog_Thenable=!0,P(Ds,D),Ds.prototype.message="Deferred has already fired",Ds.prototype.name="AlreadyCalledError",P(js,D),js.prototype.message="Deferred was canceled",js.prototype.name="CanceledError",Rs.prototype.c=function(){throw delete Ms[this.a],this.b};var Ms={};function Ns(t){var e={},n=e.document||document,i=Pt(t).toString(),r=ce(document,"SCRIPT"),o={Vb:r,Ma:void 0},s=new Os(o),h=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(h=window.setTimeout((function(){Vs(r,!0);var t=new Bs(Us,"Timeout reached for loading script "+i);Ts(s),Ss(s,!1,t)}),c),o.Ma=h),r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Vs(r,e.wd||!1,h),Ts(s),Ss(s,!0,null))},r.onerror=function(){Vs(r,!0,h);var t=new Bs(Ls,"Error while loading script "+i);Ts(s),Ss(s,!1,t)},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),se(r,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=Pt(e),null===l&&(l=(e=(e=a.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&u.test(e)?e:""),(e=l)&&t.setAttribute("nonce",e)}(r,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(r),s}function Fs(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Vs(t,!0,this.Ma)}}function Vs(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ls=0,Us=1;function Bs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Hs(t){this.f=t}function Ws(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Gs,this.g=dt(t.secureTokenHeaders||Ys),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||Ks,this.a=dt(t.firebaseHeaders||Xs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==mi(),!(n=a.XMLHttpRequest||n&&i.a.INTERNAL.node&&i.a.INTERNAL.node.XMLHttpRequest)&&!yi())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=yi()?new as(self):vi()?new Hs(n):new Yo,this.b=null}P(Bs,D),P(Hs,zo),Hs.prototype.a=function(){return new this.f},Hs.prototype.b=function(){return{}};var zs,qs="idToken",Gs=new Fi(3e4,6e4),Ys={"Content-Type":"application/x-www-form-urlencoded"},Ks=new Fi(3e4,6e4),Xs={"Content-Type":"application/json"};function Qs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function $s(t,e){e&&(t.l=Zs("https://securetoken.googleapis.com/v1/token",e),t.h=Zs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Zs("https://identitytoolkit.googleapis.com/v2/",e))}function Zs(t,e){return t=Nn(t),e=Nn(e.url),t.c=t.a+t.c,An(t,e.f),t.a=e.a,Dn(t,e.g),t.toString()}function Js(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ta(t,e,n,i,r,o,s){(function(){var t=Ci();return!((t=wi(t)!=_i?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Gt&&ee&&!(9<ee))})()||yi()?t=_(t.u,t):(zs||(zs=new ve((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[na]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Es(t,null,e,void 0)}(Ns(Ct(ea,{onload:na})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=_(t.o,t)),t(e,n,i,r,o,s)}Ws.prototype.S=function(){return this.b},Ws.prototype.u=function(t,e,n,i,r,o){if(yi()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ds(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}bn(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ss(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),_n(s,"ready",(function(){u&&clearTimeout(u),He(this)})),_n(s,"timeout",(function(){u&&clearTimeout(u),He(this),e&&e(null)})),function(t,e,n,i,r){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():Lo.a(),t.A=function(t){return t.c||(t.c=t.b())}(t.O?t.O:Lo),t.a.onreadystatechange=_(t.Ub,t);try{ss(t.b,Is(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(s){return ss(t.b,Is(t,"Error opening Xhr: "+s.message)),void vs(t,s)}e=i||"";var o=new On(t.headers);r&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)H(t,e,void 0);else for(var n=In(t),i=Cn(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}(r,(function(t,e){o.set(e,t)})),r=function(t){t:{for(var e=ms,n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),i=a.FormData&&e instanceof a.FormData,!G(ys,n)||r||i||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{xs(t),0<t.g&&(t.u=function(t){return Gt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ss(t.b,Is(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.o=xn(t.Ma,t.g,t)),ss(t.b,Is(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){ss(t.b,Is(t,"Send error: "+s.message)),vs(t,s)}}(s,t,n,i,r)};var ea=new mt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),na="__fcb"+Math.floor(1e6*Math.random()).toString();function ia(t){if("string"!=typeof(t=t.email)||!pi.test(t))throw new C("invalid-email")}function ra(t){"email"in t&&ia(t)}function oa(t){if(!t[qs]){if(t.mfaPendingCredential)throw new C("multi-factor-auth-required",null,dt(t));throw new C("internal-error")}}function sa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new C("internal-error")}else{if(!t.sessionInfo)throw new C("missing-verification-id");if(!t.code)throw new C("missing-verification-code")}}Ws.prototype.o=function(t,e,n,i,r){var o=this;zs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:i,headers:r,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ws.prototype.yb=function(){return Xa(this,Fa,{})},Ws.prototype.Ab=function(t,e){return Xa(this,Ma,{idToken:t,email:e})},Ws.prototype.Bb=function(t,e){return Xa(this,Na,{idToken:t,password:e})};var aa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ua(t){if(!t.phoneVerificationInfo)throw new C("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new C("missing-verification-code")}function la(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new C("internal-error")}function ha(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Qn(t=new Gn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ca(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Wo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Wo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Wo(t)):t.errorMessage&&(e=Qa(t.errorMessage)),e)throw e;oa(t)}function pa(t,e){return e.returnIdpCredential=!0,Xa(t,Ua,e)}function da(t,e){return e.returnIdpCredential=!0,Xa(t,Ha,e)}function fa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Xa(t,Ba,e)}function ga(t){if(!t.oobCode)throw new C("invalid-action-code")}(t=Ws.prototype).Cb=function(t,e){var n={idToken:t},i=[];return ct(aa,(function(t,r){var o=e[r];null===o?i.push(t):r in e&&(n[r]=o)})),i.length&&(n.deleteAttribute=i),Xa(this,Ma,n)},t.ub=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),Xa(this,ka,t)},t.vb=function(t,e){return gt(t={requestType:"EMAIL_SIGNIN",email:t},e),Xa(this,Sa,t)},t.tb=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Xa(this,Ta,t)},t.Db=function(t,e,n){return gt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Xa(this,Ea,t)},t.eb=function(t){return Xa(this,qa,t)},t.mb=function(t,e){return Xa(this,ja,{oobCode:t,newPassword:e})},t.Qa=function(t){return Xa(this,ma,{oobCode:t})},t.ib=function(t){return Xa(this,ya,{oobCode:t})};var ya={endpoint:"setAccountInfo",B:ga,Z:"email",C:!0},ma={endpoint:"resetPassword",B:ga,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new C("internal-error")},C:!0},va={endpoint:"signupNewUser",B:function(t){if(ia(t),!t.password)throw new C("weak-password")},F:oa,U:!0,C:!0},ba={endpoint:"createAuthUri",C:!0},_a={endpoint:"deleteAccount",M:["idToken"]},wa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if("array"!=c(t.deleteProvider))throw new C("internal-error")}},xa={endpoint:"emailLinkSignin",M:["email","oobCode"],B:ia,F:oa,U:!0,C:!0},Pa={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:ia,F:oa,U:!0},Ca={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:ua,F:oa,C:!0,Na:!0},Ia={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:ua,F:oa,C:!0,Na:!0},Oa={endpoint:"getAccountInfo"},Sa={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new C("internal-error");ia(t)},Z:"email",C:!0},Ta={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",C:!0},Ea={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",C:!0},ka={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new C("internal-error");ia(t)},Z:"email",C:!0},Aa={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Da={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new C("internal-error")}},ja={endpoint:"resetPassword",B:ga,Z:"email",C:!0},Ra={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Ma={endpoint:"setAccountInfo",M:["idToken"],B:ra,U:!0},Na={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(ra(t),!t.password)throw new C("weak-password")},F:oa,U:!0},Fa={endpoint:"signupNewUser",F:oa,U:!0,C:!0},Va={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new C("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new C("internal-error")},C:!0,Na:!0},La={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new C("internal-error")},C:!0,Na:!0},Ua={endpoint:"verifyAssertion",B:la,Xa:ha,F:ca,U:!0,C:!0},Ba={endpoint:"verifyAssertion",B:la,Xa:ha,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new C("user-not-found");if(t.errorMessage)throw Qa(t.errorMessage);oa(t)},U:!0,C:!0},Ha={endpoint:"verifyAssertion",B:function(t){if(la(t),!t.idToken)throw new C("internal-error")},Xa:ha,F:ca,U:!0},Wa={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new C("invalid-custom-token")},F:oa,U:!0,C:!0},za={endpoint:"verifyPassword",B:function(t){if(ia(t),!t.password)throw new C("wrong-password")},F:oa,U:!0,C:!0},qa={endpoint:"verifyPhoneNumber",B:sa,F:oa,C:!0},Ga={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new C("internal-error");sa(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Wo(t);oa(t)}},Ya={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:sa,F:oa,C:!0},Ka={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[qs]^!!t.refreshToken)throw new C("internal-error")},C:!0,Na:!0};function Xa(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var i=t[e[n]];if(null==i||""===i)return!1}return!0}(n,e.M))return Oe(new C("internal-error"));var i,r=!!e.Na,o=e.Tb||"POST";return Ie(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,i,r,o,s){var a=Nn(e+n);Rn(a,"key",t.c),s&&Rn(a,"cb",x().toString());var u="GET"==i;if(u)for(var l in r)r.hasOwnProperty(l)&&Rn(a,l,r[l]);return new ve((function(e,n){ta(t,a.toString(),(function(t){t?t.error?n($a(t,o||{})):e(t):n(new C("network-request-failed"))}),i,u?void 0:ti(Di(r)),t.a,t.m.get())}))}(t,r?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return i=t,e.Xa?e.Xa(n,i):i})).then(e.F).then((function(){if(!e.Z)return i;if(!(e.Z in i))throw new C("internal-error");return i[e.Z]}))}function Qa(t){return $a({error:{errors:[{message:t}],code:400,message:t}})}function $a(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new C(i[n]):null)return n;for(var r in n=t.error&&t.error.message||"",gt(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===n.indexOf(r))return new C(i[r],e);return!e&&t&&(e=Ai(t)),new C("internal-error",e)}function Za(t){this.b=t,this.a=null,this.qb=function(t){return(nu||(nu=new ve((function(t,e){function n(){Ni(),Ii("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ni(),e(Error("Network Error"))},timeout:tu.get()})}if(Ii("gapi.iframes.Iframe"))t();else if(Ii("gapi.load"))n();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[i]=function(){Ii("gapi.load")?n():e(Error("Network Error"))},Ie(Ns(i=Ct(Ja,{onload:i}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw nu=null,t})))).then((function(){return new ve((function(e,n){Ii("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ii("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(i){function r(){clearTimeout(o),e()}t.a=i,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),eu.get());i.ping(r).then(r,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Ja=new mt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),tu=new Fi(3e4,6e4),eu=new Fi(5e3,15e3),nu=null;function iu(t,e,n,i){this.l=t,this.h=e,this.i=n,this.g=i,this.f=null,t=this.g?Fn((t=Nn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):Fn("https",this.l,null,"/__/auth/iframe"),this.a=t,Rn(this.a,"apiKey",this.h),Rn(this.a,"appName",this.i),this.b=null,this.c=[]}function ru(t,e,n,i,r,o){this.u=t,this.o=e,this.c=n,this.v=i,this.m=o,this.i=this.g=this.l=null,this.a=r,this.h=this.f=null}function ou(t){try{return i.a.app(t).auth().Ga()}catch(e){return[]}}function su(t,e,n,i,r,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=i||null,this.i=r||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function au(t){var e=si();return function(t){return Xa(t,Aa,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Nn(e),i=n.f;n=n.a;for(var r=0;r<t.length;r++){var o=t[r],s=n,a=i;if(0==o.indexOf("chrome-extension://")?s=Nn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:ci.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Bo(si())}))}function uu(t){return t.v||(t.v=di().then((function(){if(!t.u){var e=t.c,n=t.i,i=ou(t.b),r=new iu(t.o,t.g,t.b,t.f);r.f=e,r.b=n,r.c=Q(i||[]),t.u=r.toString()}t.m=new Za(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,Ii("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var i=!1;for(e=Fo(e.authEvent),n=0;n<t.h.length;n++)i=t.h[n](e)||i;return(n={}).status=i?"ACK":"ERROR",Ie(n)}return n.status="ERROR",Ie(n)}))}(t)}))),t.v}function lu(t){return t.l||(t.A=t.c?Pi(t.c,ou(t.b)):null,t.l=new Ws(t.g,k(t.i),t.A),t.f&&$s(t.l,t.f)),t.l}function hu(t,e,n,i,r,o,s,a,u,l,h,c){return(t=new ru(t,e,n,i,r,c)).l=o,t.g=s,t.i=a,t.b=dt(u||null),t.f=l,t.xb(h).toString()}function cu(t){if(this.a=t||i.a.INTERNAL.reactNative&&i.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function pu(t){this.b=t,this.a={},this.f=_(this.c,this)}iu.prototype.toString=function(){return this.f?Rn(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Rn(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Rn(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},ru.prototype.xb=function(t){return this.h=t,this},ru.prototype.toString=function(){if(this.m){var t=Nn(this.m.url);t=Fn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Fn("https",this.u,null,"/__/auth/handler");if(Rn(t,"apiKey",this.o),Rn(t,"appName",this.c),Rn(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=i.a.app(this.c).auth().ka()}catch(u){n=null}for(var r in e.nb=n,Rn(t,"providerId",this.a.providerId),e=Di((n=this.a).Hb))e[r]=e[r].toString();r=n.Pc,e=dt(e);for(var o=0;o<r.length;o++){var s=r[o];s in e&&delete e[s]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),pt(e)||Rn(t,"customParameters",Ai(e))}if("function"==typeof this.a.Pb&&(n=this.a.Pb()).length&&Rn(t,"scopes",n.join(",")),this.l?Rn(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Rn(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Rn(t,"v",this.i):Xn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Mn(t,a)&&Rn(t,a,this.b[a]);return this.h?Rn(t,"tid",this.h):Xn(t.b,"tid"),this.f?Rn(t,"eid",this.f):Xn(t.b,"eid"),(a=ou(this.c)).length&&Rn(t,"fw",a.join(",")),t.toString()},(t=su.prototype).Nb=function(t,e,n){var i=new C("popup-closed-by-user"),r=new C("web-storage-unsupported"),o=this,s=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return uu(t).then((function(){return function(t,e){return t.qb.then((function(){return new ve((function(n){t.a.send(e.type,e,n,Ii("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&li(t),e(r),s=!0)}))})).s((function(){})).then((function(){if(!s)return function(t){return new ve((function(e){return function n(){Pn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return Pn(n).then((function(){e(i)}))}))},t.Wb=function(){var t=Ci();return!ki(t)&&!Mi(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,i,r,o,s,a){if(!t)return Oe(new C("popup-blocked"));if(s&&!ki())return this.la().s((function(e){li(t),r(e)})),i(),Ie();this.a||(this.a=au(lu(this)));var u=this;return this.a.then((function(){var e=u.la().s((function(e){throw li(t),r(e),e}));return i(),e})).then((function(){Mo(n),s||ai(hu(u.o,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Mb=function(t,e,n,i){this.a||(this.a=au(lu(this)));var r=this;return this.a.then((function(){Mo(e),ai(hu(r.o,r.g,r.b,t,e,si(),n,r.c,void 0,r.i,i,r.f))})).s((function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t}))},t.la=function(){var t=this;return uu(this).then((function(){return t.m.qb})).s((function(){throw t.a=null,new C("network-request-failed")}))},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(t){K(this.h,(function(e){return e==t}))},(t=cu.prototype).get=function(t){return Ie(this.a.getItem(t)).then((function(t){return t&&ji(t)}))},t.set=function(t,e){return Ie(this.a.setItem(t,Ai(e)))},t.T=function(t){return Ie(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var du,fu=[];function gu(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function yu(t){this.a=t}function mu(t){this.c=t,this.b=!1,this.a=[]}function vu(t,e,n,i){var r,o,s,a,u=n||{},l=null;if(t.b)return Oe(Error("connection_unavailable"));var h=i?800:50,c="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ve((function(n,i){c?(r=Math.floor(Math.random()*Math.pow(10,20)).toString(),c.port1.start(),s=setTimeout((function(){i(Error("unsupported_event"))}),h),t.a.push(l={messageChannel:c,onMessage:o=function(t){t.data.eventId===r&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){i(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):i(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),i(Error("invalid_response"))))}}),c.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:r,data:u},[c.port2])):i(Error("connection_unavailable"))})).then((function(e){return bu(t,l),e})).s((function(e){throw bu(t,l),e}))}function bu(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),K(t.a,(function(t){return t==e}))}}function _u(){if(!xu())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;yi()&&self?(this.l=function(){var t=yi()?self:null;if(H(fu,(function(n){n.b==t&&(e=n)})),!e){var e=new pu(t);fu.push(e)}return e}(),gu(this.l,"keyChanged",(function(e,n){return Su(t).then((function(e){return 0<e.length&&H(t.a,(function(t){t(e)})),{keyProcessed:G(e,n.key)}}))})),gu(this.l,"ping",(function(){return Ie(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Ie().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):Ie(null)}().then((function(e){(t.h=e)&&(t.g=new mu(new yu(e)),vu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&G(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function wu(t){return t.v||(t.v=function t(e){return new ve((function(n,i){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}i(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){i(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(r):function(t){return new ve((function(e,n){var i=t.m.deleteDatabase("firebaseLocalStorageDb");i.onsuccess=function(){e()},i.onerror=function(t){n(Error(t.target.error))}}))}(e).then((function(){return t(e)})).then((function(t){n(t)})).s((function(t){i(t)}))}}))}(t)),t.v}function xu(){try{return!!a.indexedDB}catch(zt){return!1}}function Pu(t){return t.objectStore("firebaseLocalStorage")}function Cu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Iu(t){return new ve((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Ou(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?vu(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):Ie()}function Su(t){return wu(t).then((function(t){var e=Pu(Cu(t,!1));return e.getAll?Iu(e.getAll()):new ve((function(t,n){var i=[],r=e.openCursor();r.onsuccess=function(e){(e=e.target.result)?(i.push(e.value),e.continue()):t(i)},r.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},i=[];if(0==t.b){for(i=0;i<e.length;i++)n[e[i].fbase_key]=e[i].value;i=function t(e,n){var i,r=[];for(i in e)i in n?typeof e[i]!=typeof n[i]?r.push(i):"object"==typeof e[i]&&null!=e[i]&&null!=n[i]?0<t(e[i],n[i]).length&&r.push(i):e[i]!==n[i]&&r.push(i):r.push(i);for(i in n)i in e||r.push(i);return r}(t.c,n),t.c=n}return i}))}function Tu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Eu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ie().then((function(){if(xu()){var t=Ri(),i="__sak"+t;return du||(du=new _u),(n=du).set(i,t).then((function(){return n.get(i)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(i)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){H(e.a,(function(e){e(t)}))})),t}))}function ku(){this.a={},this.type="inMemory"}function Au(){if(!function(){var t="Node"==mi();if(!(t=Du()||t&&i.a.INTERNAL.node&&i.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==mi())throw new C("internal-error","The LocalStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Du()||i.a.INTERNAL.node.localStorage,this.type="localStorage"}function Du(){try{var t=a.localStorage,e=Ri();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function ju(){this.type="nullStorage"}function Ru(){if(!function(){var t="Node"==mi();if(!(t=Mu()||t&&i.a.INTERNAL.node&&i.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==mi())throw new C("internal-error","The SessionStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Mu()||i.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Mu(){try{var t=a.sessionStorage,e=Ri();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Nu(){var t={};t.Browser=Lu,t.Node=Uu,t.ReactNative=Bu,t.Worker=Hu,this.a=t[mi()]}pu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,i=this.a[e];if(i&&0<i.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var r=[];H(i,(function(e){r.push(Ie().then((function(){return e(t.origin,t.data.data)})))})),Te(r).then((function(i){var r=[];H(i,(function(t){r.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),H(r,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:r})}))}},yu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},mu.prototype.close=function(){for(;0<this.a.length;)bu(this,this.a[0]);this.b=!0},(t=_u.prototype).set=function(t,e){var n,i=!1,r=this;return wu(this).then((function(e){return Iu((e=Pu(Cu(n=e,!0))).get(t))})).then((function(o){var s=Pu(Cu(n,!0));return o?(o.value=e,Iu(s.put(o))):(r.b++,i=!0,(o={}).fbase_key=t,o.value=e,Iu(s.add(o)))})).then((function(){return r.c[t]=e,Ou(r,t)})).na((function(){i&&r.b--}))},t.get=function(t){return wu(this).then((function(e){return Iu(Pu(Cu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=!1,n=this;return wu(this).then((function(i){return e=!0,n.b++,Iu(Pu(Cu(i,!0)).delete(t))})).then((function(){return delete n.c[t],Ou(n,t)})).na((function(){e&&n.b--}))},t.ca=function(t){0==this.a.length&&function(t){Tu(t),function e(){t.f=setTimeout((function(){t.i=Su(t).then((function(e){0<e.length&&H(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){K(this.a,(function(e){return e==t})),0==this.a.length&&Tu(this)},(t=Eu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){K(this.a,(function(e){return e==t}))},(t=ku.prototype).get=function(t){return Ie(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ie()},t.T=function(t){return delete this.a[t],Ie()},t.ca=function(){},t.ia=function(){},(t=Au.prototype).get=function(t){var e=this;return Ie().then((function(){return ji(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ie().then((function(){var i=Ai(e);null===i?n.T(t):n.a.setItem(t,i)}))},t.T=function(t){var e=this;return Ie().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&sn(a.window,"storage",t)},t.ia=function(t){a.window&&ln(a.window,"storage",t)},(t=ju.prototype).get=function(){return Ie(null)},t.set=function(){return Ie()},t.T=function(){return Ie()},t.ca=function(){},t.ia=function(){},(t=Ru.prototype).get=function(t){var e=this;return Ie().then((function(){return ji(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ie().then((function(){var i=Ai(e);null===i?n.T(t):n.a.setItem(t,i)}))},t.T=function(t){var e=this;return Ie().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Fu,Vu,Lu={D:Au,ab:Ru},Uu={D:Au,ab:Ru},Bu={D:cu,ab:ju},Hu={D:Au,ab:ju},Wu={qd:"local",NONE:"none",sd:"session"};function zu(){var t=!(Mi(Ci())||!gi()),e=ki(),n=Oi();this.v=t,this.h=e,this.l=n,this.a={},Fu||(Fu=new Nu),t=Fu;try{this.g=!oi()&&Bi()||!a.indexedDB?new t.a.D:new Eu(yi()?new ku:new t.a.D)}catch(i){this.g=new ku,this.h=!0}try{this.i=new t.a.ab}catch(i){this.i=new ku}this.m=new ku,this.f=_(this.Xb,this),this.b={}}function qu(){return Vu||(Vu=new zu),Vu}function Gu(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function Yu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ku(t,e,n){return n=Yu(e,n),"local"==e.D&&(t.b[n]=null),Gu(t,e.D).T(n)}function Xu(t){t.c&&(clearInterval(t.c),t.c=null)}function Qu(t){this.a=t,this.b=qu()}(t=zu.prototype).get=function(t,e){return Gu(this,t.D).get(Yu(t,e))},t.set=function(t,e,n){var i=Yu(t,n),r=this,o=Gu(this,t.D);return o.set(i,e).then((function(){return o.get(i)})).then((function(e){"local"==t.D&&(r.b[i]=e)}))},t.addListener=function(t,e,n){t=Yu(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),pt(this.a)&&(Gu(this,"local").ca(this.f),this.h||(oi()||!Bi())&&a.indexedDB||!this.l||function(t){Xu(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),i=t.b[e];n!=i&&(t.b[e]=n,n=new Ke({type:"storage",key:e,target:window,oldValue:i,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Yu(t,e),this.a[t]&&(K(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Gu(this,"local").ia(this.f),Xu(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var i=this.b[n];void 0===i&&(i=null);var r=a.localStorage.getItem(n);r!==i&&(this.b[n]=r,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Gu(this,"local").ia(this.f):Xu(this),this.v)if(n=a.localStorage.getItem(e),(i=t.a.newValue)!==n)null!==i?a.localStorage.setItem(e,i):a.localStorage.removeItem(e);else if(this.b[e]===i&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.lb(e))},Gt&&ee&&10==ee&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,_(this.lb,this))},t.lb=function(t){this.a[t]&&H(this.a[t],(function(t){t()}))};var $u,Zu={name:"authEvent",D:"local"};function Ju(){this.a=qu()}function tl(t,e){this.b=el,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===$u&&($u=a.Int32Array?new Int32Array(ul):ul),this.reset()}P(tl,(function(){this.b=-1}));for(var el=64,nl=el-1,il=[],rl=0;rl<nl;rl++)il[rl]=0;var ol=X(128,il);function sl(t){for(var e=t.f,n=t.l,i=0,r=0;r<e.length;)n[i++]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r=4*i;for(e=16;64>e;e++){var o=(0|n[e-16])+(((r=0|n[e-15])>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,s=(0|n[e-7])+(((i=0|n[e-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[e]=o+s|0}i=0|t.a[0],r=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],l=0|t.a[4],h=0|t.a[5],c=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var p=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&a^r&a)|0;s=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((s=(s=l&h^~l&c)+(0|$u[e])|0)+(0|n[e])|0)|0,o=c,c=h,h=l,l=u+s|0,u=a,a=r,r=i,i=s+p|0}t.a[0]=t.a[0]+i|0,t.a[1]=t.a[1]+r|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+l|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+c|0,t.a[7]=t.a[7]+o|0}function al(t,e,n){void 0===n&&(n=e.length);var i=0,r=t.c;if("string"==typeof e)for(;i<n;)t.f[r++]=e.charCodeAt(i++),r==t.b&&(sl(t),r=0);else{if(!p(e))throw Error("message must be string or array");for(;i<n;){var o=e[i++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[r++]=o,r==t.b&&(sl(t),r=0)}}t.c=r,t.g+=n}tl.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Q(this.h)};var ul=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ll(){tl.call(this,8,hl)}P(ll,tl);var hl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function cl(t,e,n,i,r,o){this.m=t,this.i=e,this.l=n,this.v=i||null,this.u=r||null,this.o=o,this.h=e+":"+n,this.A=new Ju,this.g=new Qu(this.h),this.f=null,this.b=[],this.a=this.c=null}function pl(t){return new C("invalid-cordova-configuration",t)}function dl(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(i){}}function fl(t){return t.f||(t.f=t.la().then((function(){return new ve((function(e){t.Ea((function n(i){return e(i),t.Ra(n),!1})),function(t){function e(e){i=!0,r&&r.cancel(),gl(t).then((function(i){var r=n;if(i&&e&&e.url){var o=null;-1!=(r=to(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=ji(Mn(o=Nn(r),"firebaseError")||null))?I(o):null)?new No(i.c,i.b,null,null,o,null,i.S()):new No(i.c,i.b,r,i.f,null,null,i.S())),r=o||n}dl(t,r)}))}var n=new No("unknown",null,null,null,new C("no-auth-event")),i=!1,r=Pn(500).then((function(){return gl(t).then((function(){i||dl(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ii("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Uo||(Uo=new Vo),function(t){var e=Uo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ii("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function gl(t){var e=null;return function(t){return t.b.get(Zu,t.a).then((function(t){return Fo(t)}))}(t.g).then((function(n){return e=n,Ku((n=t.g).b,Zu,n.a)})).then((function(){return e}))}function yl(t){this.a=t,this.b=qu()}(t=cl.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(fi(void 0)?di().then((function(){return new ve((function(t,e){var n=a.document,i=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(i),t()}),!1)}))})):Oe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ii("universalLinks.subscribe",a))throw pl("cordova-universal-links-plugin-fix is not installed");if(void 0===Ii("BuildInfo.packageName",a))throw pl("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ii("cordova.plugins.browsertab.openUrl",a))throw pl("cordova-plugin-browsertab is not installed");if("function"!=typeof Ii("cordova.InAppBrowser.open",a))throw pl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new C("cordova-not-ready")}))},t.Nb=function(t,e){return e(new C("operation-not-supported-in-this-environment")),Ie()},t.Lb=function(){return Oe(new C("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,i){if(this.c)return Oe(new C("redirect-operation-pending"));var r=this,o=a.document,s=null,u=null,l=null,h=null;return this.c=Ie().then((function(){return Mo(e),fl(r)})).then((function(){return function(t,e,n,i,r){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new No(e,i,null,o,new C("no-auth-event"),null,r),u=Ii("BuildInfo.packageName",a);if("string"!=typeof u)throw new C("invalid-cordova-configuration");var l=Ii("BuildInfo.displayName",a),h={};if(Ci().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Ci().toLowerCase().match(/android/))return Oe(new C("operation-not-supported-in-this-environment"));h.apn=u}l&&(h.appDisplayName=l),o=function(t){var e=new ll;al(e,t),t=[];var n=8*e.g;al(e,ol,56>e.c?56-e.c:e.b-(e.c-56));for(var i=63;56<=i;i--)e.f[i]=255&n,n/=256;for(sl(e),i=n=0;i<e.i;i++)for(var r=24;0<=r;r-=8)t[n++]=e.a[i]>>r&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var c=hu(t.m,t.i,t.l,e,n,null,i,t.v,h,t.u,r,t.o);return t.la().then((function(){var e=t.h;return t.A.a.set(Zu,s.w(),e)})).then((function(){var e=Ii("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new C("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Ii("cordova.plugins.browsertab.openUrl",a)))throw new C("invalid-cordova-configuration");n(c)}else{if("function"!=typeof(n=Ii("cordova.InAppBrowser.open",a)))throw new C("invalid-cordova-configuration");e=Ci(),t.a=n(c,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(r,t,e,n,i)})).then((function(){return new ve((function(t,e){u=function(){var e=Ii("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.Ea(u),h=function(){Vi()&&l()},o.addEventListener("resume",l=function(){s||(s=Pn(2e3).then((function(){e(new C("redirect-cancelled-by-user"))})))},!1),Ci().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).s((function(t){return gl(r).then((function(){throw t}))}))})).na((function(){l&&o.removeEventListener("resume",l,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),u&&r.Ra(u),r.c=null}))},t.Ea=function(t){this.b.push(t),fl(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new No("unknown",null,null,null,new C("no-auth-event")),t(e))}))},t.Ra=function(t){K(this.b,(function(e){return e==t}))};var ml={name:"pendingRedirect",D:"session"};function vl(t){return Ku(t.b,ml,t.a)}function bl(t,e,n,i){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=i,this.h=[],this.f=!1,this.l=_(this.o,this),this.b=new Rl,this.A=new Ll,this.g=new yl(Dl(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=_l(this.O,this.m,this.v,O,this.G)}function _l(t,e,n,r,o){var s=i.a.SDK_VERSION||null;return fi()?new cl(t,e,n,s,r,o):new su(t,e,n,s,r,o)}function wl(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().s((function(n){throw t.a==e&&t.reset(),n}))}function xl(t){t.a.Wb()&&wl(t).s((function(e){var n=new No("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Tl(e)&&t.o(n)})),t.a.Sb()||Ml(t.b)}function Pl(t,e){G(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(ml,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?vl(t.g).then((function(){wl(t).s((function(e){var n=new No("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Tl(e)&&t.o(n)}))})):xl(t)})).s((function(){xl(t)}))}function Cl(t,e){K(t.h,(function(t){return t==e}))}bl.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=_l(this.O,this.m,this.v,null,this.G),this.i={}},bl.prototype.o=function(t){if(!t)throw new C("invalid-auth-event");if(6e5<=x()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,i),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=x())),e=!0;break}}return Ml(this.b),e};var Il=new Fi(2e3,1e4),Ol=new Fi(3e4,6e4);function Sl(t,e,n,i,r,o,s){return t.a.Lb(e,n,i,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),r,o,s)}function Tl(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function El(t,e,n,i,r){var o;return function(t){return t.b.set(ml,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,i,r).s((function(e){if(Tl(e))throw new C("operation-not-supported-in-this-environment");return o=e,vl(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new ve((function(){})):vl(t.g).then((function(){return t.qa()})).then((function(){})).s((function(){}))}))}))}function kl(t,e,n,i,r){return t.a.Nb(i,(function(t){e.ma(n,null,t,r)}),Il.get())}bl.prototype.qa=function(){return this.b.qa()};var Al={};function Dl(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function jl(t,e,n,i){var r=Dl(e,n,i);return Al[r]||(Al[r]=new bl(t,e,n,i)),Al[r]}function Rl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Ml(t){t.g||(t.g=!0,Vl(t,!1,null,null))}function Nl(t){t.g&&!t.i&&Vl(t,!1,null,null)}function Fl(t,e){if(t.b=function(){return Ie(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Vl(t,e,n,i){e?i?function(t,e){if(t.b=function(){return Oe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,i):Fl(t,n):Fl(t,{user:null}),t.f=[],t.c=[]}function Ll(){}function Ul(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Bl(t,e){this.a=e,Gi(this,"verificationId",t)}function Hl(t,e,n,i){return new Do(t).eb(e,n).then((function(t){return new Bl(t,i)}))}function Wl(t){var e=Ur(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yi(this,{token:t,expirationTime:Ui(1e3*e.exp),authTime:Ui(1e3*e.auth_time),issuedAtTime:Ui(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function zl(t,e,n){var i=e&&e[Gl];if(!i)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=dt(e),this.g=n,this.c=new eo(null,i),this.b=[];var r=this;H(e[ql]||[],(function(t){(t=$i(t))&&r.b.push(t)})),Gi(this,"auth",this.a),Gi(this,"session",this.c),Gi(this,"hints",this.b)}Rl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Rl.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,i=t.b,r=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!r&&!o),"unknown"!=n||r||o?t.a?(Vl(this,!0,null,t.a),Ie()):e.Fa(n,i)?function(t,e,n){n=n.Fa(e.c,e.b);var i=e.g,r=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(i,r,s,o).then((function(e){Vl(t,a,e,null)})).s((function(e){Vl(t,a,null,e)}))}(this,t,e):Oe(new C("invalid-auth-event")):(Vl(this,!1,null,null),Ie())}else Oe(new C("invalid-auth-event"))},Rl.prototype.qa=function(){var t=this;return new ve((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new C("timeout");t.a&&t.a.cancel(),t.a=Pn(Ol.get()).then((function(){t.b||(t.g=!0,Vl(t,!0,null,e))}))}(t))}))},Ll.prototype.h=function(t,e){if(t){var n=t.c,i=t.b;t.a?(e.ma(t.c,null,t.a,t.b),Ie()):e.Fa(n,i)?function(t,e){var n=t.b,i=t.c;e.Fa(i,n)(t.g,t.f,t.S(),t.i).then((function(t){e.ma(i,t,null,n)})).s((function(t){e.ma(i,null,t,n)}))}(t,e):Oe(new C("invalid-auth-event"))}else Oe(new C("invalid-auth-event"))},Bl.prototype.confirm=function(t){return t=jo(this.verificationId,t),this.a(t)};var ql="mfaInfo",Gl="mfaPendingCredential";function Yl(t,e,n,i){C.call(this,"multi-factor-auth-required",i,e),this.b=new zl(t,e,n),Gi(this,"resolver",this.b)}function Kl(t,e,n){if(t&&f(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Yl(e,t.serverResponse,n,t.message)}catch(i){}return null}function Xl(){}function Ql(t){Gi(this,"factorId",t.fa),this.a=t}function $l(t){if(Ql.call(this,t),this.a.fa!=Do.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Zl(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function Jl(t,e){this.a=t,this.b=[],this.c=_(this.xc,this),sn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,(function(t){var e=null,i={};if(t){t.uid&&(i[tr]=t.uid),t.displayName&&(i[Zi]=t.displayName),t.enrollmentTime&&(i[Ji]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(i[er]=t.phoneNumber);try{e=new nr(i)}catch(r){}t=e}else t=null;t&&n.push(t)})),th(this,n)}function th(t,e){t.b=e,Gi(t,"enrolledFactors",e)}function eh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function nh(t){this.c=t,this.b=this.a=null}function ih(t){return t.b&&1e3*t.b.c||0}function rh(t,e){var n=e.refreshToken;t.b=Lr(e[qs]||""),t.a=n}function oh(t,e){this.a=t||null,this.b=e||null,Yi(this,{lastSignInTime:Ui(e||null),creationTime:Ui(t||null)})}function sh(t,e,n,i,r,o){Yi(this,{uid:t,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:o||null,providerId:e})}function ah(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var r=i.a.SDK_VERSION?Pi(i.a.SDK_VERSION):null;this.a=new Ws(this.l,k(O),r),t.emulatorConfig&&$s(this.a,t.emulatorConfig),this.b=new nh(this.a),gh(this,e[qs]),rh(this.b,e),Gi(this,"refreshToken",this.b.a),vh(this,n||{}),vn.call(this),this.P=!1,this.o&&Si()&&(this.i=jl(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new eh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=ih(t.b)-x()-3e5;return 0<e?e:0}))}(this),this.$=_(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){$s(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){hh(o,t.f)},this.aa=null,this.N=new Jl(this,n),Gi(this,"multiFactor",this.N)}function uh(t,e){t.ba&&ln(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&sn(e,"languageCodeChanged",t.Ba)}function lh(t,e){t.W&&ln(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&sn(e,"emulatorConfigChanged",t.za)}function hh(t,e){t.X=e,Js(t.a,i.a.SDK_VERSION?Pi(i.a.SDK_VERSION,t.X):null)}function ch(t,e){t.aa&&ln(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&sn(e,"frameworkChanged",t.Aa)}function ph(t){try{return i.a.app(t.m).auth()}catch(e){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function dh(t){t.A||t.u.b||(t.u.start(),ln(t,"tokenChanged",t.$),sn(t,"tokenChanged",t.$))}function fh(t){ln(t,"tokenChanged",t.$),t.u.stop()}function gh(t,e){t.ya=e,Gi(t,"_lat",e)}function yh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Te(e).then((function(){return t}))}function mh(t){t.i&&!t.P&&(t.P=!0,Pl(t.i,t))}function vh(t,e){Yi(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new oh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function bh(){}function _h(t){return Ie().then((function(){if(t.A)throw new C("app-deleted")}))}function wh(t){return z(t.providerData,(function(t){return t.providerId}))}function xh(t,e){e&&(Ph(t,e.providerId),t.providerData.push(e))}function Ph(t,e){K(t.providerData,(function(t){return t.providerId==e}))}function Ch(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Gi(t,e,n)}function Ih(t,e){t!=e&&(Yi(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Gi(t,"metadata",e.metadata?function(t){return new oh(t.a,t.b)}(e.metadata):new oh),H(e.providerData,(function(e){xh(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Gi(t,"refreshToken",t.b.a),th(t.N,e.N.b))}function Oh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return Xa(t.a,Oa,{idToken:e}).then(_(t.Jc,t))}(t,e).then((function(){return n||Ch(t,"isAnonymous",!1),e}))}))}function Sh(t,e){e[qs]&&t.ya!=e[qs]&&(rh(t.b,e),t.dispatchEvent(new Zl("tokenChanged")),gh(t,e[qs]),Ch(t,"refreshToken",t.b.a))}function Th(t,e){return Oh(t).then((function(){if(G(wh(t),e))return yh(t).then((function(){throw new C("provider-already-linked")}))}))}function Eh(t,e,n){return Ki({user:t,credential:Ro(e),additionalUserInfo:e=qr(e),operationType:n})}function kh(t,e){return Sh(t,e),t.reload().then((function(){return t}))}function Ah(t,e,n,r,o){if(!Si())return Oe(new C("operation-not-supported-in-this-environment"));if(t.f&&!o)return Oe(t.f);var s=zr(n.providerId),a=Ri(t.uid+":::"),u=null;(!ki()||gi())&&t.o&&n.isOAuthProvider&&(u=hu(t.o,t.l,t.m,e,n,null,a,i.a.SDK_VERSION||null,null,null,t.tenantId));var l=hi(u,s&&s.ua,s&&s.ta);return r=r().then((function(){if(jh(t),!o)return t.I().then((function(){}))})).then((function(){return Sl(t.i,l,e,n,a,!!u,t.tenantId)})).then((function(){return new ve((function(n,i){t.ma(e,null,new C("cancelled-popup-request"),t.h||null),t.g=n,t.O=i,t.h=a,t.c=kl(t.i,t,e,l,a)}))})).then((function(t){return l&&li(l),t?Ki(t):null})).s((function(t){throw l&&li(l),t})),Rh(t,r,o)}function Dh(t,e,n,i,r){if(!Si())return Oe(new C("operation-not-supported-in-this-environment"));if(t.f&&!r)return Oe(t.f);var o=null,s=Ri(t.uid+":::");return i=i().then((function(){if(jh(t),!r)return t.I().then((function(){}))})).then((function(){return t.ga=s,yh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Fh,t.w(),e.a)),e})).then((function(){return El(t.i,e,n,s,t.tenantId)})).s((function(e){if(o=e,t.ha)return Vh(t.ha);throw o})).then((function(){if(o)throw o})),Rh(t,i,r)}function jh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new C("internal-error");throw new C("auth-domain-config-required")}}function Rh(t,e,n){var i=function(t,e,n){return t.f&&!n?(e.cancel(),Oe(t.f)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new Zl("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(i),i.na((function(){Y(t.G,i)})),i.s((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Kl(e.w(),ph(t),_(t.ic,t))),n||e}))}function Mh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[qs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var i=new ah(e,n,t);return t.providerData&&H(t.providerData,(function(t){t&&xh(i,Ki(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Nh(t){this.a=t,this.b=qu()}zl.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=dt(e.f);return delete n[ql],delete n[Gl],gt(n,t),e.g(n)}))},P(Yl,C),Xl.prototype.rb=function(t,e,n){return e.type==no?function(t,e,n,i){return n.Ha().then((function(n){return n={idToken:n},void 0!==i&&(n.displayName=i),gt(n,{phoneVerificationInfo:Ao(t.a)}),Xa(e,Ca,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:Ao(t.a)}),Xa(e,Ia,n)}))}(this,t,e)},P(Ql,Xl),P($l,Ql),P(Zl,Ye),(t=Jl.prototype).xc=function(t){th(this,function(t){var e=[];return H(t.mfaInfo||[],(function(t){(t=$i(t))&&e.push(t)})),e}(t.gd))},t.Qb=function(){return this.a.I().then((function(t){return new eo(t,null)}))},t.ec=function(t,e){var n=this,i=this.a.a;return this.Qb().then((function(n){return t.rb(i,n,e)})).then((function(t){return Sh(n.a,t),n.a.reload()}))},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,i=this.a.a;return this.a.I().then((function(t){return Xa(i,Ka,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var i=W(e.b,(function(t){return t.uid!=n}));return th(e,i),Sh(e.a,t),e.a.reload().s((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},eh.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=Pn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=a.document,e=null;return Vi()||!t?Ie():new ve((function(n){e=function(){Vi()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).s((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},eh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},nh.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:ih(this)}},nh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Oe(new C("user-token-expired")):t||!this.b||x()>ih(this)-3e4?this.a?function(t,e){return function(t,e){return new ve((function(n,i){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ta(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?i($a(t)):t.access_token&&t.refresh_token?n(t):i(new C("internal-error")):i(new C("network-request-failed"))}),"POST",Kn(e).toString(),t.g,t.v.get()):i(new C("internal-error"))}))}(t.c,e).then((function(e){return t.b=Lr(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ie(null):Ie({accessToken:this.b.toString(),refreshToken:this.a})},oh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},P(ah,vn),ah.prototype.wa=function(t){this.pa=t,Qs(this.a,t)},ah.prototype.ka=function(){return this.pa},ah.prototype.Ga=function(){return Q(this.X)},ah.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Gi(ah.prototype,"providerId","firebase"),(t=ah.prototype).reload=function(){var t=this;return Rh(this,_h(this).then((function(){return Oh(t).then((function(){return yh(t)})).then(bh)})))},t.nc=function(t){return this.I(t).then((function(t){return new Wl(t)}))},t.I=function(t){var e=this;return Rh(this,_h(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new C("internal-error");return t.accessToken!=e.ya&&(gh(e,t.accessToken),e.dispatchEvent(new Zl("tokenChanged"))),Ch(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new C("internal-error");vh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new sh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)xh(this,e[n]);Ch(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Zl("userReloaded",{gd:t}))},t.Kc=function(t){return zi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return Rh(this,t.c(this.a,this.uid).then((function(t){return Sh(e,t),n=Eh(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},t.Bc=function(t){return zi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Rh(this,Th(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Eh(e,t,"link"),kh(e,t)})).then((function(){return n})))},t.Cc=function(t,e){var n=this;return Rh(this,Th(this,"phone").then((function(){return Hl(ph(n),t,e,_(n.pb,n))})))},t.Lc=function(t,e){var n=this;return Rh(this,Ie().then((function(){return Hl(ph(n),t,e,_(n.sb,n))})),!0)},t.Ab=function(t){var e=this;return Rh(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return Sh(e,t),e.reload()})))},t.dd=function(t){var e=this;return Rh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Sh(e,t),e.reload()})))},t.Bb=function(t){var e=this;return Rh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Sh(e,t),e.reload()})))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return _h(this);var e=this;return Rh(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Sh(e,t),Ch(e,"displayName",t.displayName||null),Ch(e,"photoURL",t.photoUrl||null),H(e.providerData,(function(t){"password"===t.providerId&&(Gi(t,"displayName",e.displayName),Gi(t,"photoURL",e.photoURL))})),yh(e)})).then(bh))},t.bd=function(t){var e=this;return Rh(this,Oh(this).then((function(n){return G(wh(e),t)?function(t,e,n){return Xa(t,wa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return H(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),H(wh(e),(function(t){n[t]||Ph(e,t)})),n[Do.PROVIDER_ID]||Gi(e,"phoneNumber",null),yh(e)})):yh(e).then((function(){throw new C("no-such-provider")}))})))},t.delete=function(){var t=this;return Rh(this,this.I().then((function(e){return Xa(t.a,_a,{idToken:e})})).then((function(){t.dispatchEvent(new Zl("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");uh(t,null),lh(t,null),ch(t,null),t.G=[],t.A=!0,fh(t),Gi(t,"refreshToken",null),t.i&&Cl(t.i,t)}))},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,i){"linkViaPopup"!=t&&"reauthViaPopup"!=t||i!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?_(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?_(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):null},t.Dc=function(t){var e=this;return Ah(this,"linkViaPopup",t,(function(){return Th(e,t.providerId).then((function(){return yh(e)}))}),!1)},t.Mc=function(t){return Ah(this,"reauthViaPopup",t,(function(){return Ie()}),!0)},t.Ec=function(t){var e=this;return Dh(this,"linkViaRedirect",t,(function(){return Th(e,t.providerId)}),!1)},t.Nc=function(t){return Dh(this,"reauthViaRedirect",t,(function(){return Ie()}),!0)},t.Jb=function(t,e,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Rh(this,this.I().then((function(n){return da(r.a,{requestUri:t,postBody:i,sessionId:e,idToken:n})})).then((function(t){return o=Eh(r,t,"link"),kh(r,t)})).then((function(){return o})))},t.Kb=function(t,e,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Rh(this,Ie().then((function(){return oo(fa(r.a,{requestUri:t,sessionId:e,postBody:i,tenantId:n}),r.uid)})).then((function(t){return o=Eh(r,t,"reauthenticate"),Sh(r,t),r.f=null,r.reload()})).then((function(){return o})),!0)},t.tb=function(t){var e=this,n=null;return Rh(this,this.I().then((function(e){return n=e,void 0===t||pt(t)?{}:Nr(new Or(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Db=function(t,e){var n=this,i=null;return Rh(this,this.I().then((function(t){return i=t,void 0===e||pt(e)?{}:Nr(new Or(e))})).then((function(e){return n.a.Db(i,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.ic=function(t){var e=null,n=this;return Rh(this,t=oo(Ie(t),n.uid).then((function(t){return e=Eh(n,t,"reauthenticate"),Sh(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&gt(t,this.metadata.w()),H(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),gt(t,this.N.w()),t};var Fh={name:"redirectUser",D:"session"};function Vh(t){return Ku(t.b,Fh,t.a)}function Lh(t){this.a=t,this.b=qu(),this.c=null,this.f=function(t){var e=Hh("local"),n=Hh("session"),i=Hh("none");return function(t,e,n){var i=Yu(e,n),r=Gu(t,e.D);return t.get(e,n).then((function(o){var s=null;try{s=ji(a.localStorage.getItem(i))}catch(u){}if(s&&!o)return a.localStorage.removeItem(i),t.set(e,s,n);s&&o&&"localStorage"!=r.type&&a.localStorage.removeItem(i)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(r){return r?n:t.b.get(i,t.a).then((function(n){return n?i:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Bh,t.a).then((function(t){return t?Hh(t):e}))}))}))})).then((function(e){return t.c=e,Uh(t,e.D)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Hh("local"),this.a,_(this.g,this))}function Uh(t,e){var n,i=[];for(n in Wu)Wu[n]!==e&&i.push(Ku(t.b,Hh(Wu[n]),t.a));return i.push(Ku(t.b,Bh,t.a)),function(t){return new ve((function(e,n){var i=t.length,r=[];if(i)for(var o=function(t,n){i--,r[t]=n,0==i&&e(r)},s=function(t){n(t)},a=0;a<t.length;a++)Se(t[a],w(o,a),s);else e(r)}))}(i)}Lh.prototype.g=function(){var t=this,e=Hh("local");Gh(this,(function(){return Ie().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return Uh(t,"local").then((function(){t.c=e}))}))}))};var Bh={name:"persistence",D:"session"};function Hh(t){return{name:"authUser",D:t}}function Wh(t,e){return Gh(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function zh(t){return Gh(t,(function(){return Ku(t.b,t.c,t.a)}))}function qh(t,e,n){return Gh(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Mh(t||{})}))}))}function Gh(t,e){return t.f=t.f.then(e,e),t.f}function Yh(t){if(this.m=!1,Gi(this,"settings",new Ul),Gi(this,"app",t),!ec(this).options||!ec(this).options.apiKey)throw new C("invalid-api-key");t=i.a.SDK_VERSION?Pi(i.a.SDK_VERSION):null,this.a=new Ws(ec(this).options&&ec(this).options.apiKey,k(O),t),this.R=[],this.u=[],this.P=[],this.ac=i.a.INTERNAL.createSubscribe(_(this.yc,this)),this.X=void 0,this.bc=i.a.INTERNAL.createSubscribe(_(this.zc,this)),Jh(this,null),this.l=new Lh(ec(this).options.apiKey+":"+ec(this).name),this.G=new Nh(ec(this).options.apiKey+":"+ec(this).name),this.$=oc(this,function(t){var e=ec(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Fh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Mh(t||{})}))}(t.G,ec(t).options.authDomain).then((function(e){return(t.o=e)&&(e.ha=t.G),Vh(t.G)}));return oc(t,e)}(t).then((function(){return qh(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.o&&(t.o.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Wh(t.l,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:zh(t.l)}))):null})).then((function(e){Jh(t,e||null)}));return oc(t,n)}(this)),this.i=oc(this,function(t){return t.$.then((function(){return Zh(t)})).s((function(){})).then((function(){if(!t.m)return t.pa()})).s((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(Hh("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=_(this.Yc,this),this.Ba=_(this.da,this),this.ya=_(this.kc,this),this.za=_(this.vc,this),this.Aa=_(this.wc,this),this.b=null,function(t){var e=ec(t).options.authDomain,n=ec(t).options.apiKey;e&&Si()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=jl(e,n,ec(t).name,t.f),Pl(t.b,t),nc(t)&&mh(nc(t)),t.o){mh(t.o);var i=t.o;i.wa(t.ka()),uh(i,t),hh(i=t.o,t.N),ch(i,t),$s((i=t.o).a,t.f),lh(i,t),t.o=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Fc,this),this.A=0,vn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function Kh(t){Ye.call(this,"languageCodeChanged"),this.h=t}function Xh(t){Ye.call(this,"emulatorConfigChanged"),this.c=t}function Qh(t){Ye.call(this,"frameworkChanged"),this.f=t}function $h(t){return t.gb||Oe(new C("auth-domain-config-required"))}function Zh(t){if(!Si())return Oe(new C("operation-not-supported-in-this-environment"));var e=$h(t).then((function(){return t.b.qa()})).then((function(t){return t?Ki(t):null}));return oc(t,e)}function Jh(t,e){nc(t)&&(function(t,e){K(t.R,(function(t){return t==e}))}(nc(t),t.Ba),ln(nc(t),"tokenChanged",t.ya),ln(nc(t),"userDeleted",t.za),ln(nc(t),"userInvalidated",t.Aa),fh(nc(t))),e&&(e.R.push(t.Ba),sn(e,"tokenChanged",t.ya),sn(e,"userDeleted",t.za),sn(e,"userInvalidated",t.Aa),0<t.A&&dh(e)),Gi(t,"currentUser",e),e&&(e.wa(t.ka()),uh(e,t),hh(e,t.N),ch(e,t),$s(e.a,t.f),lh(e,t))}function tc(t,e){var n=null,i=null;return oc(t,e.then((function(e){return n=Ro(e),i=qr(e),function(t,e){var n={};return n.apiKey=ec(t).options.apiKey,n.authDomain=ec(t).options.authDomain,n.appName=ec(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,i){var r=new ah(t,e);return n&&(r.ha=n),i&&hh(r,i),r.reload().then((function(){return r}))}(n,e,t.G,t.Ga())})).then((function(e){return nc(t)&&e.uid==nc(t).uid?(Ih(nc(t),e),t.da(e)):(Jh(t,e),mh(e),t.da(e))})).then((function(){rc(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Kl(e.w(),t,_(t.jc,t))),n||e})).then((function(){return Ki({user:nc(t),credential:n,additionalUserInfo:i,operationType:"signIn"})})))}function ec(t){return t.app}function nc(t){return t.currentUser}function ic(t){return nc(t)&&nc(t)._lat||null}function rc(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](ic(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](ic(t))}}function oc(t,e){return t.R.push(e),e.na((function(){Y(t.R,e)})),e}function sc(){}function ac(){this.a={},this.b=1e12}Lh.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new C("invalid-persistence-type"),n=new C("unsupported-persistence-type");t:{for(i in Wu)if(Wu[i]==t){var i=!0;break t}i=!1}if(!i||"string"!=typeof t)throw e;switch(mi()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!xu()&&"none"!==t)throw n;break;default:if(!Oi()&&"none"!==t)throw n}}(t),Gh(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(i){return e=i,Uh(n,t)})).then((function(){if(n.c=Hh(t),e)return n.b.set(n.c,e,n.a)})):Ie()}))},P(Yh,vn),P(Kh,Ye),P(Xh,Ye),P(Qh,Ye),(t=Yh.prototype).wb=function(t){return oc(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,Qs(this.a,this.aa),this.dispatchEvent(new Kh(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new C("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Li("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&di().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})),this.f={url:t},this.settings.hb=!0,$s(this.a,this.f),this.dispatchEvent(new Xh(this.f))}},t.Fc=function(t){this.N.push(t),Js(this.a,i.a.SDK_VERSION?Pi(i.a.SDK_VERSION,this.N):null),this.dispatchEvent(new Qh(this.N))},t.Ga=function(){return Q(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:ec(this).options.apiKey,authDomain:ec(this).options.authDomain,appName:ec(this).name,currentUser:nc(this)&&nc(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,i){"signInViaPopup"==t&&this.h==i&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?_(this.hc,this):null},t.hc=function(t,e,n,i){var r=this,o={requestUri:t,postBody:i,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),r.$.then((function(){return tc(r,pa(r.a,o))}))},t.Wc=function(t){if(!Si())return Oe(new C("operation-not-supported-in-this-environment"));var e=this,n=zr(t.providerId),r=Ri(),o=null;(!ki()||gi())&&ec(this).options.authDomain&&t.isOAuthProvider&&(o=hu(ec(this).options.authDomain,ec(this).options.apiKey,ec(this).name,"signInViaPopup",t,null,r,i.a.SDK_VERSION||null,null,null,this.S(),this.f));var s=hi(o,n&&n.ua,n&&n.ta);return oc(this,n=$h(this).then((function(n){return Sl(n,s,"signInViaPopup",t,r,!!o,e.S())})).then((function(){return new ve((function(t,n){e.ma("signInViaPopup",null,new C("cancelled-popup-request"),e.h),e.g=t,e.O=n,e.h=r,e.c=kl(e.b,e,"signInViaPopup",s,r)}))})).then((function(t){return s&&li(s),t?Ki(t):null})).s((function(t){throw s&&li(s),t})))},t.Xc=function(t){if(!Si())return Oe(new C("operation-not-supported-in-this-environment"));var e=this;return oc(this,$h(this).then((function(){return function(t){return Gh(t,(function(){return t.b.set(Bh,t.c.D,t.a)}))}(e.l)})).then((function(){return El(e.b,"signInViaRedirect",t,void 0,e.S())})))},t.qa=function(){var t=this;return Zh(this).then((function(e){return t.b&&Nl(t.b.b),e})).s((function(e){throw t.b&&Nl(t.b.b),e}))},t.cd=function(t){if(!t)return Oe(new C("null-user"));if(this.W!=t.tenantId)return Oe(new C("tenant-id-mismatch"));var e=this,n={};n.apiKey=ec(this).options.apiKey,n.authDomain=ec(this).options.authDomain,n.appName=ec(this).name;var i=function(t,e,n,i){var r=t.b,o={};return o[qs]=r.b&&r.b.toString(),o.refreshToken=r.a,e=new ah(e||{apiKey:t.l,authDomain:t.o,appName:t.m},o),n&&(e.ha=n),i&&hh(e,i),Ih(e,t),e}(t,n,e.G,e.Ga());return oc(this,this.i.then((function(){if(ec(e).options.apiKey!=t.l)return i.reload()})).then((function(){return nc(e)&&t.uid==nc(e).uid?(Ih(nc(e),t),e.da(t)):(Jh(e,i),mh(i),e.da(i))})).then((function(){rc(e)})))},t.zb=function(){var t=this;return oc(this,this.i.then((function(){return t.b&&Nl(t.b.b),nc(t)?(Jh(t,null),zh(t.l).then((function(){rc(t)}))):Ie()})))},t.Yc=function(){var t=this;return qh(this.l,ec(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=nc(t)&&e){n=nc(t).uid;var i=e.uid;n=null!=n&&""!==n&&null!=i&&""!==i&&n==i}if(n)return Ih(nc(t),e),nc(t).I();(nc(t)||e)&&(Jh(t,e),e&&(mh(e),e.ha=t.G),t.b&&Pl(t.b,t),rc(t))}}))},t.da=function(t){return Wh(this.l,t)},t.kc=function(){rc(this),this.da(nc(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then((function(){return tc(e,Ie(t))}))},t.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(nc(e))}))},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),oc(t,t.i.then((function(){!t.m&&G(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(ic(t)))})))}(this,(function(){t.next(nc(e))}))},t.Hc=function(t,e,n){var i=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(nc(i)):"function"==typeof t.next&&t.next(nc(i))})),this.ac(t,e,n)},t.Gc=function(t,e,n){var i=this;return this.ba&&Promise.resolve().then((function(){i.X=i.getUid(),"function"==typeof t?t(nc(i)):"function"==typeof t.next&&t.next(nc(i))})),this.bc(t,e,n)},t.mc=function(t){var e=this;return oc(this,this.i.then((function(){return nc(e)?nc(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Sc=function(t){var e=this;return this.i.then((function(){return tc(e,Xa(e.a,Wa,{token:t}))})).then((function(t){var n=t.user;return Ch(n,"isAnonymous",!1),e.da(n),t}))},t.Tc=function(t,e){var n=this;return this.i.then((function(){return tc(n,Xa(n.a,za,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.i.then((function(){return tc(n,Xa(n.a,va,{email:t,password:e}))}))},t.Za=function(t){var e=this;return this.i.then((function(){return tc(e,t.ja(e.a))}))},t.Rc=function(t){return zi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.i.then((function(){var e=nc(t);if(e&&e.isAnonymous){var n=Ki({providerId:null,isNewUser:!1});return Ki({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return tc(t,t.a.yb()).then((function(e){var n=e.user;return Ch(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return nc(this)&&nc(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&nc(this)&&dh(nc(this))},t.Oc=function(t){var e=this;H(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&nc(this)&&fh(nc(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),oc(this,this.i.then((function(){e.m||G(e.u,t)&&t(ic(e))})))},t.removeAuthTokenListener=function(t){K(this.u,(function(e){return e==t}))},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Hh("local"),t.a,this.pa),this.b&&(Cl(this.b,this),Nl(this.b.b)),Promise.resolve()},t.gc=function(t){return oc(this,function(t,e){return Xa(t,ba,{identifier:e,continueUri:Ti()?si():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Ac=function(t){return!!To(t)},t.vb=function(t,e){var n=this;return oc(this,Ie().then((function(){var t=new Or(e);if(!t.c)throw new C("argument-error",Er+" must be true when sending sign in link to email");return Nr(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},t.mb=function(t,e){return oc(this,this.a.mb(t,e).then((function(){})))},t.Qa=function(t){return oc(this,this.a.Qa(t).then((function(t){return new ir(t)})))},t.ib=function(t){return oc(this,this.a.ib(t).then((function(){})))},t.ub=function(t,e){var n=this;return oc(this,Ie().then((function(){return void 0===e||pt(e)?{}:Nr(new Or(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},t.Vc=function(t,e){return oc(this,Hl(this,t,e,_(this.Za,this)))},t.Uc=function(t,e){var n=this;return oc(this,Ie().then((function(){var i=e||si(),r=So(t,i);if(!(i=To(i)))throw new C("argument-error","Invalid email link!");if(i.tenantId!==n.S())throw new C("tenant-id-mismatch");return n.Za(r)})))},sc.prototype.render=function(){},sc.prototype.reset=function(){},sc.prototype.getResponse=function(){},sc.prototype.execute=function(){};var uc=null;function lc(t,e){return(e=hc(e))&&t.a[e]||null}function hc(t){return(t=void 0===t?1e12:t)?t.toString():null}function cc(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=oe(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():sn(this.f,"click",this.i)}function pc(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function dc(){}function fc(){}ac.prototype.render=function(t,e){return this.a[this.b.toString()]=new cc(t,e),this.b++},ac.prototype.reset=function(t){var e=lc(this,t);t=hc(t),e&&t&&(e.delete(),delete this.a[t])},ac.prototype.getResponse=function(t){return(t=lc(this,t))?t.getResponse():null},ac.prototype.execute=function(t){(t=lc(this,t))&&t.execute()},cc.prototype.getResponse=function(){return pc(this),this.b},cc.prototype.execute=function(){pc(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(i){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(i){}t.h&&t.execute()}),6e4)}),500))},cc.prototype.delete=function(){pc(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},Gi(dc,"FACTOR_ID","phone"),fc.prototype.g=function(){return uc||(uc=new ac),Ie(uc)},fc.prototype.c=function(){};var gc=null;function yc(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var mc=new mt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),vc=new Fi(3e4,6e4);yc.prototype.g=function(t){var e=this;return new ve((function(n,i){var r=setTimeout((function(){i(new C("network-request-failed"))}),vc.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(r),n(a.grecaptcha)}else clearTimeout(r),i(new C("internal-error"));delete a[e.a]},Ie(Ns(Ct(mc,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(r),i(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(r),n(a.grecaptcha))}))},yc.prototype.c=function(){this.b--};var bc=null;function _c(t,e,n,i,r,o,s){if(Gi(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s?(gc||(gc=new fc),s=gc):(bc||(bc=new yc),s=bc),this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Pc])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Cc],!a.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!oe(e)||!this.i&&oe(e).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ws(t,o||null,r||null),this.u=i||function(){return null};var u=this;this.l=[];var l=this.a[wc];this.a[wc]=function(t){if(Ic(u,t),"function"==typeof l)l(t);else if("string"==typeof l){var e=Ii(l,a);"function"==typeof e&&e(t)}};var h=this.a[xc];this.a[xc]=function(){if(Ic(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Ii(h,a);"function"==typeof t&&t()}}}var wc="callback",xc="expired-callback",Pc="sitekey",Cc="size";function Ic(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(i){}}function Oc(t,e){return t.h.push(e),e.na((function(){Y(t.h,e)})),e}function Sc(t){if(t.A)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function Tc(t,e,n){var r=!1;try{this.b=n||i.a.app()}catch(a){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=i.a.SDK_VERSION?Pi(i.a.SDK_VERSION,s):null,_c.call(this,n,t,e,(function(){try{var t=o.b.auth().ka()}catch(e){t=null}return t}),s,k(O),r)}function Ec(t,e,n,i){t:{n=Array.prototype.slice.call(n);for(var r=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(o=e.length,n.length<r||o<n.length)i="Expected "+(r==o?1==r?"1 argument":r+" arguments":r+"-"+o+" arguments")+" but got "+n.length+".";else{for(r=0;r<n.length;r++)if(o=e[r].optional&&void 0===n[r],!e[r].K(n[r])&&!o){if(e=e[r],0>r||r>=kc.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");n=kc[r],i=(i?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}i=null}}if(i)throw new C("argument-error",t+" failed: "+i)}(t=_c.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Oc(this,Ie().then((function(){if(Ti()&&!yi())return di();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,Xa(t.o,Da,{})})).then((function(e){t.a[Pc]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},t.render=function(){Sc(this);var t=this;return Oc(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.i){var n=oe(e);e=function(t,e,n){var i=arguments,r=document,o=String(i[0]),s=i[1];if(!re&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Bt(s.name),'"'),s.type){o.push(' type="',Bt(s.type),'"');var a={};gt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ce(r,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):se(o,s)),2<i.length&&he(r,o,i),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Sc(this);var t=this;return Oc(this,this.render().then((function(e){return new ve((function(n){var i=t.g.getResponse(e);if(i)n(i);else{var r=function(e){e&&(function(t,e){K(t.l,(function(t){return t==e}))}(t,r),n(e))};t.l.push(r),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Sc(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Sc(this),this.A=!0,this.v.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=oe(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},P(Tc,_c);var kc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ac(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Dc(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function jc(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:f}}function Rc(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Mc(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Nc(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){return!!e&&!(!e.ja||t&&e.providerId!==t)}}}function Fc(t,e){return f(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Vc(t){return f(t)&&"string"==typeof t.uid}function Lc(t,e,n,i){return{name:n||"",J:t.J+" or "+e.J,optional:!!i,K:function(n){return t.K(n)||e.K(n)}}}function Uc(t,e){for(var n in e){var i=e[n].name;t[i]=Wc(i,t[n],e[n].j)}}function Bc(t,e){for(var n in e){var i=e[n].name;i!==n&&Object.defineProperty(t,i,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,i){Ec(t,[n],[i],!0),this[e]=i}),i,n,e[n].jb),enumerable:!0})}}function Hc(t,e,n,i){t[e]=Wc(e,n,i)}function Wc(t,e,n){function i(){var t=Array.prototype.slice.call(arguments);return Ec(o,n,t),e.apply(this,t)}if(!n)return e;var r,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(r in e)i[r]=e[r];for(r in e.prototype)i.prototype[r]=e.prototype[r];return i}Uc(Yh.prototype,{ib:{name:"applyActionCode",j:[Ac("code")]},Qa:{name:"checkActionCode",j:[Ac("code")]},mb:{name:"confirmPasswordReset",j:[Ac("code"),Ac("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Ac("email"),Ac("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Ac("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Ac("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Lc(jc(),Rc(),"nextOrObserver"),Rc("opt_error",!0),Rc("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Lc(jc(),Rc(),"nextOrObserver"),Rc("opt_error",!0),Rc("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Ac("email"),Lc(jc("opt_actionCodeSettings",!0),Mc(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Ac("email"),jc("actionCodeSettings")]},wb:{name:"setPersistence",j:[Ac("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Nc()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Nc()]},Sc:{name:"signInWithCustomToken",j:[Ac("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Ac("email"),Ac("password")]},Uc:{name:"signInWithEmailLink",j:[Ac("email"),Ac("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Ac("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[Lc({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof ah)}},Mc(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ac(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Ac("url")]},hd:{name:"verifyPasswordResetCode",j:[Ac("code")]}}),Bc(Yh.prototype,{lc:{name:"languageCode",jb:Lc(Ac(),Mc(),"languageCode")},ti:{name:"tenantId",jb:Lc(Ac(),Mc(),"tenantId")}}),(Yh.Persistence=Wu).LOCAL="local",Yh.Persistence.SESSION="session",Yh.Persistence.NONE="none",Uc(ah.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Dc("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Dc("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Nc()]},pb:{name:"linkWithCredential",j:[Nc()]},Cc:{name:"linkWithPhoneNumber",j:[Ac("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Nc()]},sb:{name:"reauthenticateWithCredential",j:[Nc()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Ac("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Lc(jc("opt_actionCodeSettings",!0),Mc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ac(null,!0)]},bd:{name:"unlink",j:[Ac("provider")]},Ab:{name:"updateEmail",j:[Ac("email")]},Bb:{name:"updatePassword",j:[Ac("password")]},dd:{name:"updatePhoneNumber",j:[Nc("phone")]},Cb:{name:"updateProfile",j:[jc("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Ac("email"),Lc(jc("opt_actionCodeSettings",!0),Mc(null,!0),"opt_actionCodeSettings",!0)]}}),Uc(ac.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Uc(sc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Uc(ve.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Bc(Ul.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Dc("appVerificationDisabledForTesting")}}),Uc(Bl.prototype,{confirm:{name:"confirm",j:[Ac("verificationCode")]}}),Hc(ro,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[co,Io,ko,uo],i=0;i<n.length;i++)if(e=n[i](t))return e;return null}),[Lc(Ac(),jc(),"json")]),Hc(Oo,"credential",(function(t,e){return new Co(t,e)}),[Ac("email"),Ac("password")]),Uc(Co.prototype,{w:{name:"toJSON",j:[Ac(null,!0)]}}),Uc(yo.prototype,{Ca:{name:"addScope",j:[Ac("scope")]},Ka:{name:"setCustomParameters",j:[jc("customOAuthParameters")]}}),Hc(yo,"credential",mo,[Lc(Ac(),jc(),"token")]),Hc(Oo,"credentialWithLink",So,[Ac("email"),Ac("emailLink")]),Uc(vo.prototype,{Ca:{name:"addScope",j:[Ac("scope")]},Ka:{name:"setCustomParameters",j:[jc("customOAuthParameters")]}}),Hc(vo,"credential",bo,[Lc(Ac(),jc(),"token")]),Uc(_o.prototype,{Ca:{name:"addScope",j:[Ac("scope")]},Ka:{name:"setCustomParameters",j:[jc("customOAuthParameters")]}}),Hc(_o,"credential",wo,[Lc(Ac(),Lc(jc(),Mc()),"idToken"),Lc(Ac(),Mc(),"accessToken",!0)]),Uc(xo.prototype,{Ka:{name:"setCustomParameters",j:[jc("customOAuthParameters")]}}),Hc(xo,"credential",Po,[Lc(Ac(),jc(),"token"),Ac("secret",!0)]),Uc(go.prototype,{Ca:{name:"addScope",j:[Ac("scope")]},credential:{name:"credential",j:[Lc(Ac(),Lc(jc(),Mc()),"optionsOrIdToken"),Lc(Ac(),Mc(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[jc("customOAuthParameters")]}}),Uc(lo.prototype,{w:{name:"toJSON",j:[Ac(null,!0)]}}),Uc(so.prototype,{w:{name:"toJSON",j:[Ac(null,!0)]}}),Hc(Do,"credential",jo,[Ac("verificationId"),Ac("verificationCode")]),Uc(Do.prototype,{eb:{name:"verifyPhoneNumber",j:[Lc(Ac(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Fc(t.session,no)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Fc(t.session,io)&&Vc(t.multiFactorHint):t.session&&t.multiFactorUid?Fc(t.session,io)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Uc(Eo.prototype,{w:{name:"toJSON",j:[Ac(null,!0)]}}),Uc(C.prototype,{toJSON:{name:"toJSON",j:[Ac(null,!0)]}}),Uc(Ho.prototype,{toJSON:{name:"toJSON",j:[Ac(null,!0)]}}),Uc(Bo.prototype,{toJSON:{name:"toJSON",j:[Ac(null,!0)]}}),Uc(Yl.prototype,{toJSON:{name:"toJSON",j:[Ac(null,!0)]}}),Uc(zl.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),Uc(Jl.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Ac("displayName",!0)]},ad:{name:"unenroll",j:[Lc({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Vc},Ac(),"multiFactorInfoIdentifier")]}}),Uc(Tc.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Hc(mr,"parseLink",Ir,[Ac("link")]),Hc(dc,"assertion",(function(t){return new $l(t)}),[Nc("phone")]),function(){if(void 0===i.a||!i.a.INTERNAL||!i.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:or,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:rr,VERIFY_AND_CHANGE_EMAIL:sr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Yh,AuthCredential:ro,Error:C};Hc(t,"EmailAuthProvider",Oo,[]),Hc(t,"FacebookAuthProvider",yo,[]),Hc(t,"GithubAuthProvider",vo,[]),Hc(t,"GoogleAuthProvider",_o,[]),Hc(t,"TwitterAuthProvider",xo,[]),Hc(t,"OAuthProvider",go,[Ac("providerId")]),Hc(t,"SAMLAuthProvider",fo,[Ac("providerId")]),Hc(t,"PhoneAuthProvider",Do,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Yh)}}]),Hc(t,"RecaptchaVerifier",Tc,[Lc(Ac(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),jc("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof i.a.app.App)}}]),Hc(t,"ActionCodeURL",mr,[]),Hc(t,"PhoneMultiFactorGenerator",dc,[]),i.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Yh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),i.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.mc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),i.a.registerVersion("@firebase/auth","0.15.1"),i.a.INTERNAL.extendNamespace({User:ah})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},zIRd:function(t,e,n){"use strict";var i,r,o=n("30Go"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),l=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),h=new s.b("app","Firebase",l),c="@firebase/app",p="[DEFAULT]",d=((r={})[c]="fire-core",r["@firebase/analytics"]="fire-analytics",r["@firebase/auth"]="fire-auth",r["@firebase/database"]="fire-rtdb",r["@firebase/functions"]="fire-fn",r["@firebase/installations"]="fire-iid",r["@firebase/messaging"]="fire-fcm",r["@firebase/performance"]="fire-perf",r["@firebase/remote-config"]="fire-rc",r["@firebase/storage"]="fire-gcs",r["@firebase/firestore"]="fire-fst",r["fire-js"]="fire-js",r["firebase-wrapper"]="fire-js-all",r),f=new u.b("@firebase/app"),g=function(){function t(t,e,n){var i,r,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.m)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return u}),"PUBLIC"));try{for(var l=Object(o.h)(this.firebase_.INTERNAL.components.values()),h=l.next();!h.done;h=l.next())this._addComponent(h.value)}catch(c){i={error:c}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=p),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=p),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var o=r;void 0===o.name&&(o.name=p);var a=o.name;if("string"!=typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if(Object(s.k)(e,a))throw h.create("duplicate-app",{appName:a});var u=new t(n,o,i);return e[a]=u,u},app:r,registerVersion:function(t,e,n){var i,r=null!==(i=d[t])&&void 0!==i?i:t;n&&(r+="-"+n);var o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+r+'" with version "'+e+'":'];return o&&u.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}l(new a.a(r+"-version",(function(){return{library:r,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:l,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function r(t){if(t=t||p,!Object(s.k)(e,t))throw h.create("no-app",{appName:t});return e[t]}function l(a){var u,l,c=a.name;if(n.has(c))return f.debug("There were multiple attempts to register component "+c+"."),"PUBLIC"===a.type?i[c]:null;if(n.set(c,a),"PUBLIC"===a.type){var p=function(t){if(void 0===t&&(t=r()),"function"!=typeof t[c])throw h.create("invalid-app-argument",{appName:c});return t[c]()};void 0!==a.serviceProps&&Object(s.n)(p,a.serviceProps),i[c]=p,t.prototype[c]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,c).apply(this,a.multipleInstances?t:[])}}try{for(var d=Object(o.h)(Object.keys(e)),g=d.next();!g.done;g=d.next())e[g.value]._addComponent(a)}catch(y){u={error:y}}finally{try{g&&!g.done&&(l=d.return)&&l.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?i[c]:null}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),r.App=t,i}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.n)(e,t)},createSubscribe:s.l,ErrorFactory:s.b,deepExtend:s.n}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.r)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.y)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion(c,"0.6.13",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";function i(t){return"function"==typeof t}n.r(e);let r=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function l(t){return null!==t&&"object"==typeof t}const h=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let c=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(i(o)){r&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){e=a instanceof h?p(a.errors):[a]}}if(u(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(l(n))try{n.unsubscribe()}catch(a){e=e||[],a instanceof h?e=e.concat(p(a.errors)):e.push(a)}}}if(e)throw new h(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function p(t){return t.reduce((t,e)=>t.concat(e instanceof h?e.errors:e),[])}const d=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends c{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof f?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[d](){return this}static create(t,e,n){const i=new f(t,e,n);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends f{constructor(t,e,n,r){let o;super(),this._parentSubscriber=t;let s=this;i(e)?o=e:e&&(o=e.next,n=e.error,r=e.complete,e!==a&&(s=Object.create(e),i(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(s(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const y=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function m(t){return t}let v=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:i}=this,r=function(t,e,n){if(t){if(t instanceof f)return t;if(t[d])return t[d]()}return t||e||n?new f(t,e,n):new f(a)}(t,e,n);if(r.add(i?i.call(r,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),o.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof f?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=b(e))((e,n)=>{let i;i=this.subscribe(e=>{try{t(e)}catch(r){n(r),i&&i.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[y](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?m:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=b(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function b(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const _=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class w extends c{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class x extends f{constructor(t){super(t),this.destination=t}}let P=(()=>{class t extends v{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[d](){return new x(this)}lift(t){const e=new C(this,this);return e.operator=t,e}next(t){if(this.closed)throw new _;if(!this.isStopped){const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].next(t)}}error(t){if(this.closed)throw new _;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new _;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let i=0;i<e;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new _;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new _;return this.hasError?(t.error(this.thrownError),c.EMPTY):this.isStopped?(t.complete(),c.EMPTY):(this.observers.push(t),new w(this,t))}asObservable(){const t=new v;return t.source=this,t}}return t.create=(t,e)=>new C(t,e),t})();class C extends P{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):c.EMPTY}}function I(t){return t&&"function"==typeof t.schedule}function O(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new S(t,e))}}class S{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new T(t,this.project,this.thisArg))}}class T extends f{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const E=t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()};function k(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const A=k(),D=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function j(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const R=t=>{if(t&&"function"==typeof t[y])return i=t,t=>{const e=i[y]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(D(t))return E(t);if(j(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);if(t&&"function"==typeof t[A])return e=t,t=>{const n=e[A]();for(;;){let e;try{e=n.next()}catch(i){return t.error(i),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=l(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,i};function M(t,e){return new v(n=>{const i=new c;let r=0;return i.add(e.schedule((function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i})}function N(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[y]}(t))return function(t,e){return new v(n=>{const i=new c;return i.add(e.schedule(()=>{const r=t[y]();i.add(r.subscribe({next(t){i.add(e.schedule(()=>n.next(t)))},error(t){i.add(e.schedule(()=>n.error(t)))},complete(){i.add(e.schedule(()=>n.complete()))}}))})),i})}(t,e);if(j(t))return function(t,e){return new v(n=>{const i=new c;return i.add(e.schedule(()=>t.then(t=>{i.add(e.schedule(()=>{n.next(t),i.add(e.schedule(()=>n.complete()))}))},t=>{i.add(e.schedule(()=>n.error(t)))}))),i})}(t,e);if(D(t))return M(t,e);if(function(t){return t&&"function"==typeof t[A]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new v(n=>{const i=new c;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=t[A](),i.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=r.next();t=n.value,e=n.done}catch(i){return void n.error(i)}e?n.complete():(n.next(t),this.schedule())})))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof v?t:new v(R(t))}class F extends f{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class V extends f{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function L(t,e){if(!e.closed)return t instanceof v?t.subscribe(e):R(t)(e)}function U(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(U((n,i)=>N(t(n,i)).pipe(O((t,r)=>e(n,t,i,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new B(t,n)))}class B{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new H(t,this.project,this.concurrent))}}class H extends V{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e)}_innerSub(t){const e=new F(this),n=this.destination;n.add(e);const i=L(t,e);i!==e&&n.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function W(t=Number.POSITIVE_INFINITY){return U(m,t)}function z(t,e){return e?M(t,e):new v(E(t))}function q(){return function(t){return t.lift(new G(t))}}class G{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const i=new Y(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class Y extends f{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}class K extends v{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new c,t.add(this.source.subscribe(new Q(this.getSubject(),this))),t.closed&&(this._connection=null,t=c.EMPTY)),t}refCount(){return q()(this)}}const X=(()=>{const t=K.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Q extends x{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function $(){return new P}function Z(t){return{toString:t}.toString()}const J="__parameters__";function tt(t,e,n){return Z(()=>{const i=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function r(...t){if(this instanceof r)return i.apply(this,t),this;const e=new r(...t);return n.annotation=e,n;function n(t,n,i){const r=t.hasOwnProperty(J)?t[J]:Object.defineProperty(t,J,{value:[]})[J];for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(e),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}const et=tt("Inject",t=>({token:t})),nt=tt("Optional"),it=tt("Self"),rt=tt("SkipSelf");var ot=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function st(t){for(let e in t)if(t[e]===st)return e;throw Error("Could not find renamed property on target object.")}function at(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ut(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function lt(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function ht(t){return ct(t,t[dt])||ct(t,t[yt])}function ct(t,e){return e&&e.token===t?e:null}function pt(t){return t&&(t.hasOwnProperty(ft)||t.hasOwnProperty(mt))?t[ft]:null}const dt=st({"\u0275prov":st}),ft=st({"\u0275inj":st}),gt=st({"\u0275provFallback":st}),yt=st({ngInjectableDef:st}),mt=st({ngInjectorDef:st});function vt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(vt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function bt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const _t=st({__forward_ref__:st});function wt(t){return t.__forward_ref__=wt,t.toString=function(){return vt(this())},t}function xt(t){return Pt(t)?t():t}function Pt(t){return"function"==typeof t&&t.hasOwnProperty(_t)&&t.__forward_ref__===wt}const Ct="undefined"!=typeof globalThis&&globalThis,It="undefined"!=typeof window&&window,Ot="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,St="undefined"!=typeof global&&global,Tt=Ct||St||It||Ot,Et=st({"\u0275cmp":st}),kt=st({"\u0275dir":st}),At=st({"\u0275pipe":st}),Dt=st({"\u0275mod":st}),jt=st({"\u0275loc":st}),Rt=st({"\u0275fac":st}),Mt=st({__NG_ELEMENT_ID__:st});class Nt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ut({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const Ft=new Nt("INJECTOR",-1),Vt={},Lt=/\n/gm,Ut="__source",Bt=st({provide:String,useValue:st});let Ht,Wt=void 0;function zt(t){const e=Wt;return Wt=t,e}function qt(t){const e=Ht;return Ht=t,e}function Gt(t,e=ot.Default){if(void 0===Wt)throw new Error("inject() must be called from an injection context");return null===Wt?Kt(t,void 0,e):Wt.get(t,e&ot.Optional?null:void 0,e)}function Yt(t,e=ot.Default){return(Ht||Gt)(xt(t),e)}function Kt(t,e,n){const i=ht(t);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&ot.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${vt(t)}]`)}function Xt(t){const e=[];for(let n=0;n<t.length;n++){const i=xt(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=ot.Default;for(let e=0;e<i.length;e++){const r=i[e];r instanceof nt||"Optional"===r.ngMetadataName||r===nt?n|=ot.Optional:r instanceof rt||"SkipSelf"===r.ngMetadataName||r===rt?n|=ot.SkipSelf:r instanceof it||"Self"===r.ngMetadataName||r===it?n|=ot.Self:t=r instanceof et||r===et?r.token:r}e.push(Yt(t,n))}else e.push(Yt(i))}return e}class Qt{get(t,e=Vt){if(e===Vt){const e=new Error(`NullInjectorError: No provider for ${vt(t)}!`);throw e.name="NullInjectorError",e}return e}}class $t{}class Zt{}function Jt(t,e){t.forEach(t=>Array.isArray(t)?Jt(t,e):e(t))}function te(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ee(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ne(t,e,n){let i=re(t,e);return i>=0?t[1|i]=n:(i=~i,function(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function ie(t,e){const n=re(t,e);if(n>=0)return t[1|n]}function re(t,e){return function(t,e,n){let i=0,r=t.length>>1;for(;r!==i;){const n=i+(r-i>>1),o=t[n<<1];if(e===o)return n<<1;o>e?r=n:i=n+1}return~(r<<1)}(t,e)}var oe=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),se=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const ae={},ue=[];let le=0;function he(t){return Z(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===oe.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ue,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||se.Emulated,id:"c",styles:t.styles||ue,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,r=t.features,o=t.pipes;return n.id+=le++,n.inputs=ge(t.inputs,e),n.outputs=ge(t.outputs),r&&r.forEach(t=>t(n)),n.directiveDefs=i?()=>("function"==typeof i?i():i).map(ce):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(pe):null,n})}function ce(t){return ve(t)||function(t){return t[kt]||null}(t)}function pe(t){return function(t){return t[At]||null}(t)}const de={};function fe(t){const e={type:t.type,bootstrap:t.bootstrap||ue,declarations:t.declarations||ue,imports:t.imports||ue,exports:t.exports||ue,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&Z(()=>{de[t.id]=t.type}),e}function ge(t,e){if(null==t)return ae;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,e&&(e[r]=o)}return n}const ye=he;function me(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ve(t){return t[Et]||null}function be(t,e){return t.hasOwnProperty(Rt)?t[Rt]:null}function _e(t,e){const n=t[Dt]||null;if(!n&&!0===e)throw new Error(`Type ${vt(t)} does not have '\u0275mod' property.`);return n}const we=20,xe=10;function Pe(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ce(t){return Array.isArray(t)&&!0===t[1]}function Ie(t){return 0!=(8&t.flags)}function Oe(t){return 2==(2&t.flags)}function Se(t){return 1==(1&t.flags)}function Te(t){return null!==t.template}function Ee(t){return 0!=(512&t[2])}function ke(t){return"string"==typeof t?t:null==t?"":""+t}function Ae(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ke(t)}const De=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Tt))();function je(t){return t instanceof Function?t():t}function Re(t,e){const n=e?" in "+e:"";throw new Error(`No provider for ${Ae(t)} found${n}`)}class Me{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ne(){return Fe}function Fe(t){return t.type.prototype.ngOnChanges&&(t.setInput=Le),Ve}function Ve(){const t=Ue(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===ae)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Le(t,e,n,i){const r=Ue(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:ae,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Me(u&&u.currentValue,e,s===ae),t[i]=e}function Ue(t){return t.__ngSimpleChanges__||null}Ne.ngInherit=!0;let Be=void 0;function He(t){return!!t.listen}const We={createRenderer:(t,e)=>void 0!==Be?Be:"undefined"!=typeof document?document:void 0};function ze(t){for(;Array.isArray(t);)t=t[0];return t}function qe(t,e){return ze(e[t+we])}function Ge(t,e){return ze(e[t.index])}function Ye(t,e){return t.data[e+we]}function Ke(t,e){return t[e+we]}function Xe(t,e){const n=e[t];return Pe(n)?n:n[0]}function Qe(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function $e(t){return 128==(128&t[2])}function Ze(t,e){return null===t||null==e?null:t[e]}function Je(t){t[18]=0}function tn(t,e){t[5]+=e;let n=t,i=t[3];for(;null!==i&&(1===e&&1===n[5]||-1===e&&0===n[5]);)i[5]+=e,n=i,i=i[3]}const en={lFrame:_n(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function nn(){return en.bindingsEnabled}function rn(){return en.lFrame.lView}function on(){return en.lFrame.tView}function sn(t){en.lFrame.contextLView=t}function an(){return en.lFrame.currentTNode}function un(t,e){en.lFrame.currentTNode=t,en.lFrame.isParent=e}function ln(){return en.lFrame.isParent}function hn(){return en.isInCheckNoChangesMode}function cn(t){en.isInCheckNoChangesMode=t}function pn(){const t=en.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function dn(){return en.lFrame.bindingIndex++}function fn(t,e){const n=en.lFrame;n.bindingIndex=n.bindingRootIndex=t,gn(e)}function gn(t){en.lFrame.currentDirectiveIndex=t}function yn(t){en.lFrame.currentQueryIndex=t}function mn(t,e){const n=bn();en.lFrame=n,n.currentTNode=e,n.lView=t}function vn(t){const e=bn(),n=t[1];en.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex}function bn(){const t=en.lFrame,e=null===t?null:t.child;return null===e?_n(t):e}function _n(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function wn(){const t=en.lFrame;return en.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const xn=wn;function Pn(){const t=wn();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Cn(){return en.lFrame.selectedIndex}function In(t){en.lFrame.selectedIndex=t}function On(){const t=en.lFrame;return Ye(t.tView,t.selectedIndex)}function Sn(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:r,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;i&&(t.contentHooks||(t.contentHooks=[])).push(-n,i),r&&((t.contentHooks||(t.contentHooks=[])).push(n,r),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,r)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Tn(t,e,n){An(t,e,3,n)}function En(t,e,n,i){(3&t[2])===n&&An(t,e,n,i)}function kn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function An(t,e,n,i){const r=null!=i?i:-1;let o=0;for(let s=void 0!==i?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=i&&o>=i)break}else e[s]<0&&(t[18]+=65536),(o<r||-1==r)&&(Dn(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Dn(t,e,n,i){const r=n[i]<0,o=n[i+1],s=t[r?-n[i]:n[i]];r?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const jn=-1;class Rn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Mn(t,e,n){const i=He(t);let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const s=n[r++],a=n[r++],u=n[r++];i?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++r];Fn(s)?i&&t.setProperty(e,s,a):i?t.setAttribute(e,s,a):e.setAttribute(s,a),r++}}return r}function Nn(t){return 3===t||4===t||6===t}function Fn(t){return 64===t.charCodeAt(0)}function Vn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Ln(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Ln(t,e,n,i,r){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}function Un(t){return t!==jn}function Bn(t){return 32767&t}function Hn(t,e){let n=t>>16,i=e;for(;n>0;)i=i[15],n--;return i}let Wn=!0;function zn(t){const e=Wn;return Wn=t,e}let qn=0;function Gn(t,e){const n=Kn(t,e);if(-1!==n)return n;const i=e[1];i.firstCreatePass&&(t.injectorIndex=e.length,Yn(i.data,t),Yn(e,null),Yn(i.blueprint,null));const r=Xn(t,e),o=t.injectorIndex;if(Un(r)){const t=Bn(r),n=Hn(r,e),i=n[1].data;for(let r=0;r<8;r++)e[o+r]=n[t+r]|i[t+r]}return e[o+8]=r,o}function Yn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Kn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Xn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){const t=r[1],e=t.type;if(i=2===e?t.declTNode:1===e?r[6]:null,null===i)return jn;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return jn}function Qn(t,e,n){!function(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Mt)&&(i=n[Mt]),null==i&&(i=n[Mt]=qn++);const r=255&i,o=1<<r,s=64&r,a=32&r,u=e.data;128&r?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function $n(t,e,n,i=ot.Default,r){if(null!==t){const r=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Mt)?t[Mt]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof r){mn(e,t);try{const t=r();if(null!=t||i&ot.Optional)return t;Re(n)}finally{xn()}}else if("number"==typeof r){if(-1===r)return new ii(t,e);let o=null,s=Kn(t,e),a=jn,u=i&ot.Host?e[16][6]:null;for((-1===s||i&ot.SkipSelf)&&(a=-1===s?Xn(t,e):e[s+8],a!==jn&&ni(i,!1)?(o=e[1],s=Bn(a),e=Hn(a,e)):s=-1);-1!==s;){const t=e[1];if(ei(r,s,t.data)){const t=Jn(s,e,n,o,i,u);if(t!==Zn)return t}a=e[s+8],a!==jn&&ni(i,e[1].data[s+8]===u)&&ei(r,s,e)?(o=t,s=Bn(a),e=Hn(a,e)):s=-1}}}if(i&ot.Optional&&void 0===r&&(r=null),0==(i&(ot.Self|ot.Host))){const t=e[9],o=qt(void 0);try{return t?t.get(n,r,i&ot.Optional):Kt(n,r,i&ot.Optional)}finally{qt(o)}}if(i&ot.Optional)return r;Re(n,"NodeInjector")}const Zn={};function Jn(t,e,n,i,r,o){const s=e[1],a=s.data[t+8],u=function(t,e,n,i,r){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,l=o>>20,h=r?a+l:t.directiveEnd;for(let c=i?a:a+l;c<h;c++){const t=s[c];if(c<u&&n===t||c>=u&&t.type===n)return c}if(r){const t=s[u];if(t&&Te(t)&&t.type===n)return u}return null}(a,s,n,null==i?Oe(a)&&Wn:i!=s&&2===a.type,r&ot.Host&&o===a);return null!==u?ti(e,s,u,a):Zn}function ti(t,e,n,i){let r=t[n];const o=e.data;if(r instanceof Rn){const s=r;s.resolving&&function(t,e){throw new Error("Circular dependency in DI detected for "+t)}(Ae(o[n]));const a=zn(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?qt(s.injectImpl):null;mn(t,i);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&function(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const i=Fe(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,r),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&qt(u),zn(a),s.resolving=!1,xn()}}return r}function ei(t,e,n){const i=64&t,r=32&t;let o;return o=128&t?i?r?n[e+7]:n[e+6]:r?n[e+5]:n[e+4]:i?r?n[e+3]:n[e+2]:r?n[e+1]:n[e],!!(o&1<<t)}function ni(t,e){return!(t&ot.Self||t&ot.Host&&e)}class ii{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return $n(this._tNode,this._lView,t,void 0,e)}}function ri(t){const e=t;if(Pt(t))return()=>{const t=ri(xt(e));return t?t():null};let n=be(e);if(null===n){const t=pt(e);n=t&&t.factory}return n||null}function oi(t){return Z(()=>{const e=t.prototype.constructor,n=e[Rt]||ri(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const t=r[Rt]||ri(r);if(t&&t!==n)return t;r=Object.getPrototypeOf(r)}return t=>new t})}function si(t){return t.ngDebugContext}function ai(t){return t.ngOriginalError}function ui(t,...e){t.error(...e)}class li{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t.ngErrorLogger||ui}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?si(t)?si(t):this._findContext(ai(t)):null}_findOriginalError(t){let e=ai(t);for(;e&&ai(e);)e=ai(e);return e}}class hi{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}function ci(t){return t instanceof hi?t.changingThisBreaksApplicationSecurity:t}let pi=!1;function di(){return pi=!0,true}const fi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,gi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var yi=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function mi(t){const e=function(){const t=rn();return t&&t[12]}();return e?e.sanitize(yi.URL,t)||"":function(t,e){const n=function(t){return t instanceof hi&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}(t,"URL")?ci(t):(n=ke(t),(n=String(n)).match(fi)||n.match(gi)?n:(di()&&console.warn(`WARNING: sanitizing unsafe URL value ${n} (see http://g.co/ng/security#xss)`),"unsafe:"+n));var n}function vi(t,e){t.__ngContext__=e}function bi(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const n=e.length;if(r+n===i||t.charCodeAt(r+n)<=32)return r}n=r+1}}const _i="ng-template";function wi(t,e,n){let i=0;for(;i<t.length;){let r=t[i++];if(n&&"class"===r){if(r=t[i],-1!==bi(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function xi(t){return 0===t.type&&t.tagName!==_i}function Pi(t,e,n){return e===(0!==t.type||n?t.tagName:_i)}function Ci(t,e,n){let i=4;const r=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Nn(t[e]))return e;return t.length}(r);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&i){if(i=2|1&i,""!==u&&!Pi(t,u,n)||""===u&&1===e.length){if(Ii(i))return!1;s=!0}}else{const l=8&i?u:e[++a];if(8&i&&null!==t.attrs){if(!wi(t.attrs,l,n)){if(Ii(i))return!1;s=!0}continue}const h=Oi(8&i?"class":u,r,xi(t),n);if(-1===h){if(Ii(i))return!1;s=!0;continue}if(""!==l){let t;t=h>o?"":r[h+1].toLowerCase();const e=8&i?t:null;if(e&&-1!==bi(e,l,0)||2&i&&l!==t){if(Ii(i))return!1;s=!0}}}}else{if(!s&&!Ii(i)&&!Ii(u))return!1;if(s&&Ii(u))continue;s=!1,i=u|1&i}}return Ii(i)||s}function Ii(t){return 0==(1&t)}function Oi(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let n=!1;for(;r<e.length;){const i=e[r];if(i===t)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let t=e[++r];for(;"string"==typeof t;)t=e[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function Si(t,e,n=!1){for(let i=0;i<e.length;i++)if(Ci(t,e[i],n))return!0;return!1}function Ti(t,e){return t?":not("+e.trim()+")":e}function Ei(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&i){const e=t[++n];r+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""===r||Ii(s)||(e+=Ti(o,r),r=""),i=s,o=o||!Ii(i);n++}return""!==r&&(e+=Ti(o,r)),e}const ki={};function Ai(t){const e=t[3];return Ce(e)?e[3]:e}function Di(t){return Ri(t[13])}function ji(t){return Ri(t[4])}function Ri(t){for(;null!==t&&!Ce(t);)t=t[4];return t}function Mi(t){Ni(on(),rn(),Cn()+t,hn())}function Ni(t,e,n,i){if(!i)if(3==(3&e[2])){const i=t.preOrderCheckHooks;null!==i&&Tn(e,i,n)}else{const i=t.preOrderHooks;null!==i&&En(e,i,0,n)}In(n)}function Fi(t,e){return t<<17|e<<2}function Vi(t){return t>>17&32767}function Li(t){return 2|t}function Ui(t){return(131068&t)>>2}function Bi(t,e){return-131069&t|e<<2}function Hi(t){return 1|t}function Wi(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],o=n[i+1];if(-1!==o){const n=t.data[o];yn(r),n.contentQueries(2,e[o],o)}}}function zi(t,e,n){return He(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function qi(t,e,n,i,r,o,s,a,u,l){const h=e.blueprint.slice();return h[0]=r,h[2]=140|i,Je(h),h[3]=h[15]=t,h[8]=n,h[10]=s||t&&t[10],h[11]=a||t&&t[11],h[12]=u||t&&t[12]||null,h[9]=l||t&&t[9]||null,h[6]=o,h[16]=2==e.type?t[16]:h,h}function Gi(t,e,n,i,r){const o=e+we,s=t.data[o]||function(t,e,n,i,r){const o=an(),s=ln(),a=t.data[e]=function(t,e,n,i,r,o){return{type:n,index:i,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(t,o,n,i,r);return un(s,!0),s}function Yi(t,e,n){vn(e);try{const i=t.viewQuery;null!==i&&xr(1,i,n);const r=t.template;null!==r&&Qi(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Wi(t,e),t.staticViewQueries&&xr(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)mr(t,e[n])}(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),i}finally{e[2]&=-5,Pn()}}function Ki(t,e,n,i){const r=e[2];if(256==(256&r))return;vn(e);const o=hn();try{Je(e),en.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Qi(t,e,n,2,i);const s=3==(3&r);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Tn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&En(e,n,0,null),kn(e,0)}if(function(t){for(let e=Di(t);null!==e;e=ji(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],i=n[3];0==(1024&n[2])&&tn(i,1),n[2]|=1024}}}(e),function(t){for(let e=Di(t);null!==e;e=ji(e))for(let t=xe;t<e.length;t++){const n=e[t],i=n[1];$e(n)&&Ki(i,n,i.template,n[8])}}(e),null!==t.contentQueries&&Wi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Tn(e,n)}else{const n=t.contentHooks;null!==n&&En(e,n,1),kn(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let i=t.expandoStartIndex,r=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,In(o),i+=9+n[++t],r=i):i+=s:(null!==s&&(fn(i,r),s(2,e[r])),r++)}}}finally{In(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)yr(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&xr(2,u,i),!o)if(s){const n=t.viewCheckHooks;null!==n&&Tn(e,n)}else{const n=t.viewHooks;null!==n&&En(e,n,2),kn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,tn(e[3],-1))}finally{Pn()}}function Xi(t,e,n,i){const r=e[10],o=!hn(),s=4==(4&e[2]);try{o&&!s&&r.begin&&r.begin(),s&&Yi(t,e,i),Ki(t,e,n,i)}finally{o&&!s&&r.end&&r.end()}}function Qi(t,e,n,i,r){const o=Cn();try{In(-1),2&i&&e.length>we&&Ni(t,e,0,hn()),n(i,r)}finally{In(o)}}function $i(t,e,n){nn()&&(function(t,e,n,i){const r=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Gn(n,e),vi(i,e);const s=n.initialInputs;for(let a=r;a<o;a++){const i=t.data[a],o=Te(i);o&&pr(e,n,i);const u=ti(e,t,a,n);vi(u,e),null!==s&&dr(0,a-r,u,i,0,s),o&&(Xe(n.index,e)[8]=u)}}(t,e,n,Ge(n,e)),128==(128&n.flags)&&function(t,e,n){const i=n.directiveStart,r=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-we,u=en.lFrame.currentDirectiveIndex;try{In(a);for(let n=i;n<r;n++){const i=t.data[n],r=e[n];gn(n),null!==i.hostBindings||0!==i.hostVars||null!==i.hostAttrs?sr(i,r):s&&o.push(null)}}finally{In(-1),gn(u)}}(t,e,n))}function Zi(t,e,n=Ge){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(e,t):t[s];t[r++]=a}}}function Ji(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=tr(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function tr(t,e,n,i,r,o,s,a,u,l){const h=we+i,c=h+r,p=function(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:ki);return n}(h,c),d="function"==typeof l?l():l;return p[1]={type:t,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:c,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function er(t,e,n){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(e,r):n[i]=[e,r]}return n}function nr(t,e,n,i,r,o,s,a){const u=Ge(e,n);let l,h=e.inputs;!a&&null!=h&&(l=h[i])?(Or(t,n,l,i,r),Oe(e)&&function(t,e){const n=Xe(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):2===e.type&&(i=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=s?s(r,e.tagName||"",i):r,He(o)?o.setProperty(u,i,r):Fn(i)||(u.setProperty?u.setProperty(i,r):u[i]=r))}function ir(t,e,n,i){let r=!1;if(nn()){const o=function(t,e,n){const i=t.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const s=i[o];Si(n,s.selectors,!1)&&(r||(r=[]),Qn(Gn(n,e),t,s.type),Te(s)?(ur(t,n),r.unshift(s)):r.push(s))}return r}(t,e,n),s=null===i?null:{"":-1};if(null!==o){let i=0;r=!0,hr(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}ar(t,n,o.length);let a=!1,u=!1;for(let r=0;r<o.length;r++){const l=o[r];n.mergedAttrs=Vn(n.mergedAttrs,l.hostAttrs),cr(t,e,l),lr(t.data.length-1,l,s),null!==l.contentQueries&&(n.flags|=8),null===l.hostBindings&&null===l.hostAttrs&&0===l.hostVars||(n.flags|=128);const h=l.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-we),a=!0),u||!h.ngOnChanges&&!h.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-we),u=!0),rr(t,l),i+=l.hostVars}!function(t,e){const n=e.directiveEnd,i=t.data,r=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=i[u],n=t.inputs,l=null===r||xi(e)?null:fr(n,r);o.push(l),s=er(n,u,s),a=er(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),or(t,e,i)}s&&function(t,e,n){if(e){const i=t.localNames=[];for(let t=0;t<e.length;t+=2){const r=n[e[t+1]];if(null==r)throw new Error(`Export of name '${e[t+1]}' not found!`);i.push(e[t],r)}}}(n,i,s)}return n.mergedAttrs=Vn(n.mergedAttrs,n.attrs),r}function rr(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function or(t,e,n){for(let i=0;i<n;i++)e.push(ki),t.blueprint.push(ki),t.data.push(null)}function sr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ar(t,e,n){const i=we-e.index,r=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(i,r,n)}function ur(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function lr(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Te(e)&&(n[""]=t)}}function hr(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function cr(t,e,n){t.data.push(n);const i=n.factory||(n.factory=be(n.type)),r=new Rn(i,Te(n),null);t.blueprint.push(r),e.push(r)}function pr(t,e,n){const i=Ge(e,t),r=Ji(n),o=t[10],s=vr(t,qi(t,r,null,n.onPush?64:16,i,e,o,o.createRenderer(i,n),null,null));t[e.index]=s}function dr(t,e,n,i,r,o){const s=o[e];if(null!==s){const t=i.setInput;for(let e=0;e<s.length;){const r=s[e++],o=s[e++],a=s[e++];null!==t?i.setInput(n,a,r,o):n[o]=a}}}function fr(t,e){let n=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,t[r],e[i+1])),i+=2}else i+=2;else i+=4}return n}function gr(t,e,n,i){return new Array(t,!0,!1,e,null,0,i,n,null,null)}function yr(t,e){const n=Xe(e,t);if($e(n)){const t=n[1];80&n[2]?Ki(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let i=Di(e);null!==i;i=ji(i))for(let e=xe;e<i.length;e++){const n=i[e];if(1024&n[2]){const t=n[1];Ki(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=Xe(n[i],e);$e(r)&&r[5]>0&&t(r)}}(n)}}function mr(t,e){const n=Xe(e,t),i=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n),Yi(i,n,n[8])}function vr(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function br(t){for(;t;){t[2]|=64;const e=Ai(t);if(Ee(t)&&!e)return t;t=e}return null}function _r(t,e,n){const i=e[10];i.begin&&i.begin();try{Ki(t,e,t.template,n)}catch(r){throw Ir(e,r),r}finally{i.end&&i.end()}}function wr(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],i=Qe(n),r=i[1];Xi(r,i,r.template,n)}}(t[8])}function xr(t,e,n){yn(0),e(t,n)}const Pr=(()=>Promise.resolve(null))();function Cr(t){return t[7]||(t[7]=[])}function Ir(t,e){const n=t[9],i=n?n.get(li,null):null;i&&i.handleError(e)}function Or(t,e,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],l=t.data[s];null!==l.setInput?l.setInput(u,r,i,a):u[a]=r}}function Sr(t,e,n,i,r){if(null!=i){let o,s=!1;Ce(i)?o=i:Pe(i)&&(s=!0,i=i[0]);const a=ze(i);0===t&&null!==n?null==r?jr(e,n,a):Dr(e,n,a,r||null):1===t&&null!==n?Dr(e,n,a,r||null):2===t?function(t,e,n){const i=Mr(t,e);i&&function(t,e,n,i){He(t)?t.removeChild(e,n,i):e.removeChild(n)}(t,i,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,i,r){const o=n[7];o!==ze(n)&&Sr(e,t,i,o,r);for(let s=xe;s<n.length;s++){const r=n[s];Vr(r[1],r,t,e,i,o)}}(e,t,o,n,r)}}function Tr(t,e){const n=t[9],i=n.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,tn(r,-1)),n.splice(i,1)}function Er(t,e){if(t.length<=xe)return;const n=xe+e,i=t[n];if(i){const o=i[17];null!==o&&o!==t&&Tr(o,i),e>0&&(t[n-1][4]=i[4]);const s=ee(t,xe+e);Vr(i[1],r=i,r[11],2,null,null),r[0]=null,r[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}var r;return i}function kr(t,e){if(!(256&e[2])){const n=e[11];He(n)&&n.destroyNode&&Vr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ar(t[1],t);for(;e;){let n=null;if(Pe(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Pe(e)&&Ar(e[1],e),e=e[3];null===e&&(e=t),Pe(e)&&Ar(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ar(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const t=e[n[i]];if(!(t instanceof Rn)){const e=n[i+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const r=n[i+1],o="function"==typeof r?r(e):ze(e[r]),s=t[n[i+2]],a=n[i+3];"boolean"==typeof a?o.removeEventListener(n[i],s,a):a>=0?t[a]():t[-a].unsubscribe(),i+=2}else n[i].call(t[n[i+1]]);e[7]=null}}(t,e),1===e[1].type&&He(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Ce(e[3])){n!==e[3]&&Tr(n,e);const i=e[19];null!==i&&i.detachView(t)}}}function Dr(t,e,n,i){He(t)?t.insertBefore(e,n,i):e.insertBefore(n,i,!0)}function jr(t,e,n){He(t)?t.appendChild(e,n):e.appendChild(n)}function Rr(t,e,n,i){null!==i?Dr(t,e,n,i):jr(t,e,n)}function Mr(t,e){return He(t)?t.parentNode(e):e.parentNode}function Nr(t,e,n,i){const r=function(t,e,n){let i=e.parent;for(;null!=i&&(3===i.type||4===i.type);)i=(e=i).parent;if(null===i)return n[0];if(e&&4===e.type&&4&e.flags)return Ge(e,n).parentNode;if(2&i.flags){const e=t.data,n=e[e[i.index].directiveStart].encapsulation;if(n!==se.ShadowDom&&n!==se.Native)return null}return Ge(i,n)}(t,i,e);if(null!=r){const t=e[11],o=function(t,e){return 3===t.type||4===t.type?Ge(t,e):null}(i.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)Rr(t,r,n[e],o);else Rr(t,r,n,o)}}function Fr(t,e,n,i,r,o,s){for(;null!=n;){const a=i[n.index],u=n.type;s&&0===e&&(a&&vi(ze(a),i),n.flags|=4),64!=(64&n.flags)&&(3===u||4===u?(Fr(t,e,n.child,i,r,o,!1),Sr(e,t,r,a,o)):1===u?Lr(t,e,i,n,r,o):Sr(e,t,r,a,o)),n=s?n.projectionNext:n.next}}function Vr(t,e,n,i,r,o){Fr(n,i,t.firstChild,e,r,o,!1)}function Lr(t,e,n,i,r,o){const s=n[16],a=s[6].projection[i.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Sr(e,t,r,a[u],o);else Fr(t,e,a,s[3],r,o,!0)}function Ur(t,e,n){He(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Br(t,e,n){He(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Hr{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return function t(e,n,i,r,o=!1){for(;null!==i;){const s=n[i.index];if(null!==s&&r.push(ze(s)),Ce(s))for(let e=xe;e<s.length;e++){const n=s[e],i=n[1].firstChild;null!==i&&t(n[1],n,i,r)}const a=i.type;if(3===a||4===a)t(e,n,i.child,r);else if(1===a){const e=n[16],o=e[6].projection[i.projection];if(Array.isArray(o))r.push(...o);else{const n=Ai(e);t(n[1],n,o,r,!0)}}i=o?i.projectionNext:i.next}return r}(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}kr(this._lView[1],this._lView)}onDestroy(t){!function(t,e,n,i){const r=Cr(e);r.push(null),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(i,r.length-1)}(this._lView[1],this._lView,0,t)}markForCheck(){br(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){_r(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){cn(!0);try{_r(t,e,n)}finally{cn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Vr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Wr extends Hr{constructor(t){super(t),this._view=t}detectChanges(){wr(this._view)}checkNoChanges(){!function(t){cn(!0);try{wr(t)}finally{cn(!1)}}(this._view)}get context(){return null}}let zr,qr,Gr;function Yr(t,e,n){return zr||(zr=class extends t{}),new zr(Ge(e,n))}let Kr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Xr(),t})();const Xr=function(t=!1){return function(t,e,n){if(!n&&Oe(t)){const n=Xe(t.index,e);return new Hr(n,n)}return 2===t.type||0===t.type||3===t.type||4===t.type?new Hr(e[16],e):null}(an(),rn(),t)},Qr=Function,$r=new Nt("Set Injector scope."),Zr={},Jr={},to=[];let eo=void 0;function no(){return void 0===eo&&(eo=new Qt),eo}function io(t,e=null,n=null,i){return new ro(t,n,e||no(),i)}class ro{constructor(t,e,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];e&&Jt(e,n=>this.processProvider(n,t,e)),Jt([t],t=>this.processInjectorType(t,[],r)),this.records.set(Ft,ao(void 0,this));const o=this.records.get($r);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof t?null:vt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Vt,n=ot.Default){this.assertNotDestroyed();const i=zt(this);try{if(!(n&ot.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(r=t)||"object"==typeof r&&r instanceof Nt)&&ht(t);e=n&&this.injectableDefInScope(n)?ao(oo(t),Zr):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&ot.Self?no():this.parent).get(t,e=n&ot.Optional&&e===Vt?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(vt(t)),i)throw o;return function(t,e,n,i){const r=t.ngTempTokenPath;throw e[Ut]&&r.unshift(e[Ut]),t.message=function(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=vt(e);if(Array.isArray(e))r=e.map(vt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t.push(n+":"+("string"==typeof i?JSON.stringify(i):vt(i)))}r=`{${t.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Lt,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{zt(i)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(vt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=xt(t)))return!1;let i=pt(t);const r=null==i&&t.ngModule||void 0,o=void 0===r?t:r,s=-1!==n.indexOf(o);if(void 0!==r&&(i=pt(r)),null==i)return!1;if(null!=i.imports&&!s){let t;n.push(o);try{Jt(i.imports,i=>{this.processInjectorType(i,e,n)&&(void 0===t&&(t=[]),t.push(i))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:i}=t[e];Jt(i,t=>this.processProvider(t,n,i||to))}}this.injectorDefTypes.add(o),this.records.set(o,ao(i.factory,Zr));const a=i.providers;if(null!=a&&!s){const e=t;Jt(a,t=>this.processProvider(t,e,a))}return void 0!==r&&void 0!==t.providers}processProvider(t,e,n){let i=lo(t=xt(t))?t:xt(t&&t.provide);const r=function(t,e,n){return uo(t)?ao(void 0,t.useValue):ao(so(t),Zr)}(t);if(lo(t)||!0!==t.multi)this.records.get(i);else{let e=this.records.get(i);e||(e=ao(void 0,Zr,!0),e.factory=()=>Xt(e.multi),this.records.set(i,e)),i=t,e.multi.push(t)}this.records.set(i,r)}hydrate(t,e){var n;return e.value===Zr&&(e.value=Jr,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function oo(t){const e=ht(t),n=null!==e?e.factory:be(t);if(null!==n)return n;const i=pt(t);if(null!==i)return i.factory;if(t instanceof Nt)throw new Error(`Token ${vt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let i=0;i<t;i++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${vt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[dt]||t[yt]||t[gt]&&t[gt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function so(t,e,n){let i=void 0;if(lo(t)){const e=xt(t);return be(e)||oo(e)}if(uo(t))i=()=>xt(t.useValue);else if((r=t)&&r.useFactory)i=()=>t.useFactory(...Xt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))i=()=>Yt(xt(t.useExisting));else{const e=xt(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return be(e)||oo(e);i=()=>new e(...Xt(t.deps))}var r;return i}function ao(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uo(t){return null!==t&&"object"==typeof t&&Bt in t}function lo(t){return"function"==typeof t}const ho=function(t,e,n){return function(t,e=null,n=null,i){const r=io(t,e,n,i);return r._resolveInjectorDefTypes(),r}({name:n},e,t,n)};let co=(()=>{class t{static create(t,e){return Array.isArray(t)?ho(t,e,""):ho(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Vt,t.NULL=new Qt,t.\u0275prov=ut({token:t,providedIn:"any",factory:()=>Yt(Ft)}),t.__NG_ELEMENT_ID__=-1,t})();const po=new Nt("AnalyzeForEntryComponents");function fo(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?r=bt(r,t):2==o&&(i=bt(i,t+": "+e[++s]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function go(t,e){const n=Qe(t)[1],i=n.data.length-1;Sn(n,{directiveStart:i,directiveEnd:i+1})}function yo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const i=[t];for(;e;){let r=void 0;if(Te(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(n){i.push(r);const e=t;e.inputs=mo(t.inputs),e.declaredInputs=mo(t.declaredInputs),e.outputs=mo(t.outputs);const n=r.hostBindings;n&&_o(t,n);const o=r.viewQuery,s=r.contentQueries;if(o&&vo(t,o),s&&bo(t,s),at(t.inputs,r.inputs),at(t.declaredInputs,r.declaredInputs),at(t.outputs,r.outputs),Te(r)&&r.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(r.data.animation)}}const e=r.features;if(e)for(let i=0;i<e.length;i++){const r=e[i];r&&r.ngInherit&&r(t),r===yo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Vn(r.hostAttrs,n=Vn(n,r.hostAttrs))}}(i)}function mo(t){return t===ae?{}:t===ue?[]:t}function vo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,i)=>{e(t,i),n(t,i)}:e}function bo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,i,r)=>{e(t,i,r),n(t,i,r)}:e}function _o(t,e){const n=t.hostBindings;t.hostBindings=n?(t,i)=>{e(t,i),n(t,i)}:e}let wo=null;function xo(){if(!wo){const t=Tt.Symbol;if(t&&t.iterator)wo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(wo=n)}}}return wo}class Po{constructor(t){this.wrapped=t}static wrap(t){return new Po(t)}static unwrap(t){return Po.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Po}}function Co(t){return!!Io(t)&&(Array.isArray(t)||!(t instanceof Map)&&xo()in t)}function Io(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Oo(t,e,n){return t[e]=n}function So(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function To(t,e,n,i){const r=rn();return So(r,dn(),e)&&(on(),function(t,e,n,i,r,o){const s=Ge(t,e),a=e[11];if(null==i)He(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==r?ke(i):r(i,t.tagName||"",n);He(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(On(),r,t,e,n,i)),To}function Eo(t,e,n,i,r,o,s,a){const u=rn(),l=on(),h=t+we,c=l.firstCreatePass?function(t,e,n,i,r,o,s,a,u){const l=e.consts,h=Gi(e,t,0,s||null,Ze(l,a));ir(e,n,h,Ze(l,u)),Sn(e,h);const c=h.tViews=tr(2,h,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,h),c.queries=e.queries.embeddedTView(h)),h}(t,l,u,e,n,i,r,o,s):l.data[h];un(c,!1);const p=u[11].createComment("");Nr(l,u,p,c),vi(p,u),vr(u,u[h]=gr(p,u,p,c)),Se(c)&&$i(l,u,c),null!=s&&Zi(u,c,a)}function ko(t){return Ke(en.lFrame.contextLView,t)}function Ao(t,e=ot.Default){const n=rn();return null===n?Yt(t,e):$n(an(),n,xt(t),e)}function Do(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let i=0;for(;i<t;){const r=n[i];if(Nn(r))break;if(0===r)i+=2;else if("number"==typeof r)for(i++;i<t&&"string"==typeof n[i];)i++;else{if(r===e)return n[i+1];i+=2}}}return null}(an(),t)}function jo(t,e,n){const i=rn();return So(i,dn(),e)&&nr(on(),On(),i,t,e,i[11],n,!1),jo}function Ro(t,e,n,i,r){const o=r?"class":"style";Or(t,n,e.inputs[o],o,i)}function Mo(t,e,n,i){const r=rn(),o=on(),s=we+t,a=r[11],u=r[s]=zi(e,a,en.lFrame.currentNamespace),l=o.firstCreatePass?function(t,e,n,i,r,o,s){const a=e.consts,u=Gi(e,t,2,r,Ze(a,o));return ir(e,n,u,Ze(a,s)),null!==u.attrs&&fo(u,u.attrs,!1),null!==u.mergedAttrs&&fo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,r,0,e,n,i):o.data[s];un(l,!0);const h=l.mergedAttrs;null!==h&&Mn(a,u,h);const c=l.classes;null!==c&&Br(a,u,c);const p=l.styles;null!==p&&Ur(a,u,p),Nr(o,r,u,l),0===en.lFrame.elementDepthCount&&vi(u,r),en.lFrame.elementDepthCount++,Se(l)&&($i(o,r,l),function(t,e,n){if(Ie(e)){const i=e.directiveEnd;for(let r=e.directiveStart;r<i;r++){const e=t.data[r];e.contentQueries&&e.contentQueries(1,n[r],r)}}}(o,l,r)),null!==i&&Zi(r,l)}function No(){let t=an();ln()?en.lFrame.isParent=!1:(t=t.parent,un(t,!1));const e=t;en.lFrame.elementDepthCount--;const n=on();n.firstCreatePass&&(Sn(n,t),Ie(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ro(n,e,rn(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ro(n,e,rn(),e.stylesWithoutHost,!1)}function Fo(t,e,n,i){Mo(t,e,n,i),No()}function Vo(){return rn()}function Lo(t){return!!t&&"function"==typeof t.then}function Uo(t){return!!t&&"function"==typeof t.subscribe}function Bo(t,e,n=!1,i){const r=rn(),o=on(),s=an();return function(t,e,n,i,r,o,s=!1,a){const u=Se(i),l=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),h=Cr(e);let c=!0;if(2===i.type){const p=Ge(i,e),d=a?a(p):ae,f=d.target||p,g=h.length,y=a?t=>a(ze(t[i.index])).target:i.index;if(He(n)){let s=null;if(!a&&u&&(s=function(t,e,n,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const t=r[o];if(t===n&&r[o+1]===i){const t=e[7],n=r[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,r,i.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,c=!1;else{o=Wo(i,e,o,!1);const t=n.listen(d.name||f,r,o);h.push(o,t),l&&l.push(r,y,g,g+1)}}else o=Wo(i,e,o,!0),f.addEventListener(r,o,s),h.push(o),l&&l.push(r,y,g,s)}const p=i.outputs;let d;if(c&&null!==p&&(d=p[r])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=h.length;h.push(o,t),l&&l.push(r,i.index,s,-(s+1))}}}(o,r,r[11],s,t,e,n,i),Bo}function Ho(t,e,n){try{return!1!==e(n)}catch(i){return Ir(t,i),!1}}function Wo(t,e,n,i){return function r(o){if(o===Function)return n;const s=2&t.flags?Xe(t.index,e):e;0==(32&e[2])&&br(s);let a=Ho(e,n,o),u=r.__ngNextListenerFn__;for(;u;)a=Ho(e,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function zo(t=1){return function(t){return(en.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,en.lFrame.contextLView))[8]}(t)}const qo=[];function Go(t,e,n,i,r){const o=t[n+1],s=null===e;let a=i?Vi(o):Ui(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Yo(t[a],e)&&(u=!0,t[a+1]=i?Hi(n):Li(n)),a=i?Vi(n):Ui(n)}u&&(t[n+1]=i?Li(o):Hi(o))}function Yo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&re(t,e)>=0}function Ko(t,e){return function(t,e,n,i){const r=rn(),o=on(),s=function(t){const e=en.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,i){const r=t.data;if(null===r[n+1]){const o=r[Cn()+we],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,i){const r=function(t){const e=en.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===r)0===e.classBindings&&(n=Qo(n=Xo(null,t,e,n,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==r)if(n=Xo(r,t,e,n,i),null===o){let n=function(t,e,n){const i=e.classBindings;if(0!==Ui(i))return t[Vi(i)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Xo(null,t,e,n[1],i),n=Qo(n,e.attrs,i),function(t,e,n,i){t[Vi(e.classBindings)]=i}(t,e,0,n))}else o=function(t,e,n){let i=void 0;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Qo(i,t[o].hostAttrs,true);return Qo(i,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(r,o,e,i),function(t,e,n,i,r,o){let s=e.classBindings,a=Vi(s),u=Ui(s);t[i]=n;let l,h=!1;if(Array.isArray(n)){const t=n;l=t[1],(null===l||re(t,l)>0)&&(h=!0)}else l=n;if(r)if(0!==u){const e=Vi(t[a+1]);t[i+1]=Fi(e,a),0!==e&&(t[e+1]=Bi(t[e+1],i)),t[a+1]=131071&t[a+1]|i<<17}else t[i+1]=Fi(a,0),0!==a&&(t[a+1]=Bi(t[a+1],i)),a=i;else t[i+1]=Fi(u,0),0===a?a=i:t[u+1]=Bi(t[u+1],i),u=i;h&&(t[i+1]=Li(t[i+1])),Go(t,l,i,!0),Go(t,l,i,!1),function(t,e,n,i,r){const o=t.residualClasses;null!=o&&"string"==typeof e&&re(o,e)>=0&&(n[i+1]=Hi(n[i+1]))}(e,l,t,i),s=Fi(a,u),e.classBindings=s}(r,o,e,n,s)}}(o,t,s,true),e!==ki&&So(r,s,e)&&function(t,e,n,i,r,o,s,a){if(2!==e.type)return;const u=t.data,l=u[a+1];Zo(1==(1&l)?$o(u,e,n,r,Ui(l),s):void 0)||(Zo(o)||function(t){return 2==(2&t)}(l)&&(o=$o(u,null,n,r,a,s)),function(t,e,n,i,r){const o=He(t);r?o?t.addClass(n,i):n.classList.add(i):o?t.removeClass(n,i):n.classList.remove(i)}(i,0,qe(Cn(),n),r,o))}(o,o.data[Cn()+we],r,r[11],t,r[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=vt(ci(t))),t}(e),true,s)}(t,e),Ko}function Xo(t,e,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],i=Qo(i,o.hostAttrs,r),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function Qo(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ne(t,s,!!n||e[++o]))}return void 0===t?null:t}function $o(t,e,n,i,r,o){const s=null===e;let a=void 0;for(;r>0;){const e=t[r],o=Array.isArray(e),u=o?e[1]:e,l=null===u;let h=n[r+1];h===ki&&(h=l?qo:void 0);let c=l?ie(h,i):u===i?h:void 0;if(o&&!Zo(c)&&(c=ie(e,i)),Zo(c)&&(a=c,s))return a;const p=t[r+1];r=s?Vi(p):Ui(p)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=ie(t,i))}return a}function Zo(t){return void 0!==t}function Jo(t,e=""){const n=rn(),i=on(),r=t+we,o=i.firstCreatePass?Gi(i,t,2,null,null):i.data[r],s=n[r]=function(t,e){return He(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Nr(i,n,s,o),un(o,!1)}function ts(t){return es("",t,""),ts}function es(t,e,n){const i=rn(),r=function(t,e,n,i){return So(t,dn(),n)?e+ke(n)+i:ki}(i,t,e,n);return r!==ki&&function(t,e,n){const i=qe(e,t),r=t[11];He(r)?r.setValue(i,n):i.textContent=n}(i,Cn(),r),es}function ns(t,e,n){const i=rn();return So(i,dn(),e)&&nr(on(),On(),i,t,e,i[11],n,!0),ns}const is=void 0;var rs=["en",[["a","p"],["AM","PM"],is],[["AM","PM"],is,is],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],is,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],is,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",is,"{1} 'at' {0}",is],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let os={};function ss(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=as(e);if(n)return n;const i=e.split("-")[0];if(n=as(i),n)return n;if("en"===i)return rs;throw new Error(`Missing locale data for the locale "${t}".`)}function as(t){return t in os||(os[t]=Tt.ng&&Tt.ng.common&&Tt.ng.common.locales&&Tt.ng.common.locales[t]),os[t]}var us=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ls="en-US";let hs=ls;function cs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,i){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(hs=t.toLowerCase().replace(/_/g,"-"))}function ps(t,e,n,i,r){if(t=xt(t),Array.isArray(t))for(let o=0;o<t.length;o++)ps(t[o],e,n,i,r);else{const o=on(),s=rn();let a=lo(t)?t:xt(t.provide),u=so(t);const l=an(),h=1048575&l.providerIndexes,c=l.directiveStart,p=l.providerIndexes>>20;if(lo(t)||!t.multi){const i=new Rn(u,r,Ao),d=gs(a,e,r?h:h+p,c);-1===d?(Qn(Gn(l,s),o,a),ds(o,t,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(i),s.push(i)):(n[d]=i,s[d]=i)}else{const d=gs(a,e,h+p,c),f=gs(a,e,h,h+p),g=d>=0&&n[d],y=f>=0&&n[f];if(r&&!y||!r&&!g){Qn(Gn(l,s),o,a);const h=function(t,e,n,i,r){const o=new Rn(t,n,Ao);return o.multi=[],o.index=e,o.componentProviders=0,fs(o,r,i&&!n),o}(r?ms:ys,n.length,r,i,u);!r&&y&&(n[f].providerFactory=h),ds(o,t,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(h),s.push(h)}else ds(o,t,d>-1?d:f,fs(n[r?f:d],u,!r&&i));!r&&i&&y&&n[f].componentProviders++}}}function ds(t,e,n,i){const r=lo(e);if(r||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[i,o]):s[t+1].push(i,o)}else s.push(n,o)}}}function fs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function gs(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function ys(t,e,n,i){return vs(this.multi,[])}function ms(t,e,n,i){const r=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ti(n,n[1],this.providerFactory.index,i);o=e.slice(0,t),vs(r,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],vs(r,o);return o}function vs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function bs(t,e=[]){return n=>{n.providersResolver=(n,i)=>function(t,e,n){const i=on();if(i.firstCreatePass){const r=Te(t);ps(n,i.data,i.blueprint,r,!0),ps(e,i.data,i.blueprint,r,!1)}}(n,i?i(t):t,e)}}class _s{}class ws{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${vt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let xs=(()=>{class t{}return t.NULL=new ws,t})(),Ps=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Cs(t),t})();const Cs=function(t){return Yr(t,an(),rn())};class Is{}var Os=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Ss=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ts(),t})();const Ts=function(){const t=rn(),e=Xe(an().index,t);return function(t){const e=t[11];if(He(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Pe(e)?e:t)};let Es=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>null}),t})();class ks{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const As=new ks("10.2.2");class Ds{constructor(){}supports(t){return Co(t)}create(t){return new Rs(t)}}const js=(t,e)=>e;class Rs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||js}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,i=0,r=null;for(;e||n;){const o=!n||e&&e.currentIndex<Vs(n,i,r)?e:n,s=Vs(o,i,r),a=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{r||(r=[]);const t=s-i,e=a-i;if(t!=e){for(let n=0;n<t;n++){const i=n<r.length?r[n]:r[n]=0,o=i+n;e<=o&&o<t&&(r[n]=i+1)}r[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Co(t))throw new Error(`Error trying to diff '${vt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,i,r=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],i=this._trackByFn(e,n),null!==r&&Object.is(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,n,i,e)),Object.is(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,e),o=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[xo()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(t,t=>{i=this._trackByFn(e,t),null!==r&&Object.is(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,t,i,e)),Object.is(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,i,e),o=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,i){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):t=this._addAfter(new Ms(e,n),r,i),t}_verifyReinsertion(t,e,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Fs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ms{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ns{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Fs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ns,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Vs(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class Ls{constructor(){}supports(t){return t instanceof Map||Io(t)}create(){return new Us}}class Us{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Io(t)))throw new Error(`Error trying to diff '${vt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new Bs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Bs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Hs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new rt,new nt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new Ds])}),t})(),Ws=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new rt,new nt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new Ls])}),t})();const zs=[new Ls],qs=new Hs([new Ds]),Gs=new Ws(zs);let Ys=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ks(t,Ps),t})();const Ks=function(t,e){return function(t,e,n,i){return qr||(qr=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=qi(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const i=this._declarationView[19];return null!==i&&(n[19]=i.createEmbeddedView(e)),Yi(e,n,t),new Hr(n)}}),0===n.type?new qr(i,n,Yr(e,n,i)):null}(t,e,an(),rn())};let Xs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Qs(t,Ps),t})();const Qs=function(t,e){return function(t,e,n,i){let r;Gr||(Gr=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Yr(e,this._hostTNode,this._hostView)}get injector(){return new ii(this._hostTNode,this._hostView)}get parentInjector(){const t=Xn(this._hostTNode,this._hostView);if(Un(t)){const e=Hn(t,this._hostView),n=Bn(t);return new ii(e[1].data[n+8],e)}return new ii(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-xe}createEmbeddedView(t,e,n){const i=t.createEmbeddedView(e||{});return this.insert(i,n),i}createComponent(t,e,n,i,r){const o=n||this.parentInjector;if(!r&&null==t.ngModule&&o){const t=o.get($t,null);t&&(r=t)}const s=t.create(o,i,void 0,r);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,i=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ce(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],i=new Gr(e,e[6],e[3]);i.detach(i.indexOf(t))}}const r=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,i){const r=xe+i,o=n.length;i>0&&(n[r-1][4]=e),i<o-xe?(e[4]=n[r],te(n,xe+i,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,n,o,r);const s=function t(e,n){const i=xe+e+1;if(i<n.length){const e=n[i],r=e[1].firstChild;if(null!==r)return function e(n,i){if(null!==i){const r=i.type;if(2===r)return Ge(i,n);if(0===r)return t(-1,n[i.index]);if(3===r||4===r){const r=i.child;if(null!==r)return e(n,r);{const e=n[i.index];return Ce(e)?t(-1,e):ze(e)}}{const t=n[16],r=t[6],o=Ai(t),s=r.projection[i.projection];return null!=s?e(o,s):e(n,i.next)}}return null}(e,r)}return n[7]}(r,o),a=n[11],u=Mr(a,o[7]);return null!==u&&function(t,e,n,i,r,o){i[0]=r,i[6]=e,Vr(t,i,n,1,r,o)}(i,o[6],a,n,u,s),t.attachToViewContainerRef(this),te(o[8],r,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Er(this._lContainer,e);n&&(ee(this._lContainer[8],e),kr(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Er(this._lContainer,e);return n&&null!=ee(this._lContainer[8],e)?new Hr(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=i[n.index];if(Ce(o))r=o;else{let t;if(3===n.type)t=ze(o);else if(t=i[11].createComment(""),Ee(i)){const e=i[11],r=Ge(n,i);Dr(e,Mr(e,r),t,function(t,e){return He(t)?t.nextSibling(e):e.nextSibling}(e,r))}else Nr(i[1],i,t,n);i[n.index]=r=gr(o,i,t,n),vr(i,r)}return new Gr(r,n,i)}(t,e,an(),rn())},$s={};class Zs extends xs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ve(t);return new ea(e,this.ngModule)}}function Js(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ta=new Nt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>De});class ea extends _s{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Ei).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Js(this.componentDef.inputs)}get outputs(){return Js(this.componentDef.outputs)}create(t,e,n,i){const r=(i=i||this.ngModule)?function(t,e){return{get:(n,i,r)=>{const o=t.get(n,$s,r);return o!==$s||i===$s?o:e.get(n,i,r)}}}(t,i.injector):t,o=r.get(Is,We),s=r.get(Es,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",l=n?function(t,e,n){if(He(t))return t.selectRootElement(e,n===se.ShadowDom);let i="string"==typeof e?t.querySelector(e):e;return i.textContent="",i}(a,n,this.componentDef.encapsulation):zi(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),h=this.componentDef.onPush?576:528,c={components:[],scheduler:De,clean:Pr,playerHandler:null,flags:0},p=tr(0,null,null,1,0,null,null,null,null,null),d=qi(null,p,c,h,null,null,o,a,s,r);let f,g;vn(d);try{const t=function(t,e,n,i,r,o){const s=n[1];n[20]=t;const a=Gi(s,0,2,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(fo(a,u,!0),null!==t&&(Mn(r,t,u),null!==a.classes&&Br(r,t,a.classes),null!==a.styles&&Ur(r,t,a.styles)));const l=i.createRenderer(t,e),h=qi(n,Ji(e),null,e.onPush?64:16,n[20],a,i,l,null,null);return s.firstCreatePass&&(Qn(Gn(a,n),s,e.type),ur(s,a),hr(a,n.length,1)),vr(n,h),n[20]=h}(l,this.componentDef,d,o,a);if(l)if(n)Mn(a,l,["ng-version",As.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&e.push(o,t[++i]):8===r&&n.push(o);else{if(!Ii(r))break;r=o}i++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Mn(a,l,t),e&&e.length>0&&Br(a,l,e.join(" "))}if(g=Ye(p,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const i=e[n];t.push(null!=i?Array.from(i):null)}}f=function(t,e,n,i,r){const o=n[1],s=function(t,e,n){const i=an();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ar(t,i,1),cr(t,e,n));const r=ti(e,t,e.length-1,i);vi(r,e);const o=Ge(i,e);return o&&vi(o,e),r}(o,n,e);i.components.push(s),t[8]=s,r&&r.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=an();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){In(a.index-we);const t=n[1];rr(t,e),or(t,n,e.hostVars),sr(e,s)}return s}(t,this.componentDef,d,c,[go]),Yi(p,d,null)}finally{Pn()}return new na(this.componentType,f,Yr(Ps,g,d),d,g)}}class na extends class{}{constructor(t,e,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Wr(i),this.componentType=t}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const ia=new Map;class ra extends $t{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Zs(this);const n=_e(t),i=t[jt]||null;i&&cs(i),this._bootstrapComponents=je(n.bootstrap),this._r3Injector=io(t,e,[{provide:$t,useValue:this},{provide:xs,useValue:this.componentFactoryResolver}],vt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=co.THROW_IF_NOT_FOUND,n=ot.Default){return t===co||t===$t||t===Ft?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class oa extends Zt{constructor(t){super(),this.moduleType=t,null!==_e(t)&&function(t){const e=new Set;!function t(n){const i=_e(n,!0),r=i.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${vt(e)} vs ${vt(e.name)}`)}(r,ia.get(r),n),ia.set(r,n));const o=je(i.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ra(this.moduleType,t)}}function sa(t,e,n){const i=pn()+t,r=rn();return r[i]===ki?Oo(r,i,n?e.call(n):e()):function(t,e){return t[e]}(r,i)}function aa(t,e,n,i){return la(rn(),pn(),t,e,n,i)}function ua(t,e){const n=t[e];return n===ki?void 0:n}function la(t,e,n,i,r,o){const s=e+n;return So(t,s,r)?Oo(t,s+1,o?i.call(o,r):i(r)):ua(t,s+1)}function ha(t,e){const n=on();let i;const r=t+we;n.firstCreatePass?(i=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=be(i.type)),s=qt(Ao);try{const e=zn(!1),i=o();return zn(e),function(t,e,n,i){const r=n+we;r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),e[r]=i}(n,rn(),t,i),i}finally{qt(s)}}function ca(t,e,n){const i=rn(),r=Ke(i,t);return da(i,pa(i,t)?la(i,pn(),e,r.transform,n,r):r.transform(n))}function pa(t,e){return t[1].data[e+we].pure}function da(t,e){return Po.isWrapped(e)&&(e=Po.unwrap(e),t[en.lFrame.bindingIndex]=ki),e}const fa=class extends P{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let i,r=t=>null,o=()=>null;t&&"object"==typeof t?(i=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(r=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(i,r,o);return t instanceof c&&t.add(s),s}},ga=new Nt("Application Initializer");let ya=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Lo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Yt(ga,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const ma=new Nt("AppId"),va={provide:ma,useFactory:function(){return`${ba()}${ba()}${ba()}`},deps:[]};function ba(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _a=new Nt("Platform Initializer"),wa=new Nt("Platform ID"),xa=new Nt("appBootstrapListener");let Pa=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Ca=new Nt("LocaleId"),Ia=new Nt("DefaultCurrencyCode");class Oa{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Sa=function(t){return new oa(t)},Ta=Sa,Ea=function(t){return Promise.resolve(Sa(t))},ka=function(t){const e=Sa(t),n=je(_e(t).declarations).reduce((t,e)=>{const n=ve(e);return n&&t.push(new ea(n)),t},[]);return new Oa(e,n)},Aa=ka,Da=function(t){return Promise.resolve(ka(t))};let ja=(()=>{class t{constructor(){this.compileModuleSync=Ta,this.compileModuleAsync=Ea,this.compileModuleAndAllComponentsSync=Aa,this.compileModuleAndAllComponentsAsync=Da}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Ra=(()=>Promise.resolve(0))();function Ma(t){"undefined"==typeof Zone?Ra.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Na{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fa(!1),this.onMicrotaskEmpty=new fa(!1),this.onStable=new fa(!1),this.onError=new fa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=Tt.requestAnimationFrame,e=Tt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Tt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ua(t),La(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ua(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,i,r,o,s,a)=>{try{return Ba(t),n.invokeTask(r,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Ha(t)}},onInvoke:(e,n,i,r,o,s,a)=>{try{return Ba(t),e.invoke(i,r,o,s,a)}finally{Ha(t)}},onHasTask:(e,n,i,r)=>{e.hasTask(i,r),n===i&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,Ua(t),La(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,n,i,r)=>(e.handleError(i,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Na.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Na.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,t,Va,Fa,Fa);try{return r.runTask(o,e,n)}finally{r.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Fa(){}const Va={};function La(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ua(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Ba(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ha(t){t._nesting--,La(t)}class Wa{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fa,this.onMicrotaskEmpty=new fa,this.onStable=new fa,this.onError=new fa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,i){return t.apply(e,n)}}let za=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Na.assertNotInAngularZone(),Ma(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ma(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let i=-1;e&&e>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==i),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Yt(Na))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),qa=(()=>{class t{constructor(){this._applications=new Map,Ka.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ka.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class Ga{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Ya,Ka=new Ga;const Xa=new Nt("AllowMultipleToken");class Qa{constructor(t,e){this.name=t,this.token=e}}function $a(t,e,n=[]){const i="Platform: "+e,r=new Nt(i);return(e=[])=>{let o=Za();if(!o||o.injector.get(Xa,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{const t=n.concat(e).concat({provide:r,useValue:!0},{provide:$r,useValue:"platform"});!function(t){if(Ya&&!Ya.destroyed&&!Ya.injector.get(Xa,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ya=t.get(Ja);const e=t.get(_a,null);e&&e.forEach(t=>t())}(co.create({providers:t,name:i}))}return function(t){const e=Za();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function Za(){return Ya&&!Ya.destroyed?Ya:null}let Ja=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Wa:("zone.js"===t?void 0:t)||new Na({enableLongStackTrace:di(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),i=[{provide:Na,useValue:n}];return n.run(()=>{const e=co.create({providers:i,parent:this.injector,name:t.moduleType.name}),r=t.create(e),o=r.injector.get(li,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.onDestroy(()=>nu(this._modules,r)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const i=n();return Lo(i)?i.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(o,n,()=>{const t=r.injector.get(ya);return t.runInitializers(),t.donePromise.then(()=>(cs(r.injector.get(Ca,ls)||ls),this._moduleDoBootstrap(r),r))})})}bootstrapModule(t,e=[]){const n=tu({},e);return function(t,e,n){const i=new oa(n);return Promise.resolve(i)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(eu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${vt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Yt(co))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function tu(t,e){return Array.isArray(e)?e.reduce(tu,t):Object.assign(Object.assign({},t),e)}let eu=(()=>{class t{constructor(t,e,n,i,r,o){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=di(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new v(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new v(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Na.assertNotInAngularZone(),Ma(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Na.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return I(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof i&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof v?t[0]:W(e)(z(t,n))}(s,a.pipe(t=>{return q()((e=$,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,X);return i.source=t,i.subjectFactory=n,i})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof _s?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const i=n.isBoundToModule?void 0:this._injector.get($t),r=n.create(co.NULL,[],e||n.selector,i);r.onDestroy(()=>{this._unloadComponent(r)});const o=r.injector.get(za,null);return o&&r.injector.get(qa).registerApplication(r.location.nativeElement,o),this._loadComponent(r),di()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;nu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(xa,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),nu(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Yt(Na),Yt(Pa),Yt(co),Yt(li),Yt(xs),Yt(ya))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function nu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class iu{}class ru{}const ou={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let su=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||ou}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,i]=t.split("#");return void 0===i&&(i="default"),n("zn8P")(e).then(t=>t[i]).then(t=>au(t,e,i)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,i]=t.split("#"),r="NgFactory";return void 0===i&&(i="default",r=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[i+r]).then(t=>au(t,e,i))}}return t.\u0275fac=function(e){return new(e||t)(Yt(ja),Yt(ru,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function au(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const uu=$a(null,"core",[{provide:wa,useValue:"unknown"},{provide:Ja,deps:[co]},{provide:qa,deps:[]},{provide:Pa,deps:[]}]),lu=[{provide:eu,useClass:eu,deps:[Na,Pa,co,li,xs,ya]},{provide:ta,deps:[Na],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ya,useClass:ya,deps:[[new nt,ga]]},{provide:ja,useClass:ja,deps:[]},va,{provide:Hs,useFactory:function(){return qs},deps:[]},{provide:Ws,useFactory:function(){return Gs},deps:[]},{provide:Ca,useFactory:function(t){return cs(t=t||"undefined"!=typeof $localize&&$localize.locale||ls),t},deps:[[new et(Ca),new nt,new rt]]},{provide:Ia,useValue:"USD"}];let hu=(()=>{class t{constructor(t){}}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Yt(eu))},providers:lu}),t})();const cu={apiKey:"AIzaSyAcQp80G_xyNgf7Ow3MTtvmz1aus0dcDlw",authDomain:"fir-project1-1118b.firebaseapp.com",databaseURL:"https://fir-project1-1118b.firebaseio.com",projectId:"fir-project1-1118b",storageBucket:"fir-project1-1118b.appspot.com",messagingSenderId:"734288531620",appId:"1:734288531620:web:88973312ff6c37c2df5631",measurementId:"G-3SJ25R54SR"};let pu=null;function du(){return pu}const fu=new Nt("DocumentToken");let gu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:yu,token:t,providedIn:"platform"}),t})();function yu(){return Yt(vu)}const mu=new Nt("Location Initialized");let vu=(()=>{class t extends gu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=du().getLocation(),this._history=du().getHistory()}getBaseHrefFromDOM(){return du().getBaseHref(this._doc)}onPopState(t){du().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){du().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){bu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){bu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Yt(fu))},t.\u0275prov=ut({factory:_u,token:t,providedIn:"platform"}),t})();function bu(){return!!window.history.pushState}function _u(){return new vu(Yt(fu))}function wu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function xu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Pu(t){return t&&"?"!==t[0]?"?"+t:t}let Cu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:Iu,token:t,providedIn:"root"}),t})();function Iu(t){const e=Yt(fu).location;return new Su(Yt(gu),e&&e.origin||"")}const Ou=new Nt("appBaseHref");let Su=(()=>{class t extends Cu{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return wu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Pu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,i){const r=this.prepareExternalUrl(n+Pu(i));this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){const r=this.prepareExternalUrl(n+Pu(i));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Yt(gu),Yt(Ou,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Tu=(()=>{class t extends Cu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=wu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,i){let r=this.prepareExternalUrl(n+Pu(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){let r=this.prepareExternalUrl(n+Pu(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Yt(gu),Yt(Ou,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Eu=(()=>{class t{constructor(t,e){this._subject=new fa,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=xu(Au(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Pu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Au(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Yt(Cu),Yt(gu))},t.normalizeQueryParams=Pu,t.joinWithSlash=wu,t.stripTrailingSlash=xu,t.\u0275prov=ut({factory:ku,token:t,providedIn:"root"}),t})();function ku(){return new Eu(Yt(Cu),Yt(gu))}function Au(t){return t.replace(/\/index.html$/,"")}var Du=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),ju=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),Ru=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),Mu=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),Nu=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function Fu(t,e){return Hu(ss(t)[us.DateFormat],e)}function Vu(t,e){return Hu(ss(t)[us.TimeFormat],e)}function Lu(t,e){return Hu(ss(t)[us.DateTimeFormat],e)}function Uu(t,e){const n=ss(t),i=n[us.NumberSymbols][e];if(void 0===i){if(e===Nu.CurrencyDecimal)return n[us.NumberSymbols][Nu.Decimal];if(e===Nu.CurrencyGroup)return n[us.NumberSymbols][Nu.Group]}return i}function Bu(t){if(!t[us.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[us.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Hu(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function Wu(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const zu=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,qu={},Gu=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Yu=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),Ku=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),Xu=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function Qu(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t}function $u(t,e,n="-",i,r){let o="";(t<0||r&&t<=0)&&(r?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return i&&(s=s.substr(s.length-e)),o+s}function Zu(t,e,n=0,i=!1,r=!1){return function(o,s){let a=function(t,e){switch(t){case Ku.FullYear:return e.getFullYear();case Ku.Month:return e.getMonth();case Ku.Date:return e.getDate();case Ku.Hours:return e.getHours();case Ku.Minutes:return e.getMinutes();case Ku.Seconds:return e.getSeconds();case Ku.FractionalSeconds:return e.getMilliseconds();case Ku.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===Ku.Hours)0===a&&-12===n&&(a=12);else if(t===Ku.FractionalSeconds)return u=e,$u(a,3).substr(0,u);var u;const l=Uu(s,Nu.MinusSign);return $u(a,e,l,i,r)}}function Ju(t,e,n=ju.Format,i=!1){return function(r,o){return function(t,e,n,i,r,o){switch(n){case Xu.Months:return function(t,e,n){const i=ss(t),r=Hu([i[us.MonthsFormat],i[us.MonthsStandalone]],e);return Hu(r,n)}(e,r,i)[t.getMonth()];case Xu.Days:return function(t,e,n){const i=ss(t),r=Hu([i[us.DaysFormat],i[us.DaysStandalone]],e);return Hu(r,n)}(e,r,i)[t.getDay()];case Xu.DayPeriods:const s=t.getHours(),a=t.getMinutes();if(o){const t=function(t){const e=ss(t);return Bu(e),(e[us.ExtraData][2]||[]).map(t=>"string"==typeof t?Wu(t):[Wu(t[0]),Wu(t[1])])}(e),n=function(t,e,n){const i=ss(t);Bu(i);const r=Hu([i[us.ExtraData][0],i[us.ExtraData][1]],e)||[];return Hu(r,n)||[]}(e,r,i),o=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,i=s>=e.hours&&a>=e.minutes,r=s<n.hours||s===n.hours&&a<n.minutes;if(e.hours<n.hours){if(i&&r)return!0}else if(i||r)return!0}else if(t.hours===s&&t.minutes===a)return!0;return!1});if(-1!==o)return n[o]}return function(t,e,n){const i=ss(t),r=Hu([i[us.DayPeriodsFormat],i[us.DayPeriodsStandalone]],e);return Hu(r,n)}(e,r,i)[s<12?0:1];case Xu.Eras:return function(t,e){return Hu(ss(t)[us.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(r,o,t,e,n,i)}}function tl(t){return function(e,n,i){const r=-1*i,o=Uu(n,Nu.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case Yu.Short:return(r>=0?"+":"")+$u(s,2,o)+$u(Math.abs(r%60),2,o);case Yu.ShortGMT:return"GMT"+(r>=0?"+":"")+$u(s,1,o);case Yu.Long:return"GMT"+(r>=0?"+":"")+$u(s,2,o)+":"+$u(Math.abs(r%60),2,o);case Yu.Extended:return 0===i?"Z":(r>=0?"+":"")+$u(s,2,o)+":"+$u(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function el(t,e=!1){return function(n,i){let r;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();r=1+Math.floor((e+t)/7)}else{const t=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(4-o.getDay()))),e=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),i=t.getTime()-e.getTime();r=1+Math.round(i/6048e5)}var o;return $u(r,t,Uu(i,Nu.MinusSign))}}const nl={};function il(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function rl(t){return t instanceof Date&&!isNaN(t.valueOf())}class ol{}let sl=(()=>{class t extends ol{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return ss(t)[us.PluralCase]}(e||this.locale)(t)){case Du.Zero:return"zero";case Du.One:return"one";case Du.Two:return"two";case Du.Few:return"few";case Du.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Yt(Ca))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function al(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[i,r]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}let ul=(()=>{class t{constructor(t,e,n,i){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Co(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+vt(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(Ao(Hs),Ao(Ws),Ao(Ps),Ao(Ss))},t.\u0275dir=ye({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class ll{constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let hl=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){di()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,i)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ll(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new cl(t,n);e.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const o=new cl(t,r);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=i,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ao(Xs),Ao(Ys),Ao(Hs))},t.\u0275dir=ye({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class cl{constructor(t,e){this.record=t,this.view=e}}let pl=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new dl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ao(Xs),Ao(Ys))},t.\u0275dir=ye({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class dl{constructor(){this.$implicit=null,this.ngIf=null}}function fl(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${vt(e)}'.`)}function gl(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${vt(t)}'`)}let yl=(()=>{class t{transform(e){if(!e)return e;if("string"!=typeof e)throw gl(t,e);return e.toUpperCase()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=me({name:"uppercase",type:t,pure:!0}),t})(),ml=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,r){if(null==e||""===e||e!=e)return null;try{return function(t,e,n,i){let r=function(t){if(rl(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,i]=t.split("-").map(t=>+t);return new Date(e,n-1,i)}let n;if(n=t.match(zu))return function(t){const e=new Date(0);let n=0,i=0;const r=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),i=Number(t[9]+t[11])),r.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-i,u=Number(t[6]||0),l=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,l),e}(n)}const e=new Date(t);if(!rl(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const i=function(t){return ss(t)[us.LocaleId]}(e);if(qu[i]=qu[i]||{},qu[i][n])return qu[i][n];let r="";switch(n){case"shortDate":r=Fu(e,Mu.Short);break;case"mediumDate":r=Fu(e,Mu.Medium);break;case"longDate":r=Fu(e,Mu.Long);break;case"fullDate":r=Fu(e,Mu.Full);break;case"shortTime":r=Vu(e,Mu.Short);break;case"mediumTime":r=Vu(e,Mu.Medium);break;case"longTime":r=Vu(e,Mu.Long);break;case"fullTime":r=Vu(e,Mu.Full);break;case"short":const n=t(e,"shortTime"),i=t(e,"shortDate");r=Qu(Lu(e,Mu.Short),[n,i]);break;case"medium":const o=t(e,"mediumTime"),s=t(e,"mediumDate");r=Qu(Lu(e,Mu.Medium),[o,s]);break;case"long":const a=t(e,"longTime"),u=t(e,"longDate");r=Qu(Lu(e,Mu.Long),[a,u]);break;case"full":const l=t(e,"fullTime"),h=t(e,"fullDate");r=Qu(Lu(e,Mu.Full),[l,h])}return r&&(qu[i][n]=r),r}(n,e)||e;let o,s=[];for(;e;){if(o=Gu.exec(e),!o){s.push(e);break}{s=s.concat(o.slice(1));const t=s.pop();if(!t)break;e=t}}let a=r.getTimezoneOffset();i&&(a=il(i,a),r=function(t,e,n){const i=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(il(e,i)-i))}(r,i));let u="";return s.forEach(t=>{const e=function(t){if(nl[t])return nl[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ju(Xu.Eras,Ru.Abbreviated);break;case"GGGG":e=Ju(Xu.Eras,Ru.Wide);break;case"GGGGG":e=Ju(Xu.Eras,Ru.Narrow);break;case"y":e=Zu(Ku.FullYear,1,0,!1,!0);break;case"yy":e=Zu(Ku.FullYear,2,0,!0,!0);break;case"yyy":e=Zu(Ku.FullYear,3,0,!1,!0);break;case"yyyy":e=Zu(Ku.FullYear,4,0,!1,!0);break;case"M":case"L":e=Zu(Ku.Month,1,1);break;case"MM":case"LL":e=Zu(Ku.Month,2,1);break;case"MMM":e=Ju(Xu.Months,Ru.Abbreviated);break;case"MMMM":e=Ju(Xu.Months,Ru.Wide);break;case"MMMMM":e=Ju(Xu.Months,Ru.Narrow);break;case"LLL":e=Ju(Xu.Months,Ru.Abbreviated,ju.Standalone);break;case"LLLL":e=Ju(Xu.Months,Ru.Wide,ju.Standalone);break;case"LLLLL":e=Ju(Xu.Months,Ru.Narrow,ju.Standalone);break;case"w":e=el(1);break;case"ww":e=el(2);break;case"W":e=el(1,!0);break;case"d":e=Zu(Ku.Date,1);break;case"dd":e=Zu(Ku.Date,2);break;case"E":case"EE":case"EEE":e=Ju(Xu.Days,Ru.Abbreviated);break;case"EEEE":e=Ju(Xu.Days,Ru.Wide);break;case"EEEEE":e=Ju(Xu.Days,Ru.Narrow);break;case"EEEEEE":e=Ju(Xu.Days,Ru.Short);break;case"a":case"aa":case"aaa":e=Ju(Xu.DayPeriods,Ru.Abbreviated);break;case"aaaa":e=Ju(Xu.DayPeriods,Ru.Wide);break;case"aaaaa":e=Ju(Xu.DayPeriods,Ru.Narrow);break;case"b":case"bb":case"bbb":e=Ju(Xu.DayPeriods,Ru.Abbreviated,ju.Standalone,!0);break;case"bbbb":e=Ju(Xu.DayPeriods,Ru.Wide,ju.Standalone,!0);break;case"bbbbb":e=Ju(Xu.DayPeriods,Ru.Narrow,ju.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ju(Xu.DayPeriods,Ru.Abbreviated,ju.Format,!0);break;case"BBBB":e=Ju(Xu.DayPeriods,Ru.Wide,ju.Format,!0);break;case"BBBBB":e=Ju(Xu.DayPeriods,Ru.Narrow,ju.Format,!0);break;case"h":e=Zu(Ku.Hours,1,-12);break;case"hh":e=Zu(Ku.Hours,2,-12);break;case"H":e=Zu(Ku.Hours,1);break;case"HH":e=Zu(Ku.Hours,2);break;case"m":e=Zu(Ku.Minutes,1);break;case"mm":e=Zu(Ku.Minutes,2);break;case"s":e=Zu(Ku.Seconds,1);break;case"ss":e=Zu(Ku.Seconds,2);break;case"S":e=Zu(Ku.FractionalSeconds,1);break;case"SS":e=Zu(Ku.FractionalSeconds,2);break;case"SSS":e=Zu(Ku.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=tl(Yu.Short);break;case"ZZZZZ":e=tl(Yu.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=tl(Yu.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=tl(Yu.Long);break;default:return null}return nl[t]=e,e}(t);u+=e?e(r,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}(e,n,r||this.locale,i)}catch(o){throw gl(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ca))},t.\u0275pipe=me({name:"date",type:t,pure:!0}),t})(),vl=(()=>{class t{}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[{provide:ol,useClass:sl}]}),t})(),bl=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new _l(Yt(fu),window,Yt(li))}),t})();class _l{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=wl(this.window.history)||wl(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function wl(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}function xl(...t){let e=t[t.length-1];return I(e)?(t.pop(),M(t,e)):z(t)}class Pl extends P{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _;return this._value}next(t){super.next(this._value=t)}}class Cl extends f{notifyNext(t,e,n,i,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Il extends f{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Ol(t,e,n,i,r=new Il(t,n,i)){if(!r.closed)return e instanceof v?e.subscribe(r):R(e)(r)}const Sl={};class Tl{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new El(t,this.resultSelector))}}class El extends Cl{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Sl),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Ol(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const i=this.values,r=this.toRespond?i[n]===Sl?--this.toRespond:this.toRespond:0;i[n]=e,0===r&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const kl=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Al=new v(t=>t.complete());function Dl(t){return t?function(t){return new v(e=>t.schedule(()=>e.complete()))}(t):Al}function jl(t){return new v(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?N(n):Dl()).subscribe(e)})}function Rl(){return W(1)}function Ml(t,e){return function(n){return n.lift(new Nl(t,e))}}class Nl{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Fl(t,this.predicate,this.thisArg))}}class Fl extends f{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const Vl=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Ll(t){return function(e){return 0===t?Dl():e.lift(new Ul(t))}}class Ul{constructor(t){if(this.total=t,this.total<0)throw new Vl}call(t,e){return e.subscribe(new Bl(t,this.total))}}class Bl extends f{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=e++%n;t.next(i[r])}}t.complete()}}function Hl(t=ql){return e=>e.lift(new Wl(t))}class Wl{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new zl(t,this.errorFactory))}}class zl extends f{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function ql(){return new kl}function Gl(t=null){return e=>e.lift(new Yl(t))}class Yl{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Kl(t,this.defaultValue))}}class Kl extends f{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Xl(t,e){return"function"==typeof e?n=>n.pipe(Xl((n,i)=>N(t(n,i)).pipe(O((t,r)=>e(n,t,i,r))))):e=>e.lift(new Ql(t))}class Ql{constructor(t){this.project=t}call(t,e){return e.subscribe(new $l(t,this.project))}}class $l extends V{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new F(this),i=this.destination;i.add(n),this.innerSubscription=L(t,n),this.innerSubscription!==n&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function Zl(t){return e=>0===t?Dl():e.lift(new Jl(t))}class Jl{constructor(t){if(this.total=t,this.total<0)throw new Vl}call(t,e){return e.subscribe(new th(t,this.total))}}class th extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function eh(...t){return Rl()(xl(...t))}class nh{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ih(t,this.accumulator,this.seed,this.hasSeed))}}class ih extends f{constructor(t,e,n,i){super(t),this.accumulator=e,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function rh(t){return function(e){const n=new oh(t),i=e.lift(n);return n.caught=i}}class oh{constructor(t){this.selector=t}call(t,e){return e.subscribe(new sh(t,this.selector,this.caught))}}class sh extends V{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new F(this);this.add(i);const r=L(n,i);r!==i&&this.add(r)}}}function ah(t,e){return U(t,e,1)}function uh(t,e){const n=arguments.length>=2;return i=>i.pipe(t?Ml((e,n)=>t(e,n,i)):m,Zl(1),n?Gl(e):Hl(()=>new kl))}function lh(){}function hh(t,e,n){return function(i){return i.lift(new ch(t,e,n))}}class ch{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new ph(t,this.nextOrObserver,this.error,this.complete))}}class ph extends f{constructor(t,e,n,r){super(t),this._tapNext=lh,this._tapError=lh,this._tapComplete=lh,this._tapError=n||lh,this._tapComplete=r||lh,i(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||lh,this._tapError=e.error||lh,this._tapComplete=e.complete||lh)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class dh{constructor(t){this.callback=t}call(t,e){return e.subscribe(new fh(t,this.callback))}}class fh extends f{constructor(t,e){super(t),this.add(new c(e))}}class gh{constructor(t,e){this.id=t,this.url=e}}class yh extends gh{constructor(t,e,n="imperative",i=null){super(t,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class mh extends gh{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vh extends gh{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bh extends gh{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _h extends gh{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wh extends gh{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xh extends gh{constructor(t,e,n,i,r){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ph extends gh{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ch extends gh{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ih{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Oh{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sh{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Th{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eh{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kh{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ah{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Dh="primary";class jh{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Rh(t){return new jh(t)}function Mh(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Nh(t,e,n){const i=n.path.split("/");if(i.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let o=0;o<i.length;o++){const e=i[o],n=t[o];if(e.startsWith(":"))r[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Fh(t,e){const n=Object.keys(t),i=Object.keys(e);if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!Vh(t[r],e[r]))return!1;return!0}function Vh(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),i=[...e].sort();return n.every((t,e)=>i[e]===t)}return t===e}function Lh(t){return Array.prototype.concat.apply([],t)}function Uh(t){return t.length>0?t[t.length-1]:null}function Bh(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Hh(t){return Uo(t)?t:Lo(t)?N(Promise.resolve(t)):xl(t)}function Wh(t,e,n){return n?function(t,e){return Fh(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Yh(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Vh(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,i,r){if(n.segments.length>r.length)return!!Yh(n.segments.slice(0,r.length),r)&&!i.hasChildren();if(n.segments.length===r.length){if(!Yh(n.segments,r))return!1;for(const e in i.children){if(!n.children[e])return!1;if(!t(n.children[e],i.children[e]))return!1}return!0}{const t=r.slice(0,n.segments.length),o=r.slice(n.segments.length);return!!Yh(n.segments,t)&&!!n.children.primary&&e(n.children.primary,i,o)}}(e,n,n.segments)}(t.root,e.root)}class zh{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rh(this.queryParams)),this._queryParamMap}toString(){return $h.serialize(this)}}class qh{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Bh(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zh(this)}}class Gh{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Rh(this.parameters)),this._parameterMap}toString(){return rc(this)}}function Yh(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Kh(t,e){let n=[];return Bh(t.children,(t,i)=>{i===Dh&&(n=n.concat(e(t,i)))}),Bh(t.children,(t,i)=>{i!==Dh&&(n=n.concat(e(t,i)))}),n}class Xh{}class Qh{parse(t){const e=new lc(t);return new zh(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return Zh(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",i=[];return Bh(e.children,(e,n)=>{n!==Dh&&i.push(`${n}:${t(e,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=Kh(e,(n,i)=>i===Dh?[t(e.children.primary,!1)]:[`${i}:${t(n,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${Zh(e)}/${n[0]}`:`${Zh(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${tc(e)}=${tc(t)}`).join("&"):`${tc(e)}=${tc(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const $h=new Qh;function Zh(t){return t.segments.map(t=>rc(t)).join("/")}function Jh(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tc(t){return Jh(t).replace(/%3B/gi,";")}function ec(t){return Jh(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nc(t){return decodeURIComponent(t)}function ic(t){return nc(t.replace(/\+/g,"%20"))}function rc(t){return`${ec(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${ec(t)}=${ec(e[t])}`).join("")}`;var e}const oc=/^[^\/()?;=#]+/;function sc(t){const e=t.match(oc);return e?e[0]:""}const ac=/^[^=?&#]+/,uc=/^[^?&#]+/;class lc{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qh([],{}):new qh([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new qh(t,e)),n}parseSegment(){const t=sc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Gh(nc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=sc(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=sc(this.remaining);t&&(n=t,this.capture(n))}t[nc(e)]=nc(n)}parseQueryParam(t){const e=function(t){const e=t.match(ac);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(uc);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const i=ic(e),r=ic(n);if(t.hasOwnProperty(i)){let e=t[i];Array.isArray(e)||(e=[e],t[i]=e),e.push(r)}else t[i]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=sc(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=Dh);const o=this.parseChildren();e[r]=1===Object.keys(o).length?o.primary:new qh([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class hc{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=cc(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=cc(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=pc(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return pc(t,this._root).map(t=>t.value)}}function cc(t,e){if(t===e.value)return e;for(const n of e.children){const e=cc(t,n);if(e)return e}return null}function pc(t,e){if(t===e.value)return[e];for(const n of e.children){const i=pc(t,n);if(i.length)return i.unshift(e),i}return[]}class dc{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function fc(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class gc extends hc{constructor(t,e){super(t),this.snapshot=e,wc(this,t)}toString(){return this.snapshot.toString()}}function yc(t,e){const n=function(t,e){const n=new bc([],{},{},"",{},Dh,e,null,t.root,-1,{});return new _c("",new dc(n,[]))}(t,e),i=new Pl([new Gh("",{})]),r=new Pl({}),o=new Pl({}),s=new Pl({}),a=new Pl(""),u=new mc(i,r,s,a,o,Dh,e,n.root);return u.snapshot=n.root,new gc(new dc(u,[]),n)}class mc{constructor(t,e,n,i,r,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(O(t=>Rh(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(O(t=>Rh(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vc(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const t=n[i],e=n[i-1];if(t.routeConfig&&""===t.routeConfig.path)i--;else{if(e.component)break;i--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class bc{constructor(t,e,n,i,r,o,s,a,u,l,h){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=l,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Rh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _c extends hc{constructor(t,e){super(e),this.url=t,wc(this,e)}toString(){return xc(this._root)}}function wc(t,e){e.value._routerState=t,e.children.forEach(e=>wc(t,e))}function xc(t){const e=t.children.length>0?` { ${t.children.map(xc).join(", ")} } `:"";return`${t.value}${e}`}function Pc(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Fh(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Fh(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Fh(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Fh(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Cc(t,e){var n,i;return Fh(t.params,e.params)&&Yh(n=t.url,i=e.url)&&n.every((t,e)=>Fh(t.parameters,i[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Cc(t.parent,e.parent))}function Ic(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Oc(t){return"object"==typeof t&&null!=t&&t.outlets}function Sc(t,e,n,i,r){let o={};return i&&Bh(i,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new zh(n.root===t?e:function t(e,n,i){const r={};return Bh(e.children,(e,o)=>{r[o]=e===n?i:t(e,n,i)}),new qh(e.segments,r)}(n.root,t,e),o,r)}class Tc{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ic(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(Oc);if(i&&i!==Uh(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ec{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function kc(t,e,n){if(t||(t=new qh([],{})),0===t.segments.length&&t.hasChildren())return Ac(t,e,n);const i=function(t,e,n){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;const e=t.segments[r],s=n[i];if(Oc(s))break;const a=""+s,u=i<n.length-1?n[i+1]:null;if(r>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Mc(a,u,e))return o;i+=2}else{if(!Mc(a,{},e))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const e=new qh(t.segments.slice(0,i.pathIndex),{});return e.children.primary=new qh(t.segments.slice(i.pathIndex),t.children),Ac(e,0,r)}return i.match&&0===r.length?new qh(t.segments,{}):i.match&&!t.hasChildren()?Dc(t,e,n):i.match?Ac(t,0,r):Dc(t,e,n)}function Ac(t,e,n){if(0===n.length)return new qh(t.segments,{});{const i=function(t){return Oc(t[0])?t[0].outlets:{[Dh]:t}}(n),r={};return Bh(i,(n,i)=>{null!==n&&(r[i]=kc(t.children[i],e,n))}),Bh(t.children,(t,e)=>{void 0===i[e]&&(r[e]=t)}),new qh(t.segments,r)}}function Dc(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){const o=n[r];if(Oc(o)){const t=jc(o.outlets);return new qh(i,t)}if(0===r&&Ic(n[0])){i.push(new Gh(t.segments[e].path,n[0])),r++;continue}const s=Oc(o)?o.outlets.primary:""+o,a=r<n.length-1?n[r+1]:null;s&&a&&Ic(a)?(i.push(new Gh(s,Rc(a))),r+=2):(i.push(new Gh(s,{})),r++)}return new qh(i,{})}function jc(t){const e={};return Bh(t,(t,n)=>{null!==t&&(e[n]=Dc(new qh([],{}),0,t))}),e}function Rc(t){const e={};return Bh(t,(t,n)=>e[n]=""+t),e}function Mc(t,e,n){return t==n.path&&Fh(e,n.parameters)}class Nc{constructor(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Pc(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const i=fc(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,i[e],n),delete i[e]}),Bh(i,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:i})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const i=fc(t),r=t.value.component?n.children:e;Bh(i,(t,e)=>this.deactivateRouteAndItsChildren(t,r)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const i=fc(e);t.children.forEach(t=>{this.activateRoutes(t,i[t.value.outlet],n),this.forwardEvent(new kh(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Th(t.value.snapshot))}activateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(Pc(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,n);else if(i.component){const e=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const t=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Fc(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=i,e.resolver=r,e.outlet&&e.outlet.activateWith(i,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Fc(t){Pc(t.value),t.children.forEach(Fc)}class Vc{constructor(t,e){this.routes=t,this.module=e}}function Lc(t){return"function"==typeof t}function Uc(t){return t instanceof zh}const Bc=Symbol("INITIAL_VALUE");function Hc(){return Xl(t=>function(...t){let e=void 0,n=void 0;return I(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),z(t,n).lift(new Tl(e))}(...t.map(t=>t.pipe(Zl(1),function(...t){const e=t[t.length-1];return I(e)?(t.pop(),n=>eh(t,n,e)):e=>eh(t,e)}(Bc)))).pipe(function(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new nh(t,e,n))}}((t,e)=>{let n=!1;return e.reduce((t,i,r)=>{if(t!==Bc)return t;if(i===Bc&&(n=!0),!n){if(!1===i)return i;if(r===e.length-1||Uc(i))return i}return t},t)},Bc),Ml(t=>t!==Bc),O(t=>Uc(t)?t:!0===t),Zl(1)))}class Wc{constructor(t){this.segmentGroup=t||null}}class zc{constructor(t){this.urlTree=t}}function qc(t){return new v(e=>e.error(new Wc(t)))}function Gc(t){return new v(e=>e.error(new zc(t)))}function Yc(t){return new v(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Kc{constructor(t,e,n,i,r){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=t.get($t)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Dh).pipe(O(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(rh(t=>{if(t instanceof zc)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Wc)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Dh).pipe(O(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(rh(t=>{if(t instanceof Wc)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const i=t.segments.length>0?new qh([],{[Dh]:t}):t;return new zh(i,e,n)}expandSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(O(t=>new qh([],t))):this.expandSegment(t,n,e,n.segments,i,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return xl({});const n=[],i=[],r={};return Bh(t,(t,o)=>{const s=e(o,t).pipe(O(t=>r[o]=t));o===Dh?n.push(s):i.push(s)}),xl.apply(null,n.concat(i)).pipe(Rl(),function(t,e){const n=arguments.length>=2;return i=>i.pipe(t?Ml((e,n)=>t(e,n,i)):m,Ll(1),n?Gl(e):Hl(()=>new kl))}(),O(()=>r))}(n.children,(n,i)=>this.expandSegmentGroup(t,e,i,n))}expandSegment(t,e,n,i,r,o){return xl(...n).pipe(ah(s=>this.expandSegmentAgainstRoute(t,e,n,s,i,r,o).pipe(rh(t=>{if(t instanceof Wc)return xl(null);throw t}))),uh(t=>!!t),rh((t,n)=>{if(t instanceof kl||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,i,r))return xl(new qh([],{}));throw new Wc(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,i,r,o,s){return Zc(i)!==o?qc(e):void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o):qc(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Gc(r):this.lineralizeSegments(n,r).pipe(U(n=>{const r=new qh(n,{});return this.expandSegment(t,r,e,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:l}=Xc(e,i,r);if(!s)return qc(e);const h=this.applyRedirectCommands(a,i.redirectTo,l);return i.redirectTo.startsWith("/")?Gc(h):this.lineralizeSegments(i,h).pipe(U(i=>this.expandSegment(t,e,n,i.concat(r.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(O(t=>(n._loadedConfig=t,new qh(i,{})))):xl(new qh(i,{}));const{matched:r,consumedSegments:o,lastChild:s}=Xc(e,n,i);if(!r)return qc(e);const a=i.slice(s);return this.getChildConfig(t,n,i).pipe(U(t=>{const n=t.module,i=t.routes,{segmentGroup:r,slicedSegments:s}=function(t,e,n,i){return n.length>0&&function(t,e,n){return n.some(n=>$c(t,e,n)&&Zc(n)!==Dh)}(t,n,i)?{segmentGroup:Qc(new qh(e,function(t,e){const n={};n.primary=e;for(const i of t)""===i.path&&Zc(i)!==Dh&&(n[Zc(i)]=new qh([],{}));return n}(i,new qh(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>$c(t,e,n))}(t,n,i)?{segmentGroup:Qc(new qh(t.segments,function(t,e,n,i){const r={};for(const o of n)$c(t,e,o)&&!i[Zc(o)]&&(r[Zc(o)]=new qh([],{}));return Object.assign(Object.assign({},i),r)}(t,n,i,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,i);return 0===s.length&&r.hasChildren()?this.expandChildren(n,i,r).pipe(O(t=>new qh(o,t))):0===i.length&&0===s.length?xl(new qh(o,{})):this.expandSegment(n,r,i,s,Dh,!0).pipe(O(t=>new qh(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?xl(new Vc(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?xl(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(U(n=>n?this.configLoader.load(t.injector,e).pipe(O(t=>(e._loadedConfig=t,t))):function(t){return new v(e=>e.error(Mh(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):xl(new Vc([],t))}runCanLoadGuards(t,e,n){const i=e.canLoad;return i&&0!==i.length?xl(i.map(i=>{const r=t.get(i);let o;if(function(t){return t&&Lc(t.canLoad)}(r))o=r.canLoad(e,n);else{if(!Lc(r))throw new Error("Invalid CanLoad guard");o=r(e,n)}return Hh(o)})).pipe(Hc(),hh(t=>{if(!Uc(t))return;const e=Mh(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),O(t=>!0===t)):xl(!0)}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return xl(n);if(i.numberOfChildren>1||!i.children.primary)return Yc(t.redirectTo);i=i.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,i){const r=this.createSegmentGroup(t,e.root,n,i);return new zh(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Bh(t,(t,i)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);n[i]=e[r]}else n[i]=t}),n}createSegmentGroup(t,e,n,i){const r=this.createSegments(t,e.segments,n,i);let o={};return Bh(e.children,(e,r)=>{o[r]=this.createSegmentGroup(t,e,n,i)}),new qh(r,o)}createSegments(t,e,n,i){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,i):this.findOrReturn(e,n))}findPosParam(t,e,n){const i=n[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let n=0;for(const i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}}function Xc(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const i=(e.matcher||Nh)(n,t,e);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Qc(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new qh(t.segments.concat(e.segments),e.children)}return t}function $c(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Zc(t){return t.outlet||Dh}class Jc{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class tp{constructor(t,e){this.component=t,this.route=e}}function ep(t,e,n){const i=t._root;return function t(e,n,i,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=fc(n);return e.children.forEach(e=>{!function(e,n,i,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=i?i.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Yh(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Yh(t.url,e.url)||!Fh(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cc(t,e)||!Fh(t.queryParams,e.queryParams);case"paramsChange":default:return!Cc(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new Jc(r)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:i,r,o),l&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new tp(u.outlet.component,a))}else a&&ip(n,u,o),o.canActivateChecks.push(new Jc(r)),t(e,null,s.component?u?u.children:null:i,r,o)}(e,s[e.value.outlet],i,r.concat([e.value]),o),delete s[e.value.outlet]}),Bh(s,(t,e)=>ip(t,i.getContext(e),o)),o}(i,e?e._root:null,n,[i.value])}function np(t,e,n){const i=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function ip(t,e,n){const i=fc(t),r=t.value;Bh(i,(t,i)=>{ip(t,r.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new tp(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function rp(t,e){return null!==t&&e&&e(new Eh(t)),xl(!0)}function op(t,e){return null!==t&&e&&e(new Sh(t)),xl(!0)}function sp(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;return i&&0!==i.length?xl(i.map(i=>jl(()=>{const r=np(i,e,n);let o;if(function(t){return t&&Lc(t.canActivate)}(r))o=Hh(r.canActivate(e,t));else{if(!Lc(r))throw new Error("Invalid CanActivate guard");o=Hh(r(e,t))}return o.pipe(uh())}))).pipe(Hc()):xl(!0)}function ap(t,e,n){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>jl(()=>xl(e.guards.map(r=>{const o=np(r,e.node,n);let s;if(function(t){return t&&Lc(t.canActivateChild)}(o))s=Hh(o.canActivateChild(i,t));else{if(!Lc(o))throw new Error("Invalid CanActivateChild guard");s=Hh(o(i,t))}return s.pipe(uh())})).pipe(Hc())));return xl(r).pipe(Hc())}class up{}class lp{constructor(t,e,n,i,r,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}recognize(){try{const t=pp(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Dh),n=new bc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Dh,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new dc(n,e),r=new _c(this.url,i);return this.inheritParamsAndData(r._root),xl(r)}catch(t){return new v(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=vc(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Kh(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),i=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${i}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===Dh?-1:e.value.outlet===Dh?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,i){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,i)}catch(r){if(!(r instanceof up))throw r}if(this.noLeftoversInUrl(e,n,i))return[];throw new up}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,i){if(t.redirectTo)throw new up;if((t.outlet||Dh)!==i)throw new up;let r,o=[],s=[];if("**"===t.path){const o=n.length>0?Uh(n).parameters:{};r=new bc(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gp(t),i,t.component,t,hp(e),cp(e)+n.length,yp(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new up;return{consumedSegments:[],lastChild:0,parameters:{}}}const i=(e.matcher||Nh)(n,t,e);if(!i)throw new up;const r={};Bh(i.posParams,(t,e)=>{r[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},r),i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),r=new bc(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gp(t),i,t.component,t,hp(e),cp(e)+o.length,yp(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:l}=pp(e,o,s,a,this.relativeLinkResolution);if(0===l.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new dc(r,t)]}if(0===a.length&&0===l.length)return[new dc(r,[])];const h=this.processSegment(a,u,l,Dh);return[new dc(r,h)]}}function hp(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function cp(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function pp(t,e,n,i,r){if(n.length>0&&function(t,e,n){return n.some(n=>dp(t,e,n)&&fp(n)!==Dh)}(t,n,i)){const r=new qh(e,function(t,e,n,i){const r={};r.primary=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&fp(o)!==Dh){const n=new qh([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,r[fp(o)]=n}return r}(t,e,i,new qh(n,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>dp(t,e,n))}(t,n,i)){const o=new qh(t.segments,function(t,e,n,i,r,o){const s={};for(const a of i)if(dp(t,n,a)&&!r[fp(a)]){const n=new qh([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[fp(a)]=n}return Object.assign(Object.assign({},r),s)}(t,e,n,i,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new qh(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function dp(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function fp(t){return t.outlet||Dh}function gp(t){return t.data||{}}function yp(t){return t.resolve||{}}function mp(t){return function(e){return e.pipe(Xl(e=>{const n=t(e);return n?N(n).pipe(O(()=>e)):N([e])}))}}class vp extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}let bp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Fo(0,"router-outlet")},directives:function(){return[Np]},encapsulation:2}),t})();function _p(t,e=""){for(let n=0;n<t.length;n++){const i=t[n];wp(i,xp(e,i))}}function wp(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==Dh)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&_p(t.children,e)}function xp(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Pp(t){const e=t.children&&t.children.map(Pp),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Dh&&(n.component=bp),n}const Cp=new Nt("ROUTES");class Ip{constructor(t,e,n,i){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=i}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(O(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Vc(Lh(i.injector.get(Cp)).map(Pp),i)}))}loadModuleFactory(t){return"string"==typeof t?N(this.loader.load(t)):Hh(t()).pipe(U(t=>t instanceof Zt?xl(t):N(this.compiler.compileModuleAsync(t))))}}class Op{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Sp,this.attachRef=null}}class Sp{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Op,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Tp{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Ep(t){throw t}function kp(t,e,n){return e.parse("/")}function Ap(t,e){return xl(null)}let Dp=(()=>{class t{constructor(t,e,n,i,r,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new P,this.errorHandler=Ep,this.malformedUriErrorHandler=kp,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ap,afterPreactivation:Ap},this.urlHandlingStrategy=new Tp,this.routeReuseStrategy=new vp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=r.get($t),this.console=r.get(Pa);const u=r.get(Na);this.isNgZoneEnabled=u instanceof Na,this.resetConfig(a),this.currentUrlTree=new zh(new qh([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ip(o,s,t=>this.triggerEvent(new Ih(t)),t=>this.triggerEvent(new Oh(t))),this.routerState=yc(this.currentUrlTree,this.rootComponentType),this.transitions=new Pl({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Ml(t=>0!==t.id),O(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Xl(t=>{let n=!1,i=!1;return xl(t).pipe(hh(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Xl(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return xl(t).pipe(Xl(t=>{const n=this.transitions.getValue();return e.next(new yh(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Al:[t]}),Xl(t=>Promise.resolve(t)),(i=this.ngModule.injector,r=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(Xl(t=>function(t,e,n,i,r){return new Kc(t,e,n,i,r).apply()}(i,r,o,t.extractedUrl,s).pipe(O(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),hh(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,i,r){return function(o){return o.pipe(U(o=>function(t,e,n,i,r="emptyOnly",o="legacy"){return new lp(t,e,n,i,r,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),i,r).pipe(O(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),hh(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),hh(t=>{const n=new _h(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var i,r,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:o,extras:s}=t,a=new yh(n,this.serializeUrl(i),r,o);e.next(a);const u=yc(i,this.rootComponentType).snapshot;return xl(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:i,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Al}),mp(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!s})}),hh(t=>{const e=new wh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),O(t=>Object.assign(Object.assign({},t),{guards:ep(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(U(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?xl(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,i){return N(t).pipe(U(t=>function(t,e,n,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?xl(o.map(o=>{const s=np(o,e,r);let a;if(function(t){return t&&Lc(t.canDeactivate)}(s))a=Hh(s.canDeactivate(t,e,n,i));else{if(!Lc(s))throw new Error("Invalid CanDeactivate guard");a=Hh(s(t,e,n,i))}return a.pipe(uh())})).pipe(Hc()):xl(!0)}(t.component,t.route,n,e,i)),uh(t=>!0!==t,!0))}(s,i,r,t).pipe(U(n=>n&&"boolean"==typeof n?function(t,e,n,i){return N(e).pipe(ah(e=>N([op(e.route.parent,i),rp(e.route,i),ap(t,e.path,n),sp(t,e.route,n)]).pipe(Rl(),uh(t=>!0!==t,!0))),uh(t=>!0!==t,!0))}(i,o,t,e):xl(n)),O(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),hh(t=>{if(Uc(t.guardsResult)){const e=Mh(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),hh(t=>{const e=new xh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Ml(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new vh(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),mp(t=>{if(t.guards.canActivateChecks.length)return xl(t).pipe(hh(t=>{const e=new Ph(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Xl(t=>{let n=!1;return xl(t).pipe((i=this.paramsInheritanceStrategy,r=this.ngModule.injector,function(t){return t.pipe(U(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return xl(t);let o=0;return N(n).pipe(ah(t=>function(t,e,n,i){return function(t,e,n,i){const r=Object.keys(t);if(0===r.length)return xl({});const o={};return N(r).pipe(U(r=>function(t,e,n,i){const r=np(t,e,i);return Hh(r.resolve?r.resolve(e,n):r(e,n))}(t[r],e,n,i).pipe(hh(t=>{o[r]=t}))),Ll(1),U(()=>Object.keys(o).length===r.length?xl(o):Al))}(t._resolve,t,e,i).pipe(O(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),vc(t,n).resolve),null)))}(t.route,e,i,r)),hh(()=>o++),Ll(1),U(e=>o===n.length?xl(t):Al))}))}),hh({next:()=>n=!0,complete:()=>{if(!n){const n=new vh(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var i,r}),hh(t=>{const e=new Ch(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),mp(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!s})}),O(t=>{const e=function(t,e,n){const i=function t(e,n,i){if(i&&e.shouldReuseRoute(n.value,i.value.snapshot)){const r=i.value;r._futureSnapshot=n.value;const o=function(e,n,i){return n.children.map(n=>{for(const r of i.children)if(e.shouldReuseRoute(r.value.snapshot,n.value))return t(e,n,r);return t(e,n)})}(e,n,i);return new dc(r,o)}{const i=e.retrieve(n.value);if(i){const t=i.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let i=0;i<e.children.length;++i)t(e.children[i],n.children[i])}(n,t),t}{const i=new mc(new Pl((r=n.value).url),new Pl(r.params),new Pl(r.queryParams),new Pl(r.fragment),new Pl(r.data),r.outlet,r.component,r),o=n.children.map(n=>t(e,n));return new dc(i,o)}}var r}(t,e._root,n?n._root:void 0);return new gc(i,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),hh(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),O(t=>(new Nc(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),hh({next(){n=!0},complete(){n=!0}}),(r=()=>{if(!n&&!i){this.resetUrlToCurrentUrlTree();const n=new vh(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new dh(r))),rh(n=>{if(i=!0,(r=n)&&r.ngNavigationCancelingError){const i=Uc(n.url);i||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const r=new vh(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(r),i?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const i=new bh(t.id,this.serializeUrl(t.extractedUrl),n);e.next(i);try{t.resolve(this.errorHandler(n))}catch(B_){t.reject(B_)}}var r;return Al}));var r,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:i}=e,r={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(r.state=t)}this.scheduleNavigation(i,t,n,r)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){_p(t),this.config=t.map(Pp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:r,preserveQueryParams:o,queryParamsHandling:s,preserveFragment:a}=e;di()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,l=a?this.currentUrlTree.fragment:r;let h=null;if(s)switch(s){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=o?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,i,r){if(0===n.length)return Sc(e.root,e.root,e,i,r);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Tc(!0,0,t);let e=0,n=!1;const i=t.reduce((t,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const e={};return Bh(i.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(i.segmentPath)return[...t,i.segmentPath]}return"string"!=typeof i?[...t,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?e++:""!=i&&t.push(i))}),t):[...t,i]},[]);return new Tc(n,e,i)}(n);if(o.toRoot())return Sc(e.root,new qh([],{}),e,i,r);const s=function(t,e,n){if(t.isAbsolute)return new Ec(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Ec(t,t===e.root,0)}const i=Ic(t.commands[0])?0:1;return function(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new Ec(i,!1,r-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Ac(s.segmentGroup,s.index,o.commands):kc(s.segmentGroup,s.index,o.commands);return Sc(s.segmentGroup,a,e,i,r)}(u,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){di()&&this.isNgZoneEnabled&&!Na.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Uc(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(Uc(t))return Wh(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Wh(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return null!=i&&(e[n]=i),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new mh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,i,r){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,l,h;r?(u=r.resolve,l=r.reject,h=r.promise):h=new Promise((t,e)=>{u=t,l=e});const c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,i){const r=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",Object.assign(Object.assign({},i),{navigationId:n})):this.location.go(r,"",Object.assign(Object.assign({},i),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(Yt(Qr),Yt(Xh),Yt(Sp),Yt(Eu),Yt(co),Yt(iu),Yt(ja),Yt(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),jp=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.route=e,this.commands=[],this.onChanges=new P,null==n&&i.setAttribute(r.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){di()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:Mp(this.skipLocationChange),replaceUrl:Mp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Mp(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Mp(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Ao(Dp),Ao(mc),Do("tabindex"),Ao(Ss),Ao(Ps))},t.\u0275dir=ye({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&Bo("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Ne]}),t})(),Rp=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new P,this.subscription=t.events.subscribe(t=>{t instanceof mh&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){di()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,i,r){if(0!==t||e||n||i||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Mp(this.skipLocationChange),replaceUrl:Mp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Mp(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Mp(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Ao(Dp),Ao(mc),Ao(Cu))},t.\u0275dir=ye({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Bo("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)})),2&t&&(ns("href",e.href,mi),To("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Ne]}),t})();function Mp(t){return""===t||!!t}let Np=(()=>{class t{constructor(t,e,n,i,r){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new fa,this.deactivateEvents=new fa,this.name=i||Dh,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new Fp(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Sp),Ao(Xs),Ao(xs),Do("name"),Ao(Kr))},t.\u0275dir=ye({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Fp{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===mc?this.route:t===Sp?this.childContexts:this.parent.get(t,e)}}class Vp{}class Lp{preload(t,e){return xl(null)}}let Up=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=new Ip(e,n,e=>t.triggerEvent(new Ih(e)),e=>t.triggerEvent(new Oh(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ml(t=>t instanceof mh),ah(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get($t);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const i of e)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const t=i._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(t,i)):i.children&&n.push(this.processRoutes(t,i.children));return N(n).pipe(W(),O(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(U(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Yt(Dp),Yt(iu),Yt(ja),Yt(co),Yt(Vp))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Bp=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof mh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ah&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Ah(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Yt(Dp),Yt(bl),Yt(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Hp=new Nt("ROUTER_CONFIGURATION"),Wp=new Nt("ROUTER_FORROOT_GUARD"),zp=[Eu,{provide:Xh,useClass:Qh},{provide:Dp,useFactory:function(t,e,n,i,r,o,s,a={},u,l){const h=new Dp(null,t,e,n,i,r,o,Lh(s));if(u&&(h.urlHandlingStrategy=u),l&&(h.routeReuseStrategy=l),a.errorHandler&&(h.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(h.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=du();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(h.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(h.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(h.relativeLinkResolution=a.relativeLinkResolution),h},deps:[Xh,Sp,Eu,co,iu,ja,Cp,Hp,[class{},new nt],[class{},new nt]]},Sp,{provide:mc,useFactory:function(t){return t.routerState.root},deps:[Dp]},{provide:iu,useClass:su},Up,Lp,class{preload(t,e){return e().pipe(rh(()=>xl(null)))}},{provide:Hp,useValue:{enableTracing:!1}}];function qp(){return new Qa("Router",Dp)}let Gp=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[zp,Qp(e),{provide:Wp,useFactory:Xp,deps:[[Dp,new nt,new rt]]},{provide:Hp,useValue:n||{}},{provide:Cu,useFactory:Kp,deps:[gu,[new et(Ou),new nt],Hp]},{provide:Bp,useFactory:Yp,deps:[Dp,bl,Hp]},{provide:Vp,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Lp},{provide:Qa,multi:!0,useFactory:qp},[$p,{provide:ga,multi:!0,useFactory:Zp,deps:[$p]},{provide:td,useFactory:Jp,deps:[$p]},{provide:xa,multi:!0,useExisting:td}]]}}static forChild(e){return{ngModule:t,providers:[Qp(e)]}}}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Yt(Wp,8),Yt(Dp,8))}}),t})();function Yp(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Bp(t,e,n)}function Kp(t,e,n={}){return n.useHash?new Tu(t,e):new Su(t,e)}function Xp(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Qp(t){return[{provide:po,multi:!0,useValue:t},{provide:Cp,multi:!0,useValue:t}]}let $p=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new P}appInitializer(){return this.injector.get(mu,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Dp),i=this.injector.get(Hp);if(this.isLegacyDisabled(i)||this.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error(`Invalid initialNavigation options: '${i.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?xl(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Hp),n=this.injector.get(Up),i=this.injector.get(Bp),r=this.injector.get(Dp),o=this.injector.get(eu);t===o.components[0]&&(this.isLegacyEnabled(e)?r.initialNavigation():this.isLegacyDisabled(e)&&r.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),r.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Yt(co))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Zp(t){return t.appInitializer.bind(t)}function Jp(t){return t.bootstrapListener.bind(t)}const td=new Nt("Router Initializer");class ed extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new ed,pu||(pu=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=id||(id=document.querySelector("base"),id)?id.getAttribute("href"):null;return null==e?null:(n=e,nd||(nd=document.createElement("a")),nd.setAttribute("href",n),"/"===nd.pathname.charAt(0)?nd.pathname:"/"+nd.pathname);var n}resetBaseElement(){id=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return al(document.cookie,t)}}let nd,id=null;const rd=new Nt("TRANSITION_ID"),od=[{provide:ga,useFactory:function(t,e,n){return()=>{n.get(ya).donePromise.then(()=>{const n=du();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[rd,fu,co],multi:!0}];class sd{static init(){var t;t=new sd,Ka=t}addToWindow(t){Tt.getAngularTestability=(e,n=!0)=>{const i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},Tt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Tt.getAllAngularRootElements=()=>t.getAllRootElements(),Tt.frameworkStabilizers||(Tt.frameworkStabilizers=[]),Tt.frameworkStabilizers.push(t=>{const e=Tt.getAllAngularTestabilities();let n=e.length,i=!1;const r=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(r)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?du().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const ad=new Nt("EventManagerPlugins");let ud=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let i=0;i<n.length;i++){const e=n[i];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(Yt(ad),Yt(Na))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class ld{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=du().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let hd=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),cd=(()=>{class t extends hd{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>du().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Yt(fu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const pd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},dd=/%COMP%/g;function fd(t,e,n){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?fd(t,r,n):(r=r.replace(dd,t),n.push(r))}return n}function gd(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let yd=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new md(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case se.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new vd(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case se.Native:case se.ShadowDom:return new bd(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=fd(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Yt(ud),Yt(cd),Yt(ma))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class md{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(pd[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;const r=pd[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const i=pd[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&Os.DashCase?t.style.setProperty(e,n,i&Os.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Os.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,gd(n)):this.eventManager.addEventListener(t,e,gd(n))}}class vd extends md{constructor(t,e,n,i){super(t),this.component=n;const r=fd(i+"-"+n.id,n.styles,[]);e.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(dd,i+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(dd,i+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class bd extends md{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===se.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const r=fd(i.id,i.styles,[]);for(let o=0;o<r.length;o++){const t=document.createElement("style");t.textContent=r[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let _d=(()=>{class t extends ld{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Yt(fu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const wd=["alt","control","meta","shift"],xd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pd={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Cd={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Id=(()=>{class t extends ld{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const r=t.parseEventName(n),o=t.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>du().onAndCancel(e,r.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=t._normalizeKey(n.pop());let o="";if(wd.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=r,0!=n.length||0===r.length)return null;const s={};return s.domEventName=i,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Pd.hasOwnProperty(e)&&(e=Pd[e]))}return xd[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),wd.forEach(i=>{i!=n&&(0,Cd[i])(t)&&(e+=i+".")}),e+=n,e}static eventCallback(e,n,i){return r=>{t.getEventFullKey(r)===e&&i.runGuarded(()=>n(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Yt(fu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Od=$a(uu,"browser",[{provide:wa,useValue:"browser"},{provide:_a,useValue:function(){ed.makeCurrent(),sd.init()},multi:!0},{provide:fu,useFactory:function(){return function(t){Be=t}(document),document},deps:[]}]),Sd=[[],{provide:$r,useValue:"root"},{provide:li,useFactory:function(){return new li},deps:[]},{provide:ad,useClass:_d,multi:!0,deps:[fu,Na,wa]},{provide:ad,useClass:Id,multi:!0,deps:[fu]},[],{provide:yd,useClass:yd,deps:[ud,cd,ma]},{provide:Is,useExisting:yd},{provide:hd,useExisting:cd},{provide:cd,useClass:cd,deps:[fu]},{provide:za,useClass:za,deps:[Na]},{provide:ud,useClass:ud,deps:[ad,Na]},[]];let Td=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:ma,useValue:e.appId},{provide:rd,useExisting:ma},od]}}}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Yt(t,12))},providers:Sd,imports:[vl,hu]}),t})();function Ed(t,e){return new v(n=>{const i=t.length;if(0===i)return void n.complete();const r=new Array(i);let o=0,s=0;for(let a=0;a<i;a++){const u=N(t[a]);let l=!1;n.add(u.subscribe({next:t=>{l||(l=!0,s++),r[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==i&&l||(s===i&&n.next(e?e.reduce((t,e,n)=>(t[e]=r[n],t),{}):r),n.complete())}}))}})}"undefined"!=typeof window&&window;const kd=new Nt("NgValueAccessor"),Ad={provide:kd,useExisting:wt(()=>Dd),multi:!0};let Dd=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ss),Ao(Ps))},t.\u0275dir=ye({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Bo("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[bs([Ad])]}),t})();const jd={provide:kd,useExisting:wt(()=>Md),multi:!0},Rd=new Nt("CompositionEventMode");let Md=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=du()?du().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ss),Ao(Ps),Ao(Rd,8))},t.\u0275dir=ye({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Bo("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[bs([jd])]}),t})(),Nd=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t}),t})(),Fd=(()=>{class t extends Nd{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Vd(e||t)},t.\u0275dir=ye({type:t,features:[yo]}),t})();const Vd=oi(Fd);class Ld extends Nd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){}get asyncValidator(){}}class Ud{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let Bd=(()=>{class t extends Ud{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ld,2))},t.\u0275dir=ye({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&Ko("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[yo]}),t})(),Hd=(()=>{class t extends Ud{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Fd,2))},t.\u0275dir=ye({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&Ko("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[yo]}),t})();function Wd(t){return null==t||0===t.length}function zd(t){return null!=t&&"number"==typeof t.length}const qd=new Nt("NgValidators"),Gd=new Nt("NgAsyncValidators"),Yd=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Kd{static min(t){return e=>{if(Wd(e.value)||Wd(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Wd(e.value)||Wd(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Wd(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Wd(t.value)||Yd.test(t.value)?null:{email:!0}}static minLength(t){return e=>Wd(e.value)||!zd(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>zd(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Kd.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Wd(t.value))return null;const i=t.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Xd);return 0==e.length?null:function(t){return $d(Zd(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Xd);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(u(e))return Ed(e,null);if(l(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Ed(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Ed(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(O(t=>e(...t)))}return Ed(t,null)}(Zd(t,e).map(Qd)).pipe(O($d))}}}function Xd(t){return null!=t}function Qd(t){const e=Lo(t)?N(t):t;return Uo(e),e}function $d(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Zd(t,e){return e.map(e=>e(t))}function Jd(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const tf={provide:kd,useExisting:wt(()=>ef),multi:!0};let ef=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ss),Ao(Ps))},t.\u0275dir=ye({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Bo("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[bs([tf])]}),t})();const nf={provide:kd,useExisting:wt(()=>of),multi:!0};let rf=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),of=(()=>{class t{constructor(t,e,n,i){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=i,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Ld),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ss),Ao(Ps),Ao(rf),Ao(co))},t.\u0275dir=ye({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Bo("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[bs([nf])]}),t})();const sf={provide:kd,useExisting:wt(()=>af),multi:!0};let af=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ss),Ao(Ps))},t.\u0275dir=ye({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Bo("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[bs([sf])]}),t})();const uf={provide:kd,useExisting:wt(()=>hf),multi:!0};function lf(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let hf=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=lf(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ss),Ao(Ps))},t.\u0275dir=ye({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Bo("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[bs([uf])]}),t})(),cf=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(lf(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ps),Ao(Ss),Ao(hf,9))},t.\u0275dir=ye({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const pf={provide:kd,useExisting:wt(()=>ff),multi:!0};function df(t,e){return null==t?""+e:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let ff=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const i=t.item(e),r=this._getOptionValue(i.value);n.push(r)}}else{const t=e.options;for(let e=0;e<t.length;e++){const i=t.item(e);if(i.selected){const t=this._getOptionValue(i.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ss),Ao(Ps))},t.\u0275dir=ye({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Bo("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[bs([pf])]}),t})(),gf=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(df(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(df(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ps),Ao(Ss),Ao(ff,9))},t.\u0275dir=ye({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function yf(t,e){t.validator=Kd.compose([t.validator,e.validator]),t.asyncValidator=Kd.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&mf(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&mf(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function mf(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function vf(t){return null!=t?Kd.compose(Jd(t)):null}function bf(t){return null!=t?Kd.composeAsync(Jd(t)):null}const _f=[Dd,af,ef,hf,ff,of],wf="VALID",xf="INVALID",Pf="PENDING",Cf="DISABLED";function If(t){return(Ef(t)?t.validators:t)||null}function Of(t){return Array.isArray(t)?vf(t):t||null}function Sf(t,e){return(Ef(e)?e.asyncValidators:t)||null}function Tf(t){return Array.isArray(t)?bf(t):t||null}function Ef(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class kf{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Of(this._rawValidators),this._composedAsyncValidatorFn=Tf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===wf}get invalid(){return this.status===xf}get pending(){return this.status==Pf}get disabled(){return this.status===Cf}get enabled(){return this.status!==Cf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Of(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Tf(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Pf,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Cf,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=wf,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==wf&&this.status!==Pf||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cf:wf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Pf,this._hasOwnPendingAsyncValidator=!0;const e=Qd(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let i=t;return e.forEach(t=>{i=i instanceof Df?i.controls.hasOwnProperty(t)?i.controls[t]:null:i instanceof jf&&i.at(t)||null}),i}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new fa,this.statusChanges=new fa}_calculateStatus(){return this._allControlsDisabled()?Cf:this.errors?xf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pf)?Pf:this._anyControlsHaveStatus(xf)?xf:wf}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ef(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Af extends kf{constructor(t=null,e,n){super(If(e),Sf(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Df extends kf{constructor(t,e,n){super(If(e),Sf(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Af?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,i)=>{n=e(n,t,i)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class jf extends kf{constructor(t,e,n){super(If(e),Sf(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Af?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Rf={provide:Fd,useExisting:wt(()=>Nf)},Mf=(()=>Promise.resolve(null))();let Nf=(()=>{class t extends Fd{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new fa,this.form=new Df({},vf(t),bf(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Mf.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),yf(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Mf.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this._directives,t)})}addFormGroup(t){Mf.then(()=>{const e=this._findContainer(t.path),n=new Df({});(function(t,e){t.validator=Kd.compose([t.validator,e.validator]),t.asyncValidator=Kd.composeAsync([t.asyncValidator,e.asyncValidator])})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Mf.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Mf.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(Ao(qd,10),Ao(Gd,10))},t.\u0275dir=ye({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Bo("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bs([Rf]),yo]}),t})();const Ff={provide:Ld,useExisting:wt(()=>Lf)},Vf=(()=>Promise.resolve(null))();let Lf=(()=>{class t extends Ld{constructor(t,e,n,i){super(),this.control=new Af,this._registered=!1,this.update=new fa,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);let n=void 0,i=void 0,r=void 0;return e.forEach(t=>{var e;t.constructor===Md?n=t:(e=t,_f.some(t=>e.constructor===t)?i=t:r=t)}),r||i||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(t,e){return[...e.path,t]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return vf(this._rawValidators)}get asyncValidator(){return bf(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){yf(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Vf.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Vf.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(Ao(Fd,9),Ao(qd,10),Ao(Gd,10),Ao(kd,10))},t.\u0275dir=ye({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[bs([Ff]),yo,Ne]}),t})(),Uf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Bf={provide:qd,useExisting:wt(()=>Hf),multi:!0};let Hf=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?Kd.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&To("required",e.required?"":null)},inputs:{required:"required"},features:[bs([Bf])]}),t})();const Wf={provide:qd,useExisting:wt(()=>zf),multi:!0};let zf=(()=>{class t{constructor(){this._enabled=!1}set email(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()}validate(t){return this._enabled?Kd.email(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[bs([Wf])]}),t})();const qf={provide:qd,useExisting:wt(()=>Gf),multi:!0};let Gf=(()=>{class t{constructor(){this._validator=Kd.nullValidator}ngOnChanges(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=Kd.pattern(this.pattern)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&To("pattern",e.pattern?e.pattern:null)},inputs:{pattern:"pattern"},features:[bs([qf]),Ne]}),t})(),Yf=(()=>{class t{}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)}}),t})(),Kf=(()=>{class t{}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[rf],imports:[Yf]}),t})();function Xf(t,e){1&t&&(Mo(0,"p"),Jo(1,"name is required"),No())}function Qf(t,e){if(1&t&&(Mo(0,"div",16),Eo(1,Xf,2,0,"p",17),No()),2&t){zo();const t=ko(14);Mi(1),jo("ngIf",t.errors.required)}}function $f(t,e){1&t&&(Mo(0,"p"),Jo(1,"location is required"),No())}function Zf(t,e){if(1&t&&(Mo(0,"div",16),Eo(1,$f,2,0,"p",17),No()),2&t){zo();const t=ko(22);Mi(1),jo("ngIf",t.errors.required)}}function Jf(t,e){1&t&&(Mo(0,"p"),Jo(1,"message is required"),No())}function tg(t,e){if(1&t&&(Mo(0,"div",16),Eo(1,Jf,2,0,"p",17),No()),2&t){zo();const t=ko(30);Mi(1),jo("ngIf",t.errors.required)}}function eg(t,e){if(1&t&&(Mo(0,"div"),Mo(1,"div"),Jo(2),Fo(3,"br"),No(),No()),2&t){const t=e.$implicit;Mi(2),es("",t," ")}}function ng(t,e){if(1&t){const t=Vo();Mo(0,"div"),Mo(1,"div"),Fo(2,"br"),Mo(3,"div"),Jo(4),Fo(5,"br"),Jo(6),Fo(7,"br"),Jo(8),Fo(9,"br"),No(),Mo(10,"div"),Jo(11,"Message:"),No(),Eo(12,eg,4,1,"div",15),Mo(13,"input",18),Bo("click",(function(){sn(t);const n=e.index;return zo().deleteTask(n)})),No(),Fo(14,"hr"),No(),Fo(15,"div",19),No()}if(2&t){const t=e.$implicit;Mi(4),es("Name: ",t.name," "),Mi(2),es(" Location: ",t.location,""),Mi(2),es(" Time: ",t.time,""),Mi(4),jo("ngForOf",t.message)}}const ig=function(t){return{"is-invalid":t}};class rg{constructor(){this.message=[]}}let og=(()=>{class t{constructor(){this.model=new rg,this.items=[]}ngOnInit(){}deleteTask(t){this.items.splice(t,1)}onSubmit(t){if(console.log(t.value),""===this.newTask);else{this.name=this.model.name,this.location=this.model.location,this.time=this.model.time,this.newMessage=this.model.newMessage;const t=new rg;t.location=this.location,t.time=new Date(Date.parse((new Date).toString())),t.newMessage=this.newMessage,t.name=this.name;let e="";for(let n=0;n<t.newMessage.length;n++){const i=t.newMessage.charAt(n);e=e.concat(i),(n+1)%40==0&&(t.message.push(e),e="")}t.message.push(e),t.message.push(""),this.items.push(t),console.log(t.message)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["app-record"]],decls:37,vars:16,consts:[[1,"container-fluid",2,"text-align","center"],[1,"divClass1"],[3,"ngSubmit"],["myForm","ngForm"],[1,"form-group4"],["type","text","name","name","required","",1,"center-block4",3,"ngModel","ngClass","ngModelChange"],["name","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"form-group1"],["type","text","name","location","required","",1,"center-block1",3,"ngModel","ngClass","ngModelChange"],["location","ngModel"],[1,"form-group3"],["type","text","name","newMessage","required","",1,"center-block3",3,"ngModel","ngClass","ngModelChange"],["message","ngModel"],[1,"submit"],[4,"ngFor","ngForOf"],[1,"invalid-feedback"],[4,"ngIf"],["type","button","value","Delete",3,"click"],[1,"col-3","d-none","col-md-3","d-md-block"]],template:function(t,e){if(1&t){const t=Vo();Mo(0,"div",0),Mo(1,"div"),Mo(2,"div"),Jo(3," PATIENT RECORDS "),No(),No(),Fo(4,"br"),Mo(5,"div"),Mo(6,"div",1),Mo(7,"form",2,3),Bo("ngSubmit",(function(){sn(t);const n=ko(8);return n.form.valid&&e.onSubmit(n)})),Mo(9,"div",4),Mo(10,"label"),Jo(11,"Please enter the Name:"),No(),Fo(12,"br"),Mo(13,"input",5,6),Bo("ngModelChange",(function(t){return e.model.name=t})),No(),Fo(15,"br"),Eo(16,Qf,2,1,"div",7),No(),Mo(17,"div",8),Mo(18,"label"),Jo(19,"Please enter the location:"),No(),Fo(20,"br"),Mo(21,"input",9,10),Bo("ngModelChange",(function(t){return e.model.location=t})),No(),Fo(23,"br"),Eo(24,Zf,2,1,"div",7),No(),Mo(25,"div",11),Mo(26,"label"),Jo(27,"Please enter the mssage:"),No(),Fo(28,"br"),Mo(29,"input",12,13),Bo("ngModelChange",(function(t){return e.model.newMessage=t})),No(),Fo(31,"br"),Eo(32,tg,2,1,"div",7),No(),Fo(33,"br"),Mo(34,"button",14),Jo(35,"Submit"),No(),No(),No(),No(),Eo(36,ng,16,4,"div",15),No()}if(2&t){const t=ko(8),n=ko(14),i=ko(22),r=ko(30);Mi(13),jo("ngModel",e.model.name)("ngClass",aa(10,ig,t.submitted&&n.invalid)),Mi(3),jo("ngIf",t.submitted&&n.invalid),Mi(5),jo("ngModel",e.model.location)("ngClass",aa(12,ig,t.submitted&&i.invalid)),Mi(3),jo("ngIf",t.submitted&&i.invalid),Mi(5),jo("ngModel",e.model.newMessage)("ngClass",aa(14,ig,t.submitted&&r.invalid)),Mi(3),jo("ngIf",t.submitted&&r.invalid),Mi(4),jo("ngForOf",e.items)}},directives:[Uf,Hd,Nf,Md,Hf,Bd,Lf,ul,pl,hl],styles:["div.divClass1[_ngcontent-%COMP%]{text-align:center;color:#9500ff}button.submit[_ngcontent-%COMP%]{width:100px;background-color:#00bfff}.center-block1[_ngcontent-%COMP%], .center-block2[_ngcontent-%COMP%], .center-block4[_ngcontent-%COMP%]{width:700px;text-align:center}.center-block3[_ngcontent-%COMP%]{width:700px;height:80px}.cabin[_ngcontent-%COMP%]{background-color:green}"]}),t})();var sg=n("zIRd"),ag=(n("t6oF"),n("6Uf2"),n("30Go")),ug=n("q/0M"),lg=n("qOnz"),hg=function(t,e){return(hg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function cg(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var pg,dg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fg=fg||{},gg=dg||self;function yg(){}function mg(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function vg(t){var e=mg(t);return"array"==e||"object"==e&&"number"==typeof t.length}function bg(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var _g="closure_uid_"+(1e9*Math.random()>>>0),wg=0;function xg(t,e,n){return t.call.apply(t.bind,arguments)}function Pg(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Cg(t,e,n){return(Cg=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xg:Pg).apply(null,arguments)}function Ig(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var Og=Date.now;function Sg(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function Tg(){this.j=this.j,this.i=this.i}Tg.prototype.j=!1,Tg.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,_g)&&t[_g]||(t[_g]=++wg)}(this)},Tg.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Eg=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},kg=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r="string"==typeof t?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)};function Ag(t){return Array.prototype.concat.apply([],arguments)}function Dg(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function jg(t){return/^[\s\xa0]*$/.test(t)}var Rg,Mg=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ng(t,e){return-1!=t.indexOf(e)}function Fg(t,e){return t<e?-1:t>e?1:0}t:{var Vg=gg.navigator;if(Vg){var Lg=Vg.userAgent;if(Lg){Rg=Lg;break t}}Rg=""}function Ug(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function Bg(t){var e={};for(var n in t)e[n]=t[n];return e}var Hg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wg(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<Hg.length;o++)n=Hg[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function zg(t){return zg[" "](t),t}zg[" "]=yg;var qg,Gg,Yg=Ng(Rg,"Opera"),Kg=Ng(Rg,"Trident")||Ng(Rg,"MSIE"),Xg=Ng(Rg,"Edge"),Qg=Xg||Kg,$g=Ng(Rg,"Gecko")&&!(Ng(Rg.toLowerCase(),"webkit")&&!Ng(Rg,"Edge"))&&!(Ng(Rg,"Trident")||Ng(Rg,"MSIE"))&&!Ng(Rg,"Edge"),Zg=Ng(Rg.toLowerCase(),"webkit")&&!Ng(Rg,"Edge");function Jg(){var t=gg.document;return t?t.documentMode:void 0}t:{var ty="",ey=(Gg=Rg,$g?/rv:([^\);]+)(\)|;)/.exec(Gg):Xg?/Edge\/([\d\.]+)/.exec(Gg):Kg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gg):Zg?/WebKit\/(\S+)/.exec(Gg):Yg?/(?:Version)[ \/]?(\S+)/.exec(Gg):void 0);if(ey&&(ty=ey?ey[1]:""),Kg){var ny=Jg();if(null!=ny&&ny>parseFloat(ty)){qg=String(ny);break t}}qg=ty}var iy={};function ry(t){return function(t,e){var n=iy;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Mg(String(qg)).split("."),i=Mg(String(t)).split("."),r=Math.max(n.length,i.length),o=0;0==e&&o<r;o++){var s=n[o]||"",a=i[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Fg(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Fg(0==s[2].length,0==a[2].length)||Fg(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var oy=gg.document&&Kg&&(Jg()||parseInt(qg,10))||void 0,sy=!Kg||9<=Number(oy),ay=Kg&&!ry("9"),uy=function(){if(!gg.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{gg.addEventListener("test",yg,e),gg.removeEventListener("test",yg,e)}catch(n){}return t}();function ly(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function hy(t,e){if(ly.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if($g){t:{try{zg(e.nodeName);var r=!0;break t}catch(o){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:cy[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ly.prototype.b=function(){this.defaultPrevented=!0},Sg(hy,ly);var cy={2:"touch",3:"pen",4:"mouse"};hy.prototype.b=function(){hy.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ay)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var py="closure_listenable_"+(1e6*Math.random()|0),dy=0;function fy(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ca=r,this.key=++dy,this.Y=this.Z=!1}function gy(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function yy(t){this.src=t,this.a={},this.b=0}function my(t,e){var n=e.type;if(n in t.a){var i,r=t.a[n],o=Eg(r,e);(i=0<=o)&&Array.prototype.splice.call(r,o,1),i&&(gy(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function vy(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==i)return r}return-1}yy.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=vy(t,e,i,r);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new fy(e,this.src,o,!!i,r)).Z=n,t.push(e)),e};var by="closure_lm_"+(1e6*Math.random()|0),_y={};function wy(t,e,n,i,r){if(i&&i.once)return function t(e,n,i,r,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],i,r,o);return null}return i=Ey(i),e&&e[py]?e.wa(n,i,bg(r)?!!r.capture:!!r,o):xy(e,n,i,!0,r,o)}(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)wy(t,e[o],n,i,r);return null}return n=Ey(n),t&&t[py]?t.va(e,n,bg(i)?!!i.capture:!!i,r):xy(t,e,n,!1,i,r)}function xy(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=bg(r)?!!r.capture:!!r;if(s&&!sy)return null;var a=Sy(t);if(a||(t[by]=a=new yy(t)),(n=a.add(e,n,i,s,o)).proxy)return n;if(i=function(){var t=Oy,e=sy?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)uy||(r=s),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Cy(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Py(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[py])my(e.c,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Cy(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Sy(e))?(my(n,t),0==n.b&&(n.src=null,e[by]=null)):gy(t)}}}function Cy(t){return t in _y?_y[t]:_y[t]="on"+t}function Iy(t,e){var n=t.listener,i=t.ca||t.src;return t.Z&&Py(t),n.call(i,e)}function Oy(t,e){if(t.Y)return!0;if(!sy){if(!e)t:{e=["window","event"];for(var n=gg,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}return Iy(t,e=new hy(e,this))}return Iy(t,new hy(e,this))}function Sy(t){return(t=t[by])instanceof yy?t:null}var Ty="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ey(t){return"function"==mg(t)?t:(t[Ty]||(t[Ty]=function(e){return t.handleEvent(e)}),t[Ty])}function ky(){Tg.call(this),this.c=new yy(this),this.J=this,this.C=null}function Ay(t,e,n,i){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&my(t.c,s),r=!1!==a.call(u,i)&&r}}return r&&!i.defaultPrevented}Sg(ky,Tg),ky.prototype[py]=!0,(pg=ky.prototype).addEventListener=function(t,e,n,i){wy(this,t,e,n,i)},pg.removeEventListener=function(t,e,n,i){!function t(e,n,i,r,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],i,r,o);else r=bg(r)?!!r.capture:!!r,i=Ey(i),e&&e[py]?(e=e.c,(n=String(n).toString())in e.a&&-1<(i=vy(s=e.a[n],i,r,o))&&(gy(s[i]),Array.prototype.splice.call(s,i,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=Sy(e))&&(n=e.a[n.toString()],e=-1,n&&(e=vy(n,i,r,o)),(i=-1<e?n[e]:null)&&Py(i))}(this,t,e,n,i)},pg.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var i=t.type||t;if("string"==typeof t)t=new ly(t,n);else if(t instanceof ly)t.target=t.target||n;else{var r=t;Wg(t=new ly(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];r=Ay(s,i,!0,t)&&r}if(r=Ay(s=t.a=n,i,!0,t)&&r,r=Ay(s,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=Ay(s=t.a=e[o],i,!1,t)&&r;return r},pg.G=function(){if(ky.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)gy(n[i]);delete e.a[t],e.b--}}this.C=null},pg.va=function(t,e,n,i){return this.c.add(String(t),e,!1,n,i)},pg.wa=function(t,e,n,i){return this.c.add(String(t),e,!0,n,i)};var Dy=gg.JSON.stringify;function jy(){this.b=this.a=null}var Ry,My=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new Fy}),(function(t){t.reset()}),100);function Ny(){var t=By,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Fy(){this.next=this.b=this.a=null}function Vy(t){gg.setTimeout((function(){throw t}),0)}function Ly(t,e){Ry||function(){var t=gg.Promise.resolve(void 0);Ry=function(){t.then(Hy)}}(),Uy||(Ry(),Uy=!0),By.add(t,e)}jy.prototype.add=function(t,e){var n=My.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Fy.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Fy.prototype.reset=function(){this.next=this.b=this.a=null};var Uy=!1,By=new jy;function Hy(){for(var t;t=Ny();){try{t.a.call(t.b)}catch(n){Vy(n)}var e=My;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Uy=!1}function Wy(t,e){ky.call(this),this.b=t||1,this.a=e||gg,this.f=Cg(this.Ya,this),this.g=Og()}function zy(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function qy(t,e,n){if("function"==mg(t))n&&(t=Cg(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Cg(t.handleEvent,t)}return 2147483647<Number(e)?-1:gg.setTimeout(t,e||0)}function Gy(t){t.a=qy((function(){t.a=null,t.c&&(t.c=!1,Gy(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Sg(Wy,ky),(pg=Wy.prototype).aa=!1,pg.M=null,pg.Ya=function(){if(this.aa){var t=Og()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(zy(this),this.start()))}},pg.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Og())},pg.G=function(){Wy.S.G.call(this),zy(this),delete this.a};var Yy=function(t){function e(e,n,i){var r=t.call(this)||this;return r.g=null!=i?e.bind(i):e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}hg(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Gy(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(gg.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Tg);function Ky(t){Tg.call(this),this.b=t,this.a={}}Sg(Ky,Tg);var Xy=[];function Qy(t,e,n,i){Array.isArray(n)||(n&&(Xy[0]=n.toString()),n=Xy);for(var r=0;r<n.length;r++){var o=wy(e,n[r],i||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function $y(t){Ug(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Py(t)}),t),t.a={}}function Zy(){this.a=!0}function Jy(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<r.length;s++)r[s]=""}}}return Dy(n)}catch(a){return e}}(t,n)+(i?" "+i:"")}))}Ky.prototype.G=function(){Ky.S.G.call(this),$y(this)},Ky.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zy.prototype.info=function(){};var tm=null;function em(){return tm=tm||new ky}function nm(t){ly.call(this,"serverreachability",t)}function im(t){var e=em();e.dispatchEvent(new nm(e,t))}function rm(t){ly.call(this,"statevent",t)}function om(t){var e=em();e.dispatchEvent(new rm(e,t))}function sm(t){ly.call(this,"timingevent",t)}function am(t,e){if("function"!=mg(t))throw Error("Fn must not be null and must be a function");return gg.setTimeout((function(){t()}),e)}Sg(nm,ly),Sg(rm,ly),Sg(sm,ly);var um={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},lm={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function hm(){}function cm(){}hm.prototype.a=null;var pm,dm={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function fm(){ly.call(this,"d")}function gm(){ly.call(this,"c")}function ym(){}function mm(t,e,n,i){this.g=t,this.c=e,this.f=n,this.T=i||1,this.J=new Ky(this),this.P=vm,this.R=new Wy(t=Qg?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}Sg(fm,ly),Sg(gm,ly),Sg(ym,hm),pm=new ym;var vm=45e3,bm={},_m={};function wm(t,e,n){t.H=1,t.i=Wm(Fm(e)),t.j=n,t.I=!0,xm(t,null)}function xm(t,e){t.u=Og(),Im(t),t.l=Fm(t.i);var n=t.l,i=t.T;Array.isArray(i)||(i=[String(i)]),nv(n.b,"t",i),t.D=0,t.a=Qv(t.g,t.g.C?e:null),0<t.O&&(t.F=new Yy(Cg(t.Ca,t,t.a),t.O)),Qy(t.J,t.a,"readystatechange",t.Wa),e=t.B?Bg(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),im(1),function(t,e,n,i,r,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var h=l[0];l=l[1];var c=h.split("_");s=2<=c.length&&"type"==c[1]?s+(h+"=")+l+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function Pm(t,e,n){for(var i=!0;!t.A&&t.D<n.length;){var r=Cm(t,n);if(r==_m){4==e&&(t.h=4,om(14),i=!1),Jy(t.c,t.f,null,"[Incomplete Response]");break}if(r==bm){t.h=4,om(15),Jy(t.c,t.f,n,"[Invalid Chunk]"),i=!1;break}Jy(t.c,t.f,r,null),km(t,r)}4==e&&0==n.length&&(t.h=1,om(16),i=!1),t.b=t.b&&i,i?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hv(e),e.F=!0)):(Jy(t.c,t.f,n,"[Invalid Chunked Response]"),Em(t),Tm(t))}function Cm(t,e){var n=t.D,i=e.indexOf("\n",n);return-1==i?_m:(n=Number(e.substring(n,i)),isNaN(n)?bm:(i+=1)+n>e.length?_m:(e=e.substr(i,n),t.D=i+n,e))}function Im(t){t.U=Og()+t.P,Om(t,t.P)}function Om(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=am(Cg(t.Ua,t),e)}function Sm(t){t.o&&(gg.clearTimeout(t.o),t.o=null)}function Tm(t){0==t.g.v||t.A||qv(t.g,t)}function Em(t){Sm(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,zy(t.R),$y(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function km(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||lv(n.b,t)))if(n.I=t.N,!t.C&&lv(n.b,t)&&3==n.v){try{var i=n.ka.a.parse(e)}catch(y){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;zv(n),jv(n)}Bv(n),om(18)}}else n.oa=r[1],0<n.oa-n.P&&37500>r[2]&&n.H&&0==n.o&&!n.m&&(n.m=am(Cg(n.Ra,n),6e3));if(1>=uv(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else Yv(n,11)}else if((t.C||n.a==t)&&zv(n),!jg(e))for(e=i=n.ka.a.parse(e),i=0;i<e.length;i++)if(n.P=(r=e[i])[0],r=r[1],2==n.v)if("c"==r[0]){n.J=r[1],n.ga=r[2];var o=r[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=r[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=r[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var l=t.a;if(l){var h=l.a?l.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var c=u.b;!c.a&&(Ng(h,"spdy")||Ng(h,"quic")||Ng(h,"h2"))&&(c.f=c.g,c.a=new Set,c.b&&(hv(c,c.b),c.b=null))}if(u.A){var p=l.a?l.a.getResponseHeader("X-HTTP-Session-Id"):null;p&&(u.na=p,Hm(u.B,u.A,p))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=Og()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Xv(u,u.C?u.ga:null,u.fa),d.C){cv(u.b,d);var f=d,g=u.D;g&&f.setTimeout(g),f.o&&(Sm(f),Im(f)),u.a=d}else Uv(u);0<n.g.length&&Nv(n)}else"stop"!=r[0]&&"close"!=r[0]||Yv(n,7);else 3==n.v&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Yv(n,7):Dv(n):"noop"!=r[0]&&n.f&&n.f.sa(r),n.o=0);im(4)}catch(y){}}function Am(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(vg(t)||"string"==typeof t)kg(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(vg(t)||"string"==typeof t){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;r=(i=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(vg(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t)).length;for(var o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}}function Dm(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Dm)for(n=t.L(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function jm(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];Rm(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var r={};for(n=e=0;e<t.a.length;)Rm(r,i=t.a[e])||(t.a[n++]=i,r[i]=1),e++;t.a.length=n}}function Rm(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(pg=mm.prototype).setTimeout=function(t){this.P=t},pg.Wa=function(t){t=t.target;var e=this.F;e&&3==Tv(t)?e.f():this.Ca(t)},pg.Ca=function(t){try{if(t==this.a)t:{var e=Tv(this.a),n=this.a.ua(),i=this.a.X();if(!(3>e||3==e&&!Qg&&!this.a.$())){this.A||4!=e||7==n||im(8==n||0>=i?3:2),Sm(this);var r=this.a.X();this.N=r;var o=this.a.$();if(this.b=200==r,function(t,e,n,i,r,o,s){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,r),this.b){if(this.V&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jg(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,om(12),Em(this),Tm(this);break t}Jy(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,km(this,u)}this.I?(Pm(this,e,o),Qg&&this.b&&3==e&&(Qy(this.J,this.R,"tick",this.Va),this.R.start())):(Jy(this.c,this.f,o,null),km(this,o)),4==e&&Em(this),this.b&&!this.A&&(4==e?qv(this.g,this):(this.b=!1,Im(this)))}else 400==r&&0<o.indexOf("Unknown SID")?(this.h=3,om(12)):(this.h=0,om(13)),Em(this),Tm(this)}}}catch(yT){}},pg.Va=function(){if(this.a){var t=Tv(this.a),e=this.a.$();this.D<e.length&&(Sm(this),Pm(this,t,e),this.b&&4!=t&&Im(this))}},pg.cancel=function(){this.A=!0,Em(this)},pg.Ua=function(){this.o=null;var t=Og();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(im(3),om(17)),Em(this),this.h=2,Tm(this)):Om(this,this.U-t)},(pg=Dm.prototype).K=function(){jm(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},pg.L=function(){return jm(this),this.a.concat()},pg.get=function(t,e){return Rm(this.b,t)?this.b[t]:e},pg.set=function(t,e){Rm(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},pg.forEach=function(t,e){for(var n=this.L(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var Mm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nm(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Nm){this.a=void 0!==e?e:t.a,Vm(this,t.f),this.j=t.j,Lm(this,t.c),Um(this,t.h),this.g=t.g,e=t.b;var n=new Zm;n.c=e.c,e.a&&(n.a=new Dm(e.a),n.b=e.b),Bm(this,n),this.i=t.i}else t&&(n=String(t).match(Mm))?(this.a=!!e,Vm(this,n[1]||"",!0),this.j=zm(n[2]||""),Lm(this,n[3]||"",!0),Um(this,n[4]),this.g=zm(n[5]||"",!0),Bm(this,n[6]||"",!0),this.i=zm(n[7]||"")):(this.a=!!e,this.b=new Zm(null,this.a))}function Fm(t){return new Nm(t)}function Vm(t,e,n){t.f=n?zm(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Lm(t,e,n){t.c=n?zm(e,!0):e}function Um(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Bm(t,e,n){e instanceof Zm?(t.b=e,function(t,e){e&&!t.f&&(Jm(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tv(this,e),nv(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=qm(e,Qm)),t.b=new Zm(e,t.a))}function Hm(t,e,n){t.b.set(e,n)}function Wm(t){return Hm(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Og()).toString(36)),t}function zm(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qm(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Gm),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Gm(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Nm.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qm(e,Ym,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(qm(e,Ym,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(qm(n,"/"==n.charAt(0)?Xm:Km,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",qm(n,$m)),t.join("")};var Ym=/[#\/\?@]/g,Km=/[#\?:]/g,Xm=/[#\?]/g,Qm=/[#\?@]/g,$m=/#/g;function Zm(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jm(t){t.a||(t.a=new Dm,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function tv(t,e){Jm(t),e=iv(t,e),Rm(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Rm((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&jm(t)))}function ev(t,e){return Jm(t),e=iv(t,e),Rm(t.a.b,e)}function nv(t,e,n){tv(t,e),0<n.length&&(t.c=null,t.a.set(iv(t,e),Dg(n)),t.b+=n.length)}function iv(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function rv(t,e){this.b=t,this.a=e}function ov(t){this.g=t||sv,t=gg.PerformanceNavigationTiming?0<(t=gg.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(gg.ia&&gg.ia.ya&&gg.ia.ya()&&gg.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(pg=Zm.prototype).add=function(t,e){Jm(this),this.c=null,t=iv(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},pg.forEach=function(t,e){Jm(this),this.a.forEach((function(n,i){kg(n,(function(n){t.call(e,n,i,this)}),this)}),this)},pg.L=function(){Jm(this);for(var t=this.a.K(),e=this.a.L(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},pg.K=function(t){Jm(this);var e=[];if("string"==typeof t)ev(this,t)&&(e=Ag(e,this.a.get(iv(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ag(e,t[n])}return e},pg.set=function(t,e){return Jm(this),this.c=null,ev(this,t=iv(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},pg.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},pg.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.K(i);for(var o=0;o<i.length;o++){var s=r;""!==i[o]&&(s+="="+encodeURIComponent(String(i[o]))),t.push(s)}}return this.c=t.join("&")};var sv=10;function av(t){return!!t.b||!!t.a&&t.a.size>=t.f}function uv(t){return t.b?1:t.a?t.a.size:0}function lv(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function hv(t,e){t.a?t.a.add(e):t.b=e}function cv(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function pv(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var i=t.c;try{for(var r=cg(t.a.values()),o=r.next();!o.done;o=r.next())i=i.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}return Dg(t.c)}function dv(){}function fv(){this.a=new dv}function gv(t,e,n){var i=n||"";try{Am(t,(function(t,n){var r=t;bg(t)&&(r=Dy(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function yv(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(o){}}ov.prototype.cancel=function(){var t,e;if(this.c=pv(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=cg(this.a.values()),i=n.next();!i.done;i=n.next())i.value.cancel()}catch(r){t={error:r}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},dv.prototype.stringify=function(t){return gg.JSON.stringify(t,void 0)},dv.prototype.parse=function(t){return gg.JSON.parse(t,void 0)};var mv=gg.JSON.parse;function vv(t){ky.call(this),this.headers=new Dm,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=bv,this.D=this.F=!1}Sg(vv,ky);var bv="",_v=/^https?$/i,wv=["POST","PUT"];function xv(t){return"content-type"==t.toLowerCase()}function Pv(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Cv(t),Ov(t)}function Cv(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Iv(t){if(t.b&&void 0!==fg&&(!t.s[1]||4!=Tv(t)||2!=t.X()))if(t.l&&4==Tv(t))qy(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==Tv(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(e=i)){var r;if(r=0===n){var o=String(t.B).match(Mm)[1]||null;if(!o&&gg.self&&gg.self.location){var s=gg.self.location.protocol;o=s.substr(0,s.length-1)}r=!_v.test(o?o.toLowerCase():"")}e=r}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Tv(t)?t.a.statusText:""}catch(u){a=""}t.f=a+" ["+t.X()+"]",Cv(t)}}finally{Ov(t)}}}function Ov(t,e){if(t.a){Sv(t);var n=t.a,i=t.s[0]?yg:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(r){}}}function Sv(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(gg.clearTimeout(t.m),t.m=null)}function Tv(t){return t.a?t.a.readyState:0}function Ev(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=function(t){var e="";return Ug(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Hm(t,e,n))}function kv(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Av(t){this.pa=0,this.g=[],this.c=new Zy,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=kv("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=kv("baseRetryDelayMs",5e3,t),this.Ma=kv("retryDelaySeedMs",1e4,t),this.Ja=kv("forwardChannelMaxRetries",2,t),this.ma=kv("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ov(t&&t.concurrentRequestLimit),this.ka=new fv,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Dv(t){if(Rv(t),3==t.v){var e=t.R++,n=Fm(t.B);Hm(n,"SID",t.J),Hm(n,"RID",e),Hm(n,"TYPE","terminate"),Vv(t,n),(e=new mm(t,t.c,e,void 0)).H=2,e.i=Wm(Fm(n)),n=!1,gg.navigator&&gg.navigator.sendBeacon&&(n=gg.navigator.sendBeacon(e.i.toString(),"")),!n&&gg.Image&&((new Image).src=e.i,n=!0),n||(e.a=Qv(e.g,null),e.a.ba(e.i)),e.u=Og(),Im(e)}Kv(t)}function jv(t){t.a&&(Hv(t),t.a.cancel(),t.a=null)}function Rv(t){jv(t),t.j&&(gg.clearTimeout(t.j),t.j=null),zv(t),t.b.cancel(),t.h&&("number"==typeof t.h&&gg.clearTimeout(t.h),t.h=null)}function Mv(t,e){t.g.push(new rv(t.La++,e)),3==t.v&&Nv(t)}function Nv(t){av(t.b)||t.h||(t.h=!0,Ly(t.Ba,t),t.u=0)}function Fv(t,e){var n;n=e?e.f:t.R++;var i=Fm(t.B);Hm(i,"SID",t.J),Hm(i,"RID",n),Hm(i,"AID",t.P),Vv(t,i),t.i&&t.l&&Ev(i,t.i,t.l),n=new mm(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Lv(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),hv(t.b,n),wm(n,i,e)}function Vv(t,e){t.f&&Am({},(function(t,n){Hm(e,n,t)}))}function Lv(t,e,n){n=Math.min(t.g.length,n);var i=t.f?Cg(t.f.Ha,t.f,t):null;t:for(var r=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=r[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var l=r[u].b,h=r[u].a;if(0>(l-=o))o=Math.max(0,r[u].b-100),a=!1;else try{gv(h,s,"req"+l+"_")}catch(Ab){i&&i(h)}}if(a){i=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,i}function Uv(t){t.a||t.j||(t.U=1,Ly(t.Aa,t),t.o=0)}function Bv(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=am(Cg(t.Aa,t),Gv(t,t.o)),t.o++,0))}function Hv(t){null!=t.s&&(gg.clearTimeout(t.s),t.s=null)}function Wv(t){t.a=new mm(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Fm(t.la);Hm(e,"RID","rpc"),Hm(e,"SID",t.J),Hm(e,"CI",t.H?"0":"1"),Hm(e,"AID",t.P),Vv(t,e),Hm(e,"TYPE","xmlhttp"),t.i&&t.l&&Ev(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Wm(Fm(e)),n.j=null,n.I=!0,xm(n,t)}function zv(t){null!=t.m&&(gg.clearTimeout(t.m),t.m=null)}function qv(t,e){var n=null;if(t.a==e){zv(t),Hv(t),t.a=null;var i=2}else{if(!lv(t.b,e))return;n=e.s,cv(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==i){n=e.j?e.j.length:0,e=Og()-e.u;var r=t.u;(i=em()).dispatchEvent(new sm(i,n,e,r)),Nv(t)}else Uv(t);else if(3==(r=e.h)||0==r&&0<t.I||!(1==i&&function(t,e){return!(uv(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=am(Cg(t.Ba,t,e),Gv(t,t.u)),t.u++,0)))}(t,e)||2==i&&Bv(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),r){case 1:Yv(t,5);break;case 4:Yv(t,10);break;case 3:Yv(t,6);break;default:Yv(t,2)}}function Gv(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Yv(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var i=Cg(t.Xa,t);n||(n=new Nm("//www.google.com/images/cleardot.gif"),gg.location&&"http"==gg.location.protocol||Vm(n,"https"),Wm(n)),function(t,e){var n=new Zy;if(gg.Image){var i=new Image;i.onload=Ig(yv,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Ig(yv,n,i,"TestLoadImage: error",!1,e),i.onabort=Ig(yv,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ig(yv,n,i,"TestLoadImage: timeout",!1,e),gg.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else om(2);t.v=0,t.f&&t.f.ra(e),Kv(t),Rv(t)}function Kv(t){t.v=0,t.I=-1,t.f&&(0==pv(t.b).length&&0==t.g.length||(t.b.c.length=0,Dg(t.g),t.g.length=0),t.f.qa())}function Xv(t,e,n){var i=function(t){return t instanceof Nm?Fm(t):new Nm(t,void 0)}(n);if(""!=i.c)e&&Lm(i,e+"."+i.c),Um(i,i.h);else{var r=gg.location;i=function(t,e,n,i){var r=new Nm(null,void 0);return t&&Vm(r,t),e&&Lm(r,e),n&&Um(r,n),i&&(r.g=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,n)}return t.W&&Ug(t.W,(function(t,e){Hm(i,e,t)})),n=t.na,(e=t.A)&&n&&Hm(i,e,n),Hm(i,"VER",t.ha),Vv(t,i),i}function Qv(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vv(t.Ka)).F=t.C,e}function $v(){}function Zv(){if(Kg&&!(10<=Number(oy)))throw Error("Environmental error: no available transport.")}function Jv(t,e){ky.call(this),this.a=new Av(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!jg(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jg(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new nb(this)}function tb(t){fm.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function eb(){gm.call(this),this.status=1}function nb(t){this.a=t}(pg=vv.prototype).ba=function(t,e,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:pm),this.a.onreadystatechange=Cg(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Pv(this,o)}t=n||"";var r=new Dm(this.headers);i&&Am(i,(function(t,e){r.set(e,t)})),i=function(t){t:{for(var e=xv,n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(r.L()),n=gg.FormData&&t instanceof gg.FormData,!(0<=Eg(wv,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Sv(this),0<this.o&&((this.D=function(t){return Kg&&ry(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Cg(this.xa,this)):this.m=qy(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Pv(this,o)}},pg.xa=function(){void 0!==fg&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},pg.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ov(this))},pg.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ov(this,!0)),vv.S.G.call(this)},pg.za=function(){this.j||(this.A||this.l||this.g?Iv(this):this.Ta())},pg.Ta=function(){Iv(this)},pg.X=function(){try{return 2<Tv(this)?this.a.status:-1}catch(Gg){return-1}},pg.$=function(){try{return this.a?this.a.responseText:""}catch(Gg){return""}},pg.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),mv(e)}},pg.ua=function(){return this.h},pg.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(pg=Av.prototype).ha=8,pg.v=1,pg.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new mm(this,this.c,t,void 0),i=this.l;if(this.O&&(i?Wg(i=Bg(i),this.O):i=this.O),null===this.i&&(n.B=i),this.da)t:{for(var r=e=0;r<this.g.length;r++){var o=this.g[r];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=r;break t}if(4096===e||r===this.g.length-1){e=r+1;break t}}e=1e3}else e=1e3;e=Lv(this,n,e),Hm(r=Fm(this.B),"RID",t),Hm(r,"CVER",22),this.A&&Hm(r,"X-HTTP-Session-Id",this.A),Vv(this,r),this.i&&i&&Ev(r,this.i,i),hv(this.b,n),this.Ga&&Hm(r,"TYPE","init"),this.da?(Hm(r,"$req",e),Hm(r,"SID","null"),n.V=!0,wm(n,r,null)):wm(n,r,e),this.v=2}}else 3==this.v&&(t?Fv(this,t):0==this.g.length||av(this.b)||Fv(this))},pg.Aa=function(){if(this.j=null,Wv(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=am(Cg(this.Sa,this),t)}},pg.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,jv(this),Wv(this))},pg.Ra=function(){null!=this.m&&(this.m=null,jv(this),Bv(this),om(19))},pg.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),om(2)):(this.c.info("Failed to ping google.com"),om(1))},(pg=$v.prototype).ta=function(){},pg.sa=function(){},pg.ra=function(){},pg.qa=function(){},pg.Ha=function(){},Zv.prototype.a=function(t,e){return new Jv(t,e)},Sg(Jv,ky),(pg=Jv.prototype).addEventListener=function(t,e,n,i){Jv.S.addEventListener.call(this,t,e,n,i)},pg.removeEventListener=function(t,e,n,i){Jv.S.removeEventListener.call(this,t,e,n,i)},pg.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;om(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Xv(t,null,t.fa),Nv(t)},pg.close=function(){Dv(this.a)},pg.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Mv(this.a,e)}else this.g?((e={}).__data__=Dy(t),Mv(this.a,e)):Mv(this.a,t)},pg.G=function(){this.a.f=null,delete this.f,Dv(this.a),delete this.a,Jv.S.G.call(this)},Sg(tb,fm),Sg(eb,gm),Sg(nb,$v),nb.prototype.ta=function(){this.a.dispatchEvent("a")},nb.prototype.sa=function(t){this.a.dispatchEvent(new tb(t))},nb.prototype.ra=function(t){this.a.dispatchEvent(new eb(t))},nb.prototype.qa=function(){this.a.dispatchEvent("b")},Zv.prototype.createWebChannel=Zv.prototype.a,Jv.prototype.send=Jv.prototype.Pa,Jv.prototype.open=Jv.prototype.Oa,Jv.prototype.close=Jv.prototype.close,um.NO_ERROR=0,um.TIMEOUT=8,um.HTTP_ERROR=6,lm.COMPLETE="complete",cm.EventType=dm,dm.OPEN="a",dm.CLOSE="b",dm.ERROR="c",dm.MESSAGE="d",ky.prototype.listen=ky.prototype.va,vv.prototype.listenOnce=vv.prototype.wa,vv.prototype.getLastError=vv.prototype.Qa,vv.prototype.getLastErrorCode=vv.prototype.ua,vv.prototype.getStatus=vv.prototype.X,vv.prototype.getResponseJson=vv.prototype.Na,vv.prototype.getResponseText=vv.prototype.$,vv.prototype.send=vv.prototype.ba;var ib=um,rb=lm,ob=cm,sb=vv,ab=n("/6Yf"),ub={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},lb=function(t){function e(e,n){var i=this;return(i=t.call(this,n)||this).code=e,i.message=n,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return Object(ag.c)(e,t),e}(Error),hb=new ug.b("@firebase/firestore");function cb(){return hb.logLevel}function pb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(hb.logLevel<=ug.a.DEBUG){var i=e.map(gb);hb.debug.apply(hb,Object(ag.g)(["Firestore (8.0.1): "+t],i))}}function db(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(hb.logLevel<=ug.a.ERROR){var i=e.map(gb);hb.error.apply(hb,Object(ag.g)(["Firestore (8.0.1): "+t],i))}}function fb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(hb.logLevel<=ug.a.WARN){var i=e.map(gb);hb.warn.apply(hb,Object(ag.g)(["Firestore (8.0.1): "+t],i))}}function gb(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function yb(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.1) INTERNAL ASSERTION FAILED: "+t;throw db(e),new Error(e)}function mb(t,e){t||yb()}function vb(t,e){return t}function bb(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var _b=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var i=bb(40),r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length));return n},t}();function wb(t,e){return t<e?-1:t>e?1:0}function xb(t,e,n){return t.length===e.length&&t.every((function(t,i){return n(t,e[i])}))}function Pb(t){return t+"\0"}var Cb=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.i)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return wb(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Cb.h=new Cb("");var Ib=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Cb.fromBase64String(e))}catch(e){throw new lb(ub.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Cb.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}();function Ob(){if("undefined"==typeof Uint8Array)throw new lb(ub.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Sb(){if("undefined"==typeof atob)throw new lb(ub.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Tb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ag.c)(e,t),e.fromBase64String=function(t){Sb();try{return new e(Cb.fromBase64String(t))}catch(t){throw new lb(ub.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return Ob(),new e(Cb.fromUint8Array(t))},e.prototype.toBase64=function(){return Sb(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return Ob(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Ib),Eb=function(t,e,n,i,r,o){this._=t,this.persistenceKey=e,this.host=n,this.ssl=i,this.forceLongPolling=r,this.T=o},kb=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"I",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.u=function(t){return wb(this.projectId,t.projectId)||wb(this.database,t.database)},t}();function Ab(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Db(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jb(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Rb=function(){function t(t,e){this.m=t,this.A=e,this.R={}}return t.prototype.get=function(t){var e=this.m(t),n=this.R[e];if(void 0!==n)for(var i=0,r=n;i<r.length;i++){var o=r[i],s=o[1];if(this.A(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.m(t),i=this.R[n];if(void 0!==i){for(var r=0;r<i.length;r++)if(this.A(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e])}else this.R[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.m(t),n=this.R[e];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(this.A(n[i][0],t))return 1===n.length?delete this.R[e]:n.splice(i,1),!0;return!1},t.prototype.forEach=function(t){Db(this.R,(function(e,n){for(var i=0,r=n;i<r.length;i++){var o=r[i];t(o[0],o[1])}}))},t.prototype.P=function(){return jb(this.R)},t}(),Mb=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new lb(ub.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new lb(ub.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new lb(ub.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lb(ub.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.g=function(t){return this.seconds===t.seconds?wb(this.nanoseconds,t.nanoseconds):wb(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Nb=function(){function t(t){this.timestamp=t}return t.V=function(e){return new t(e)},t.min=function(){return new t(new Mb(0,0))},t.prototype.u=function(t){return this.timestamp.g(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.p=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.v=function(){return this.timestamp},t}(),Fb=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&yb(),void 0===n?n=t.length-e:n>t.length-e&&yb(),this.segments=t,this.offset=e,this.S=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.S},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.D(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.C(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.N=function(t){return this.C(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.F=function(){return this.C(this.segments,this.offset,this.length-1)},t.prototype.O=function(){return this.segments[this.offset]},t.prototype.k=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.P=function(){return 0===this.length},t.prototype.M=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.$=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.L=function(){return this.segments.slice(this.offset,this.limit())},t.D=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=t.get(i),o=e.get(i);if(r<o)return-1;if(r>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Vb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ag.c)(e,t),e.prototype.C=function(t,n,i){return new e(t,n,i)},e.prototype.B=function(){return this.L().join("/")},e.prototype.toString=function(){return this.B()},e.q=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=[],r=0,o=t;r<o.length;r++){var s=o[r];if(s.indexOf("//")>=0)throw new lb(ub.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");i.push.apply(i,s.split("/").filter((function(t){return t.length>0})))}return new e(i)},e.U=function(){return new e([])},e}(Fb),Lb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ub=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ag.c)(e,t),e.prototype.C=function(t,n,i){return new e(t,n,i)},e.K=function(t){return Lb.test(t)},e.prototype.B=function(){return this.L().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.K(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.B()},e.prototype.W=function(){return 1===this.length&&"__name__"===this.get(0)},e.j=function(){return new e(["__name__"])},e.G=function(t){for(var n=[],i="",r=0,o=function(){if(0===i.length)throw new lb(ub.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(i),i=""},s=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new lb(ub.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[r+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new lb(ub.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else"`"===a?(s=!s,r++):"."!==a||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new lb(ub.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.U=function(){return new e([])},e}(Fb),Bb=function(){function t(t){this.path=t}return t.H=function(e){return new t(Vb.q(e))},t.Y=function(e){return new t(Vb.q(e).N(5))},t.prototype.J=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Vb.D(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.D=function(t,e){return Vb.D(t.path,e.path)},t.X=function(t){return t.length%2==0},t.Z=function(e){return new t(new Vb(e.slice()))},t}();function Hb(t){return null==t}function Wb(t){return 0===t&&1/t==-1/0}function zb(t){return"number"==typeof t&&Number.isInteger(t)&&!Wb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var qb=function(t,e,n,i,r,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=s,this.tt=null};function Gb(t,e,n,i,r,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),new qb(t,e,n,i,r,o,s)}function Yb(t){var e=vb(t);if(null===e.tt){var n=e.path.B();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.B()+t.op.toString()+F_(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.B()+e.dir;var e})).join(","),Hb(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Vx(e.startAt)),e.endAt&&(n+="|ub:",n+=Vx(e.endAt)),e.tt=n}return e.tt}function Kb(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Wx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var i=0;i<t.filters.length;i++)if((r=t.filters[i]).op!==(o=e.filters[i]).op||!r.field.isEqual(o.field)||!j_(r.value,o.value))return!1;var r,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ux(t.startAt,e.startAt)&&Ux(t.endAt,e.endAt)}function Xb(t){return Bb.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Qb,$b,Zb=function(){function t(t,e,n,i,r,o,s){void 0===r&&(r=Nb.min()),void 0===o&&(o=Nb.min()),void 0===s&&(s=Cb.h),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=i,this.nt=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),Jb=function(t){this.count=t};function t_(t){switch(t){case ub.OK:return yb();case ub.CANCELLED:case ub.UNKNOWN:case ub.DEADLINE_EXCEEDED:case ub.RESOURCE_EXHAUSTED:case ub.INTERNAL:case ub.UNAVAILABLE:case ub.UNAUTHENTICATED:return!1;case ub.INVALID_ARGUMENT:case ub.NOT_FOUND:case ub.ALREADY_EXISTS:case ub.PERMISSION_DENIED:case ub.FAILED_PRECONDITION:case ub.ABORTED:case ub.OUT_OF_RANGE:case ub.UNIMPLEMENTED:case ub.DATA_LOSS:return!0;default:return yb()}}function e_(t){if(void 0===t)return db("GRPC error has no .code"),ub.UNKNOWN;switch(t){case Qb.OK:return ub.OK;case Qb.CANCELLED:return ub.CANCELLED;case Qb.UNKNOWN:return ub.UNKNOWN;case Qb.DEADLINE_EXCEEDED:return ub.DEADLINE_EXCEEDED;case Qb.RESOURCE_EXHAUSTED:return ub.RESOURCE_EXHAUSTED;case Qb.INTERNAL:return ub.INTERNAL;case Qb.UNAVAILABLE:return ub.UNAVAILABLE;case Qb.UNAUTHENTICATED:return ub.UNAUTHENTICATED;case Qb.INVALID_ARGUMENT:return ub.INVALID_ARGUMENT;case Qb.NOT_FOUND:return ub.NOT_FOUND;case Qb.ALREADY_EXISTS:return ub.ALREADY_EXISTS;case Qb.PERMISSION_DENIED:return ub.PERMISSION_DENIED;case Qb.FAILED_PRECONDITION:return ub.FAILED_PRECONDITION;case Qb.ABORTED:return ub.ABORTED;case Qb.OUT_OF_RANGE:return ub.OUT_OF_RANGE;case Qb.UNIMPLEMENTED:return ub.UNIMPLEMENTED;case Qb.DATA_LOSS:return ub.DATA_LOSS;default:return yb()}}($b=Qb||(Qb={}))[$b.OK=0]="OK",$b[$b.CANCELLED=1]="CANCELLED",$b[$b.UNKNOWN=2]="UNKNOWN",$b[$b.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$b[$b.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$b[$b.NOT_FOUND=5]="NOT_FOUND",$b[$b.ALREADY_EXISTS=6]="ALREADY_EXISTS",$b[$b.PERMISSION_DENIED=7]="PERMISSION_DENIED",$b[$b.UNAUTHENTICATED=16]="UNAUTHENTICATED",$b[$b.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$b[$b.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$b[$b.ABORTED=10]="ABORTED",$b[$b.OUT_OF_RANGE=11]="OUT_OF_RANGE",$b[$b.UNIMPLEMENTED=12]="UNIMPLEMENTED",$b[$b.INTERNAL=13]="INTERNAL",$b[$b.UNAVAILABLE=14]="UNAVAILABLE",$b[$b.DATA_LOSS=15]="DATA_LOSS";var n_=function(){function t(t,e){this.D=t,this.root=e||r_.EMPTY}return t.prototype.ot=function(e,n){return new t(this.D,this.root.ot(e,n,this.D).copy(null,null,r_.at,null,null))},t.prototype.remove=function(e){return new t(this.D,this.root.remove(e,this.D).copy(null,null,r_.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.P();){var n=this.D(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.P();){var i=this.D(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.P=function(){return this.root.P()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(){return this.root.ut()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new i_(this.root,null,this.D,!1)},t.prototype.ft=function(t){return new i_(this.root,t,this.D,!1)},t.prototype.dt=function(){return new i_(this.root,null,this.D,!0)},t.prototype.wt=function(t){return new i_(this.root,t,this.D,!0)},t}(),i_=function(){function t(t,e,n,i){this.Et=i,this.Tt=[];for(var r=1;!t.P();)if(r=e?n(t.key,e):1,i&&(r*=-1),r<0)t=this.Et?t.left:t.right;else{if(0===r){this.Tt.push(t);break}this.Tt.push(t),t=this.Et?t.right:t.left}}return t.prototype.It=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.P();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.P();)this.Tt.push(t),t=t.left;return e},t.prototype.At=function(){return this.Tt.length>0},t.prototype.Rt=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),r_=function(){function t(e,n,i,r,o){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,i,r,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},t.prototype.P=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.P()?this:this.left.min()},t.prototype.ct=function(){return this.min().key},t.prototype.ut=function(){return this.right.P()?this.key:this.right.ut()},t.prototype.ot=function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.copy(null,null,null,i.left.ot(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.ot(t,e,n))).Pt()},t.prototype.gt=function(){if(this.left.P())return t.EMPTY;var e=this;return e.left.yt()||e.left.left.yt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.gt(),null)).Pt()},t.prototype.remove=function(e,n){var i,r=this;if(n(e,r.key)<0)r.left.P()||r.left.yt()||r.left.left.yt()||(r=r.Vt()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.yt()&&(r=r.bt()),r.right.P()||r.right.yt()||r.right.left.yt()||(r=r.vt()),0===n(e,r.key)){if(r.right.P())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.gt())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.Pt()},t.prototype.yt=function(){return this.color},t.prototype.Pt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},t.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw yb();if(this.right.yt())throw yb();var t=this.left.Nt();if(t!==this.right.Nt())throw yb();return t+(this.yt()?0:1)},t}();r_.EMPTY=null,r_.RED=!0,r_.at=!1,r_.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw yb()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw yb()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw yb()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw yb()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw yb()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,i,r){return this},t.prototype.ot=function(t,e,n){return new r_(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.P=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ct=function(){return null},t.prototype.ut=function(){return null},t.prototype.yt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());var o_=function(){function t(t){this.D=t,this.data=new n_(this.D)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ct()},t.prototype.last=function(){return this.data.ut()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},t.prototype.xt=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var i=n.It();if(this.D(i.key,t[1])>=0)return;e(i.key)}},t.prototype.Ft=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.Ot=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new s_(this.data._t())},t.prototype.ft=function(t){return new s_(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.P=function(){return this.data.P()},t.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),i=e.data._t();n.At();){var r=n.It().key,o=i.It().key;if(0!==this.D(r,o))return!1}return!0},t.prototype.L=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.D);return n.data=e,n},t}(),s_=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),a_=new n_(Bb.D);function u_(){return a_}function l_(){return u_()}var h_=new n_(Bb.D);function c_(){return h_}var p_=new n_(Bb.D),d_=new o_(Bb.D);function f_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=d_,i=0,r=t;i<r.length;i++){var o=r[i];n=n.add(o)}return n}var g_=new o_(wb);function y_(){return g_}var m_=function(){function t(t){this.D=t?function(e,n){return t(e,n)||Bb.D(e.key,n.key)}:function(t,e){return Bb.D(t.key,e.key)},this.$t=c_(),this.Lt=new n_(this.D)}return t.Bt=function(e){return new t(e.D)},t.prototype.has=function(t){return null!=this.$t.get(t)},t.prototype.get=function(t){return this.$t.get(t)},t.prototype.first=function(){return this.Lt.ct()},t.prototype.last=function(){return this.Lt.ut()},t.prototype.P=function(){return this.Lt.P()},t.prototype.indexOf=function(t){var e=this.$t.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ht((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.$t.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.$t.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),i=e.Lt._t();n.At();){var r=n.It().key,o=i.It().key;if(!r.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var i=new t;return i.D=this.D,i.$t=e,i.Lt=n,i},t}(),v_=function(){function t(){this.qt=new n_(Bb.D)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):yb():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ht((function(e,n){t.push(n)})),t},t}(),b_=function(){function t(t,e,n,i,r,o,s,a){this.query=t,this.docs=e,this.Kt=n,this.docChanges=i,this.Qt=r,this.fromCache=o,this.Wt=s,this.jt=a}return t.Gt=function(e,n,i,r){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,m_.Bt(n),o,i,r,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.P()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&Px(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Kt.isEqual(t.Kt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0},t}(),__=function(){function t(t,e,n,i,r){this.nt=t,this.zt=e,this.Ht=n,this.Yt=i,this.Jt=r}return t.Xt=function(e,n){var i=new Map;return i.set(e,w_.Zt(e,n)),new t(Nb.min(),i,y_(),u_(),f_())},t}(),w_=function(){function t(t,e,n,i,r){this.resumeToken=t,this.te=e,this.ee=n,this.ne=i,this.se=r}return t.Zt=function(e,n){return new t(Cb.h,n,f_(),f_(),f_())},t}(),x_=function(t,e,n,i){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=i},P_=function(t,e){this.targetId=t,this.oe=e},C_=function(t,e,n,i){void 0===n&&(n=Cb.h),void 0===i&&(i=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i},I_=function(){function t(){this.ae=0,this.ce=T_(),this.ue=Cb.h,this.he=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.o()>0&&(this.le=!0,this.ue=t)},t.prototype.we=function(){var t=f_(),e=f_(),n=f_();return this.ce.forEach((function(i,r){switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:yb()}})),new w_(this.ue,this.he,t,e,n)},t.prototype.Ee=function(){this.le=!1,this.ce=T_()},t.prototype.Te=function(t,e){this.le=!0,this.ce=this.ce.ot(t,e)},t.prototype.Ie=function(t){this.le=!0,this.ce=this.ce.remove(t)},t.prototype.me=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.he=!0},t}(),O_=function(){function t(t){this.Pe=t,this.ge=new Map,this.ye=u_(),this.Ve=S_(),this.pe=new o_(wb)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var i=n[e];t.re instanceof ax?this.ve(i,t.re):t.re instanceof ux&&this.Se(i,t.key,t.re)}for(var r=0,o=t.removedTargetIds;r<o.length;r++)this.Se(o[r],t.key,t.re)},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var i=e.Ne(n);switch(t.state){case 0:e.xe(n)&&i.de(t.resumeToken);break;case 1:i.Ae(),i._e||i.Ee(),i.de(t.resumeToken);break;case 2:i.Ae(),i._e||e.removeTarget(n);break;case 3:e.xe(n)&&(i.Re(),i.de(t.resumeToken));break;case 4:e.xe(n)&&(e.Fe(n),i.de(t.resumeToken));break;default:yb()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ge.forEach((function(t,i){n.xe(i)&&e(i)}))},t.prototype.Oe=function(t){var e=t.targetId,n=t.oe.count,i=this.ke(e);if(i){var r=i.target;if(Xb(r))if(0===n){var o=new Bb(r.path);this.Se(e,o,new ux(o,Nb.min()))}else mb(1===n);else this.Me(e)!==n&&(this.Fe(e),this.pe=this.pe.add(e))}},t.prototype.$e=function(t){var e=this,n=new Map;this.ge.forEach((function(i,r){var o=e.ke(r);if(o){if(i.te&&Xb(o.target)){var s=new Bb(o.target.path);null!==e.ye.get(s)||e.Le(r,s)||e.Se(r,s,new ux(s,t))}i.fe&&(n.set(r,i.we()),i.Ee())}}));var i=f_();this.Ve.forEach((function(t,n){var r=!0;n.Ft((function(t){var n=e.ke(t);return!n||2===n.et||(r=!1,!1)})),r&&(i=i.add(t))}));var r=new __(t,n,this.pe,this.ye,i);return this.ye=u_(),this.Ve=S_(),this.pe=new o_(wb),r},t.prototype.ve=function(t,e){if(this.xe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.ye=this.ye.ot(e.key,e),this.Ve=this.Ve.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.xe(t)){var i=this.Ne(t);this.Le(t,e)?i.Te(e,1):i.Ie(e),this.Ve=this.Ve.ot(e,this.Be(e).delete(t)),n&&(this.ye=this.ye.ot(e,n))}},t.prototype.removeTarget=function(t){this.ge.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.Pe.qe(t).size+e.ee.size-e.se.size},t.prototype.me=function(t){this.Ne(t).me()},t.prototype.Ne=function(t){var e=this.ge.get(t);return e||(e=new I_,this.ge.set(t,e)),e},t.prototype.Be=function(t){var e=this.Ve.get(t);return e||(e=new o_(wb),this.Ve=this.Ve.ot(t,e)),e},t.prototype.xe=function(t){var e=null!==this.ke(t);return e||pb("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ke=function(t){var e=this.ge.get(t);return e&&e._e?null:this.Pe.Ue(t)},t.prototype.Fe=function(t){var e=this;this.ge.set(t,new I_),this.Pe.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.Pe.qe(t).has(e)},t}();function S_(){return new n_(Bb.D)}function T_(){return new n_(Bb.D)}function E_(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function k_(t){var e=V_(t.mapValue.fields.__local_write_time__.timestampValue);return new Mb(e.seconds,e.nanos)}var A_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function D_(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?E_(t)?4:10:yb()}function j_(t,e){var n=D_(t);if(n!==D_(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return k_(t).isEqual(k_(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=V_(t.timestampValue),i=V_(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return U_(t.bytesValue).isEqual(U_(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return L_(t.geoPointValue.latitude)===L_(e.geoPointValue.latitude)&&L_(t.geoPointValue.longitude)===L_(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return L_(t.integerValue)===L_(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=L_(t.doubleValue),i=L_(e.doubleValue);return n===i?Wb(n)===Wb(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return xb(t.arrayValue.values||[],e.arrayValue.values||[],j_);case 10:return function(t,e){var n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Ab(n)!==Ab(i))return!1;for(var r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!j_(n[r],i[r])))return!1;return!0}(t,e);default:return yb()}}function R_(t,e){return void 0!==(t.values||[]).find((function(t){return j_(t,e)}))}function M_(t,e){var n=D_(t),i=D_(e);if(n!==i)return wb(n,i);switch(n){case 0:return 0;case 1:return wb(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=L_(t.integerValue||t.doubleValue),i=L_(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return N_(t.timestampValue,e.timestampValue);case 4:return N_(k_(t),k_(e));case 5:return wb(t.stringValue,e.stringValue);case 6:return function(t,e){var n=U_(t),i=U_(e);return n.u(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),i=e.split("/"),r=0;r<n.length&&r<i.length;r++){var o=wb(n[r],i[r]);if(0!==o)return o}return wb(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=wb(L_(t.latitude),L_(e.latitude));return 0!==n?n:wb(L_(t.longitude),L_(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],i=e.values||[],r=0;r<n.length&&r<i.length;++r){var o=M_(n[r],i[r]);if(o)return o}return wb(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},i=Object.keys(n),r=e.fields||{},o=Object.keys(r);i.sort(),o.sort();for(var s=0;s<i.length&&s<o.length;++s){var a=wb(i[s],o[s]);if(0!==a)return a;var u=M_(n[i[s]],r[o[s]]);if(0!==u)return u}return wb(i.length,o.length)}(t.mapValue,e.mapValue);default:throw yb()}}function N_(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return wb(t,e);var n=V_(t),i=V_(e),r=wb(n.seconds,i.seconds);return 0!==r?r:wb(n.nanos,i.nanos)}function F_(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=V_(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?U_(e.bytesValue).toBase64():"referenceValue"in e?Bb.Y(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",i=!0,r=0,o=e.values||[];r<o.length;r++)i?i=!1:n+=",",n+=t(o[r]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",i=!0,r=0,o=Object.keys(e.fields||{}).sort();r<o.length;r++){var s=o[r];i?i=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):yb();var n}(t)}function V_(t){if(mb(!!t),"string"==typeof t){var e=0,n=A_.exec(t);if(mb(!!n),n[1]){var i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}var r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:L_(t.seconds),nanos:L_(t.nanos)}}function L_(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function U_(t){return"string"==typeof t?Cb.fromBase64String(t):Cb.fromUint8Array(t)}function B_(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.B()}}function H_(t){return!!t&&"integerValue"in t}function W_(t){return!!t&&"arrayValue"in t}function z_(t){return!!t&&"nullValue"in t}function q_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function G_(t){return!!t&&"mapValue"in t}var Y_={asc:"ASCENDING",desc:"DESCENDING"},K_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X_=function(t,e){this._=t,this.Ke=e};function Q_(t){return{integerValue:""+t}}function $_(t,e){if(t.Ke){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wb(e)?"-0":e}}function Z_(t,e){return zb(e)?Q_(e):$_(t,e)}function J_(t,e){return t.Ke?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function tw(t,e){return t.Ke?e.toBase64():e.toUint8Array()}function ew(t,e){return J_(t,e.v())}function nw(t){return mb(!!t),Nb.V(function(t){var e=V_(t);return new Mb(e.seconds,e.nanos)}(t))}function iw(t,e){return function(t){return new Vb(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).B()}function rw(t){var e=Vb.q(t);return mb(Iw(e)),e}function ow(t,e){return iw(t._,e.path)}function sw(t,e){var n=rw(e);return mb(n.get(1)===t._.projectId),mb(!n.get(3)&&!t._.database||n.get(3)===t._.database),new Bb(hw(n))}function aw(t,e){return iw(t._,e)}function uw(t){var e=rw(t);return 4===e.length?Vb.U():hw(e)}function lw(t){return new Vb(["projects",t._.projectId,"databases",t._.database]).B()}function hw(t){return mb(t.length>4&&"documents"===t.get(4)),t.N(5)}function cw(t,e,n){return{name:ow(t,e),fields:n.proto.mapValue.fields}}function pw(t,e){var n;if(e instanceof Xw)n={update:cw(t,e.key,e.value)};else if(e instanceof ex)n={delete:ow(t,e.key)};else if(e instanceof Qw)n={update:cw(t,e.key,e.data),updateMask:Cw(e.Qe)};else if(e instanceof Zw)n={transform:{document:ow(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof kw)return{fieldPath:e.field.B(),setToServerValue:"REQUEST_TIME"};if(n instanceof Aw)return{fieldPath:e.field.B(),appendMissingElements:{values:n.elements}};if(n instanceof jw)return{fieldPath:e.field.B(),removeAllFromArray:{values:n.elements}};if(n instanceof Mw)return{fieldPath:e.field.B(),increment:n.We};throw yb()}(0,t)}))}};else{if(!(e instanceof nx))return yb();n={verify:ow(t,e.key)}}return e.Ge.je||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ew(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:yb()}(t,e.Ge)),n}function dw(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Bw.updateTime(nw(t.updateTime)):void 0!==t.exists?Bw.exists(t.exists):Bw.ze()}(e.currentDocument):Bw.ze();if(e.update){var i=sw(t,e.update.name),r=new ix({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new Vw((t.fieldPaths||[]).map((function(t){return Ub.G(t)})))}(e.updateMask);return new Qw(i,r,o,n)}return new Xw(i,r,n)}if(e.delete){var s=sw(t,e.delete);return new ex(s,n)}if(e.transform){var a=sw(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(mb("REQUEST_TIME"===e.setToServerValue),n=new kw):"appendMissingElements"in e?n=new Aw(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new jw(e.removeAllFromArray.values||[]):"increment"in e?n=new Mw(t,e.increment):yb();var i=Ub.G(e.fieldPath);return new Lw(i,n)}(t,e)}));return mb(!0===n.exists),new Zw(a,u)}if(e.verify){var l=sw(t,e.verify);return new nx(l,n)}return yb()}function fw(t,e){return{documents:[aw(t,e.path)]}}function gw(t,e){var n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=aw(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=aw(t,i.F()),n.structuredQuery.from=[{collectionId:i.k()}]);var r=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(q_(t.value))return{unaryFilter:{field:_w(t.field),op:"IS_NAN"}};if(z_(t.value))return{unaryFilter:{field:_w(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(q_(t.value))return{unaryFilter:{field:_w(t.field),op:"IS_NOT_NAN"}};if(z_(t.value))return{unaryFilter:{field:_w(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_w(t.field),op:bw(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);r&&(n.structuredQuery.where=r);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:_w(t.field),direction:vw(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ke||Hb(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=yw(e.startAt)),e.endAt&&(n.structuredQuery.endAt=yw(e.endAt)),n}function yw(t){return{before:t.before,values:t.position}}function mw(t){return new Fx(t.values||[],!!t.before)}function vw(t){return Y_[t]}function bw(t){return K_[t]}function _w(t){return{fieldPath:t.B()}}function ww(t){return Ub.G(t.fieldPath)}function xw(t){return Tx.create(ww(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return yb()}}(t.fieldFilter.op),t.fieldFilter.value)}function Pw(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ww(t.unaryFilter.field);return Tx.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ww(t.unaryFilter.field);return Tx.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var i=ww(t.unaryFilter.field);return Tx.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var r=ww(t.unaryFilter.field);return Tx.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return yb()}}function Cw(t){var e=[];return t.fields.forEach((function(t){return e.push(t.B())})),{fieldPaths:e}}function Iw(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Ow=function(){this.He=void 0};function Sw(t,e,n){return t instanceof kw?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Aw?Dw(t,e):t instanceof jw?Rw(t,e):function(t,e){var n=Ew(t,e),i=Nw(n)+Nw(t.We);return H_(n)&&H_(t.We)?Q_(i):$_(t.serializer,i)}(t,e)}function Tw(t,e,n){return t instanceof Aw?Dw(t,e):t instanceof jw?Rw(t,e):n}function Ew(t,e){return t instanceof Mw?H_(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var kw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ag.c)(e,t),e}(Ow),Aw=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ag.c)(e,t),e}(Ow);function Dw(t,e){for(var n=Fw(e),i=function(t){n.some((function(e){return j_(e,t)}))||n.push(t)},r=0,o=t.elements;r<o.length;r++)i(o[r]);return{arrayValue:{values:n}}}var jw=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ag.c)(e,t),e}(Ow);function Rw(t,e){for(var n=Fw(e),i=function(t){n=n.filter((function(e){return!j_(e,t)}))},r=0,o=t.elements;r<o.length;r++)i(o[r]);return{arrayValue:{values:n}}}var Mw=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).serializer=e,i.We=n,i}return Object(ag.c)(e,t),e}(Ow);function Nw(t){return L_(t.integerValue||t.doubleValue)}function Fw(t){return W_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Vw=function(){function t(t){this.fields=t,t.sort(Ub.D)}return t.prototype.Ye=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].M(t))return!0;return!1},t.prototype.isEqual=function(t){return xb(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Lw=function(t,e){this.field=t,this.transform=e},Uw=function(t,e){this.version=t,this.transformResults=e},Bw=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Hw(t,e){return void 0!==t.updateTime?e instanceof ax&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ax}var Ww=function(){};function zw(t,e,n){return t instanceof Xw?function(t,e,n){return new ax(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Qw?function(t,e,n){if(!Hw(t.Ge,e))return new lx(t.key,n.version);var i=$w(t,e);return new ax(t.key,n.version,i,{hasCommittedMutations:!0})}(t,e,n):t instanceof Zw?function(t,e,n){if(mb(null!=n.transformResults),!Hw(t.Ge,e))return new lx(t.key,n.version);var i=Jw(0,e),r=function(t,e,n){var i=[];mb(t.length===n.length);for(var r=0;r<n.length;r++){var o=t[r],s=o.transform,a=null;e instanceof ax&&(a=e.field(o.field)),i.push(Tw(s,a,n[r]))}return i}(t.fieldTransforms,e,n.transformResults),o=n.version,s=tx(t,i.data(),r);return new ax(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new ux(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function qw(t,e,n,i){return t instanceof Xw?function(t,e){if(!Hw(t.Ge,e))return e;var n=Kw(e);return new ax(t.key,n,t.value,{Je:!0})}(t,e):t instanceof Qw?function(t,e){if(!Hw(t.Ge,e))return e;var n=Kw(e),i=$w(t,e);return new ax(t.key,n,i,{Je:!0})}(t,e):t instanceof Zw?function(t,e,n,i){if(!Hw(t.Ge,e))return e;var r=Jw(0,e),o=function(t,e,n,i){for(var r=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,l=null;n instanceof ax&&(l=n.field(a.field)),null===l&&i instanceof ax&&(l=i.field(a.field)),r.push(Sw(u,l,e))}return r}(t.fieldTransforms,n,e,i),s=tx(t,r.data(),o);return new ax(t.key,r.version,s,{Je:!0})}(t,e,i,n):function(t,e){return Hw(t.Ge,e)?new ux(t.key,Nb.min()):e}(t,e)}function Gw(t,e){return t instanceof Zw?function(t,e){for(var n=null,i=0,r=t.fieldTransforms;i<r.length;i++){var o=r[i],s=e instanceof ax?e.field(o.field):void 0,a=Ew(o.transform,s||null);null!=a&&(n=null==n?(new rx).set(o.field,a):n.set(o.field,a))}return n?n.Xe():null}(t,e):null}function Yw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||xb(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Aw&&e instanceof Aw||t instanceof jw&&e instanceof jw?xb(t.elements,e.elements,j_):t instanceof Mw&&e instanceof Mw?j_(t.We,e.We):t instanceof kw&&e instanceof kw}(t.transform,e.transform)}(t,e)})))}function Kw(t){return t instanceof ax?t.version:Nb.min()}var Xw=function(t){function e(e,n,i){var r=this;return(r=t.call(this)||this).key=e,r.value=n,r.Ge=i,r.type=0,r}return Object(ag.c)(e,t),e}(Ww),Qw=function(t){function e(e,n,i,r){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=i,o.Ge=r,o.type=1,o}return Object(ag.c)(e,t),e}(Ww);function $w(t,e){return function(t,e){var n=new rx(e);return t.Qe.fields.forEach((function(e){if(!e.P()){var i=t.data.field(e);null!==i?n.set(e,i):n.delete(e)}})),n.Xe()}(t,e instanceof ax?e.data():ix.empty())}var Zw=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).key=e,i.fieldTransforms=n,i.type=2,i.Ge=Bw.exists(!0),i}return Object(ag.c)(e,t),e}(Ww);function Jw(t,e){return e}function tx(t,e,n){for(var i=new rx(e),r=0;r<t.fieldTransforms.length;r++)i.set(t.fieldTransforms[r].field,n[r]);return i.Xe()}var ex=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).key=e,i.Ge=n,i.type=3,i}return Object(ag.c)(e,t),e}(Ww),nx=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).key=e,i.Ge=n,i.type=4,i}return Object(ag.c)(e,t),e}(Ww),ix=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.P())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!G_(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.k()])||null},t.prototype.isEqual=function(t){return j_(this.proto,t.proto)},t}(),rx=function(){function t(t){void 0===t&&(t=ix.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,i=0;i<t.length-1;++i){var r=t.get(i),o=n.get(r);o instanceof Map?n=o:o&&10===D_(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(r,o),n=o):(o=new Map,n.set(r,o),n=o)}n.set(t.k(),e)},t.prototype.Xe=function(){var t=this.nn(Ub.U(),this.tn);return null!=t?new ix(t):this.Ze},t.prototype.nn=function(t,e){var n=this,i=!1,r=this.Ze.field(t),o=G_(r)?Object.assign({},r.mapValue.fields):{};return e.forEach((function(e,r){if(e instanceof Map){var s=n.nn(t.child(r),e);null!=s&&(o[r]=s,i=!0)}else null!==e?(o[r]=e,i=!0):o.hasOwnProperty(r)&&(delete o[r],i=!0)})),i?{mapValue:{fields:o}}:null},t}();function ox(t){var e=[];return Db(t.fields||{},(function(t,n){var i=new Ub([t]);if(G_(n)){var r=ox(n.mapValue).fields;if(0===r.length)e.push(i);else for(var o=0,s=r;o<s.length;o++)e.push(i.child(s[o]))}else e.push(i)})),new Vw(e)}var sx=function(t,e){this.key=t,this.version=e},ax=function(t){function e(e,n,i,r){var o=this;return(o=t.call(this,e,n)||this).sn=i,o.Je=!!r.Je,o.hasCommittedMutations=!!r.hasCommittedMutations,o}return Object(ag.c)(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(sx),ux=function(t){function e(e,n,i){var r=this;return(r=t.call(this,e,n)||this).hasCommittedMutations=!(!i||!i.hasCommittedMutations),r}return Object(ag.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(sx),lx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ag.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(sx),hx=function(t,e,n,i,r,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=i,this.limit=r,this.an=o,this.startAt=s,this.endAt=a,this.cn=null,this.un=null};function cx(t,e,n,i,r,o,s,a){return new hx(t,e,n,i,r,o,s,a)}function px(t){return new hx(t)}function dx(t){return!Hb(t.limit)&&"F"===t.an}function fx(t){return!Hb(t.limit)&&"L"===t.an}function gx(t){return t.on.length>0?t.on[0].field:null}function yx(t){for(var e=0,n=t.filters;e<n.length;e++){var i=n[e];if(i.hn())return i.field}return null}function mx(t){return null!==t.collectionGroup}function vx(t){var e=vb(t);if(null===e.cn){e.cn=[];var n=yx(e),i=gx(e);if(null!==n&&null===i)n.W()||e.cn.push(new Bx(n)),e.cn.push(new Bx(Ub.j(),"asc"));else{for(var r=!1,o=0,s=e.on;o<s.length;o++){var a=s[o];e.cn.push(a),a.field.W()&&(r=!0)}if(!r){var u=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.cn.push(new Bx(Ub.j(),u))}}}return e.cn}function bx(t){var e=vb(t);if(!e.un)if("F"===e.an)e.un=Gb(e.path,e.collectionGroup,vx(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],i=0,r=vx(e);i<r.length;i++){var o=r[i];n.push(new Bx(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Fx(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Fx(e.startAt.position,!e.startAt.before):null;e.un=Gb(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.un}function _x(t,e,n){return new hx(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wx(t,e){return new hx(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function xx(t,e){return new hx(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Px(t,e){return Kb(bx(t),bx(e))&&t.an===e.an}function Cx(t){return Yb(bx(t))+"|lt:"+t.an}function Ix(t){return"Query(target="+function(t){var e=t.path.B();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.B()+" "+e.op+" "+F_(e.value);var e})).join(", ")+"]"),Hb(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.B()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Vx(t.startAt)),t.endAt&&(e+=", endAt: "+Vx(t.endAt)),"Target("+e+")"}(bx(t))+"; limitType="+t.an+")"}function Ox(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.J(t.collectionGroup)&&t.path.M(n):Bb.X(t.path)?t.path.isEqual(n):t.path.$(n)}(t,e)&&function(t,e){for(var n=0,i=t.on;n<i.length;n++){var r=i[n];if(!r.field.W()&&null===e.field(r.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,i=t.filters;n<i.length;n++)if(!i[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Lx(t.startAt,vx(t),e)||t.endAt&&Lx(t.endAt,vx(t),e))}(t,e)}function Sx(t){return function(e,n){for(var i=!1,r=0,o=vx(t);r<o.length;r++){var s=o[r],a=Hx(s,e,n);if(0!==a)return a;i=i||s.field.W()}return 0}}var Tx=function(t){function e(e,n,i){var r=this;return(r=t.call(this)||this).field=e,r.op=n,r.value=i,r}return Object(ag.c)(e,t),e.create=function(t,n,i){return t.W()?"in"===n||"not-in"===n?this.ln(t,n,i):new Ex(t,n,i):"array-contains"===n?new jx(t,i):"in"===n?new Rx(t,i):"not-in"===n?new Mx(t,i):"array-contains-any"===n?new Nx(t,i):new e(t,n,i)},e.ln=function(t,e,n){return"in"===e?new kx(t,n):new Ax(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(M_(e,this.value)):null!==e&&D_(this.value)===D_(e)&&this._n(M_(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return yb()}},e.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ex=function(t){function e(e,n,i){var r=this;return(r=t.call(this,e,n,i)||this).key=Bb.Y(i.referenceValue),r}return Object(ag.c)(e,t),e.prototype.matches=function(t){var e=Bb.D(t.key,this.key);return this._n(e)},e}(Tx),kx=function(t){function e(e,n){var i=this;return(i=t.call(this,e,"in",n)||this).keys=Dx(0,n),i}return Object(ag.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Tx),Ax=function(t){function e(e,n){var i=this;return(i=t.call(this,e,"not-in",n)||this).keys=Dx(0,n),i}return Object(ag.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Tx);function Dx(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Bb.Y(t.referenceValue)}))}var jx=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(ag.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return W_(e)&&R_(e.arrayValue,this.value)},e}(Tx),Rx=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(ag.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&R_(this.value.arrayValue,e)},e}(Tx),Mx=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(ag.c)(e,t),e.prototype.matches=function(t){if(R_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!R_(this.value.arrayValue,e)},e}(Tx),Nx=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(ag.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!W_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return R_(e.value.arrayValue,t)}))},e}(Tx),Fx=function(t,e){this.position=t,this.before=e};function Vx(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return F_(t)})).join(",")}function Lx(t,e,n){for(var i=0,r=0;r<t.position.length;r++){var o=e[r],s=t.position[r];if(i=o.field.W()?Bb.D(Bb.Y(s.referenceValue),n.key):M_(s,n.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return t.before?i<=0:i<0}function Ux(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!j_(t.position[n],e.position[n]))return!1;return!0}var Bx=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Hx(t,e,n){var i=t.field.W()?Bb.D(e.key,n.key):function(t,e,n){var i=e.field(t),r=n.field(t);return null!==i&&null!==r?M_(i,r):yb()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return yb()}}function Wx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var zx=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},qx=function(){function t(t,e,n,i,r){void 0===n&&(n=1e3),void 0===i&&(i=1.5),void 0===r&&(r=6e4),this.fn=t,this.dn=e,this.wn=n,this.En=i,this.Tn=r,this.In=0,this.mn=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.In=0},t.prototype.Rn=function(){this.In=this.Tn},t.prototype.Pn=function(t){var e=this;this.cancel();var n=Math.floor(this.In+this.gn()),i=Math.max(0,Date.now()-this.An),r=Math.max(0,n-i);r>0&&pb("ExponentialBackoff","Backing off for "+r+" ms (base delay: "+this.In+" ms, delay with jitter: "+n+" ms, last attempt: "+i+" ms ago)"),this.mn=this.fn.yn(this.dn,r,(function(){return e.An=Date.now(),t()})),this.In*=this.En,this.In<this.wn&&(this.In=this.wn),this.In>this.Tn&&(this.In=this.Tn)},t.prototype.Vn=function(){null!==this.mn&&(this.mn.pn(),this.mn=null)},t.prototype.cancel=function(){null!==this.mn&&(this.mn.cancel(),this.mn=null)},t.prototype.gn=function(){return(Math.random()-.5)*this.In},t}(),Gx=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var i=this;return this.Dn&&yb(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,r){i.bn=function(n){i.Nn(e,n).next(t,r)},i.vn=function(e){i.Cn(n,e).next(t,r)}}))},t.prototype.xn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Fn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.Fn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.Fn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.On=function(e){return new t((function(t,n){var i=0,r=0,o=!1;e.forEach((function(e){++i,e.next((function(){++r,o&&r===i&&t()}),(function(t){return n(t)}))})),o=!0,r===i&&t()}))},t.kn=function(e){for(var n=t.resolve(!1),i=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},r=0,o=e;r<o.length;r++)i(o[r]);return n},t.forEach=function(t,e){var n=this,i=[];return t.forEach((function(t,r){i.push(e.call(n,t,r))})),this.On(i)},t}(),Yx=function(){function t(e,n,i){this.name=e,this.version=n,this.Mn=i,12.2===t.$n(Object(lg.p)())&&db("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return pb("SimpleDb","Removing database:",t),Jx(window.indexedDB.deleteDatabase(t)).xn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=Object(lg.p)(),n=t.$n(e),i=0<n&&n<10,r=t.qn(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},t.Kn=function(t,e){return t.store(e)},t.$n=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Qn=function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return this.db?[3,2]:(pb("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,i){var r=indexedDB.open(n.name,n.version);r.onsuccess=function(t){e(t.target.result)},r.onblocked=function(){i(new Xx(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(e){var n=e.target.error;i("VersionError"===n.name?new lb(ub.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Xx(t,n))},r.onupgradeneeded=function(t){pb("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Mn.createOrUpgrade(t.target.result,r.transaction,t.oldVersion,n.version).next((function(){pb("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=i.sent(),i.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return n.Wn(t)}),this.db)]}}))}))},t.prototype.jn=function(t){this.Wn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return Object(ag.b)(this,void 0,void 0,(function(){var r,o,s,a,u;return Object(ag.d)(this,(function(l){switch(l.label){case 0:r="readonly"===e,o=0,s=function(){var e,s,u,l,h;return Object(ag.d)(this,(function(c){switch(c.label){case 0:++o,c.label=1;case 1:return c.trys.push([1,4,,5]),[4,a.Qn(t)];case 2:return a.db=c.sent(),e=$x.open(a.db,t,r?"readonly":"readwrite",n),s=i(e).catch((function(t){return e.abort(t),Gx.reject(t)})).xn(),u={},s.catch((function(){})),[4,e.Gn];case 3:return[2,(u.value=(c.sent(),s),u)];case 4:return pb("SimpleDb","Transaction failed with error:",(l=c.sent()).message,"Retrying:",h="FirebaseError"!==l.name&&o<3),a.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},a=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=l.sent()))return[2,u.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Kx=function(){function t(t){this.zn=t,this.Hn=!1,this.Yn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Yn=t},t.prototype.delete=function(){return Jx(this.zn.delete())},t}(),Xx=function(t){function e(e,n){var i=this;return(i=t.call(this,ub.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",i}return Object(ag.c)(e,t),e}(lb);function Qx(t){return"IndexedDbTransactionError"===t.name}var $x=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new zx,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new Xx(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var i=eP(e.target.error);n.Zn.reject(new Xx(t,i))}}return t.open=function(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(e){throw new Xx(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(pb("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Zx(e)},t}(),Zx=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(pb("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(pb("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Jx(n)},t.prototype.add=function(t){return pb("SimpleDb","ADD",this.store.name,t,t),Jx(this.store.add(t))},t.prototype.get=function(t){var e=this;return Jx(this.store.get(t)).next((function(n){return void 0===n&&(n=null),pb("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return pb("SimpleDb","DELETE",this.store.name,t),Jx(this.store.delete(t))},t.prototype.count=function(){return pb("SimpleDb","COUNT",this.store.name),Jx(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),i=[];return this.es(n,(function(t,e){i.push(e)})).next((function(){return i}))},t.prototype.ns=function(t,e){pb("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var i=this.cursor(n);return this.es(i,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var i=this.cursor(n);return this.es(i,e)},t.prototype.os=function(t){var e=this.cursor({});return new Gx((function(n,i){e.onerror=function(t){var e=eP(t.target.error);i(e)},e.onsuccess=function(e){var i=e.target.result;i?t(i.primaryKey,i.value).next((function(t){t?i.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new Gx((function(i,r){t.onerror=function(t){r(t.target.error)},t.onsuccess=function(t){var r=t.target.result;if(r){var o=new Kx(r),s=e(r.primaryKey,r.value,o);if(s instanceof Gx){var a=s.catch((function(t){return o.done(),Gx.reject(t)}));n.push(a)}o.Sn?i():null===o.Jn?r.continue():r.continue(o.Jn)}else i()}})).next((function(){return Gx.On(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Jx(t){return new Gx((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=eP(t.target.error);n(e)}}))}var tP=!1;function eP(t){var e=Yx.$n(Object(lg.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var i=new lb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return tP||(tP=!0,setTimeout((function(){throw i}),0)),i}}return t}function nP(){return"undefined"!=typeof window?window:null}function iP(){return"undefined"!=typeof document?document:null}var rP=function(){function t(t,e,n,i,r){this.cs=t,this.dn=e,this.us=n,this.op=i,this.hs=r,this.ls=new zx,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,i,r,o){var s=new t(e,n,Date.now()+i,r,o);return s.start(i),s},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new lb(ub.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.cs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},t}(),oP=function(){function t(){var t=this;this.Es=Promise.resolve(),this.Ts=[],this.Is=!1,this.As=[],this.Rs=null,this.Ps=!1,this.gs=[],this.ys=new qx(this,"async_queue_retry"),this.Vs=function(){var e=iP();e&&pb("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ys.Vn()};var e=iP();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=iP();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vs)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Ts.push(t),e.Ns()}))},t.prototype.Ns=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t,e=this;return Object(ag.d)(this,(function(n){switch(n.label){case 0:if(0===this.Ts.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return n.sent(),this.Ts.shift(),this.ys.reset(),[3,4];case 3:if(!Qx(t=n.sent()))throw t;return pb("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Ts.length>0&&this.ys.Pn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Es.then((function(){return e.Ps=!0,t().catch((function(t){throw e.Rs=t,e.Ps=!1,db("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ps=!1,t}))}));return this.Es=n,n},t.prototype.yn=function(t,e,n){var i=this;this.vs(),this.gs.indexOf(t)>-1&&(e=0);var r=rP._s(this,t,e,n,(function(t){return i.xs(t)}));return this.As.push(r),r},t.prototype.vs=function(){this.Rs&&yb()},t.prototype.Fs=function(){},t.prototype.Os=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t;return Object(ag.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Es];case 1:e.sent(),e.label=2;case 2:if(t!==this.Es)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.ks=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.Os().then((function(){e.As.sort((function(t,e){return t.us-e.us}));for(var n=0,i=e.As;n<i.length;n++){var r=i[n];if(r.pn(),"all"!==t&&r.dn===t)break}return e.Os()}))},t.prototype.$s=function(t){this.gs.push(t)},t.prototype.xs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function sP(t,e){if(db("AsyncQueue",e+": "+t),Qx(t))return new lb(ub.UNAVAILABLE,e+": "+t);throw t}var aP=function(){this.Ls=void 0,this.listeners=[]},uP=function(){this.Bs=new Rb((function(t){return Cx(t)}),Px),this.onlineState="Unknown",this.qs=new Set};function lP(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s,a,u;return Object(ag.d)(this,(function(l){switch(l.label){case 0:if(n=vb(t),r=!1,(o=n.Bs.get(i=e.query))||(r=!0,o=new aP),!r)return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),s=o,[4,n.Us(i)];case 2:return s.Ls=l.sent(),[3,4];case 3:return a=l.sent(),u=sP(a,"Initialization of query '"+Ix(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.Bs.set(i,o),o.listeners.push(e),e.Ks(n.onlineState),o.Ls&&e.Qs(o.Ls)&&dP(n),[2]}}))}))}function hP(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s;return Object(ag.d)(this,(function(a){return n=vb(t),r=!1,(o=n.Bs.get(i=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),r=0===o.listeners.length),r?[2,(n.Bs.delete(i),n.Ws(i))]:[2]}))}))}function cP(t,e){for(var n=vb(t),i=!1,r=0,o=e;r<o.length;r++){var s=o[r],a=n.Bs.get(s.query);if(a){for(var u=0,l=a.listeners;u<l.length;u++)l[u].Qs(s)&&(i=!0);a.Ls=s}}i&&dP(n)}function pP(t,e,n){var i=vb(t),r=i.Bs.get(e);if(r)for(var o=0,s=r.listeners;o<s.length;o++)s[o].onError(n);i.Bs.delete(e)}function dP(t){t.qs.forEach((function(t){t.next()}))}var fP=function(){function t(t,e,n){this.query=t,this.js=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,i=t.docChanges;n<i.length;n++){var r=i[n];3!==r.type&&e.push(r)}t=new b_(t.query,t.docs,t.Kt,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.js.next(t),o=!0):this.Ys(t,this.onlineState)&&(this.Js(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.js.error(t)},t.prototype.Ks=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),e=!0),e},t.prototype.Ys=function(t,e){return!t.fromCache||!(this.options.Xs&&"Offline"!==e||t.docs.P()&&"Offline"!==e)},t.prototype.Hs=function(t){return t.docChanges.length>0||!!(t.Wt||this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.Js=function(t){t=b_.Gt(t.query,t.docs,t.Qt,t.fromCache),this.Gs=!0,this.js.next(t)},t}(),gP=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();gP.UNAUTHENTICATED=new gP(null),gP.ei=new gP("google-credentials-uid"),gP.ni=new gP("first-party-uid");var yP=function(t,e){this.user=e,this.type="OAuth",this.si={},this.si.Authorization="Bearer "+t},mP=function(){function t(){this.ii=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.ri=function(){},t.prototype.oi=function(t){this.ii=t,t(gP.UNAUTHENTICATED)},t.prototype.ai=function(){this.ii=null},t}(),vP=function(){function t(t){var e=this;this.ci=null,this.currentUser=gP.UNAUTHENTICATED,this.ui=!1,this.hi=0,this.ii=null,this.forceRefresh=!1,this.ci=function(){e.hi++,e.currentUser=e.li(),e.ui=!0,e.ii&&e.ii(e.currentUser)},this.hi=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ci):(this.ci(null),t.get().then((function(t){e.auth=t,e.ci&&e.auth.addAuthTokenListener(e.ci)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.hi,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.hi!==e?(pb("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(mb("string"==typeof n.accessToken),new yP(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.ri=function(){this.forceRefresh=!0},t.prototype.oi=function(t){this.ii=t,this.ui&&t(this.currentUser)},t.prototype.ai=function(){this.auth&&this.auth.removeAuthTokenListener(this.ci),this.ci=null,this.ii=null},t.prototype.li=function(){var t=this.auth&&this.auth.getUid();return mb(null===t||"string"==typeof t),new gP(t)},t}(),bP=function(){function t(t,e){this._i=t,this.fi=e,this.type="FirstParty",this.user=gP.ni}return Object.defineProperty(t.prototype,"si",{get:function(){var t={"X-Goog-AuthUser":this.fi},e=this._i.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),_P=function(){function t(t,e){this._i=t,this.fi=e}return t.prototype.getToken=function(){return Promise.resolve(new bP(this._i,this.fi))},t.prototype.oi=function(t){t(gP.ni)},t.prototype.ai=function(){},t.prototype.ri=function(){},t}(),wP=function(){function t(t,e,n,i){this.batchId=t,this.di=e,this.baseMutations=n,this.mutations=i}return t.prototype.wi=function(t,e,n){for(var i=n.Ei,r=0;r<this.mutations.length;r++){var o=this.mutations[r];o.key.isEqual(t)&&(e=zw(o,e,i[r]))}return e},t.prototype.Ti=function(t,e){for(var n=0,i=this.baseMutations;n<i.length;n++){var r=i[n];r.key.isEqual(t)&&(e=qw(r,e,e,this.di))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=qw(u,e,o,this.di))}return e},t.prototype.Ii=function(t){var e=this,n=t;return this.mutations.forEach((function(i){var r=e.Ti(i.key,t.get(i.key));r&&(n=n.ot(i.key,r))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),f_())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&xb(this.mutations,t.mutations,(function(t,e){return Yw(t,e)}))&&xb(this.baseMutations,t.baseMutations,(function(t,e){return Yw(t,e)}))},t}(),xP=function(){function t(t,e,n,i){this.batch=t,this.mi=e,this.Ei=n,this.Ai=i}return t.from=function(e,n,i){mb(e.mutations.length===i.length);for(var r=p_,o=e.mutations,s=0;s<o.length;s++)r=r.ot(o[s].key,i[s].version);return new t(e,n,i,r)},t}(),PP=function(){function t(){this.Ri=new Rb((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Pi=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.gi},set:function(t){this.gi=t},enumerable:!1,configurable:!0}),t.prototype.yi=function(t,e){this.Vi(),this.readTime=e,this.Ri.set(t.key,t)},t.prototype.pi=function(t,e){this.Vi(),e&&(this.readTime=e),this.Ri.set(t,null)},t.prototype.bi=function(t,e){this.Vi();var n=this.Ri.get(e);return void 0!==n?Gx.resolve(n):this.vi(t,e)},t.prototype.getEntries=function(t,e){return this.Si(t,e)},t.prototype.apply=function(t){return this.Vi(),this.Pi=!0,this.Di(t)},t.prototype.Vi=function(){},t}(),CP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",IP=function(){function t(){this.Ci=[]}return t.prototype.Ni=function(t){this.Ci.push(t)},t.prototype.xi=function(){this.Ci.forEach((function(t){return t()}))},t}(),OP=function(){function t(t,e,n){this.Fi=t,this.Oi=e,this.ki=n}return t.prototype.Mi=function(t,e){var n=this;return this.Oi.$i(t,e).next((function(i){return n.Li(t,e,i)}))},t.prototype.Li=function(t,e,n){return this.Fi.bi(t,e).next((function(t){for(var i=0,r=n;i<r.length;i++)t=r[i].Ti(e,t);return t}))},t.prototype.Bi=function(t,e,n){var i=l_();return e.forEach((function(t,e){for(var r=0,o=n;r<o.length;r++)e=o[r].Ti(t,e);i=i.ot(t,e)})),i},t.prototype.qi=function(t,e){var n=this;return this.Fi.getEntries(t,e).next((function(e){return n.Ui(t,e)}))},t.prototype.Ui=function(t,e){var n=this;return this.Oi.Ki(t,e).next((function(i){var r=n.Bi(t,e,i),o=u_();return r.forEach((function(t,e){e||(e=new ux(t,Nb.min())),o=o.ot(t,e)})),o}))},t.prototype.Qi=function(t,e,n){return function(t){return Bb.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Wi(t,e.path):mx(e)?this.ji(t,e,n):this.Gi(t,e,n)},t.prototype.Wi=function(t,e){return this.Mi(t,new Bb(e)).next((function(t){var e=c_();return t instanceof ax&&(e=e.ot(t.key,t)),e}))},t.prototype.ji=function(t,e,n){var i=this,r=e.collectionGroup,o=c_();return this.ki.zi(t,r).next((function(s){return Gx.forEach(s,(function(s){var a=function(t,e){return new hx(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,s.child(r));return i.Gi(t,a,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Gi=function(t,e,n){var i,r,o=this;return this.Fi.Qi(t,e,n).next((function(n){return i=n,o.Oi.Hi(t,e)})).next((function(e){return o.Yi(t,r=e,i).next((function(t){i=t;for(var e=0,n=r;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],l=u.key,h=i.get(l),c=qw(u,h,h,o.di);i=c instanceof ax?i.ot(l,c):i.remove(l)}}))})).next((function(){return i.forEach((function(t,n){Ox(e,n)||(i=i.remove(t))})),i}))},t.prototype.Yi=function(t,e,n){for(var i=f_(),r=0,o=e;r<o.length;r++)for(var s=0,a=o[r].mutations;s<a.length;s++){var u=a[s];u instanceof Qw&&null===n.get(u.key)&&(i=i.add(u.key))}var l=n;return this.Fi.getEntries(t,i).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ax&&(l=l.ot(t,e))})),l}))},t}(),SP=function(){function t(t,e,n,i){this.targetId=t,this.fromCache=e,this.Ji=n,this.Xi=i}return t.Zi=function(e,n){for(var i=f_(),r=f_(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}}return new t(e,n.fromCache,i,r)},t}(),TP=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.tr=function(t){return n.er(t)},this.nr=function(t){return e.sr(t)})}return t.prototype.er=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.nr&&this.nr(t),t},t}();function EP(t,e){var n=t[1],i=e[1],r=wb(t[0],e[0]);return 0===r?wb(n,i):r}TP.ir=-1;var kP=function(){function t(t){this.rr=t,this.buffer=new o_(EP),this.ar=0}return t.prototype.cr=function(){return++this.ar},t.prototype.ur=function(t){var e=[t,this.cr()];if(this.buffer.size<this.rr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();EP(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),AP={hr:!1,lr:0,_r:0,dr:0},DP=function(){function t(t,e,n){this.wr=t,this.Er=e,this.Tr=n}return t.Ir=function(e){return new t(e,t.mr,t.Ar)},t}();DP.mr=10,DP.Ar=1e3,DP.Rr=new DP(41943040,DP.mr,DP.Ar),DP.Pr=new DP(-1,0,0);var jP=function(){function t(t,e){this.gr=t,this.cs=e,this.yr=!1,this.Vr=null}return t.prototype.start=function(t){-1!==this.gr.params.wr&&this.pr(t)},t.prototype.stop=function(){this.Vr&&(this.Vr.cancel(),this.Vr=null)},Object.defineProperty(t.prototype,"br",{get:function(){return null!==this.Vr},enumerable:!1,configurable:!0}),t.prototype.pr=function(t){var e=this,n=this.yr?3e5:6e4;pb("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Vr=this.cs.yn("lru_garbage_collection",n,(function(){return Object(ag.b)(e,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:this.Vr=null,this.yr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.vr(this.gr)];case 2:return n.sent(),[3,7];case 3:return Qx(e=n.sent())?(pb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,JC(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.pr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),RP=function(){function t(t,e){this.Sr=t,this.params=e}return t.prototype.Dr=function(t,e){return this.Sr.Cr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Nr=function(t,e){var n=this;if(0===e)return Gx.resolve(TP.ir);var i=new kP(e);return this.Sr.Ce(t,(function(t){return i.ur(t.sequenceNumber)})).next((function(){return n.Sr.Fr(t,(function(t){return i.ur(t)}))})).next((function(){return i.maxValue}))},t.prototype.Or=function(t,e,n){return this.Sr.Or(t,e,n)},t.prototype.kr=function(t,e){return this.Sr.kr(t,e)},t.prototype.Mr=function(t,e){var n=this;return-1===this.params.wr?(pb("LruGarbageCollector","Garbage collection skipped; disabled"),Gx.resolve(AP)):this.$r(t).next((function(i){return i<n.params.wr?(pb("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+n.params.wr),AP):n.Lr(t,e)}))},t.prototype.$r=function(t){return this.Sr.$r(t)},t.prototype.Lr=function(t,e){var n,i,r,o,s,a,u,l=this,h=Date.now();return this.Dr(t,this.params.Er).next((function(e){return e>l.params.Tr?(pb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.Tr+" from "+e),i=l.params.Tr):i=e,o=Date.now(),l.Nr(t,i)})).next((function(i){return n=i,s=Date.now(),l.Or(t,n,e)})).next((function(e){return r=e,a=Date.now(),l.kr(t,n)})).next((function(t){return u=Date.now(),cb()<=ug.a.DEBUG&&pb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+i+" in "+(s-o)+"ms\n\tRemoved "+r+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),Gx.resolve({hr:!0,lr:i,_r:r,dr:t})}))},t}();function MP(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=FP(e)),e=NP(t.get(n),e);return FP(e)}function NP(t,e){for(var n=e,i=t.length,r=0;r<i;r++){var o=t.charAt(r);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function FP(t){return t+"\x01\x01"}function VP(t){var e=t.length;if(mb(e>=2),2===e)return mb("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Vb.U();for(var n=e-2,i=[],r="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&yb(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===r.length?u=a:(u=r+=a,r=""),i.push(u);break;case"\x10":r+=t.substring(o,s),r+="\0";break;case"\x11":r+=t.substring(o,s+1);break;default:yb()}o=s+2}return new Vb(i)}var LP=function(t){this.Br=t};function UP(t,e){if(e.document)return function(t,e,n){var i=sw(t,e.name),r=nw(e.updateTime),o=new ix({mapValue:{fields:e.fields}});return new ax(i,r,o,{hasCommittedMutations:!!n})}(t.Br,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Bb.Z(e.noDocument.path),i=qP(e.noDocument.readTime);return new ux(n,i,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var r=Bb.Z(e.unknownDocument.path),o=qP(e.unknownDocument.version);return new lx(r,o)}return yb()}function BP(t,e,n){var i=HP(n),r=e.key.path.F().L();if(e instanceof ax){var o=function(t,e){return{name:ow(t,e.key),fields:e.rn().mapValue.fields,updateTime:J_(t,e.version.v())}}(t.Br,e);return new mC(null,null,o,e.hasCommittedMutations,i,r)}if(e instanceof ux){var s=e.key.path.L(),a=zP(e.version),u=e.hasCommittedMutations;return new mC(null,new gC(s,a),null,u,i,r)}if(e instanceof lx){var l=e.key.path.L(),h=zP(e.version);return new mC(new yC(l,h),null,null,!0,i,r)}return yb()}function HP(t){var e=t.v();return[e.seconds,e.nanoseconds]}function WP(t){var e=new Mb(t[0],t[1]);return Nb.V(e)}function zP(t){var e=t.v();return new hC(e.seconds,e.nanoseconds)}function qP(t){var e=new Mb(t.seconds,t.nanoseconds);return Nb.V(e)}function GP(t,e){var n=(e.baseMutations||[]).map((function(e){return dw(t.Br,e)})),i=e.mutations.map((function(e){return dw(t.Br,e)})),r=Mb.fromMillis(e.localWriteTimeMs);return new wP(e.batchId,r,n,i)}function YP(t){var e,n,i=qP(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?qP(t.lastLimboFreeSnapshotVersion):Nb.min();return void 0!==t.query.documents?(mb(1===(n=t.query).documents.length),e=bx(px(uw(n.documents[0])))):e=function(t){var e=uw(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){mb(1===i);var o=n.from[0];o.allDescendants?r=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Pw(e)]:void 0!==e.fieldFilter?[xw(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):yb():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Bx(ww(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Hb(e="object"==typeof t?t.value:t)?null:e}(n.limit));var l=null;n.startAt&&(l=mw(n.startAt));var h=null;return n.endAt&&(h=mw(n.endAt)),bx(cx(e,r,a,s,u,"F",l,h))}(t.query),new Zb(e,t.targetId,0,t.lastListenSequenceNumber,i,r,Cb.fromBase64String(t.resumeToken))}function KP(t,e){var n,i=zP(e.nt),r=zP(e.lastLimboFreeSnapshotVersion);n=Xb(e.target)?fw(t.Br,e.target):gw(t.Br,e.target);var o=e.resumeToken.toBase64();return new bC(e.targetId,Yb(e.target),i,o,e.sequenceNumber,r,n)}var XP=function(){function t(t,e,n,i){this.userId=t,this.serializer=e,this.ki=n,this.qr=i,this.Ur={}}return t.Kr=function(e,n,i,r){return mb(""!==e.uid),new t(e.Zs()?e.uid:"",n,i,r)},t.prototype.Qr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ZP(t).rs({index:dC.userMutationsIndex,range:n},(function(t,n,i){e=!1,i.done()})).next((function(){return e}))},t.prototype.Wr=function(t,e,n,i){var r=this,o=JP(t),s=ZP(t);return s.add({}).next((function(a){mb("number"==typeof a);for(var u=new wP(a,e,n,i),l=function(t,e,n){var i=n.baseMutations.map((function(e){return pw(t.Br,e)})),r=n.mutations.map((function(e){return pw(t.Br,e)}));return new dC(e,n.batchId,n.di.toMillis(),i,r)}(r.serializer,r.userId,u),h=[],c=new o_((function(t,e){return wb(t.B(),e.B())})),p=0,d=i;p<d.length;p++){var f=d[p],g=fC.key(r.userId,f.key.path,a);c=c.add(f.key.path.F()),h.push(s.put(l)),h.push(o.put(g,fC.PLACEHOLDER))}return c.forEach((function(e){h.push(r.ki.jr(t,e))})),t.Ni((function(){r.Ur[a]=u.keys()})),Gx.On(h).next((function(){return u}))}))},t.prototype.Gr=function(t,e){var n=this;return ZP(t).get(e).next((function(t){return t?(mb(t.userId===n.userId),GP(n.serializer,t)):null}))},t.prototype.zr=function(t,e){var n=this;return this.Ur[e]?Gx.resolve(this.Ur[e]):this.Gr(t,e).next((function(t){if(t){var i=t.keys();return n.Ur[e]=i,i}return null}))},t.prototype.Hr=function(t,e){var n=this,i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return ZP(t).rs({index:dC.userMutationsIndex,range:r},(function(t,e,r){e.userId===n.userId&&(mb(e.batchId>=i),o=GP(n.serializer,e)),r.done()})).next((function(){return o}))},t.prototype.Yr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ZP(t).rs({index:dC.userMutationsIndex,range:e,reverse:!0},(function(t,e,i){n=e.batchId,i.done()})).next((function(){return n}))},t.prototype.Jr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ZP(t).ts(dC.userMutationsIndex,n).next((function(t){return t.map((function(t){return GP(e.serializer,t)}))}))},t.prototype.$i=function(t,e){var n=this,i=fC.prefixForPath(this.userId,e.path),r=IDBKeyRange.lowerBound(i),o=[];return JP(t).rs({range:r},(function(i,r,s){var a=i[0],u=i[2],l=VP(i[1]);if(a===n.userId&&e.path.isEqual(l))return ZP(t).get(u).next((function(t){if(!t)throw yb();mb(t.userId===n.userId),o.push(GP(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.Ki=function(t,e){var n=this,i=new o_(wb),r=[];return e.forEach((function(e){var o=fC.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=JP(t).rs({range:s},(function(t,r,o){var s=t[0],a=t[2],u=VP(t[1]);s===n.userId&&e.path.isEqual(u)?i=i.add(a):o.done()}));r.push(a)})),Gx.On(r).next((function(){return n.Xr(t,i)}))},t.prototype.Hi=function(t,e){var n=this,i=e.path,r=i.length+1,o=fC.prefixForPath(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new o_(wb);return JP(t).rs({range:s},(function(t,e,o){var s=t[0],u=t[2],l=VP(t[1]);s===n.userId&&i.M(l)?l.length===r&&(a=a.add(u)):o.done()})).next((function(){return n.Xr(t,a)}))},t.prototype.Xr=function(t,e){var n=this,i=[],r=[];return e.forEach((function(e){r.push(ZP(t).get(e).next((function(t){if(null===t)throw yb();mb(t.userId===n.userId),i.push(GP(n.serializer,t))})))})),Gx.On(r).next((function(){return i}))},t.prototype.Zr=function(t,e){var n=this;return $P(t.eo,this.userId,e).next((function(i){return t.Ni((function(){n.no(e.batchId)})),Gx.forEach(i,(function(e){return n.qr.so(t,e)}))}))},t.prototype.no=function(t){delete this.Ur[t]},t.prototype.io=function(t){var e=this;return this.Qr(t).next((function(n){if(!n)return Gx.resolve();var i=IDBKeyRange.lowerBound(fC.prefixForUser(e.userId)),r=[];return JP(t).rs({range:i},(function(t,n,i){if(t[0]===e.userId){var o=VP(t[1]);r.push(o)}else i.done()})).next((function(){mb(0===r.length)}))}))},t.prototype.ro=function(t,e){return QP(t,this.userId,e)},t.prototype.oo=function(t){var e=this;return tC(t).get(this.userId).next((function(t){return t||new pC(e.userId,-1,"")}))},t}();function QP(t,e,n){var i=fC.prefixForPath(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return JP(t).rs({range:o,ss:!0},(function(t,n,i){t[0]===e&&t[1]===r&&(s=!0),i.done()})).next((function(){return s}))}function $P(t,e,n){var i=t.store(dC.store),r=t.store(fC.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=i.rs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){mb(1===a)})));for(var l=[],h=0,c=n.mutations;h<c.length;h++){var p=c[h],d=fC.key(e,p.key.path,n.batchId);o.push(r.delete(d)),l.push(p.key)}return Gx.On(o).next((function(){return l}))}function ZP(t){return MC.Kn(t,dC.store)}function JP(t){return MC.Kn(t,fC.store)}function tC(t){return MC.Kn(t,pC.store)}var eC=function(){function t(t,e){this.serializer=t,this.ki=e}return t.prototype.yi=function(t,e,n){return rC(t).put(oC(e),n)},t.prototype.pi=function(t,e){var n=rC(t),i=oC(e);return n.delete(i)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(i){return i.byteSize+=e,n.ao(t,i)}))},t.prototype.bi=function(t,e){var n=this;return rC(t).get(oC(e)).next((function(t){return n.co(t)}))},t.prototype.uo=function(t,e){var n=this;return rC(t).get(oC(e)).next((function(t){var e=n.co(t);return e?{ho:e,size:sC(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,i=l_();return this.lo(t,e,(function(t,e){var r=n.co(e);i=i.ot(t,r)})).next((function(){return i}))},t.prototype._o=function(t,e){var n=this,i=l_(),r=new n_(Bb.D);return this.lo(t,e,(function(t,e){var o=n.co(e);o?(i=i.ot(t,o),r=r.ot(t,sC(e))):(i=i.ot(t,null),r=r.ot(t,0))})).next((function(){return{fo:i,do:r}}))},t.prototype.lo=function(t,e,n){if(e.P())return Gx.resolve();var i=IDBKeyRange.bound(e.first().path.L(),e.last().path.L()),r=e._t(),o=r.It();return rC(t).rs({range:i},(function(t,e,i){for(var s=Bb.Z(t);o&&Bb.D(o,s)<0;)n(o,null),o=r.It();o&&o.isEqual(s)&&(n(o,e),o=r.At()?r.It():null),o?i.Xn(o.path.L()):i.done()})).next((function(){for(;o;)n(o,null),o=r.At()?r.It():null}))},t.prototype.Qi=function(t,e,n){var i=this,r=c_(),o=e.path.length+1,s={};if(n.isEqual(Nb.min())){var a=e.path.L();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.L(),l=HP(n);s.range=IDBKeyRange.lowerBound([u,l],!0),s.index=mC.collectionReadTimeIndex}return rC(t).rs(s,(function(t,n,s){if(t.length===o){var a=UP(i.serializer,n);e.path.M(a.key.path)?a instanceof ax&&Ox(e,a)&&(r=r.ot(a.key,a)):s.done()}})).next((function(){return r}))},t.prototype.wo=function(t){return new nC(this,!!t&&t.Eo)},t.prototype.To=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return iC(t).get(vC.key).next((function(t){return mb(!!t),t}))},t.prototype.ao=function(t,e){return iC(t).put(vC.key,e)},t.prototype.co=function(t){if(t){var e=UP(this.serializer,t);return e instanceof ux&&e.version.isEqual(Nb.min())?null:e}return null},t}(),nC=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).Io=e,i.Eo=n,i.mo=new Rb((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),i}return Object(ag.c)(e,t),e.prototype.Di=function(t){var e=this,n=[],i=0,r=new o_((function(t,e){return wb(t.B(),e.B())}));return this.Ri.forEach((function(o,s){var a=e.mo.get(o);if(s){var u=BP(e.Io.serializer,s,e.readTime);r=r.add(o.path.F());var l=sC(u);i+=l-a,n.push(e.Io.yi(t,o,u))}else if(i-=a,e.Eo){var h=BP(e.Io.serializer,new ux(o,Nb.min()),e.readTime);n.push(e.Io.yi(t,o,h))}else n.push(e.Io.pi(t,o))})),r.forEach((function(i){n.push(e.Io.ki.jr(t,i))})),n.push(this.Io.updateMetadata(t,i)),Gx.On(n)},e.prototype.vi=function(t,e){var n=this;return this.Io.uo(t,e).next((function(t){return null===t?(n.mo.set(e,0),null):(n.mo.set(e,t.size),t.ho)}))},e.prototype.Si=function(t,e){var n=this;return this.Io._o(t,e).next((function(t){var e=t.fo;return t.do.forEach((function(t,e){n.mo.set(t,e)})),e}))},e}(PP);function iC(t){return MC.Kn(t,vC.store)}function rC(t){return MC.Kn(t,mC.store)}function oC(t){return t.path.L()}function sC(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw yb();e=t.noDocument}return JSON.stringify(e).length}var aC=function(){function t(){this.Ao=new uC}return t.prototype.jr=function(t,e){return this.Ao.add(e),Gx.resolve()},t.prototype.zi=function(t,e){return Gx.resolve(this.Ao.getEntries(e))},t}(),uC=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.k(),n=t.F(),i=this.index[e]||new o_(Vb.D),r=!i.has(n);return this.index[e]=i.add(n),r},t.prototype.has=function(t){var e=t.k(),n=t.F(),i=this.index[e];return i&&i.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new o_(Vb.D)).L()},t}(),lC=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,i){var r=this;mb(n<i&&n>=0&&i<=10);var o=new $x("createOrUpgrade",e);n<1&&i>=1&&(function(t){t.createObjectStore(cC.store)}(t),function(t){t.createObjectStore(pC.store,{keyPath:pC.keyPath}),t.createObjectStore(dC.store,{keyPath:dC.keyPath,autoIncrement:!0}).createIndex(dC.userMutationsIndex,dC.userMutationsKeyPath,{unique:!0}),t.createObjectStore(fC.store)}(t),PC(t),function(t){t.createObjectStore(mC.store)}(t));var s=Gx.resolve();return n<3&&i>=3&&(0!==n&&(function(t){t.deleteObjectStore(_C.store),t.deleteObjectStore(bC.store),t.deleteObjectStore(wC.store)}(t),PC(t)),s=s.next((function(){return function(t){var e=t.store(wC.store),n=new wC(0,0,Nb.min().v(),0);return e.put(wC.key,n)}(o)}))),n<4&&i>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(dC.store).ts().next((function(n){t.deleteObjectStore(dC.store),t.createObjectStore(dC.store,{keyPath:dC.keyPath,autoIncrement:!0}).createIndex(dC.userMutationsIndex,dC.userMutationsKeyPath,{unique:!0});var i=e.store(dC.store),r=n.map((function(t){return i.put(t)}));return Gx.On(r)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(CC.store,{keyPath:CC.keyPath})}(t)}))),n<5&&i>=5&&(s=s.next((function(){return r.removeAcknowledgedMutations(o)}))),n<6&&i>=6&&(s=s.next((function(){return function(t){t.createObjectStore(vC.store)}(t),r.addDocumentGlobal(o)}))),n<7&&i>=7&&(s=s.next((function(){return r.ensureSequenceNumbers(o)}))),n<8&&i>=8&&(s=s.next((function(){return r.createCollectionParentIndex(t,o)}))),n<9&&i>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(mC.store);e.createIndex(mC.readTimeIndex,mC.readTimeIndexPath,{unique:!1}),e.createIndex(mC.collectionReadTimeIndex,mC.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&i>=10&&(s=s.next((function(){return r.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(mC.store).rs((function(t,n){e+=sC(n)})).next((function(){var n=new vC(e);return t.store(vC.store).put(vC.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(pC.store),i=t.store(dC.store);return n.ts().next((function(n){return Gx.forEach(n,(function(n){var r=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return i.ts(dC.userMutationsIndex,r).next((function(i){return Gx.forEach(i,(function(i){mb(i.userId===n.userId);var r=GP(e.serializer,i);return $P(t,n.userId,r).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(_C.store),n=t.store(mC.store);return t.store(wC.store).get(wC.key).next((function(t){var i=[];return n.rs((function(n,r){var o=new Vb(n),s=function(t){return[0,MP(t)]}(o);i.push(e.get(s).next((function(n){return n?Gx.resolve():function(n){return e.put(new _C(0,MP(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Gx.On(i)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(xC.store,{keyPath:xC.keyPath});var n=e.store(xC.store),i=new uC,r=function(t){if(i.add(t)){var e=t.k(),r=t.F();return n.put({collectionId:e,parent:MP(r)})}};return e.store(mC.store).rs({ss:!0},(function(t,e){var n=new Vb(t);return r(n.F())})).next((function(){return e.store(fC.store).rs({ss:!0},(function(t,e){var n=VP(t[1]);return r(n.F())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(bC.store);return n.rs((function(t,i){var r=YP(i),o=KP(e.serializer,r);return n.put(o)}))},t}(),hC=function(t,e){this.seconds=t,this.nanoseconds=e},cC=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};cC.store="owner",cC.key="owner";var pC=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};pC.store="mutationQueues",pC.keyPath="userId";var dC=function(t,e,n,i,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=i,this.mutations=r};dC.store="mutations",dC.keyPath="batchId",dC.userMutationsIndex="userMutationsIndex",dC.userMutationsKeyPath=["userId","batchId"];var fC=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,MP(e)]},t.key=function(t,e,n){return[t,MP(e),n]},t}();fC.store="documentMutations",fC.PLACEHOLDER=new fC;var gC=function(t,e){this.path=t,this.readTime=e},yC=function(t,e){this.path=t,this.version=e},mC=function(t,e,n,i,r,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=i,this.readTime=r,this.parentPath=o};mC.store="remoteDocuments",mC.readTimeIndex="readTimeIndex",mC.readTimeIndexPath="readTime",mC.collectionReadTimeIndex="collectionReadTimeIndex",mC.collectionReadTimeIndexPath=["parentPath","readTime"];var vC=function(t){this.byteSize=t};vC.store="remoteDocumentGlobal",vC.key="remoteDocumentGlobalKey";var bC=function(t,e,n,i,r,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=r,this.lastLimboFreeSnapshotVersion=o,this.query=s};bC.store="targets",bC.keyPath="targetId",bC.queryTargetsIndexName="queryTargetsIndex",bC.queryTargetsKeyPath=["canonicalId","targetId"];var _C=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};_C.store="targetDocuments",_C.keyPath=["targetId","path"],_C.documentTargetsIndex="documentTargetsIndex",_C.documentTargetsKeyPath=["path","targetId"];var wC=function(t,e,n,i){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=i};wC.key="targetGlobalKey",wC.store="targetGlobal";var xC=function(t,e){this.collectionId=t,this.parent=e};function PC(t){t.createObjectStore(_C.store,{keyPath:_C.keyPath}).createIndex(_C.documentTargetsIndex,_C.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bC.store,{keyPath:bC.keyPath}).createIndex(bC.queryTargetsIndexName,bC.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(wC.store)}xC.store="collectionParents",xC.keyPath=["collectionId","parent"];var CC=function(t,e,n,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=i};CC.store="clientMetadata",CC.keyPath="clientId";var IC=Object(ag.g)(Object(ag.g)(Object(ag.g)([pC.store,dC.store,fC.store,mC.store,bC.store,cC.store,wC.store,_C.store],[CC.store]),[vC.store]),[xC.store]),OC=function(){function t(){this.Ro=new uC}return t.prototype.jr=function(t,e){var n=this;if(!this.Ro.has(e)){var i=e.k(),r=e.F();t.Ni((function(){n.Ro.add(e)}));var o={collectionId:i,parent:MP(r)};return SC(t).put(o)}return Gx.resolve()},t.prototype.zi=function(t,e){var n=[],i=IDBKeyRange.bound([e,""],[Pb(e),""],!1,!0);return SC(t).ts(i).next((function(t){for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.collectionId!==e)break;n.push(VP(o.parent))}return n}))},t}();function SC(t){return MC.Kn(t,xC.store)}var TC=function(){function t(t){this.Po=t}return t.prototype.next=function(){return this.Po+=2,this.Po},t.yo=function(){return new t(0)},t.Vo=function(){return new t(-1)},t}(),EC=function(){function t(t,e){this.qr=t,this.serializer=e}return t.prototype.po=function(t){var e=this;return this.bo(t).next((function(n){var i=new TC(n.highestTargetId);return n.highestTargetId=i.next(),e.vo(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.So=function(t){return this.bo(t).next((function(t){return Nb.V(new Mb(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Do=function(t){return this.bo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Co=function(t,e,n){var i=this;return this.bo(t).next((function(r){return r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.v()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),i.vo(t,r)}))},t.prototype.No=function(t,e){var n=this;return this.xo(t,e).next((function(){return n.bo(t).next((function(i){return i.targetCount+=1,n.Fo(e,i),n.vo(t,i)}))}))},t.prototype.Oo=function(t,e){return this.xo(t,e)},t.prototype.ko=function(t,e){var n=this;return this.Mo(t,e.targetId).next((function(){return kC(t).delete(e.targetId)})).next((function(){return n.bo(t)})).next((function(e){return mb(e.targetCount>0),e.targetCount-=1,n.vo(t,e)}))},t.prototype.Or=function(t,e,n){var i=this,r=0,o=[];return kC(t).rs((function(s,a){var u=YP(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r++,o.push(i.ko(t,u)))})).next((function(){return Gx.On(o)})).next((function(){return r}))},t.prototype.Ce=function(t,e){return kC(t).rs((function(t,n){var i=YP(n);e(i)}))},t.prototype.bo=function(t){return AC(t).get(wC.key).next((function(t){return mb(null!==t),t}))},t.prototype.vo=function(t,e){return AC(t).put(wC.key,e)},t.prototype.xo=function(t,e){return kC(t).put(KP(this.serializer,e))},t.prototype.Fo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.$o=function(t){return this.bo(t).next((function(t){return t.targetCount}))},t.prototype.Lo=function(t,e){var n=Yb(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),r=null;return kC(t).rs({range:i,index:bC.queryTargetsIndexName},(function(t,n,i){var o=YP(n);Kb(e,o.target)&&(r=o,i.done())})).next((function(){return r}))},t.prototype.Bo=function(t,e,n){var i=this,r=[],o=DC(t);return e.forEach((function(e){var s=MP(e.path);r.push(o.put(new _C(n,s))),r.push(i.qr.qo(t,n,e))})),Gx.On(r)},t.prototype.Uo=function(t,e,n){var i=this,r=DC(t);return Gx.forEach(e,(function(e){var o=MP(e.path);return Gx.On([r.delete([n,o]),i.qr.Ko(t,n,e)])}))},t.prototype.Mo=function(t,e){var n=DC(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)},t.prototype.Qo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),i=DC(t),r=f_();return i.rs({range:n,ss:!0},(function(t,e,n){var i=VP(t[1]),o=new Bb(i);r=r.add(o)})).next((function(){return r}))},t.prototype.ro=function(t,e){var n=MP(e.path),i=IDBKeyRange.bound([n],[Pb(n)],!1,!0),r=0;return DC(t).rs({index:_C.documentTargetsIndex,ss:!0,range:i},(function(t,e,n){0!==t[0]&&(r++,n.done())})).next((function(){return r>0}))},t.prototype.Ue=function(t,e){return kC(t).get(e).next((function(t){return t?YP(t):null}))},t}();function kC(t){return MC.Kn(t,bC.store)}function AC(t){return MC.Kn(t,wC.store)}function DC(t){return MC.Kn(t,_C.store)}var jC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",RC=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).eo=e,i.Wo=n,i}return Object(ag.c)(e,t),e}(IP),MC=function(){function t(e,n,i,r,o,s,a,u,l,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.fn=o,this.window=s,this.document=a,this.jo=l,this.Go=h,this.zo=null,this.Ho=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Yo=null,this.inForeground=!1,this.Jo=null,this.Xo=null,this.Zo=Number.NEGATIVE_INFINITY,this.ta=function(t){return Promise.resolve()},!t.Ln())throw new lb(ub.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.qr=new VC(this,r),this.ea=n+"main",this.serializer=new LP(u),this.na=new Yx(this.ea,10,new lC(this.serializer)),this.sa=new EC(this.qr,this.serializer),this.ki=new OC,this.Fi=function(t,e){return new eC(t,e)}(this.serializer,this.ki),this.window&&this.window.localStorage?this.ia=this.window.localStorage:(this.ia=null,!1===h&&db("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Kn=function(t,e){if(t instanceof RC)return Yx.Kn(t.eo,e);throw yb()},t.prototype.start=function(){var t=this;return this.ra().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new lb(ub.FAILED_PRECONDITION,jC);return t.oa(),t.aa(),t.ca(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.sa.Do(e)}))})).then((function(e){t.zo=new TP(e,t.jo)})).then((function(){t.Ho=!0})).catch((function(e){return t.na&&t.na.close(),Promise.reject(e)}))},t.prototype.ua=function(t){var e=this;return this.ta=function(n){return Object(ag.b)(e,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){return this.br?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ha=function(t){var e=this;this.na.jn((function(n){return Object(ag.b)(e,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.la=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return Object(ag.b)(e,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){switch(t.label){case 0:return this.br?[4,this.ra()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.ra=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return FC(e).put(new CC(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._a(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.ta(!1)})))}))})).next((function(){return t.fa(e)})).next((function(n){return t.isPrimary&&!n?t.da(e).next((function(){return!1})):!!n&&t.wa(e).next((function(){return!0}))}))})).catch((function(e){if(Qx(e))return pb("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return pb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.ta(e)})),t.isPrimary=e}))},t.prototype._a=function(t){var e=this;return NC(t).get(cC.key).next((function(t){return Gx.resolve(e.Ea(t))}))},t.prototype.Ta=function(t){return FC(t).delete(this.clientId)},t.prototype.Ia=function(){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i,r=this;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.ma(this.Zo,18e5)?[3,2]:(this.Zo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Kn(e,CC.store);return n.ts().next((function(t){var e=r.Aa(t,18e5),i=t.filter((function(t){return-1===e.indexOf(t)}));return Gx.forEach(i,(function(t){return n.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.ia)for(n=0,i=e;n<i.length;n++)this.ia.removeItem(this.Ra(i[n].clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ca=function(){var t=this;this.Xo=this.fn.yn("client_metadata_refresh",4e3,(function(){return t.ra().then((function(){return t.Ia()})).then((function(){return t.ca()}))}))},t.prototype.Ea=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.fa=function(t){var e=this;return this.Go?Gx.resolve(!0):NC(t).get(cC.key).next((function(n){if(null!==n&&e.ma(n.leaseTimestampMs,5e3)&&!e.Pa(n.ownerId)){if(e.Ea(n)&&e.networkEnabled)return!0;if(!e.Ea(n)){if(!n.allowTabSynchronization)throw new lb(ub.FAILED_PRECONDITION,jC);return!1}}return!(!e.networkEnabled||!e.inForeground)||FC(t).ts().next((function(t){return void 0===e.Aa(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&pb("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ga=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t=this;return Object(ag.d)(this,(function(e){switch(e.label){case 0:return this.Ho=!1,this.ya(),this.Xo&&(this.Xo.cancel(),this.Xo=null),this.Va(),this.pa(),[4,this.na.runTransaction("shutdown","readwrite",[cC.store,CC.store],(function(e){var n=new RC(e,TP.ir);return t.da(n).next((function(){return t.Ta(n)}))}))];case 1:return e.sent(),this.na.close(),this.ba(),[2]}}))}))},t.prototype.Aa=function(t,e){var n=this;return t.filter((function(t){return n.ma(t.updateTimeMs,e)&&!n.Pa(t.clientId)}))},t.prototype.va=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return FC(e).ts().next((function(e){return t.Aa(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"br",{get:function(){return this.Ho},enumerable:!1,configurable:!0}),t.prototype.Sa=function(t){return XP.Kr(t,this.serializer,this.ki,this.qr)},t.prototype.Da=function(){return this.sa},t.prototype.Ca=function(){return this.Fi},t.prototype.Na=function(){return this.ki},t.prototype.runTransaction=function(t,e,n){var i,r=this;return pb("IndexedDbPersistence","Starting transaction:",t),this.na.runTransaction(t,"readonly"===e?"readonly":"readwrite",IC,(function(o){return i=new RC(o,r.zo?r.zo.next():TP.ir),"readwrite-primary"===e?r._a(i).next((function(t){return!!t||r.fa(i)})).next((function(e){if(!e)throw db("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.fn.Cs((function(){return r.ta(!1)})),new lb(ub.FAILED_PRECONDITION,CP);return n(i)})).next((function(t){return r.wa(i).next((function(){return t}))})):r.xa(i).next((function(){return n(i)}))})).then((function(t){return i.xi(),t}))},t.prototype.xa=function(t){var e=this;return NC(t).get(cC.key).next((function(t){if(null!==t&&e.ma(t.leaseTimestampMs,5e3)&&!e.Pa(t.ownerId)&&!e.Ea(t)&&!(e.Go||e.allowTabSynchronization&&t.allowTabSynchronization))throw new lb(ub.FAILED_PRECONDITION,jC)}))},t.prototype.wa=function(t){var e=new cC(this.clientId,this.allowTabSynchronization,Date.now());return NC(t).put(cC.key,e)},t.Ln=function(){return Yx.Ln()},t.prototype.da=function(t){var e=this,n=NC(t);return n.get(cC.key).next((function(t){return e.Ea(t)?(pb("IndexedDbPersistence","Releasing primary lease."),n.delete(cC.key)):Gx.resolve()}))},t.prototype.ma=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(db("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.oa=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Jo=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.ra()}))},this.document.addEventListener("visibilitychange",this.Jo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Va=function(){this.Jo&&(this.document.removeEventListener("visibilitychange",this.Jo),this.Jo=null)},t.prototype.aa=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Yo=function(){e.ya(),e.fn.ws((function(){return e.ga()}))},this.window.addEventListener("unload",this.Yo))},t.prototype.pa=function(){this.Yo&&(this.window.removeEventListener("unload",this.Yo),this.Yo=null)},t.prototype.Pa=function(t){var e;try{var n=null!==(null===(e=this.ia)||void 0===e?void 0:e.getItem(this.Ra(t)));return pb("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return db("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.ya=function(){if(this.ia)try{this.ia.setItem(this.Ra(this.clientId),String(Date.now()))}catch(t){db("Failed to set zombie client id.",t)}},t.prototype.ba=function(){if(this.ia)try{this.ia.removeItem(this.Ra(this.clientId))}catch(t){}},t.prototype.Ra=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function NC(t){return MC.Kn(t,cC.store)}function FC(t){return MC.Kn(t,CC.store)}var VC=function(){function t(t,e){this.db=t,this.gr=new RP(this,e)}return t.prototype.Cr=function(t){var e=this.Fa(t);return this.db.Da().$o(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Fa=function(t){var e=0;return this.Fr(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Da().Ce(t,e)},t.prototype.Fr=function(t,e){return this.Oa(t,(function(t,n){return e(n)}))},t.prototype.qo=function(t,e,n){return LC(t,n)},t.prototype.Ko=function(t,e,n){return LC(t,n)},t.prototype.Or=function(t,e,n){return this.db.Da().Or(t,e,n)},t.prototype.so=function(t,e){return LC(t,e)},t.prototype.ka=function(t,e){return function(t,e){var n=!1;return tC(t).os((function(i){return QP(t,i,e).next((function(t){return t&&(n=!0),Gx.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.kr=function(t,e){var n=this,i=this.db.Ca().wo(),r=[],o=0;return this.Oa(t,(function(s,a){if(a<=e){var u=n.ka(t,s).next((function(e){if(!e)return o++,i.bi(t,s).next((function(){return i.pi(s),DC(t).delete([0,MP(s.path)])}))}));r.push(u)}})).next((function(){return Gx.On(r)})).next((function(){return i.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.Wo);return this.db.Da().Oo(t,n)},t.prototype.Ma=function(t,e){return LC(t,e)},t.prototype.Oa=function(t,e){var n,i=DC(t),r=TP.ir;return i.rs({index:_C.documentTargetsIndex},(function(t,i){var o=i.path,s=i.sequenceNumber;0===t[0]?(r!==TP.ir&&e(new Bb(VP(n)),r),r=s,n=o):r=TP.ir})).next((function(){r!==TP.ir&&e(new Bb(VP(n)),r)}))},t.prototype.$r=function(t){return this.db.Ca().To(t)},t}();function LC(t,e){return DC(t).put(function(t,e){return new _C(0,MP(t.path),e)}(e,t.Wo))}function UC(t,e){var n=t.projectId;return t.I||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var BC=function(){function t(t,e,n){this.persistence=t,this.$a=e,this.La=new n_(wb),this.Ba=new Rb((function(t){return Yb(t)}),Kb),this.qa=Nb.min(),this.Oi=t.Sa(n),this.Ua=t.Ca(),this.sa=t.Da(),this.Ka=new OP(this.Ua,this.Oi,this.persistence.Na()),this.$a.Qa(this.Ka)}return t.prototype.vr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Mr(n,e.La)}))},t}();function HC(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:return n=vb(t),i=n.Oi,r=n.Ka,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Oi.Jr(t).next((function(s){return o=s,i=n.persistence.Sa(e),r=new OP(n.Ua,i,n.persistence.Na()),i.Jr(t)})).next((function(e){for(var n=[],i=[],s=f_(),a=0,u=o;a<u.length;a++){var l=u[a];n.push(l.batchId);for(var h=0,c=l.mutations;h<c.length;h++)s=s.add(c[h].key)}for(var p=0,d=e;p<d.length;p++){var f=d[p];i.push(f.batchId);for(var g=0,y=f.mutations;g<y.length;g++)s=s.add(y[g].key)}return r.qi(t,s).next((function(t){return{Wa:t,ja:n,Ga:i}}))}))}))];case 1:return o=s.sent(),[2,(n.Oi=i,n.Ka=r,n.$a.Qa(n.Ka),o)]}}))}))}function WC(t,e){var n=vb(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var i=e.batch.keys(),r=n.Ua.wo({Eo:!0});return function(t,e,n,i){var r=n.batch,o=r.keys(),s=Gx.resolve();return o.forEach((function(t){s=s.next((function(){return i.bi(e,t)})).next((function(e){var o=e,s=n.Ai.get(t);mb(null!==s),(!o||o.version.u(s)<0)&&(o=r.wi(t,o,n))&&i.yi(o,n.mi)}))})),s.next((function(){return t.Oi.Zr(e,r)}))}(n,t,e,r).next((function(){return r.apply(t)})).next((function(){return n.Oi.io(t)})).next((function(){return n.Ka.qi(t,i)}))}))}function zC(t){var e=vb(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.sa.So(t)}))}function qC(t,e){var n=vb(t),i=e.nt,r=n.La;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ua.wo({Eo:!0});r=n.La;var s=[];e.zt.forEach((function(e,o){var a=r.get(o);if(a){s.push(n.sa.Uo(t,e.se,o).next((function(){return n.sa.Bo(t,e.ee,o)})));var u=e.resumeToken;if(u.o()>0){var l=a.it(u,i).st(t.Wo);r=r.ot(o,l),function(t,e,n){return mb(e.resumeToken.o()>0),0===t.resumeToken.o()||e.nt.p()-t.nt.p()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(a,l,e)&&s.push(n.sa.Oo(t,l))}}}));var a=u_(),u=f_();if(e.Yt.forEach((function(t,e){u=u.add(t)})),s.push(o.getEntries(t,u).next((function(r){e.Yt.forEach((function(u,l){var h=r.get(u);l instanceof ux&&l.version.isEqual(Nb.min())?(o.pi(u,i),a=a.ot(u,l)):null==h||l.version.u(h.version)>0||0===l.version.u(h.version)&&h.hasPendingWrites?(o.yi(l,i),a=a.ot(u,l)):pb("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",l.version),e.Jt.has(u)&&s.push(n.persistence.qr.Ma(t,u))}))}))),!i.isEqual(Nb.min())){var l=n.sa.So(t).next((function(e){return n.sa.Co(t,t.Wo,i)}));s.push(l)}return Gx.On(s).next((function(){return o.apply(t)})).next((function(){return n.Ka.Ui(t,a)}))})).then((function(t){return n.La=r,t}))}function GC(t,e){var n=vb(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Oi.Hr(t,e)}))}function YC(t,e){var n=vb(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var i;return n.sa.Lo(t,e).next((function(r){return r?Gx.resolve(i=r):n.sa.po(t).next((function(r){return i=new Zb(e,r,0,t.Wo),n.sa.No(t,i).next((function(){return i}))}))}))})).then((function(t){var i=n.La.get(t.targetId);return(null===i||t.nt.u(i.nt)>0)&&(n.La=n.La.ot(t.targetId,t),n.Ba.set(e,t.targetId)),t}))}function KC(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:i=vb(t),r=i.La.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",o,(function(t){return i.persistence.qr.removeTarget(t,r)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Qx(s=a.sent()))throw s;return pb("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return i.La=i.La.remove(e),i.Ba.delete(r.target),[2]}}))}))}function XC(t,e,n){var i=vb(t),r=Nb.min(),o=f_();return i.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var i=vb(t),r=i.Ba.get(n);return void 0!==r?Gx.resolve(i.La.get(r)):i.sa.Lo(e,n)}(i,t,bx(e)).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,i.sa.Qo(t,e.targetId).next((function(t){o=t}))})).next((function(){return i.$a.Qi(t,e,n?r:Nb.min(),n?o:f_())})).next((function(t){return{documents:t,za:o}}))}))}function QC(t,e){var n=vb(t),i=vb(n.sa),r=n.La.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return i.Ue(t,e).next((function(t){return t?t.target:null}))}))}function $C(t){var e=vb(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var i=vb(t),r=u_(),o=HP(n),s=rC(e),a=IDBKeyRange.lowerBound(o,!0);return s.rs({index:mC.readTimeIndex,range:a},(function(t,e){var n=UP(i.serializer,e);r=r.ot(n.key,n),o=e.readTime})).next((function(){return{Ha:r,readTime:WP(o)}}))}(e.Ua,t,e.qa)})).then((function(t){var n=t.Ha;return e.qa=t.readTime,n}))}function ZC(t){return Object(ag.b)(this,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){return[2,(e=vb(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=rC(t),n=Nb.min();return e.rs({index:mC.readTimeIndex,reverse:!0},(function(t,e,i){e.readTime&&(n=WP(e.readTime)),i.done()})).next((function(){return n}))}(t)})).then((function(t){e.qa=t}))]}))}))}function JC(t){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){if(t.code!==ub.FAILED_PRECONDITION||t.message!==CP)throw t;return pb("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var tI=function(){function t(t,e,n,i,r,o){this.fn=t,this.Ya=n,this.Ja=i,this.Xa=r,this.listener=o,this.state=0,this.Za=0,this.tc=null,this.stream=null,this.ys=new qx(t,e)}return t.prototype.ec=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.nc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.sc()},t.prototype.stop=function(){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){switch(t.label){case 0:return this.ec()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ic=function(){this.state=0,this.ys.reset()},t.prototype.rc=function(){var t=this;this.nc()&&null===this.tc&&(this.tc=this.fn.yn(this.Ya,6e4,(function(){return t.oc()})))},t.prototype.ac=function(t){this.cc(),this.stream.send(t)},t.prototype.oc=function(){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){return this.nc()?[2,this.close(0)]:[2]}))}))},t.prototype.cc=function(){this.tc&&(this.tc.cancel(),this.tc=null)},t.prototype.close=function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(n){switch(n.label){case 0:return this.cc(),this.ys.cancel(),this.Za++,3!==t?this.ys.reset():e&&e.code===ub.RESOURCE_EXHAUSTED?(db(e.toString()),db("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):e&&e.code===ub.UNAUTHENTICATED&&this.Xa.ri(),null!==this.stream&&(this.uc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.hc(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.uc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.lc(this.Za),n=this.Za;this.Xa.getToken().then((function(e){t.Za===n&&t._c(e)}),(function(n){e((function(){var e=new lb(ub.UNKNOWN,"Fetching auth token failed: "+n.message);return t.fc(e)}))}))},t.prototype._c=function(t){var e=this,n=this.lc(this.Za);this.stream=this.dc(t),this.stream.wc((function(){n((function(){return e.state=2,e.listener.wc()}))})),this.stream.hc((function(t){n((function(){return e.fc(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.sc=function(){var t=this;this.state=4,this.ys.Pn((function(){return Object(ag.b)(t,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.fc=function(t){return pb("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.lc=function(t){var e=this;return function(n){e.fn.ws((function(){return e.Za===t?n():(pb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),eI=function(t){function e(e,n,i,r,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,i,o)||this).serializer=r,s}return Object(ag.c)(e,t),e.prototype.dc=function(t){return this.Ja.Ec("Listen",t)},e.prototype.onMessage=function(t){this.ys.reset();var e=function(t,e){var n;if("targetChange"in e){var i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:yb()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(t,e){return t.Ke?(mb(void 0===e||"string"==typeof e),Cb.fromBase64String(e||"")):(mb(void 0===e||e instanceof Uint8Array),Cb.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?ub.UNKNOWN:e_(t.code);return new lb(e,t.message||"")}(s);n=new C_(i,r,o,a||null)}else if("documentChange"in e){var u=e.documentChange,l=sw(t,u.document.name),h=nw(u.document.updateTime),c=new ix({mapValue:{fields:u.document.fields}}),p=new ax(l,h,c,{});n=new x_(u.targetIds||[],u.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){var d=e.documentDelete,f=sw(t,d.document),g=d.readTime?nw(d.readTime):Nb.min(),y=new ux(f,g);n=new x_([],d.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){var m=e.documentRemove,v=sw(t,m.document);n=new x_([],m.removedTargetIds||[],v,null)}else{if(!("filter"in e))return yb();var b=e.filter,_=new Jb(b.count||0);n=new P_(b.targetId,_)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Nb.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Nb.min():e.readTime?nw(e.readTime):Nb.min()}(t);return this.listener.Tc(e,n)},e.prototype.Ic=function(t){var e={};e.database=lw(this.serializer),e.addTarget=function(t,e){var n,i=e.target;return(n=Xb(i)?{documents:fw(t,i)}:{query:gw(t,i)}).targetId=e.targetId,e.resumeToken.o()>0&&(n.resumeToken=tw(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yb()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.ac(e)},e.prototype.mc=function(t){var e={};e.database=lw(this.serializer),e.removeTarget=t,this.ac(e)},e}(tI),nI=function(t){function e(e,n,i,r,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,i,o)||this).serializer=r,s.Ac=!1,s}return Object(ag.c)(e,t),Object.defineProperty(e.prototype,"Rc",{get:function(){return this.Ac},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Ac=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.uc=function(){this.Ac&&this.Pc([])},e.prototype.dc=function(t){return this.Ja.Ec("Write",t)},e.prototype.onMessage=function(t){if(mb(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Ac){this.ys.reset();var e=function(t,e){return t&&t.length>0?(mb(void 0!==e),t.map((function(t){return function(t,e){var n=nw(t.updateTime?t.updateTime:e);n.isEqual(Nb.min())&&(n=nw(e));var i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults),new Uw(n,i)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=nw(t.commitTime);return this.listener.gc(n,e)}return mb(!t.writeResults||0===t.writeResults.length),this.Ac=!0,this.listener.yc()},e.prototype.Vc=function(){var t={};t.database=lw(this.serializer),this.ac(t)},e.prototype.Pc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return pw(e.serializer,t)}))};this.ac(n)},e}(tI),iI=function(t){function e(e,n,i){var r=this;return(r=t.call(this)||this).credentials=e,r.Ja=n,r.serializer=i,r.bc=!1,r}return Object(ag.c)(e,t),e.prototype.vc=function(){if(this.bc)throw new lb(ub.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Sc=function(t,e,n){var i=this;return this.vc(),this.credentials.getToken().then((function(r){return i.Ja.Sc(t,e,n,r)})).catch((function(t){throw t.code===ub.UNAUTHENTICATED&&i.credentials.ri(),t}))},e.prototype.Dc=function(t,e,n){var i=this;return this.vc(),this.credentials.getToken().then((function(r){return i.Ja.Dc(t,e,n,r)})).catch((function(t){throw t.code===ub.UNAUTHENTICATED&&i.credentials.ri(),t}))},e.prototype.terminate=function(){this.bc=!1},e}((function(){})),rI=function(){function t(t,e){this.cs=t,this.Cc=e,this.state="Unknown",this.Nc=0,this.xc=null,this.Fc=!0}return t.prototype.Oc=function(){var t=this;0===this.Nc&&(this.kc("Unknown"),this.xc=this.cs.yn("online_state_timeout",1e4,(function(){return t.xc=null,t.Mc("Backend didn't respond within 10 seconds."),t.kc("Offline"),Promise.resolve()})))},t.prototype.$c=function(t){"Online"===this.state?this.kc("Unknown"):(this.Nc++,this.Nc>=1&&(this.Lc(),this.Mc("Connection failed 1 times. Most recent error: "+t.toString()),this.kc("Offline")))},t.prototype.set=function(t){this.Lc(),this.Nc=0,"Online"===t&&(this.Fc=!1),this.kc(t)},t.prototype.kc=function(t){t!==this.state&&(this.state=t,this.Cc(t))},t.prototype.Mc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fc?(db(e),this.Fc=!1):pb("OnlineStateTracker",e)},t.prototype.Lc=function(){null!==this.xc&&(this.xc.cancel(),this.xc=null)},t}(),oI=function(t,e,n,i,r){var o=this;this.Bc=t,this.qc=e,this.cs=n,this.Uc={},this.Kc=[],this.Qc=new Map,this.Wc=new Set,this.jc=[],this.Gc=r,this.Gc.zc((function(t){n.ws((function(){return Object(ag.b)(o,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){switch(t.label){case 0:return fI(this)?(pb("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return(e=vb(t)).Wc.add(4),[4,aI(e)];case 1:return n.sent(),e.Hc.set("Unknown"),e.Wc.delete(4),[4,sI(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Hc=new rI(n,i)};function sI(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:if(!fI(t))return[3,4];e=0,n=t.jc,i.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function aI(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:e=0,n=t.jc,i.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function uI(t,e){var n=vb(t);n.Qc.has(e.targetId)||(n.Qc.set(e.targetId,e),dI(n)?pI(n):EI(n).nc()&&hI(n,e))}function lI(t,e){var n=vb(t),i=EI(n);n.Qc.delete(e),i.nc()&&cI(n,e),0===n.Qc.size&&(i.nc()?i.rc():fI(n)&&n.Hc.set("Unknown"))}function hI(t,e){t.Yc.me(e.targetId),EI(t).Ic(e)}function cI(t,e){t.Yc.me(e),EI(t).mc(e)}function pI(t){t.Yc=new O_({qe:function(e){return t.Uc.qe(e)},Ue:function(e){return t.Qc.get(e)||null}}),EI(t).start(),t.Hc.Oc()}function dI(t){return fI(t)&&!EI(t).ec()&&t.Qc.size>0}function fI(t){return 0===vb(t).Wc.size}function gI(t){t.Yc=void 0}function yI(t){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){return t.Qc.forEach((function(e,n){hI(t,e)})),[2]}))}))}function mI(t,e){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(n){return gI(t),dI(t)?(t.Hc.$c(e),pI(t)):t.Hc.set("Unknown"),[2]}))}))}function vI(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:if(t.Hc.set("Online"),!(e instanceof C_&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:n=e.cause,i=0,r=e.targetIds,s.label=1;case 1:return i<r.length?t.Qc.has(o=r[i])?[4,t.Uc.Jc(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Qc.delete(o),t.Yc.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return i=s.sent(),pb("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,bI(t,i)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof x_?t.Yc.be(e):e instanceof P_?t.Yc.Oe(e):t.Yc.De(e),n.isEqual(Nb.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,zC(t.Bc)];case 8:return r=s.sent(),n.u(r)>=0?[4,function(t,e){var n=t.Yc.$e(e);return n.zt.forEach((function(n,i){if(n.resumeToken.o()>0){var r=t.Qc.get(i);r&&t.Qc.set(i,r.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Qc.get(e);if(n){t.Qc.set(e,n.it(Cb.h,n.nt)),cI(t,e);var i=new Zb(n.target,e,1,n.sequenceNumber);hI(t,i)}})),t.Uc.Xc(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return pb("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,bI(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function bI(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i=this;return Object(ag.d)(this,(function(r){switch(r.label){case 0:if(!Qx(e))throw e;return t.Wc.add(1),[4,aI(t)];case 1:return r.sent(),t.Hc.set("Offline"),n||(n=function(){return zC(t.Bc)}),t.cs.Cs((function(){return Object(ag.b)(i,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return pb("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Wc.delete(1),[4,sI(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function _I(t,e){return e().catch((function(n){return bI(t,n,e)}))}function wI(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i,r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:e=vb(t),n=kI(e),i=e.Kc.length>0?e.Kc[e.Kc.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return fI(t)&&t.Kc.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,GC(e.Bc,i)];case 3:return null===(r=s.sent())?(0===e.Kc.length&&n.rc(),[3,7]):(i=r.batchId,function(t,e){t.Kc.push(e);var n=kI(t);n.nc()&&n.Rc&&n.Pc(e.mutations)}(e,r),[3,6]);case 4:return o=s.sent(),[4,bI(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return xI(e)&&PI(e),[2]}}))}))}function xI(t){return fI(t)&&!kI(t).ec()&&t.Kc.length>0}function PI(t){kI(t).start()}function CI(t){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){return kI(t).Vc(),[2]}))}))}function II(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i;return Object(ag.d)(this,(function(r){for(e=kI(t),n=0,i=t.Kc;n<i.length;n++)e.Pc(i[n].mutations);return[2]}))}))}function OI(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return i=t.Kc.shift(),r=xP.from(i,e,n),[4,_I(t,(function(){return t.Uc.Zc(r)}))];case 1:return o.sent(),[4,wI(t)];case 2:return o.sent(),[2]}}))}))}function SI(t,e){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(n){switch(n.label){case 0:return e&&kI(t).Rc?[4,function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return t_(i=e.code)&&i!==ub.ABORTED?(n=t.Kc.shift(),kI(t).ic(),[4,_I(t,(function(){return t.Uc.tu(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,wI(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return xI(t)&&PI(t),[2]}}))}))}function TI(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return n=vb(t),e?(n.Wc.delete(2),[4,sI(n)]):[3,2];case 1:return i.sent(),[3,5];case 2:return e?[3,4]:(n.Wc.add(2),[4,aI(n)]);case 3:i.sent(),n.Hc.set("Unknown"),i.label=4;case 4:i.label=5;case 5:return[2]}}))}))}function EI(t){var e=this;return t.eu||(t.eu=function(t,e,n){var i=vb(t);return i.vc(),new eI(e,i.Ja,i.credentials,i.serializer,n)}(t.qc,t.cs,{wc:yI.bind(null,t),hc:mI.bind(null,t),Tc:vI.bind(null,t)}),t.jc.push((function(n){return Object(ag.b)(e,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return n?(t.eu.ic(),dI(t)?pI(t):t.Hc.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.eu.stop()];case 2:e.sent(),gI(t),e.label=3;case 3:return[2]}}))}))}))),t.eu}function kI(t){var e=this;return t.nu||(t.nu=function(t,e,n){var i=vb(t);return i.vc(),new nI(e,i.Ja,i.credentials,i.serializer,n)}(t.qc,t.cs,{wc:CI.bind(null,t),hc:SI.bind(null,t),yc:II.bind(null,t),gc:OI.bind(null,t)}),t.jc.push((function(n){return Object(ag.b)(e,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return n?(t.nu.ic(),[4,wI(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.nu.stop()];case 3:e.sent(),t.Kc.length>0&&(pb("RemoteStore","Stopping write stream with "+t.Kc.length+" pending writes"),t.Kc=[]),e.label=4;case 4:return[2]}}))}))}))),t.nu}var AI=function(){function t(){this.su=new o_(DI.iu),this.ru=new o_(DI.ou)}return t.prototype.P=function(){return this.su.P()},t.prototype.qo=function(t,e){var n=new DI(t,e);this.su=this.su.add(n),this.ru=this.ru.add(n)},t.prototype.au=function(t,e){var n=this;t.forEach((function(t){return n.qo(t,e)}))},t.prototype.Ko=function(t,e){this.cu(new DI(t,e))},t.prototype.uu=function(t,e){var n=this;t.forEach((function(t){return n.Ko(t,e)}))},t.prototype.hu=function(t){var e=this,n=new Bb(new Vb([])),i=new DI(n,t),r=new DI(n,t+1),o=[];return this.ru.xt([i,r],(function(t){e.cu(t),o.push(t.key)})),o},t.prototype.lu=function(){var t=this;this.su.forEach((function(e){return t.cu(e)}))},t.prototype.cu=function(t){this.su=this.su.delete(t),this.ru=this.ru.delete(t)},t.prototype._u=function(t){var e=new Bb(new Vb([])),n=new DI(e,t),i=new DI(e,t+1),r=f_();return this.ru.xt([n,i],(function(t){r=r.add(t.key)})),r},t.prototype.ro=function(t){var e=new DI(t,0),n=this.su.Ot(e);return null!==n&&t.isEqual(n.key)},t}(),DI=function(){function t(t,e){this.key=t,this.fu=e}return t.iu=function(t,e){return Bb.D(t.key,e.key)||wb(t.fu,e.fu)},t.ou=function(t,e){return wb(t.fu,e.fu)||Bb.D(t.key,e.key)},t}();function jI(t,e){return"firestore_clients_"+t+"_"+e}function RI(t,e,n){var i="firestore_mutations_"+t+"_"+n;return e.Zs()&&(i+="_"+e.uid),i}function MI(t,e){return"firestore_targets_"+t+"_"+e}var NI=function(){function t(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i}return t.du=function(e,n,i){var r=JSON.parse(i),o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),s=void 0;return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(s=new lb(r.error.code,r.error.message)),o?new t(e,n,r.state,s):(db("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+i),null)},t.prototype.wu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),FI=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.du=function(e,n){var i=JSON.parse(n),r="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),o=void 0;return r&&i.error&&(r="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(o=new lb(i.error.code,i.error.message)),r?new t(e,i.state,o):(db("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.wu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),VI=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.du=function(e,n){for(var i=JSON.parse(n),r="object"==typeof i&&i.activeTargetIds instanceof Array,o=y_(),s=0;r&&s<i.activeTargetIds.length;++s)r=zb(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(db("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),LI=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.du=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(db("SharedClientState","Failed to parse online state: "+e),null)},t}(),UI=function(){function t(){this.activeTargetIds=y_()}return t.prototype.Eu=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Tu=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.wu=function(){var t={activeTargetIds:this.activeTargetIds.L(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),BI=function(){function t(t,e,n,i,r){this.window=t,this.fn=e,this.persistenceKey=n,this.Iu=i,this.mu=null,this.Cc=null,this.tr=null,this.Au=this.Ru.bind(this),this.Pu=new n_(wb),this.br=!1,this.gu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.yu=jI(this.persistenceKey,this.Iu),this.Vu=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Pu=this.Pu.ot(this.Iu,new UI),this.pu=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.bu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.vu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Su=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Au)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,u,l,h=this;return Object(ag.d)(this,(function(c){switch(c.label){case 0:return[4,this.mu.va()];case 1:for(t=c.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Iu&&(r=this.getItem(jI(this.persistenceKey,i)))&&(o=VI.du(i,r))&&(this.Pu=this.Pu.ot(o.clientId,o));for(this.Du(),(s=this.storage.getItem(this.Su))&&(a=this.Cu(s))&&this.Nu(a),u=0,l=this.gu;u<l.length;u++)this.Ru(l[u]);return this.gu=[],this.window.addEventListener("unload",(function(){return h.ga()})),this.br=!0,[2]}}))}))},t.prototype.sr=function(t){this.setItem(this.Vu,JSON.stringify(t))},t.prototype.xu=function(){return this.Fu(this.Pu)},t.prototype.Ou=function(t){var e=!1;return this.Pu.forEach((function(n,i){i.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.ku=function(t){this.Mu(t,"pending")},t.prototype.$u=function(t,e,n){this.Mu(t,e,n),this.Lu(t)},t.prototype.Bu=function(t){var e="not-current";if(this.Ou(t)){var n=this.storage.getItem(MI(this.persistenceKey,t));if(n){var i=FI.du(t,n);i&&(e=i.state)}}return this.qu.Eu(t),this.Du(),e},t.prototype.Uu=function(t){this.qu.Tu(t),this.Du()},t.prototype.Ku=function(t){return this.qu.activeTargetIds.has(t)},t.prototype.Qu=function(t){this.removeItem(MI(this.persistenceKey,t))},t.prototype.Wu=function(t,e,n){this.ju(t,e,n)},t.prototype.Gu=function(t,e,n){var i=this;e.forEach((function(t){i.Lu(t)})),this.currentUser=t,n.forEach((function(t){i.ku(t)}))},t.prototype.zu=function(t){this.Hu(t)},t.prototype.ga=function(){this.br&&(this.window.removeEventListener("storage",this.Au),this.removeItem(this.yu),this.br=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return pb("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){pb("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){pb("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ru=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(pb("SharedClientState","EVENT",n.key,n.newValue),n.key===this.yu)return void db("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return Object(ag.b)(e,void 0,void 0,(function(){var t,e,i,r,o,s;return Object(ag.d)(this,(function(a){if(this.br){if(null!==n.key)if(this.pu.test(n.key)){if(null==n.newValue)return t=this.Yu(n.key),[2,this.Ju(t,null)];if(e=this.Xu(n.key,n.newValue))return[2,this.Ju(e.clientId,e)]}else if(this.bu.test(n.key)){if(null!==n.newValue&&(i=this.Zu(n.key,n.newValue)))return[2,this.th(i)]}else if(this.vu.test(n.key)){if(null!==n.newValue&&(r=this.eh(n.key,n.newValue)))return[2,this.nh(r)]}else if(n.key===this.Su){if(null!==n.newValue&&(o=this.Cu(n.newValue)))return[2,this.Nu(o)]}else n.key===this.Vu&&(s=function(t){var e=TP.ir;if(null!=t)try{var n=JSON.parse(t);mb("number"==typeof n),e=n}catch(t){db("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==TP.ir&&this.tr(s)}else this.gu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"qu",{get:function(){return this.Pu.get(this.Iu)},enumerable:!1,configurable:!0}),t.prototype.Du=function(){this.setItem(this.yu,this.qu.wu())},t.prototype.Mu=function(t,e,n){var i=new NI(this.currentUser,t,e,n),r=RI(this.persistenceKey,this.currentUser,t);this.setItem(r,i.wu())},t.prototype.Lu=function(t){var e=RI(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Hu=function(t){this.storage.setItem(this.Su,JSON.stringify({clientId:this.Iu,onlineState:t}))},t.prototype.ju=function(t,e,n){var i=MI(this.persistenceKey,t),r=new FI(t,e,n);this.setItem(i,r.wu())},t.prototype.Yu=function(t){var e=this.pu.exec(t);return e?e[1]:null},t.prototype.Xu=function(t,e){var n=this.Yu(t);return VI.du(n,e)},t.prototype.Zu=function(t,e){var n=this.bu.exec(t),i=Number(n[1]);return NI.du(new gP(void 0!==n[2]?n[2]:null),i,e)},t.prototype.eh=function(t,e){var n=this.vu.exec(t),i=Number(n[1]);return FI.du(i,e)},t.prototype.Cu=function(t){return LI.du(t)},t.prototype.th=function(t){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.mu.sh(t.batchId,t.state,t.error)]:(pb("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.nh=function(t){return this.mu.ih(t.targetId,t.state,t.error)},t.prototype.Ju=function(t,e){var n=this,i=e?this.Pu.ot(t,e):this.Pu.remove(t),r=this.Fu(this.Pu),o=this.Fu(i),s=[],a=[];return o.forEach((function(t){r.has(t)||s.push(t)})),r.forEach((function(t){o.has(t)||a.push(t)})),this.mu.rh(s,a).then((function(){n.Pu=i}))},t.prototype.Nu=function(t){this.Pu.get(t.clientId)&&this.Cc(t.onlineState)},t.prototype.Fu=function(t){var e=y_();return t.forEach((function(t,n){e=e.kt(n.activeTargetIds)})),e},t}(),HI=function(){function t(){this.oh=new UI,this.ah={},this.Cc=null,this.tr=null}return t.prototype.ku=function(t){},t.prototype.$u=function(t,e,n){},t.prototype.Bu=function(t){return this.oh.Eu(t),this.ah[t]||"not-current"},t.prototype.Wu=function(t,e,n){this.ah[t]=e},t.prototype.Uu=function(t){this.oh.Tu(t)},t.prototype.Ku=function(t){return this.oh.activeTargetIds.has(t)},t.prototype.Qu=function(t){delete this.ah[t]},t.prototype.xu=function(){return this.oh.activeTargetIds},t.prototype.Ou=function(t){return this.oh.activeTargetIds.has(t)},t.prototype.start=function(){return this.oh=new UI,Promise.resolve()},t.prototype.Gu=function(t,e,n){},t.prototype.zu=function(t){},t.prototype.ga=function(){},t.prototype.sr=function(t){},t}(),WI=function(t){this.key=t},zI=function(t){this.key=t},qI=function(){function t(t,e){this.query=t,this.uh=e,this.hh=null,this.te=!1,this.lh=f_(),this.Qt=f_(),this._h=Sx(t),this.fh=new m_(this._h)}return Object.defineProperty(t.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),t.prototype.wh=function(t,e){var n=this,i=e?e.Eh:new v_,r=e?e.fh:this.fh,o=e?e.Qt:this.Qt,s=r,a=!1,u=dx(this.query)&&r.size===this.query.limit?r.last():null,l=fx(this.query)&&r.size===this.query.limit?r.first():null;if(t.ht((function(t,e){var h=r.get(t),c=e instanceof ax?e:null;c&&(c=Ox(n.query,c)?c:null);var p=!!h&&n.Qt.has(h.key),d=!!c&&(c.Je||n.Qt.has(c.key)&&c.hasCommittedMutations),f=!1;h&&c?h.data().isEqual(c.data())?p!==d&&(i.track({type:3,doc:c}),f=!0):n.Th(h,c)||(i.track({type:2,doc:c}),f=!0,(u&&n._h(c,u)>0||l&&n._h(c,l)<0)&&(a=!0)):!h&&c?(i.track({type:0,doc:c}),f=!0):h&&!c&&(i.track({type:1,doc:h}),f=!0,(u||l)&&(a=!0)),f&&(c?(s=s.add(c),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),dx(this.query)||fx(this.query))for(;s.size>this.query.limit;){var h=dx(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),i.track({type:1,doc:h})}return{fh:s,Eh:i,Ih:a,Qt:o}},t.prototype.Th=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.Di=function(t,e,n){var i=this,r=this.fh;this.fh=t.fh,this.Qt=t.Qt;var o=t.Eh.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yb()}};return n(t)-n(e)}(t.type,e.type)||i._h(t.doc,e.doc)})),this.mh(n);var s=e?this.Ah():[],a=0===this.lh.size&&this.te?1:0,u=a!==this.hh;return this.hh=a,0!==o.length||u?{snapshot:new b_(this.query,t.fh,r,o,t.Qt,0===a,u,!1),Rh:s}:{Rh:s}},t.prototype.Ks=function(t){return this.te&&"Offline"===t?(this.te=!1,this.Di({fh:this.fh,Eh:new v_,Qt:this.Qt,Ih:!1},!1)):{Rh:[]}},t.prototype.Ph=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},t.prototype.mh=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uh=e.uh.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uh=e.uh.delete(t)})),this.te=t.te)},t.prototype.Ah=function(){var t=this;if(!this.te)return[];var e=this.lh;this.lh=f_(),this.fh.forEach((function(e){t.Ph(e.key)&&(t.lh=t.lh.add(e.key))}));var n=[];return e.forEach((function(e){t.lh.has(e)||n.push(new zI(e))})),this.lh.forEach((function(t){e.has(t)||n.push(new WI(t))})),n},t.prototype.gh=function(t){this.uh=t.za,this.lh=f_();var e=this.wh(t.documents);return this.Di(e,!0)},t.prototype.yh=function(){return b_.Gt(this.query,this.fh,this.Qt,0===this.hh)},t}(),GI=function(t,e,n){this.query=t,this.targetId=e,this.view=n},YI=function(t){this.key=t,this.Vh=!1},KI=function(){function t(t,e,n,i,r,o){this.Bc=t,this.ph=e,this.bh=n,this.Sh=i,this.currentUser=r,this.Dh=o,this.Ch={},this.Nh=new Rb((function(t){return Cx(t)}),Px),this.xh=new Map,this.Fh=[],this.Oh=new n_(Bb.D),this.kh=new Map,this.Mh=new AI,this.$h={},this.Lh=new Map,this.Bh=TC.Vo(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(t.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),t}();function XI(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:return n=PO(t),(r=n.Nh.get(e))?(n.Sh.Bu(r.targetId),i=r.view.yh(),[3,4]):[3,1];case 1:return[4,YC(n.Bc,bx(e))];case 2:return o=a.sent(),s=n.Sh.Bu(o.targetId),[4,QI(n,e,o.targetId,"current"===s)];case 3:i=a.sent(),n.Uh&&uI(n.ph,o),a.label=4;case 4:return[2,i]}}))}))}function QI(t,e,n,i){return Object(ag.b)(this,void 0,void 0,(function(){var r,o,s,a,u,l;return Object(ag.d)(this,(function(h){switch(h.label){case 0:return t.Kh=function(e,n,i){return function(t,e,n,i){return Object(ag.b)(this,void 0,void 0,(function(){var r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:return(r=e.view.wh(n)).Ih?[4,XC(t.Bc,e.query,!1).then((function(t){return e.view.wh(t.documents,r)}))]:[3,2];case 1:r=a.sent(),a.label=2;case 2:return o=i&&i.zt.get(e.targetId),s=e.view.Di(r,t.Uh,o),[2,(lO(t,e.targetId,s.Rh),s.snapshot)]}}))}))}(t,e,n,i)},[4,XC(t.Bc,e,!0)];case 1:return r=h.sent(),o=new qI(e,r.za),s=o.wh(r.documents),a=w_.Zt(n,i&&"Offline"!==t.onlineState),u=o.Di(s,t.Uh,a),lO(t,n,u.Rh),l=new GI(e,n,o),[2,(t.Nh.set(e,l),t.xh.has(n)?t.xh.get(n).push(e):t.xh.set(n,[e]),u.snapshot)]}}))}))}function $I(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return n=vb(t),i=n.Nh.get(e),(r=n.xh.get(i.targetId)).length>1?[2,(n.xh.set(i.targetId,r.filter((function(t){return!Px(t,e)}))),void n.Nh.delete(e))]:n.Uh?(n.Sh.Uu(i.targetId),n.Sh.Ou(i.targetId)?[3,2]:[4,KC(n.Bc,i.targetId,!1).then((function(){n.Sh.Qu(i.targetId),lI(n.ph,i.targetId),aO(n,i.targetId)})).catch(JC)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return aO(n,i.targetId),[4,KC(n.Bc,i.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function ZI(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:i=CO(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,i=vb(t),r=Mb.now(),o=e.reduce((function(t,e){return t.add(e.key)}),f_());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return i.Ka.qi(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var l=u[a],h=Gw(l,n.get(l.key));null!=h&&s.push(new Qw(l.key,h,ox(h.proto.mapValue),Bw.exists(!0)))}return i.Oi.Wr(t,r,s,e)}))})).then((function(t){var e=t.Ii(n);return{batchId:t.batchId,Ri:e}}))}(i.Bc,e)];case 2:return r=a.sent(),i.Sh.ku(r.batchId),function(t,e,n){var i=t.$h[t.currentUser.ti()];i||(i=new n_(wb)),i=i.ot(e,n),t.$h[t.currentUser.ti()]=i}(i,r.batchId,n),[4,pO(i,r.Ri)];case 3:return a.sent(),[4,wI(i.ph)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=sP(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function JI(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:n=vb(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,qC(n.Bc,e)];case 2:return i=r.sent(),e.zt.forEach((function(t,e){var i=n.kh.get(e);i&&(mb(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?i.Vh=!0:t.ne.size>0?mb(i.Vh):t.se.size>0&&(mb(i.Vh),i.Vh=!1))})),[4,pO(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,JC(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function tO(t,e,n){var i=vb(t);if(i.Uh&&0===n||!i.Uh&&1===n){var r=[];i.Nh.forEach((function(t,n){var i=n.view.Ks(e);i.snapshot&&r.push(i.snapshot)})),function(t,e){var n=vb(t);n.onlineState=e;var i=!1;n.Bs.forEach((function(t,n){for(var r=0,o=n.listeners;r<o.length;r++)o[r].Ks(e)&&(i=!0)})),i&&dP(n)}(i.bh,e),r.length&&i.Ch.Tc(r),i.onlineState=e,i.Uh&&i.Sh.zu(e)}}function eO(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o,s,a,u;return Object(ag.d)(this,(function(l){switch(l.label){case 0:return(i=vb(t)).Sh.Wu(e,"rejected",n),r=i.kh.get(e),(o=r&&r.key)?(s=(s=new n_(Bb.D)).ot(o,new ux(o,Nb.min())),a=f_().add(o),u=new __(Nb.min(),new Map,new o_(wb),s,a),[4,JI(i,u)]):[3,2];case 1:return l.sent(),i.Oh=i.Oh.remove(o),i.kh.delete(e),cO(i),[3,4];case 2:return[4,KC(i.Bc,e,!1).then((function(){return aO(i,e,n)})).catch(JC)];case 3:l.sent(),l.label=4;case 4:return[2]}}))}))}function nO(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:n=vb(t),i=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,WC(n.Bc,e)];case 2:return r=o.sent(),sO(n,i,null),oO(n,i),n.Sh.$u(i,"acknowledged"),[4,pO(n,r)];case 3:return o.sent(),[3,6];case 4:return[4,JC(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function iO(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:i=vb(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=vb(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var i;return n.Oi.Gr(t,e).next((function(e){return mb(null!==e),i=e.keys(),n.Oi.Zr(t,e)})).next((function(){return n.Oi.io(t)})).next((function(){return n.Ka.qi(t,i)}))}))}(i.Bc,e)];case 2:return r=o.sent(),sO(i,e,n),oO(i,e),i.Sh.$u(e,"rejected",n),[4,pO(i,r)];case 3:return o.sent(),[3,6];case 4:return[4,JC(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function rO(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:fI((n=vb(t)).ph)||pb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=vb(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Oi.Yr(t)}))}(n.Bc)];case 2:return-1===(i=a.sent())?[2,void e.resolve()]:((r=n.Lh.get(i)||[]).push(e),n.Lh.set(i,r),[3,4]);case 3:return o=a.sent(),s=sP(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function oO(t,e){(t.Lh.get(e)||[]).forEach((function(t){t.resolve()})),t.Lh.delete(e)}function sO(t,e,n){var i=vb(t),r=i.$h[i.currentUser.ti()];if(r){var o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.$h[i.currentUser.ti()]=r}}function aO(t,e,n){void 0===n&&(n=null),t.Sh.Uu(e);for(var i=0,r=t.xh.get(e);i<r.length;i++){var o=r[i];t.Nh.delete(o),n&&t.Ch.Qh(o,n)}t.xh.delete(e),t.Uh&&t.Mh.hu(e).forEach((function(e){t.Mh.ro(e)||uO(t,e)}))}function uO(t,e){var n=t.Oh.get(e);null!==n&&(lI(t.ph,n),t.Oh=t.Oh.remove(e),t.kh.delete(n),cO(t))}function lO(t,e,n){for(var i=0,r=n;i<r.length;i++){var o=r[i];o instanceof WI?(t.Mh.qo(o.key,e),hO(t,o)):o instanceof zI?(pb("SyncEngine","Document no longer in limbo: "+o.key),t.Mh.Ko(o.key,e),t.Mh.ro(o.key)||uO(t,o.key)):yb()}}function hO(t,e){var n=e.key;t.Oh.get(n)||(pb("SyncEngine","New document in limbo: "+n),t.Fh.push(n),cO(t))}function cO(t){for(;t.Fh.length>0&&t.Oh.size<t.Dh;){var e=t.Fh.shift(),n=t.Bh.next();t.kh.set(n,new YI(e)),t.Oh=t.Oh.ot(e,n),uI(t.ph,new Zb(bx(px(e.path)),n,2,TP.ir))}}function pO(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:return i=vb(t),r=[],o=[],s=[],i.Nh.P()?[3,3]:(i.Nh.forEach((function(t,a){s.push(i.Kh(a,e,n).then((function(t){if(t){i.Uh&&i.Sh.Wu(a.targetId,t.fromCache?"not-current":"current"),r.push(t);var e=SP.Zi(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),i.Ch.Tc(r),[4,function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s,a,u,l;return Object(ag.d)(this,(function(h){switch(h.label){case 0:n=vb(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Gx.forEach(e,(function(e){return Gx.forEach(e.Ji,(function(i){return n.persistence.qr.qo(t,e.targetId,i)})).next((function(){return Gx.forEach(e.Xi,(function(i){return n.persistence.qr.Ko(t,e.targetId,i)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Qx(i=h.sent()))throw i;return pb("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(r=0,o=e;r<o.length;r++)a=(s=o[r]).targetId,s.fromCache||(u=n.La.get(a),l=u.rt(u.nt),n.La=n.La.ot(a,l));return[2]}}))}))}(i.Bc,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function dO(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return(n=vb(t)).currentUser.isEqual(e)?[3,3]:(pb("SyncEngine","User change. New user:",e.ti()),[4,HC(n.Bc,e)]);case 1:return i=r.sent(),n.currentUser=e,function(t,e){t.Lh.forEach((function(t){t.forEach((function(t){t.reject(new lb(ub.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lh.clear()}(n),n.Sh.Gu(e,i.ja,i.Ga),[4,pO(n,i.Wa)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function fO(t,e){var n=vb(t),i=n.kh.get(e);if(i&&i.Vh)return f_().add(i.key);var r=f_(),o=n.xh.get(e);if(!o)return r;for(var s=0,a=o;s<a.length;s++){var u=n.Nh.get(a[s]);r=r.kt(u.view.dh)}return r}function gO(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return[4,XC((n=vb(t)).Bc,e.query,!0)];case 1:return i=o.sent(),r=e.view.gh(i),[2,(n.Uh&&lO(n,e.targetId,r.Rh),r)]}}))}))}function yO(t,e,n,i){return Object(ag.b)(this,void 0,void 0,(function(){var r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=vb(t),i=vb(n.Oi);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return i.zr(t,e).next((function(e){return e?n.Ka.qi(t,e):Gx.resolve(null)}))}))}((r=vb(t)).Bc,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,wI(r.ph)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(sO(r,e,i||null),oO(r,e),function(t,e){vb(vb(t).Oi).no(e)}(r.Bc,e)):yb(),s.label=4;case 4:return[4,pO(r,o)];case 5:return s.sent(),[3,7];case 6:pb("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function mO(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s,a,u;return Object(ag.d)(this,(function(l){switch(l.label){case 0:return PO(n=vb(t)),CO(n),!0!==e||!0===n.qh?[3,3]:(i=n.Sh.xu(),[4,vO(n,i.L())]);case 1:return r=l.sent(),n.qh=!0,[4,TI(n.ph,!0)];case 2:for(l.sent(),o=0,s=r;o<s.length;o++)uI(n.ph,s[o]);return[3,7];case 3:return!1!==e||!1===n.qh?[3,7]:(a=[],u=Promise.resolve(),n.xh.forEach((function(t,e){n.Sh.Ku(e)?a.push(e):u=u.then((function(){return aO(n,e),KC(n.Bc,e,!0)})),lI(n.ph,e)})),[4,u]);case 4:return l.sent(),[4,vO(n,a)];case 5:return l.sent(),function(t){var e=vb(t);e.kh.forEach((function(t,n){lI(e.ph,n)})),e.Mh.lu(),e.kh=new Map,e.Oh=new n_(Bb.D)}(n),n.qh=!1,[4,TI(n.ph,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function vO(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s,a,u,l,h,c,p,d,f;return Object(ag.d)(this,(function(g){switch(g.label){case 0:n=vb(t),i=[],r=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(l=n.xh.get(a=s[o]))&&0!==l.length?[4,YC(n.Bc,bx(l[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,c=l,g.label=3;case 3:return h<c.length?(p=n.Nh.get(c[h]),[4,gO(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&r.push(d.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,QC(n.Bc,a)];case 8:return f=g.sent(),[4,YC(n.Bc,f)];case 9:return u=g.sent(),[4,QI(n,bO(f),a,!1)];case 10:g.sent(),g.label=11;case 11:i.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Ch.Tc(r),i)]}}))}))}function bO(t){return cx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _O(t){var e=vb(t);return vb(vb(e.Bc).persistence).va()}function wO(t,e,n,i){return Object(ag.b)(this,void 0,void 0,(function(){var r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:return(r=vb(t)).qh?(pb("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!r.xh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,$C(r.Bc)];case 3:return o=a.sent(),s=__.Xt(e,"current"===n),[4,pO(r,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,KC(r.Bc,e,!0)];case 6:return a.sent(),aO(r,e,i),[3,8];case 7:yb(),a.label=8;case 8:return[2]}}))}))}function xO(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o,s,a,u,l,h,c;return Object(ag.d)(this,(function(p){switch(p.label){case 0:if(!(i=PO(t)).qh)return[3,10];r=0,o=e,p.label=1;case 1:return r<o.length?i.xh.has(s=o[r])?(pb("SyncEngine","Adding an already active target "+s),[3,5]):[4,QC(i.Bc,s)]:[3,6];case 2:return a=p.sent(),[4,YC(i.Bc,a)];case 3:return u=p.sent(),[4,QI(i,bO(a),u.targetId,!1)];case 4:p.sent(),uI(i.ph,u),p.label=5;case 5:return r++,[3,1];case 6:l=function(t){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return i.xh.has(t)?[4,KC(i.Bc,t,!1).then((function(){lI(i.ph,t),aO(i,t)})).catch(JC)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,c=n,p.label=7;case 7:return h<c.length?[5,l(c[h])]:[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function PO(t){var e=vb(t);return e.ph.Uc.Xc=JI.bind(null,e),e.ph.Uc.qe=fO.bind(null,e),e.ph.Uc.Jc=eO.bind(null,e),e.Ch.Tc=cP.bind(null,e.bh),e.Ch.Qh=pP.bind(null,e.bh),e}function CO(t){var e=vb(t);return e.ph.Uc.Zc=nO.bind(null,e),e.ph.Uc.tu=iO.bind(null,e),e}var IO=function(){function t(){}return t.prototype.Qa=function(t){this.Wh=t},t.prototype.Qi=function(t,e,n,i){var r=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.W())}(e)||n.isEqual(Nb.min())?this.jh(t,e):this.Wh.qi(t,i).next((function(o){var s=r.Gh(e,o);return(dx(e)||fx(e))&&r.Ih(e.an,s,i,n)?r.jh(t,e):(cb()<=ug.a.DEBUG&&pb("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ix(e)),r.Wh.Qi(t,e,n).next((function(t){return s.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Gh=function(t,e){var n=new o_(Sx(t));return e.forEach((function(e,i){i instanceof ax&&Ox(t,i)&&(n=n.add(i))})),n},t.prototype.Ih=function(t,e,n,i){if(n.size!==e.size)return!0;var r="F"===t?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.u(i)>0)},t.prototype.jh=function(t,e){return cb()<=ug.a.DEBUG&&pb("IndexFreeQueryEngine","Using full collection scan to execute query:",Ix(e)),this.Wh.Qi(t,e,Nb.min())},t}(),OO=function(){function t(t,e){this.ki=t,this.qr=e,this.Oi=[],this.zh=1,this.Hh=new o_(DI.iu)}return t.prototype.Qr=function(t){return Gx.resolve(0===this.Oi.length)},t.prototype.Wr=function(t,e,n,i){var r=this.zh;this.zh++;var o=new wP(r,e,n,i);this.Oi.push(o);for(var s=0,a=i;s<a.length;s++){var u=a[s];this.Hh=this.Hh.add(new DI(u.key,r)),this.ki.jr(t,u.key.path.F())}return Gx.resolve(o)},t.prototype.Gr=function(t,e){return Gx.resolve(this.Yh(e))},t.prototype.Hr=function(t,e){var n=this.Jh(e+1),i=n<0?0:n;return Gx.resolve(this.Oi.length>i?this.Oi[i]:null)},t.prototype.Yr=function(){return Gx.resolve(0===this.Oi.length?-1:this.zh-1)},t.prototype.Jr=function(t){return Gx.resolve(this.Oi.slice())},t.prototype.$i=function(t,e){var n=this,i=new DI(e,0),r=new DI(e,Number.POSITIVE_INFINITY),o=[];return this.Hh.xt([i,r],(function(t){var e=n.Yh(t.fu);o.push(e)})),Gx.resolve(o)},t.prototype.Ki=function(t,e){var n=this,i=new o_(wb);return e.forEach((function(t){var e=new DI(t,0),r=new DI(t,Number.POSITIVE_INFINITY);n.Hh.xt([e,r],(function(t){i=i.add(t.fu)}))})),Gx.resolve(this.Xh(i))},t.prototype.Hi=function(t,e){var n=e.path,i=n.length+1,r=n;Bb.X(r)||(r=r.child(""));var o=new DI(new Bb(r),0),s=new o_(wb);return this.Hh.Ft((function(t){var e=t.key.path;return!!n.M(e)&&(e.length===i&&(s=s.add(t.fu)),!0)}),o),Gx.resolve(this.Xh(s))},t.prototype.Xh=function(t){var e=this,n=[];return t.forEach((function(t){var i=e.Yh(t);null!==i&&n.push(i)})),n},t.prototype.Zr=function(t,e){var n=this;mb(0===this.Zh(e.batchId,"removed")),this.Oi.shift();var i=this.Hh;return Gx.forEach(e.mutations,(function(r){var o=new DI(r.key,e.batchId);return i=i.delete(o),n.qr.so(t,r.key)})).next((function(){n.Hh=i}))},t.prototype.no=function(t){},t.prototype.ro=function(t,e){var n=new DI(e,0),i=this.Hh.Ot(n);return Gx.resolve(e.isEqual(i&&i.key))},t.prototype.io=function(t){return Gx.resolve()},t.prototype.Zh=function(t,e){return this.Jh(t)},t.prototype.Jh=function(t){return 0===this.Oi.length?0:t-this.Oi[0].batchId},t.prototype.Yh=function(t){var e=this.Jh(t);return e<0||e>=this.Oi.length?null:this.Oi[e]},t}(),SO=function(){function t(t,e){this.ki=t,this.tl=e,this.docs=new n_(Bb.D),this.size=0}return t.prototype.yi=function(t,e,n){var i=e.key,r=this.docs.get(i),o=r?r.size:0,s=this.tl(e);return this.docs=this.docs.ot(i,{ho:e,size:s,readTime:n}),this.size+=s-o,this.ki.jr(t,i.path.F())},t.prototype.pi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.bi=function(t,e){var n=this.docs.get(e);return Gx.resolve(n?n.ho:null)},t.prototype.getEntries=function(t,e){var n=this,i=l_();return e.forEach((function(t){var e=n.docs.get(t);i=i.ot(t,e?e.ho:null)})),Gx.resolve(i)},t.prototype.Qi=function(t,e,n){for(var i=c_(),r=new Bb(e.path.child("")),o=this.docs.ft(r);o.At();){var s=o.It(),a=s.value,u=a.ho,l=a.readTime;if(!e.path.M(s.key.path))break;l.u(n)<=0||u instanceof ax&&Ox(e,u)&&(i=i.ot(u.key,u))}return Gx.resolve(i)},t.prototype.el=function(t,e){return Gx.forEach(this.docs,(function(t){return e(t)}))},t.prototype.wo=function(t){return new TO(this)},t.prototype.To=function(t){return Gx.resolve(this.size)},t}(),TO=function(t){function e(e){var n=this;return(n=t.call(this)||this).Io=e,n}return Object(ag.c)(e,t),e.prototype.Di=function(t){var e=this,n=[];return this.Ri.forEach((function(i,r){r?n.push(e.Io.yi(t,r,e.readTime)):e.Io.pi(i)})),Gx.On(n)},e.prototype.vi=function(t,e){return this.Io.bi(t,e)},e.prototype.Si=function(t,e){return this.Io.getEntries(t,e)},e}(PP),EO=function(){function t(t){this.persistence=t,this.nl=new Rb((function(t){return Yb(t)}),Kb),this.lastRemoteSnapshotVersion=Nb.min(),this.highestTargetId=0,this.sl=0,this.il=new AI,this.targetCount=0,this.rl=TC.yo()}return t.prototype.Ce=function(t,e){return this.nl.forEach((function(t,n){return e(n)})),Gx.resolve()},t.prototype.So=function(t){return Gx.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Do=function(t){return Gx.resolve(this.sl)},t.prototype.po=function(t){return this.highestTargetId=this.rl.next(),Gx.resolve(this.highestTargetId)},t.prototype.Co=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.sl&&(this.sl=e),Gx.resolve()},t.prototype.xo=function(t){this.nl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.rl=new TC(e),this.highestTargetId=e),t.sequenceNumber>this.sl&&(this.sl=t.sequenceNumber)},t.prototype.No=function(t,e){return this.xo(e),this.targetCount+=1,Gx.resolve()},t.prototype.Oo=function(t,e){return this.xo(e),Gx.resolve()},t.prototype.ko=function(t,e){return this.nl.delete(e.target),this.il.hu(e.targetId),this.targetCount-=1,Gx.resolve()},t.prototype.Or=function(t,e,n){var i=this,r=0,o=[];return this.nl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i.nl.delete(s),o.push(i.Mo(t,a.targetId)),r++)})),Gx.On(o).next((function(){return r}))},t.prototype.$o=function(t){return Gx.resolve(this.targetCount)},t.prototype.Lo=function(t,e){var n=this.nl.get(e)||null;return Gx.resolve(n)},t.prototype.Bo=function(t,e,n){return this.il.au(e,n),Gx.resolve()},t.prototype.Uo=function(t,e,n){this.il.uu(e,n);var i=this.persistence.qr,r=[];return i&&e.forEach((function(e){r.push(i.so(t,e))})),Gx.On(r)},t.prototype.Mo=function(t,e){return this.il.hu(e),Gx.resolve()},t.prototype.Qo=function(t,e){var n=this.il._u(e);return Gx.resolve(n)},t.prototype.ro=function(t,e){return Gx.resolve(this.il.ro(e))},t}(),kO=function(){function t(t){var e=this;this.ol={},this.zo=new TP(0),this.Ho=!1,this.Ho=!0,this.qr=t(this),this.sa=new EO(this),this.ki=new aC,this.Fi=function(t,n){return new SO(t,(function(t){return e.qr.al(t)}))}(this.ki)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ga=function(){return this.Ho=!1,Promise.resolve()},Object.defineProperty(t.prototype,"br",{get:function(){return this.Ho},enumerable:!1,configurable:!0}),t.prototype.ha=function(){},t.prototype.la=function(){},t.prototype.Na=function(){return this.ki},t.prototype.Sa=function(t){var e=this.ol[t.ti()];return e||(e=new OO(this.ki,this.qr),this.ol[t.ti()]=e),e},t.prototype.Da=function(){return this.sa},t.prototype.Ca=function(){return this.Fi},t.prototype.runTransaction=function(t,e,n){var i=this;pb("MemoryPersistence","Starting transaction:",t);var r=new AO(this.zo.next());return this.qr.cl(),n(r).next((function(t){return i.qr.ul(r).next((function(){return t}))})).xn().then((function(t){return r.xi(),t}))},t.prototype.hl=function(t,e){return Gx.kn(Object.values(this.ol).map((function(n){return function(){return n.ro(t,e)}})))},t}(),AO=function(t){function e(e){var n=this;return(n=t.call(this)||this).Wo=e,n}return Object(ag.c)(e,t),e}(IP),DO=function(){function t(t){this.persistence=t,this.ll=new AI,this._l=null}return t.fl=function(e){return new t(e)},Object.defineProperty(t.prototype,"dl",{get:function(){if(this._l)return this._l;throw yb()},enumerable:!1,configurable:!0}),t.prototype.qo=function(t,e,n){return this.ll.qo(n,e),this.dl.delete(n.toString()),Gx.resolve()},t.prototype.Ko=function(t,e,n){return this.ll.Ko(n,e),this.dl.add(n.toString()),Gx.resolve()},t.prototype.so=function(t,e){return this.dl.add(e.toString()),Gx.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.ll.hu(e.targetId).forEach((function(t){return n.dl.add(t.toString())}));var i=this.persistence.Da();return i.Qo(t,e.targetId).next((function(t){t.forEach((function(t){return n.dl.add(t.toString())}))})).next((function(){return i.ko(t,e)}))},t.prototype.cl=function(){this._l=new Set},t.prototype.ul=function(t){var e=this,n=this.persistence.Ca().wo();return Gx.forEach(this.dl,(function(i){var r=Bb.H(i);return e.wl(t,r).next((function(t){t||n.pi(r)}))})).next((function(){return e._l=null,n.apply(t)}))},t.prototype.Ma=function(t,e){var n=this;return this.wl(t,e).next((function(t){t?n.dl.delete(e.toString()):n.dl.add(e.toString())}))},t.prototype.al=function(t){return 0},t.prototype.wl=function(t,e){var n=this;return Gx.kn([function(){return Gx.resolve(n.ll.ro(e))},function(){return n.persistence.Da().ro(t,e)},function(){return n.persistence.hl(t,e)}])},t}(),jO=function(){function t(t){this.El=t.El,this.Tl=t.Tl}return t.prototype.wc=function(t){this.Il=t},t.prototype.hc=function(t){this.ml=t},t.prototype.onMessage=function(t){this.Al=t},t.prototype.close=function(){this.Tl()},t.prototype.send=function(t){this.El(t)},t.prototype.Rl=function(){this.Il()},t.prototype.Pl=function(t){this.ml(t)},t.prototype.gl=function(t){this.Al(t)},t}(),RO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},MO=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.T=e.T,n}return Object(ag.c)(e,t),e.prototype.Sl=function(t,e,n,i){return new Promise((function(r,o){var s=new sb;s.listenOnce(rb.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case ib.NO_ERROR:var e=s.getResponseJson();pb("Connection","XHR received:",JSON.stringify(e)),r(e);break;case ib.TIMEOUT:pb("Connection",'RPC "'+t+'" timed out'),o(new lb(ub.DEADLINE_EXCEEDED,"Request time out"));break;case ib.HTTP_ERROR:var n=s.getStatus();if(pb("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var i=s.getResponseJson().error;if(i&&i.status&&i.message){var a=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(ub).indexOf(e)>=0?e:ub.UNKNOWN}(i.status);o(new lb(a,i.message))}else o(new lb(ub.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new lb(ub.UNAVAILABLE,"Connection failed."));break;default:yb()}}finally{pb("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(i);s.send(e,"POST",a,n,15)}))},e.prototype.Ec=function(t,e){var n=[this.Vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Zv,r={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this._.projectId+"/databases/"+this._.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.T};this.vl(r.initMessageHeaders,e),Object(lg.x)()||Object(lg.A)()||Object(lg.t)()||Object(lg.v)()||Object(lg.B)()||Object(lg.s)()||(r.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");pb("Connection","Creating WebChannel: "+o,r);var s=i.createWebChannel(o,r),a=!1,u=!1,l=new jO({El:function(t){u?pb("Connection","Not sending because WebChannel is closed:",t):(a||(pb("Connection","Opening WebChannel transport."),s.open(),a=!0),pb("Connection","WebChannel sending:",t),s.send(t))},Tl:function(){return s.close()}}),h=function(t,e){s.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(ob.EventType.OPEN,(function(){u||pb("Connection","WebChannel transport opened.")})),h(ob.EventType.CLOSE,(function(){u||(u=!0,pb("Connection","WebChannel transport closed"),l.Pl())})),h(ob.EventType.ERROR,(function(t){u||(u=!0,fb("Connection","WebChannel transport errored:",t),l.Pl(new lb(ub.UNAVAILABLE,"The operation could not be completed")))})),h(ob.EventType.MESSAGE,(function(t){var e;if(!u){var n=t.data[0];mb(!!n);var i=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(i){pb("Connection","WebChannel received error:",i);var r=i.status,o=function(t){var e=Qb[t];if(void 0!==e)return e_(e)}(r),a=i.message;void 0===o&&(o=ub.INTERNAL,a="Unknown error status: "+r+" with message "+i.message),u=!0,l.Pl(new lb(o,a)),s.close()}else pb("Connection","WebChannel received:",n),l.gl(n)}})),setTimeout((function(){l.Rl()}),0),l},e}(function(){function t(t){this.yl=t,this._=t._,this.Vl=(t.ssl?"https":"http")+"://"+t.host,this.pl="projects/"+this._.projectId+"/databases/"+this._.database+"/documents"}return t.prototype.Sc=function(t,e,n,i){var r=this.bl(t,e);pb("RestConnection","Sending: ",r,n);var o={};return this.vl(o,i),this.Sl(t,r,o,n).then((function(t){return pb("RestConnection","Received: ",t),t}),(function(e){throw fb("RestConnection",t+" failed with error: ",e,"url: ",r,"request:",n),e}))},t.prototype.Dc=function(t,e,n,i){return this.Sc(t,e,n,i)},t.prototype.vl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.1",t["Content-Type"]="text/plain",e)for(var n in e.si)e.si.hasOwnProperty(n)&&(t[n]=e.si[n])},t.prototype.bl=function(t,e){return this.Vl+"/v1/"+e+":"+RO[t]},t}()),NO=function(){function t(){var t=this;this.Dl=function(){return t.Cl()},this.Nl=function(){return t.xl()},this.Fl=[],this.Ol()}return t.prototype.zc=function(t){this.Fl.push(t)},t.prototype.ga=function(){window.removeEventListener("online",this.Dl),window.removeEventListener("offline",this.Nl)},t.prototype.Ol=function(){window.addEventListener("online",this.Dl),window.addEventListener("offline",this.Nl)},t.prototype.Cl=function(){pb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Fl;t<e.length;t++)(0,e[t])(0)},t.prototype.xl=function(){pb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Fl;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),FO=function(){function t(){}return t.prototype.zc=function(t){},t.prototype.ga=function(){},t}();function VO(t){return new X_(t,!0)}var LO=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return this.Sh=this.kl(t),this.persistence=this.Ml(t),[4,this.persistence.start()];case 1:return e.sent(),this.$l=this.Ll(t),this.Bc=this.Bl(t),[2]}}))}))},t.prototype.Ll=function(t){return null},t.prototype.Bl=function(t){return e=this.persistence,n=new IO,new BC(e,n,t.ql);var e,n},t.prototype.Ml=function(t){return new kO(DO.fl)},t.prototype.kl=function(t){return new HI},t.prototype.terminate=function(){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){switch(t.label){case 0:return this.$l&&this.$l.stop(),[4,this.Sh.ga()];case 1:return t.sent(),[4,this.persistence.ga()];case 2:return t.sent(),[2]}}))}))},t}(),UO=function(t){function e(e,n,i){var r=this;return(r=t.call(this)||this).Ul=e,r.cacheSizeBytes=n,r.forceOwnership=i,r.synchronizeTabs=!1,r}return Object(ag.c)(e,t),e.prototype.initialize=function(e){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,ZC(this.Bc)];case 2:return n.sent(),[4,this.Ul.initialize(this,e)];case 3:return n.sent(),[4,CO(this.Ul.mu)];case 4:return n.sent(),[4,wI(this.Ul.ph)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ll=function(t){return new jP(this.persistence.qr.gr,t.cs)},e.prototype.Ml=function(t){var e=UC(t.yl._,t.yl.persistenceKey),n=void 0!==this.cacheSizeBytes?DP.Ir(this.cacheSizeBytes):DP.Rr,i=VO(t.yl._);return new MC(this.synchronizeTabs,e,t.clientId,n,t.cs,nP(),iP(),i,this.Sh,!!this.forceOwnership)},e.prototype.kl=function(t){return new HI},e}(LO),BO=function(t){function e(e,n){var i=this;return(i=t.call(this,e,n,!1)||this).Ul=e,i.cacheSizeBytes=n,i.synchronizeTabs=!0,i}return Object(ag.c)(e,t),e.prototype.initialize=function(e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i=this;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),n=this.Ul.mu,this.Sh instanceof BI?(this.Sh.mu={sh:yO.bind(null,n),ih:wO.bind(null,n),rh:xO.bind(null,n),va:_O.bind(null,n)},[4,this.Sh.start()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[4,this.persistence.ua((function(t){return Object(ag.b)(i,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return[4,mO(this.Ul.mu,t)];case 1:return e.sent(),this.$l&&(t&&!this.$l.br?this.$l.start(this.Bc):t||this.$l.stop()),[2]}}))}))}))];case 4:return r.sent(),[2]}}))}))},e.prototype.kl=function(t){var e=nP();if(!BI.Ln(e))throw new lb(ub.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=UC(t.yl._,t.yl.persistenceKey);return new BI(e,t.cs,n,t.clientId,t.ql)},e}(UO),HO=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n=this;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return this.Bc?[3,2]:(this.Bc=t.Bc,this.Sh=t.Sh,this.qc=this.Kl(e),this.ph=this.Ql(e),this.bh=this.Wl(e),this.mu=this.jl(e,!t.synchronizeTabs),this.Sh.Cc=function(t){return tO(n.mu,t,1)},this.ph.Uc.Gl=dO.bind(null,this.mu),[4,TI(this.ph,this.mu.Uh)]);case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},t.prototype.Wl=function(t){return new uP},t.prototype.Kl=function(t){var e=VO(t.yl._),n=new MO(t.yl);return function(t,e,n){return new iI(t,e,n)}(t.credentials,n,e)},t.prototype.Ql=function(t){var e,n,i,r,o,s=this;return e=this.Bc,n=this.qc,i=t.cs,r=function(t){return tO(s.mu,t,0)},o=NO.Ln()?new NO:new FO,new oI(e,n,i,r,o)},t.prototype.jl=function(t,e){return function(t,e,n,i,r,o,s){var a=new KI(t,e,n,i,r,o);return s&&(a.qh=!0),a}(this.Bc,this.ph,this.bh,this.Sh,t.ql,t.Dh,e)},t.prototype.terminate=function(){return function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return e=vb(t),pb("RemoteStore","RemoteStore shutting down."),e.Wc.add(5),[4,aI(e)];case 1:return n.sent(),e.Gc.ga(),e.Hc.set("Unknown"),[2]}}))}))}(this.ph)},t}(),WO=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.zl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.zl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Hl=function(){this.muted=!0},t.prototype.zl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function zO(t,e,n){if(!n)throw new lb(ub.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function qO(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new lb(ub.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function GO(t,e,n,i){if(!0===e&&!0===i)throw new lb(ub.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function YO(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":yb()}function KO(t,e){if(e<=0)throw new lb(ub.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var XO=function(t){for(var e=0;e<t.length;++e)if(0===t[e].length)throw new lb(ub.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Yl=new Ub(t)},QO=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return Object(ag.c)(e,t),e.documentId=function(){return new e(Ub.j().B())},e.prototype.isEqual=function(t){return t instanceof e&&this.Yl.isEqual(t.Yl)},e}(XO),$O=new RegExp("[~\\*/\\[\\]]"),ZO=function(t){this.Jl=t},JO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ag.c)(e,t),e.prototype.Xl=function(t){if(2!==t.Zl)throw t.t_(1===t.Zl?this.Jl+"() can only appear at the top level of your update data":this.Jl+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ZO);function tS(t,e,n){return new pS({Zl:3,e_:e.settings.e_,methodName:t.Jl,n_:n},e._,e.serializer,e.ignoreUndefinedProperties)}var eS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ag.c)(e,t),e.prototype.Xl=function(t){return new Lw(t.path,new kw)},e.prototype.isEqual=function(t){return t instanceof e},e}(ZO),nS=function(t){function e(e,n){var i=this;return(i=t.call(this,e)||this).s_=n,i}return Object(ag.c)(e,t),e.prototype.Xl=function(t){var e=tS(this,t,!0),n=this.s_.map((function(t){return vS(t,e)})),i=new Aw(n);return new Lw(t.path,i)},e.prototype.isEqual=function(t){return this===t},e}(ZO),iS=function(t){function e(e,n){var i=this;return(i=t.call(this,e)||this).s_=n,i}return Object(ag.c)(e,t),e.prototype.Xl=function(t){var e=tS(this,t,!0),n=this.s_.map((function(t){return vS(t,e)})),i=new jw(n);return new Lw(t.path,i)},e.prototype.isEqual=function(t){return this===t},e}(ZO),rS=function(t){function e(e,n){var i=this;return(i=t.call(this,e)||this).i_=n,i}return Object(ag.c)(e,t),e.prototype.Xl=function(t){var e=new Mw(t.serializer,Z_(t.serializer,this.i_));return new Lw(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ZO),oS=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new lb(ub.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new lb(ub.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.r_=t,this.o_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.r_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.o_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.r_===t.r_&&this.o_===t.o_},t.prototype.toJSON=function(){return{latitude:this.r_,longitude:this.o_}},t.prototype.g=function(t){return wb(this.r_,t.r_)||wb(this.o_,t.o_)},t}(),sS=function(t){this.a_=t},aS=/^__.*__$/,uS=function(t,e,n){this.c_=t,this.u_=e,this.h_=n},lS=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.l_=function(t,e){var n=[];return n.push(null!==this.Qe?new Qw(t,this.data,this.Qe,e):new Xw(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Zw(t,this.fieldTransforms)),n},t}(),hS=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.l_=function(t,e){var n=[new Qw(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new Zw(t,this.fieldTransforms)),n},t}();function cS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yb()}}var pS=function(){function t(t,e,n,i,r,o){this.settings=t,this._=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.__(),this.fieldTransforms=r||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Zl",{get:function(){return this.settings.Zl},enumerable:!1,configurable:!0}),t.prototype.f_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this._,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.d_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.f_({path:n,n_:!1});return i.w_(t),i},t.prototype.E_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.f_({path:n,n_:!1});return i.__(),i},t.prototype.T_=function(t){return this.f_({path:void 0,n_:!0})},t.prototype.t_=function(t){return CS(t,this.settings.methodName,this.settings.I_||!1,this.path,this.settings.e_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.M(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.M(e.field)}))},t.prototype.__=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.w_(this.path.get(t))},t.prototype.w_=function(t){if(0===t.length)throw this.t_("Document fields must not be empty");if(cS(this.Zl)&&aS.test(t))throw this.t_('Document fields cannot begin and end with "__"')},t}(),dS=function(){function t(t,e,n){this._=t,this.ignoreUndefinedProperties=e,this.serializer=n||VO(t)}return t.prototype.m_=function(t,e,n,i){return void 0===i&&(i=!1),new pS({Zl:t,methodName:e,e_:n,path:Ub.U(),n_:!1,I_:i},this._,this.serializer,this.ignoreUndefinedProperties)},t}();function fS(t,e,n,i,r,o){void 0===o&&(o={});var s=t.m_(o.merge||o.mergeFields?2:0,e,n,r);wS("Data must be an object, but it was:",s,i);var a,u,l=bS(i,s);if(o.merge)a=new Vw(s.Qe),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],c=0,p=o.mergeFields;c<p.length;c++){var d=p[c],f=void 0;if(d instanceof XO)f=d.Yl;else{if("string"!=typeof d)throw yb();f=PS(e,d,n)}if(!s.contains(f))throw new lb(ub.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");IS(h,f)||h.push(f)}a=new Vw(h),u=s.fieldTransforms.filter((function(t){return a.Ye(t.field)}))}else a=null,u=s.fieldTransforms;return new lS(new ix(l),a,u)}function gS(t,e,n,i){var r=t.m_(1,e,n);wS("Data must be an object, but it was:",r,i);var o=[],s=new rx;Db(i,(function(t,i){var a=PS(e,t,n),u=r.E_(a);if(i instanceof JO||i instanceof sS&&i.a_ instanceof JO)o.push(a);else{var l=vS(i,u);null!=l&&(o.push(a),s.set(a,l))}}));var a=new Vw(o);return new hS(s.Xe(),a,r.fieldTransforms)}function yS(t,e,n,i,r,o){var s=t.m_(1,e,n),a=[xS(e,i,n)],u=[r];if(o.length%2!=0)throw new lb(ub.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<o.length;l+=2)a.push(xS(e,o[l])),u.push(o[l+1]);for(var h=[],c=new rx,p=a.length-1;p>=0;--p)if(!IS(h,a[p])){var d=a[p],f=u[p],g=s.E_(d);if(f instanceof JO||f instanceof sS&&f.a_ instanceof JO)h.push(d);else{var y=vS(f,g);null!=y&&(h.push(d),c.set(d,y))}}var m=new Vw(h);return new hS(c.Xe(),m,s.fieldTransforms)}function mS(t,e,n,i){return void 0===i&&(i=!1),vS(n,t.m_(i?4:3,e))}function vS(t,e){if(t instanceof sS&&(t=t.a_),_S(t))return wS("Unsupported field value:",e,t),bS(t,e);if(t instanceof ZO)return function(t,e){if(!cS(e.Zl))throw e.t_(t.Jl+"() can only be used with update() and set()");if(!e.path)throw e.t_(t.Jl+"() is not currently supported inside arrays");var n=t.Xl(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.n_&&4!==e.Zl)throw e.t_("Nested arrays are not supported");return function(t,e){for(var n=[],i=0,r=0,o=t;r<o.length;r++){var s=vS(o[r],e.T_(i));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Z_(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Mb.fromDate(t);return{timestampValue:J_(e.serializer,n)}}if(t instanceof Mb){var i=new Mb(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:J_(e.serializer,i)}}if(t instanceof oS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ib)return{bytesValue:tw(e.serializer,t.l)};if(t instanceof uS){var r=e._,o=t.c_;if(!o.isEqual(r))throw e.t_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+r.projectId+"/"+r.database);return{referenceValue:iw(t.c_||e._,t.u_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.t_("Unsupported field value: "+YO(t))}(t,e)}function bS(t,e){var n={};return jb(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):Db(t,(function(t,i){var r=vS(i,e.d_(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function _S(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Mb||t instanceof oS||t instanceof Ib||t instanceof uS||t instanceof ZO)}function wS(t,e,n){if(!_S(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var i=YO(n);throw e.t_("an object"===i?t+" a custom object":t+" "+i)}}function xS(t,e,n){if(e instanceof XO)return e.Yl;if("string"==typeof e)return PS(t,e);throw CS("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function PS(t,e,n){try{return function(t){if(t.search($O)>=0)throw new lb(ub.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(QO.bind.apply(QO,Object(ag.g)([void 0],t.split("."))))}catch(e){throw new lb(ub.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Yl}catch(e){throw CS((i=e)instanceof Error?i.message:i.toString(),t,!1,void 0,n)}var i}function CS(t,e,n,i,r){var o=i&&!i.P(),s=void 0!==r,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+i),s&&(u+=" in document "+r),u+=")"),new lb(ub.INVALID_ARGUMENT,(a+=". ")+t+u)}function IS(t,e){return t.some((function(t){return t.isEqual(e)}))}var OS=function(){function t(t){this.qc=t,this.A_=new Map,this.mutations=[],this.R_=!1,this.P_=null,this.g_=new Set}return t.prototype.y_=function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ag.d)(this,(function(i){switch(i.label){case 0:if(this.V_(),this.mutations.length>0)throw new lb(ub.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s,a;return Object(ag.d)(this,(function(u){switch(u.label){case 0:return n=vb(t),i=lw(n.serializer)+"/documents",r={documents:e.map((function(t){return ow(n.serializer,t)}))},[4,n.Dc("BatchGetDocuments",i,r)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){mb(!!e.found);var n=sw(t,e.found.name),i=nw(e.found.updateTime),r=new ix({mapValue:{fields:e.found.fields}});return new ax(n,i,r,{})}(t,e):"missing"in e?function(t,e){mb(!!e.missing),mb(!!e.readTime);var n=sw(t,e.missing),i=nw(e.readTime);return new ux(n,i)}(t,e):yb()}(n.serializer,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());mb(!!e),a.push(e)})),a)]}}))}))}(this.qc,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof ux||t instanceof ax?n.p_(t):yb()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.l_(t,this.Ge(t))),this.g_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.l_(t,this.b_(t)))}catch(t){this.P_=t}this.g_.add(t.toString())},t.prototype.delete=function(t){this.write([new ex(t,this.Ge(t))]),this.g_.add(t.toString())},t.prototype.commit=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t,e=this;return Object(ag.d)(this,(function(n){switch(n.label){case 0:if(this.V_(),this.P_)throw this.P_;return t=this.A_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var i=Bb.H(n);e.mutations.push(new nx(i,e.Ge(i)))})),[4,function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return n=vb(t),i=lw(n.serializer)+"/documents",r={writes:e.map((function(t){return pw(n.serializer,t)}))},[4,n.Sc("Commit",i,r)];case 1:return o.sent(),[2]}}))}))}(this.qc,this.mutations)];case 1:return n.sent(),this.R_=!0,[2]}}))}))},t.prototype.p_=function(t){var e;if(t instanceof ax)e=t.version;else{if(!(t instanceof ux))throw yb();e=Nb.min()}var n=this.A_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new lb(ub.ABORTED,"Document version changed between two reads.")}else this.A_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.A_.get(t.toString());return!this.g_.has(t.toString())&&e?Bw.updateTime(e):Bw.ze()},t.prototype.b_=function(t){var e=this.A_.get(t.toString());if(!this.g_.has(t.toString())&&e){if(e.isEqual(Nb.min()))throw new lb(ub.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bw.updateTime(e)}return Bw.exists(!0)},t.prototype.write=function(t){this.V_(),this.mutations=this.mutations.concat(t)},t.prototype.V_=function(){},t}(),SS=function(){function t(t,e,n,i){this.cs=t,this.qc=e,this.updateFunction=n,this.ls=i,this.v_=5,this.ys=new qx(this.cs,"transaction_retry")}return t.prototype.run=function(){this.S_()},t.prototype.S_=function(){var t=this;this.ys.Pn((function(){return Object(ag.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(ag.d)(this,(function(i){return t=new OS(this.qc),(e=this.D_(t))&&e.then((function(e){n.cs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.C_(t)}))}))})).catch((function(t){n.C_(t)})),[2]}))}))}))},t.prototype.D_=function(t){try{var e=this.updateFunction(t);return!Hb(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.C_=function(t){var e=this;this.v_>0&&this.N_(t)?(this.v_-=1,this.cs.ws((function(){return e.S_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.N_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!t_(e)}return!1},t}(),TS=function(){function t(t,e,n){var i=this;this.credentials=t,this.cs=e,this.yl=n,this.user=gP.UNAUTHENTICATED,this.clientId=_b.t(),this.x_=function(){},this.ui=new zx,this.credentials.oi((function(t){pb("FirestoreClient","Received user=",t.uid),i.user.isEqual(t)||(i.user=t,i.x_(t)),i.ui.resolve()}))}return t.prototype.getConfiguration=function(){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){switch(t.label){case 0:return[4,this.ui.promise];case 1:return[2,(t.sent(),{cs:this.cs,yl:this.yl,clientId:this.clientId,credentials:this.credentials,ql:this.user,Dh:100})]}}))}))},t.prototype.F_=function(t){var e=this;this.x_=t,this.ui.promise.then((function(){return e.x_(e.user)}))},t.prototype.O_=function(){if(this.cs.ps)throw new lb(ub.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.cs.Ds();var e=new zx;return this.cs.bs((function(){return Object(ag.b)(t,void 0,void 0,(function(){var t,n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),this.k_?[4,this.k_.terminate()]:[3,2];case 1:i.sent(),i.label=2;case 2:return this.M_?[4,this.M_.terminate()]:[3,4];case 3:i.sent(),i.label=4;case 4:return this.credentials.ai(),e.resolve(),[3,6];case 5:return t=i.sent(),n=sP(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function ES(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i=this;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return t.cs.Fs(),pb("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=r.sent(),[4,e.initialize(n)];case 2:return r.sent(),t.F_((function(n){return t.cs.Cs((function(){return Object(ag.b)(i,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){switch(t.label){case 0:return[4,HC(e.Bc,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.ha((function(){return t.terminate()})),t.M_=e,[2]}}))}))}function kS(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return t.cs.Fs(),[4,AS(t)];case 1:return n=r.sent(),pb("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=r.sent(),[4,e.initialize(n,i)];case 3:return r.sent(),t.F_((function(n){return t.cs.Cs((function(){return function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return(n=vb(t)).cs.Fs(),pb("RemoteStore","RemoteStore received new credentials"),i=fI(n),n.Wc.add(3),[4,aI(n)];case 1:return r.sent(),i&&n.Hc.set("Unknown"),[4,n.Uc.Gl(e)];case 2:return r.sent(),n.Wc.delete(3),[4,sI(n)];case 3:return r.sent(),[2]}}))}))}(e.ph,n)}))})),t.k_=e,[2]}}))}))}function AS(t){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return t.M_?[3,2]:(pb("FirestoreClient","Using default OfflineComponentProvider"),[4,ES(t,new LO)]);case 1:e.sent(),e.label=2;case 2:return[2,t.M_]}}))}))}function DS(t){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return t.k_?[3,2]:(pb("FirestoreClient","Using default OnlineComponentProvider"),[4,kS(t,new HO)]);case 1:e.sent(),e.label=2;case 2:return[2,t.k_]}}))}))}function jS(t){return AS(t).then((function(t){return t.persistence}))}function RS(t){return AS(t).then((function(t){return t.Bc}))}function MS(t){return DS(t).then((function(t){return t.ph}))}function NS(t){return DS(t).then((function(t){return t.mu}))}function FS(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return[4,DS(t)];case 1:return e=i.sent(),[2,((n=e.bh).Us=XI.bind(null,e.mu),n.Ws=$I.bind(null,e.mu),n)]}}))}))}function VS(t,e,n,i){var r=this,o=new WO(i),s=new fP(e,o,n);return t.cs.ws((function(){return Object(ag.b)(r,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return e=lP,[4,FS(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Hl(),t.cs.ws((function(){return Object(ag.b)(r,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return e=hP,[4,FS(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}function LS(t,e){var n=this,i=new zx;return t.cs.ws((function(){return Object(ag.b)(n,void 0,void 0,(function(){var n;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return n=ZI,[4,NS(t)];case 1:return[2,n.apply(void 0,[r.sent(),e,i])]}}))}))})),i.promise}function US(t,e){var n=this,i=new WO(e);return t.cs.ws((function(){return Object(ag.b)(n,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){vb(t).qs.add(e),e.next()},[4,FS(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))})),function(){i.Hl(),t.cs.ws((function(){return Object(ag.b)(n,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){vb(t).qs.delete(e)},[4,FS(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))}))}}function BS(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,i=0,r=["next","error","complete"];i<r.length;i++){var o=r[i];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var HS=function(){function t(t,e,n,i){this._=t,this.L_=e,this.B_=n,this.q_=i}return t.prototype.U_=function(t){switch(D_(t)){case 0:return null;case 1:return t.booleanValue;case 2:return L_(t.integerValue||t.doubleValue);case 3:return this.K_(t.timestampValue);case 4:return this.Q_(t);case 5:return t.stringValue;case 6:return this.q_(U_(t.bytesValue));case 7:return this.W_(t.referenceValue);case 8:return this.j_(t.geoPointValue);case 9:return this.G_(t.arrayValue);case 10:return this.z_(t.mapValue);default:throw yb()}},t.prototype.z_=function(t){var e=this,n={};return Db(t.fields||{},(function(t,i){n[t]=e.U_(i)})),n},t.prototype.j_=function(t){return new oS(L_(t.latitude),L_(t.longitude))},t.prototype.G_=function(t){var e=this;return(t.values||[]).map((function(t){return e.U_(t)}))},t.prototype.Q_=function(t){switch(this.L_){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return E_(n)?t(n):n}(t);return null==e?null:this.U_(e);case"estimate":return this.K_(k_(t));default:return null}},t.prototype.K_=function(t){var e=V_(t);return new Mb(e.seconds,e.nanos)},t.prototype.W_=function(t){var e=Vb.q(t);mb(Iw(e));var n=new kb(e.get(1),e.get(3)),i=new Bb(e.N(5));return n.isEqual(this._)||db("Document "+i+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this._.projectId+"/"+this._.database+") instead."),this.B_(i)},t}(),WS=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new lb(ub.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new lb(ub.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,GO("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}();function zS(t){YS(t);var e=ZS(t),n=t.H_(),i=new HO;return qS(e,i,new BO(i,n.cacheSizeBytes))}function qS(t,e,n){var i=this,r=new zx;return t.cs.enqueue((function(){return Object(ag.b)(i,void 0,void 0,(function(){var i;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ES(t,n)];case 1:return o.sent(),[4,kS(t,e)];case 2:return o.sent(),r.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ub.FAILED_PRECONDITION||t.code===ub.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=o.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return r.promise}))}function GS(t){var e=this;if(t.Y_&&!t.J_)throw new lb(ub.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new zx;return t.X_.bs((function(){return Object(ag.b)(e,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return Yx.Ln()?[4,Yx.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(UC(t.c_,t.Z_))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}function YS(t){if(t.Y_||t.J_)throw new lb(ub.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var KS="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",XS=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){throw new lb(ub.FAILED_PRECONDITION,KS)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new lb(ub.FAILED_PRECONDITION,KS)},t.prototype.clearIndexedDbPersistence=function(t){throw new lb(ub.FAILED_PRECONDITION,KS)},t}(),QS=function(){function t(){this.enableMultiTabIndexedDbPersistence=zS.bind(null),this.clearIndexedDbPersistence=GS.bind(null)}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){YS(t);var n=ZS(t),i=t.H_(),r=new HO;return qS(n,r,new UO(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t,{forceOwnership:e})},t}(),$S=function(){function t(e,n,i){var r=this;if(void 0===i&&(i=new XS),this.tf=i,this.ef=null,this.X_=new oP,this.INTERNAL={delete:function(){return Object(ag.b)(r,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){switch(t.label){case 0:return this.nf||JS(this),[4,this.nf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.ef=o,this.c_=t.sf(o),this.Z_=o.name,this.if=new vP(n)}else{var s=e;if(!s.projectId)throw new lb(ub.INVALID_ARGUMENT,"Must provide projectId");this.c_=new kb(s.projectId,s.database),this.Z_="[DEFAULT]",this.if=new mP}this.rf=new WS({})}return Object.defineProperty(t.prototype,"Y_",{get:function(){return!!this.nf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"J_",{get:function(){return this.X_.ps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"af",{get:function(){return this.cf||(this.cf=new dS(this.c_,this.rf.ignoreUndefinedProperties)),this.cf},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.rf),t)).merge;var e=new WS(t);if(this.nf&&!this.rf.isEqual(e))throw new lb(ub.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.rf=e,void 0!==e.credentials&&(this.if=function(t){if(!t)return new mP;switch(t.type){case"gapi":var e=t.client;return mb(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new _P(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new lb(ub.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.rf.host&&fb("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},t.prototype.enableNetwork=function(){return ZS(this),function(t){var e=this;return t.cs.enqueue((function(){return Object(ag.b)(e,void 0,void 0,(function(){var e,n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return[4,jS(t)];case 1:return e=i.sent(),[4,MS(t)];case 2:return n=i.sent(),[2,(e.la(!0),function(t){var e=vb(t);return e.Wc.delete(0),sI(e)}(n))]}}))}))}))}(this.nf)},t.prototype.disableNetwork=function(){return ZS(this),function(t){var e=this;return t.cs.enqueue((function(){return Object(ag.b)(e,void 0,void 0,(function(){var e,n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return[4,jS(t)];case 1:return e=i.sent(),[4,MS(t)];case 2:return n=i.sent(),[2,(e.la(!1),function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return(e=vb(t)).Wc.add(0),[4,aI(e)];case 1:return n.sent(),e.Hc.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(this.nf)},t.prototype.enablePersistence=function(t){if(this.nf)throw new lb(ub.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1,n=!1;return t&&GO("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tf.enableMultiTabIndexedDbPersistence(this):this.tf.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){return[2,this.tf.clearIndexedDbPersistence(this)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},t.prototype.waitForPendingWrites=function(){return ZS(this),function(t){var e=this,n=new zx;return t.cs.ws((function(){return Object(ag.b)(e,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return e=rO,[4,NS(t)];case 1:return[2,e.apply(void 0,[i.sent(),n])]}}))}))})),n.promise}(this.nf)},t.prototype.onSnapshotsInSync=function(t){return ZS(this),BS(t)?US(this.nf,t):US(this.nf,{next:t})},t.sf=function(t){if(!Object.prototype.hasOwnProperty.call(t.options,"projectId"))throw new lb(ub.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e=t.options.projectId;if(!e||"string"!=typeof e)throw new lb(ub.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new kb(e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.ef)throw new lb(ub.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ef},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return zO("Firestore.collection","path",t),ZS(this),new pT(Vb.q(t),this,null)},t.prototype.doc=function(t){return zO("Firestore.doc","path",t),ZS(this),nT.uf(Vb.q(t),this,null)},t.prototype.collectionGroup=function(t){if(zO("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new lb(ub.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return ZS(this),new hT(function(t){return new hx(Vb.U(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return function(t,e){var n=this,i=new zx;return t.cs.ws((function(){return Object(ag.b)(n,void 0,void 0,(function(){var n;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return[4,function(t){return DS(t).then((function(t){return t.qc}))}(t)];case 1:return n=r.sent(),new SS(t.cs,n,e,i).run(),[2]}}))}))})),i.promise}(ZS(this),(function(n){return t(new tT(e,n))}))},t.prototype.batch=function(){return ZS(this),new eT(this)},t.prototype.H_=function(){return this.rf},t}();function ZS(t){return t.nf||JS(t),t.nf.O_(),t.nf}function JS(t){var e=t.H_(),n=function(t,e,n){return new Eb(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.c_,t.Z_,e);t.nf=new TS(t.if,t.X_,n)}var tT=function(){function t(t,e){this.hf=t,this.lf=e}return t.prototype.get=function(t){var e=this,n=dT(0,t,this.hf);return this.lf.y_([n.u_]).then((function(t){if(!t||1!==t.length)return yb();var i=t[0];if(i instanceof ux)return new rT(e.hf,n.u_,null,!1,!1,n.h_);if(i instanceof ax)return new rT(e.hf,n.u_,i,!1,!1,n.h_);throw yb()}))},t.prototype.set=function(t,e,n){var i=dT(0,t,this.hf);n=qO("Transaction.set",n);var r=gT(i.h_,e,n),o=fS(this.hf.af,"Transaction.set",i.u_,r,null!==i.h_,n);return this.lf.set(i.u_,o),this},t.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof QO?(i=dT(0,t,this.hf),r=yS(this.hf.af,"Transaction.update",i.u_,e,n,o)):(i=dT(0,t,this.hf),r=gS(this.hf.af,"Transaction.update",i.u_,e)),this.lf.update(i.u_,r),this},t.prototype.delete=function(t){var e=dT(0,t,this.hf);return this.lf.delete(e.u_),this},t}(),eT=function(){function t(t){this.hf=t,this._f=[],this.ff=!1}return t.prototype.set=function(t,e,n){this.df();var i=dT(0,t,this.hf);n=qO("WriteBatch.set",n);var r=gT(i.h_,e,n),o=fS(this.hf.af,"WriteBatch.set",i.u_,r,null!==i.h_,n);return this._f=this._f.concat(o.l_(i.u_,Bw.ze())),this},t.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.df(),"string"==typeof e||e instanceof QO?(i=dT(0,t,this.hf),r=yS(this.hf.af,"WriteBatch.update",i.u_,e,n,o)):(i=dT(0,t,this.hf),r=gS(this.hf.af,"WriteBatch.update",i.u_,e)),this._f=this._f.concat(r.l_(i.u_,Bw.exists(!0))),this},t.prototype.delete=function(t){this.df();var e=dT(0,t,this.hf);return this._f=this._f.concat(new ex(e.u_,Bw.ze())),this},t.prototype.commit=function(){return this.df(),this.ff=!0,this._f.length>0?LS(ZS(this.hf),this._f):Promise.resolve()},t.prototype.df=function(){if(this.ff)throw new lb(ub.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),nT=function(t){function e(e,n,i){var r=this;return(r=t.call(this,n.c_,e,i)||this).u_=e,r.firestore=n,r.h_=i,r.nf=ZS(n),r}return Object(ag.c)(e,t),e.uf=function(t,n,i){if(t.length%2!=0)throw new lb(ub.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.B()+" has "+t.length);return new e(new Bb(t),n,i)},Object.defineProperty(e.prototype,"id",{get:function(){return this.u_.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new pT(this.u_.path.F(),this.firestore,this.h_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.u_.path.B()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(zO("DocumentReference.collection","path",t),!t)throw new lb(ub.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Vb.q(t);return new pT(this.u_.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof e&&this.firestore===t.firestore&&this.u_.isEqual(t.u_)&&this.h_===t.h_},e.prototype.set=function(t,e){e=qO("DocumentReference.set",e);var n=gT(this.h_,t,e),i=fS(this.firestore.af,"DocumentReference.set",this.u_,n,null!==this.h_,e);return LS(this.nf,i.l_(this.u_,Bw.ze()))},e.prototype.update=function(t,e){for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return n="string"==typeof t||t instanceof QO?yS(this.firestore.af,"DocumentReference.update",this.u_,t,e,i):gS(this.firestore.af,"DocumentReference.update",this.u_,t),LS(this.nf,n.l_(this.u_,Bw.exists(!0)))},e.prototype.delete=function(){return LS(this.nf,[new ex(this.u_,Bw.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,i=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var s={includeMetadataChanges:!1},a=0;"object"!=typeof r[a]||BS(r[a])||(s=r[a],a++);var u={includeMetadataChanges:s.includeMetadataChanges};if(BS(r[a])){var l=r[a];r[a]=null===(t=l.next)||void 0===t?void 0:t.bind(l),r[a+1]=null===(e=l.error)||void 0===e?void 0:e.bind(l),r[a+2]=null===(n=l.complete)||void 0===n?void 0:n.bind(l)}var h={next:function(t){r[a]&&r[a](i.wf(t))},error:r[a+1],complete:r[a+2]};return VS(this.nf,px(this.u_.path),u,h)},e.prototype.get=function(t){var e=this;return t&&"cache"===t.source?function(t,e){var n=this,i=new zx;return t.cs.ws((function(){return Object(ag.b)(n,void 0,void 0,(function(){var n;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return n=function(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=vb(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ka.Mi(t,e)}))}(t,e)];case 1:return(i=s.sent())instanceof ax?n.resolve(i):i instanceof ux?n.resolve(null):n.reject(new lb(ub.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=s.sent(),o=sP(r,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,RS(t)];case 1:return[2,n.apply(void 0,[r.sent(),e,i])]}}))}))})),i.promise}(this.nf,this.u_).then((function(t){return new rT(e.firestore,e.u_,t,!0,t instanceof ax&&t.Je,e.h_)})):function(t,e,n){var i=this;void 0===n&&(n={});var r=new zx;return t.cs.ws((function(){return Object(ag.b)(i,void 0,void 0,(function(){var i;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return i=function(t,e,n,i,r){var o=new WO({next:function(o){e.ws((function(){return hP(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?r.reject(new lb(ub.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&i&&"server"===i.source?r.reject(new lb(ub.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(o)},error:function(t){return r.reject(t)}}),s=new fP(px(n.path),o,{includeMetadataChanges:!0,Xs:!0});return lP(t,s)},[4,FS(t)];case 1:return[2,i.apply(void 0,[o.sent(),t.cs,e,n,r])]}}))}))})),r.promise}(this.nf,this.u_,t).then((function(t){return e.wf(t)}))},e.prototype.withConverter=function(t){return new e(this.u_,this.firestore,t)},e.prototype.wf=function(t){var e=t.docs.get(this.u_);return new rT(this.firestore,this.u_,e,t.fromCache,t.hasPendingWrites,this.h_)},e}(uS),iT=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),rT=function(){function t(t,e,n,i,r,o){this.hf=t,this.u_=e,this.Ef=n,this.Tf=i,this.If=r,this.h_=o}return t.prototype.data=function(t){var e=this;if(void 0===t&&(t={}),this.Ef){if(this.h_){var n=new oT(this.hf,this.u_,this.Ef,this.Tf,this.If,null);return this.h_.fromFirestore(n,t)}return new HS(this.hf.c_,t.serverTimestamps||"none",(function(t){return new nT(t,e.hf,null)}),(function(t){return new Tb(t)})).U_(this.Ef.rn())}},t.prototype.get=function(t,e){var n=this;if(void 0===e&&(e={}),this.Ef){var i=this.Ef.data().field(xS("DocumentSnapshot.get",t,this.u_));if(null!==i)return new HS(this.hf.c_,e.serverTimestamps||"none",(function(t){return new nT(t,n.hf,n.h_)}),(function(t){return new Tb(t)})).U_(i)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.u_.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new nT(this.u_,this.hf,this.h_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ef},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new iT(this.If,this.Tf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.hf===e.hf&&this.Tf===e.Tf&&this.u_.isEqual(e.u_)&&(null===this.Ef?null===e.Ef:this.Ef.isEqual(e.Ef))&&this.h_===e.h_},t}(),oT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ag.c)(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(rT);function sT(t,e,n){if("string"==typeof n){if(""===n)throw new lb(ub.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!mx(e)&&-1!==n.indexOf("/"))throw new lb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var i=e.path.child(Vb.q(n));if(!Bb.X(i))throw new lb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+i+"' is not because it has an odd number of segments ("+i.length+").");return B_(t,new Bb(i))}if(n instanceof uS)return B_(t,n.u_);throw new lb(ub.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+YO(n)+".")}function aT(t,e){if(!Array.isArray(t)||0===t.length)throw new lb(ub.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new lb(ub.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function uT(t,e,n){if(!n.isEqual(e))throw new lb(ub.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function lT(t){if(fx(t)&&0===t.on.length)throw new lb(ub.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hT=function(){function t(t,e,n){this.mf=t,this.firestore=e,this.h_=n}return t.prototype.where=function(e,n,i){var r=xS("Query.where",e),o=function(t,e,n,i,r,o,s){var a;if(r.W()){if("array-contains"===o||"array-contains-any"===o)throw new lb(ub.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){aT(s,o);for(var u=[],l=0,h=s;l<h.length;l++)u.push(sT(i,t,h[l]));a={arrayValue:{values:u}}}else a=sT(i,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||aT(s,o),a=mS(n,"Query.where",s,"in"===o||"not-in"===o);var c=Tx.create(r,o,a);return function(t,e){if(e.hn()){var n=yx(t);if(null!==n&&!n.isEqual(e.field))throw new lb(ub.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var i=gx(t);null!==i&&uT(0,e.field,i)}var r=function(t,e){for(var n=0,i=t.filters;n<i.length;n++){var r=i[n];if(e.indexOf(r.op)>=0)return r.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new lb(ub.INVALID_ARGUMENT,r===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+r.toString()+"' filters.")}(t,c),c}(this.mf,0,this.firestore.af,this.firestore.c_,r,n,i);return new t(function(t,e){var n=t.filters.concat([e]);return new hx(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.mf,o),this.firestore,this.h_)},t.prototype.orderBy=function(e,n){var i;if(void 0===n||"asc"===n)i="asc";else{if("desc"!==n)throw new lb(ub.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");i="desc"}var r=xS("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new lb(ub.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new lb(ub.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var i=new Bx(e,n);return function(t,e){if(null===gx(t)){var n=yx(t);null!==n&&uT(0,n,e.field)}}(t,i),i}(this.mf,r,i);return new t(function(t,e){var n=t.on.concat([e]);return new hx(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.mf,o),this.firestore,this.h_)},t.prototype.limit=function(e){return KO("Query.limit",e),new t(_x(this.mf,e,"F"),this.firestore,this.h_)},t.prototype.limitToLast=function(e){return KO("Query.limitToLast",e),new t(_x(this.mf,e,"L"),this.firestore,this.h_)},t.prototype.startAt=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=this.Af("Query.startAt",e,n,!0);return new t(wx(this.mf,r),this.firestore,this.h_)},t.prototype.startAfter=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=this.Af("Query.startAfter",e,n,!1);return new t(wx(this.mf,r),this.firestore,this.h_)},t.prototype.endBefore=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=this.Af("Query.endBefore",e,n,!0);return new t(xx(this.mf,r),this.firestore,this.h_)},t.prototype.endAt=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=this.Af("Query.endAt",e,n,!1);return new t(xx(this.mf,r),this.firestore,this.h_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&Px(this.mf,e.mf)&&this.h_===e.h_},t.prototype.withConverter=function(e){return new t(this.mf,this.firestore,e)},t.prototype.Af=function(t,e,n,i){if(e instanceof rT)return function(t,e,n,i,r){if(!i)throw new lb(ub.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=vx(t);s<a.length;s++){var u=a[s];if(u.field.W())o.push(B_(e,i.key));else{var l=i.field(u.field);if(E_(l))throw new lb(ub.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var h=u.field.B();throw new lb(ub.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(l)}}return new Fx(o,r)}(this.mf,this.firestore.c_,t,e.Ef,i);var r=[e].concat(n);return function(t,e,n,i,r,o){var s=t.on;if(r.length>s.length)throw new lb(ub.INVALID_ARGUMENT,"Too many arguments provided to "+i+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<r.length;u++){var l=r[u];if(s[u].field.W()){if("string"!=typeof l)throw new lb(ub.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+i+"(), but got a "+typeof l);if(!mx(t)&&-1!==l.indexOf("/"))throw new lb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+i+"() must be a plain document ID, but '"+l+"' contains a slash.");var h=t.path.child(Vb.q(l));if(!Bb.X(h))throw new lb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+i+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var c=new Bb(h);a.push(B_(e,c))}else{var p=mS(n,i,l);a.push(p)}}return new Fx(a,o)}(this.mf,this.firestore.c_,this.firestore.af,t,r,i)},t.prototype.onSnapshot=function(){for(var t,e,n,i=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var s={},a=0;if("object"!=typeof r[a]||BS(r[a])||(s=r[a],a++),BS(r[a])){var u=r[a];r[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),r[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),r[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}var l={next:function(t){r[a]&&r[a](new cT(i.firestore,i.mf,t,i.h_))},error:r[a+1],complete:r[a+2]};return lT(this.mf),VS(ZS(this.firestore),this.mf,s,l)},t.prototype.get=function(t){var e=this;lT(this.mf);var n=ZS(this.firestore);return(t&&"cache"===t.source?function(t,e){var n=this,i=new zx;return t.cs.ws((function(){return Object(ag.b)(n,void 0,void 0,(function(){var n;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return n=function(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o,s,a,u;return Object(ag.d)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,XC(t,e,!0)];case 1:return i=l.sent(),r=new qI(e,i.za),o=r.wh(i.documents),s=r.Di(o,!1),n.resolve(s.snapshot),[3,3];case 2:return a=l.sent(),u=sP(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,RS(t)];case 1:return[2,n.apply(void 0,[r.sent(),e,i])]}}))}))})),i.promise}(n,this.mf):function(t,e,n){var i=this;void 0===n&&(n={});var r=new zx;return t.cs.ws((function(){return Object(ag.b)(i,void 0,void 0,(function(){var i;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return i=function(t,e,n,i,r){var o=new WO({next:function(n){e.ws((function(){return hP(t,s)})),n.fromCache&&"server"===i.source?r.reject(new lb(ub.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:function(t){return r.reject(t)}}),s=new fP(n,o,{includeMetadataChanges:!0,Xs:!0});return lP(t,s)},[4,FS(t)];case 1:return[2,i.apply(void 0,[o.sent(),t.cs,e,n,r])]}}))}))})),r.promise}(n,this.mf,t)).then((function(t){return new cT(e.firestore,e.mf,t,e.h_)}))},t}(),cT=function(){function t(t,e,n,i){this.hf=t,this.Rf=e,this.Pf=n,this.h_=i,this.gf=null,this.yf=null,this.metadata=new iT(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Pf.docs.P()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Pf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Pf.docs.forEach((function(i){t.call(e,n.Vf(i,n.metadata.fromCache,n.Pf.Qt.has(i.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new hT(this.Rf,this.hf,this.h_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=!(!t||!t.includeMetadataChanges);if(e&&this.Pf.jt)throw new lb(ub.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.gf&&this.yf===e||(this.gf=function(t,e,n){if(t.Kt.P()){var i=0;return t.docChanges.map((function(e){return{type:"added",doc:n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),oldIndex:-1,newIndex:i++}}))}var r=t.Kt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:fT(e.type),doc:i,oldIndex:o,newIndex:s}}))}(this.Pf,e,this.Vf.bind(this)),this.yf=e),this.gf},t.prototype.isEqual=function(e){return e instanceof t&&this.hf===e.hf&&Px(this.Rf,e.Rf)&&this.Pf.isEqual(e.Pf)&&this.h_===e.h_},t.prototype.Vf=function(t,e,n){return new oT(this.hf,t.key,t,e,n,this.h_)},t}(),pT=function(t){function e(e,n,i){var r=this;if((r=t.call(this,px(e),n,i)||this).pf=e,e.length%2!=1)throw new lb(ub.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.B()+" has "+e.length);return r}return Object(ag.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.mf.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.mf.path.F();return t.P()?null:new nT(new Bb(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.mf.path.B()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=_b.t()),zO("CollectionReference.doc","path",t);var e=Vb.q(t);return nT.uf(this.mf.path.child(e),this.firestore,this.h_)},e.prototype.add=function(t){var e=this.h_?this.h_.toFirestore(t):t,n=this.doc();return new nT(n.u_,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.pf,this.firestore,t)},e}(hT);function dT(t,e,n){var i=function(t,e){if(!(t instanceof e)){if(e.name===t.constructor.name)throw new lb(ub.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=YO(t);throw new lb(ub.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}(e,nT);if(i.firestore!==n)throw new lb(ub.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function fT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yb()}}function gT(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var yT,mT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ag.c)(e,t),e.serverTimestamp=function(){var t=new eS("serverTimestamp");return t.Jl="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new JO("deleteField");return t.Jl="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nS("arrayUnion",t)}).apply(void 0,t);return i.Jl="FieldValue.arrayUnion",new e(i)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new iS("arrayRemove",t)}).apply(void 0,t);return i.Jl="FieldValue.arrayRemove",new e(i)},e.increment=function(t){var n=function(t){return new rS("increment",t)}(t);return n.Jl="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.a_.isEqual(t.a_)},e}(sS),vT={Firestore:$S,GeoPoint:oS,Timestamp:Mb,Blob:Tb,Transaction:tT,WriteBatch:eT,DocumentReference:nT,DocumentSnapshot:rT,Query:hT,QueryDocumentSnapshot:oT,QuerySnapshot:cT,CollectionReference:pT,FieldPath:QO,FieldValue:mT,setLogLevel:function(t){hb.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new ab.a("firestore",(function(t){return function(t,e){return new $S(t,e,new QS)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},vT)))})(yT=sg.a),yT.registerVersion("@firebase/firestore","2.0.1");var bT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_T=function(t){function e(n,i,r){var o=t.call(this,i)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=r,o}return Object(ag.c)(e,t),e}(Error),wT=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t;return Object(ag.d)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(e){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t,e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function xT(t,e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}var PT,CT,IT,OT=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return xT(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?xT(t,(function(t){return e.decode(t)})):t},t}(),ST=function(){function t(t,e,n,i,r){var o=this;void 0===i&&(i="us-central1"),this.app_=t,this.fetchImpl=r,this.serializer=new OT,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new wT(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(a){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(i){return n.call(t,i,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return i=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:r=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,i.json()];case 6:return r=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:i.status,json:r}]}}))}))},t.prototype.call=function(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o,s,a,u,l,h,c,p;return Object(ag.d)(this,(function(d){switch(d.label){case 0:return i=this._url(t),e=this.serializer.encode(e),r={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise((function(n,i){e=setTimeout((function(){i(new _T("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,l=a.promise,[4,Promise.race([TT(u,this.postJSON(i,r,o)),l,TT(u,this.cancelAllRequests)])];case 2:if(!(h=d.sent()))throw new _T("cancelled","Firebase Functions instance was deleted.");if(c=function(t,e,n){var i=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),r=i,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!bT[a])return new _T("internal","internal");i=bT[a],r=a}var u=s.message;"string"==typeof u&&(r=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(l){}return"ok"===i?null:new _T(i,r,o)}(h.status,h.json,this.serializer))throw c;if(!h.json)throw new _T("internal","Response is not valid JSON object.");if(void 0===(p=h.json.data)&&(p=h.json.result),void 0===p)throw new _T("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function TT(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return[4,e];case 1:return n=i.sent(),clearTimeout(t),[2,n]}}))}))}PT=sg.a,CT=fetch.bind(self),IT={Functions:ST},PT.INTERNAL.registerComponent(new ab.a("functions",(function(t,e){var n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("messaging");return new ST(n,i,r,e,CT)}),"PUBLIC").setServiceProps(IT).setMultipleInstances(!0)),sg.a.registerVersion("@firebase/functions","0.6.1");var ET,kT=n("nbvr"),AT="w:0.4.19",DT=((ET={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ET["not-registered"]="Firebase Installation is not registered.",ET["installation-not-found"]="Firebase Installation not found.",ET["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',ET["app-offline"]="Could not process request. Application offline.",ET["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",ET),jT=new lg.b("installations","Installations",DT);function RT(t){return t instanceof lg.c&&t.code.includes("request-failed")}function MT(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function NT(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function FT(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return[4,e.json()];case 1:return n=r.sent(),[2,jT.create("request-failed",{requestName:t,serverCode:(i=n.error).code,serverMessage:i.message,serverStatus:i.status})]}}))}))}function VT(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function LT(t,e){var n=e.refreshToken,i=VT(t);return i.append("Authorization",function(t){return"FIS_v2 "+t}(n)),i}function UT(t){return Object(ag.b)(this,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function BT(t,e){var n=e.fid;return Object(ag.b)(this,void 0,void 0,(function(){var e,i,r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:return e=MT(t),i=VT(t),r={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:AT})},[4,UT((function(){return fetch(e,r)}))];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:NT(s.authToken)}];case 3:return[4,FT("Create Installation",o)];case 4:throw a.sent()}}))}))}function HT(t){return new Promise((function(e){setTimeout(e,t)}))}var WT=/^[cdef][\w-]{21}$/;function zT(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(ag.f)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return WT.test(e)?e:""}catch(n){return""}}function qT(t){return t.appName+"!"+t.appId}var GT=new Map;function YT(t,e){var n=qT(t);KT(n,e),function(t,e){var n=QT();n&&n.postMessage({key:t,fid:e}),$T()}(n,e)}function KT(t,e){var n,i,r=GT.get(t);if(r)try{for(var o=Object(ag.h)(r),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}var XT=null;function QT(){return!XT&&"BroadcastChannel"in self&&((XT=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){KT(t.data.key,t.data.fid)}),XT}function $T(){0===GT.size&&XT&&(XT.close(),XT=null)}var ZT,JT="firebase-installations-store",tE=null;function eE(){return tE||(tE=Object(kT.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(JT)}}))),tE}function nE(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:return n=qT(t),[4,eE()];case 1:return i=a.sent(),r=i.transaction(JT,"readwrite"),[4,(o=r.objectStore(JT)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,r.complete];case 4:return a.sent(),s&&s.fid===e.fid||YT(t,e.fid),[2,e]}}))}))}function iE(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return e=qT(t),[4,eE()];case 1:return n=r.sent(),[4,(i=n.transaction(JT,"readwrite")).objectStore(JT).delete(e)];case 2:return r.sent(),[4,i.complete];case 3:return r.sent(),[2]}}))}))}function rE(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s,a;return Object(ag.d)(this,(function(u){switch(u.label){case 0:return n=qT(t),[4,eE()];case 1:return i=u.sent(),r=i.transaction(JT,"readwrite"),[4,(o=r.objectStore(JT)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,r.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||YT(t,a.fid),[2,a]}}))}))}function oE(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return[4,rE(t,(function(n){var i=function(t){return uE(t||{fid:zT(),registrationStatus:0})}(n),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(jT.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,7]),[4,BT(t,e)];case 1:return n=r.sent(),[2,nE(t,n)];case 2:return RT(i=r.sent())&&409===i.customData.serverCode?[4,iE(t)]:[3,4];case 3:return r.sent(),[3,6];case 4:return[4,nE(t,{fid:e.fid,registrationStatus:0})];case 5:r.sent(),r.label=6;case 6:throw i;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:sE(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}))];case 1:return""!==(n=r.sent()).fid?[3,3]:(i={},[4,e]);case 2:return[2,(i.installationEntry=r.sent(),i)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function sE(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return[4,aE(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,HT(100)];case 3:return o.sent(),[4,aE(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,oE(t)];case 6:return n=o.sent(),i=n.installationEntry,(r=n.registrationPromise)?[2,r]:[2,i];case 7:return[2,e]}}))}))}function aE(t){return rE(t,(function(t){if(!t)throw jT.create("installation-not-found");return uE(t)}))}function uE(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function lE(t,e){var n=t.appConfig,i=t.platformLoggerProvider;return Object(ag.b)(this,void 0,void 0,(function(){var t,r,o,s,a;return Object(ag.d)(this,(function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return MT(t)+"/"+n+"/authTokens:generate"}(n,e),r=LT(n,e),(o=i.getImmediate({optional:!0}))&&r.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:AT}})},[4,UT((function(){return fetch(t,s)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,NT(u.sent())];case 3:return[4,FT("Generate Auth Token",a)];case 4:throw u.sent()}}))}))}function hE(t,e){return void 0===e&&(e=!1),Object(ag.b)(this,void 0,void 0,(function(){var n,i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return[4,rE(t.appConfig,(function(i){if(!pE(i))throw jT.create("not-registered");var r,o=i.authToken;if(!e&&2===(r=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(r))return i;if(1===o.requestStatus)return n=function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return[4,cE(t.appConfig)];case 1:n=r.sent(),r.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,HT(100)];case 3:return r.sent(),[4,cE(t.appConfig)];case 4:return n=r.sent(),[3,2];case 5:return 0===(i=n.authToken).requestStatus?[2,hE(t,e)]:[2,i]}}))}))}(t,e),i;if(!navigator.onLine)throw jT.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(ag.a)(Object(ag.a)({},t),{authToken:e})}(i);return n=function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,lE(t,e)];case 1:return n=o.sent(),r=Object(ag.a)(Object(ag.a)({},e),{authToken:n}),[4,nE(t.appConfig,r)];case 2:return o.sent(),[2,n];case 3:return!RT(i=o.sent())||401!==i.customData.serverCode&&404!==i.customData.serverCode?[3,5]:[4,iE(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return r=Object(ag.a)(Object(ag.a)({},e),{authToken:{requestStatus:0}}),[4,nE(t.appConfig,r)];case 6:o.sent(),o.label=7;case 7:throw i;case 8:return[2]}}))}))}(t,s),s}))];case 1:return i=o.sent(),n?[4,n]:[3,3];case 2:return r=o.sent(),[3,4];case 3:r=i.authToken,o.label=4;case 4:return[2,r]}}))}))}function cE(t){return rE(t,(function(t){if(!pE(t))throw jT.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(ag.a)(Object(ag.a)({},t),{authToken:{requestStatus:0}}):t}))}function pE(t){return void 0!==t&&2===t.registrationStatus}function dE(t){return Object(ag.b)(this,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return[4,oE(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function fE(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return MT(t)+"/"+n}(t,e),i=LT(t,e),r={method:"DELETE",headers:i},[4,UT((function(){return fetch(n,r)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,FT("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function gE(t){return jT.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new ab.a("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw gE("App Configuration");if(!t.name)throw gE("App Name");try{for(var i=Object(ag.h)(["projectId","apiKey","appId"]),r=i.next();!r.done;r=i.next()){var o=r.value;if(!t.options[o])throw gE(o)}}catch(s){e={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return[4,oE(t.appConfig)];case 1:return e=r.sent(),n=e.installationEntry,(i=e.registrationPromise)?i.catch(console.error):hE(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(n){switch(n.label){case 0:return[4,dE(t.appConfig)];case 1:return n.sent(),[4,hE(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return[4,rE(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=i.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw jT.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw jT.create("app-offline");case 3:return[4,fE(e,n)];case 4:return i.sent(),[4,iE(e)];case 5:i.sent(),i.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){QT();var n=qT(t),i=GT.get(n);i||(i=new Set,GT.set(n,i)),i.add(e)}(n,e),function(){!function(t,e){var n=qT(t),i=GT.get(n);i&&(i.delete(e),0===i.size&&GT.delete(n),$T())}(n,e)}}(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.19")}(sg.a);var yE=((ZT={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ZT["only-available-in-window"]="This method is available in a Window context.",ZT["only-available-in-sw"]="This method is available in a service worker context.",ZT["permission-default"]="The notification permission was not granted and dismissed instead.",ZT["permission-blocked"]="The notification permission was not granted and blocked instead.",ZT["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",ZT["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",ZT["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",ZT["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",ZT["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",ZT["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",ZT["token-update-no-token"]="FCM returned no token when updating the user to push.",ZT["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",ZT["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",ZT["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",ZT["invalid-vapid-key"]="The public VAPID key must be a string.",ZT["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",ZT),mE=new lg.b("messaging","Messaging",yE),vE="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bE=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function _E(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(ag.f)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wE(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}var xE="fcm_token_details_db",PE="fcm_token_object_Store";function CE(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!i.sent().map((function(t){return t.name})).includes(xE))return[2,null];i.label=2;case 2:return e=null,[4,Object(kT.openDb)(xE,5,(function(i){return Object(ag.b)(n,void 0,void 0,(function(){var n,r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:return i.oldVersion<2?[2]:i.objectStoreNames.contains(PE)?[4,(n=i.transaction.objectStore(PE)).index("fcmSenderId").get(t)]:[2];case 1:return r=a.sent(),[4,n.clear()];case 2:if(a.sent(),!r)return[2];if(2===i.oldVersion){if(!(o=r).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:_E(o.vapidKey)}}}else(3===i.oldVersion||4===i.oldVersion)&&(e={token:(o=r).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:_E(o.auth),p256dh:_E(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:_E(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,Object(kT.deleteDb)(xE)];case 4:return i.sent(),[4,Object(kT.deleteDb)("fcm_vapid_details_db")];case 5:return i.sent(),[4,Object(kT.deleteDb)("undefined")];case 6:return i.sent(),[2,IE(e)?e:null]}}))}))}function IE(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var OE="firebase-messaging-store",SE=null;function TE(){return SE||(SE=Object(kT.openDb)("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(OE)}}))),SE}function EE(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return e=DE(t),[4,TE()];case 1:return[4,r.sent().transaction(OE).objectStore(OE).get(e)];case 2:return(n=r.sent())?[2,n]:[3,3];case 3:return[4,CE(t.appConfig.senderId)];case 4:return(i=r.sent())?[4,kE(t,i)]:[3,6];case 5:return r.sent(),[2,i];case 6:return[2]}}))}))}function kE(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return n=DE(t),[4,TE()];case 1:return i=o.sent(),[4,(r=i.transaction(OE,"readwrite")).objectStore(OE).put(e,n)];case 2:return o.sent(),[4,r.complete];case 3:return o.sent(),[2,e]}}))}))}function AE(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return e=DE(t),[4,TE()];case 1:return n=r.sent(),[4,(i=n.transaction(OE,"readwrite")).objectStore(OE).delete(e)];case 2:return r.sent(),[4,i.complete];case 3:return r.sent(),[2]}}))}))}function DE(t){return t.appConfig.appId}function jE(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:return[4,FE(t)];case 1:n=a.sent(),i=VE(e),r={method:"POST",headers:n,body:JSON.stringify(i)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(NE(t.appConfig),r)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),mE.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw mE.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw mE.create("token-subscribe-no-token");return[2,o.token]}}))}))}function RE(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:return[4,FE(t)];case 1:n=a.sent(),i=VE(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(NE(t.appConfig)+"/"+e.token,r)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),mE.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw mE.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw mE.create("token-update-no-token");return[2,o.token]}}))}))}function ME(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:return[4,FE(t)];case 1:n=s.sent(),i={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(NE(t.appConfig)+"/"+e,i)];case 3:return[4,s.sent().json()];case 4:if((r=s.sent()).error)throw mE.create("token-unsubscribe-failed",{errorInfo:r.error.message});return[3,6];case 5:throw o=s.sent(),mE.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}}))}))}function NE(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function FE(t){var e=t.appConfig,n=t.installations;return Object(ag.b)(this,void 0,void 0,(function(){var t;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return[4,n.getToken()];case 1:return t=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function VE(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==vE&&(n.web.applicationPubKey=e),n}function LE(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw mE.create("permission-blocked");return[4,WE(e,n)];case 1:return i=a.sent(),[4,EE(t)];case 2:return r=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:i.endpoint,auth:_E(i.getKey("auth")),p256dh:_E(i.getKey("p256dh"))},r?[3,3]:[2,HE(t,o)];case 3:if(h=(l=o).endpoint===(u=r.subscriptionOptions).endpoint,l.vapidKey===u.vapidKey&&h&&l.auth===u.auth&&l.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,ME(t,r.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,HE(t,o)];case 8:return Date.now()>=r.createTime+6048e5?[2,BE({token:r.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,r.token];case 9:return[2]}var u,l,h}))}))}function UE(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return[4,EE(t)];case 1:return(n=r.sent())?[4,ME(t,n.token)]:[3,4];case 2:return r.sent(),[4,AE(t)];case 3:r.sent(),r.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(i=r.sent())?[2,i.unsubscribe()]:[2,!0]}}))}))}function BE(t,e,n){return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,RE(e,t)];case 1:return i=s.sent(),r=Object(ag.a)(Object(ag.a)({},t),{token:i,createTime:Date.now()}),[4,kE(e,r)];case 2:return s.sent(),[2,i];case 3:return o=s.sent(),[4,UE(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function HE(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return[4,jE(t,e)];case 1:return n=r.sent(),i={token:n,createTime:Date.now(),subscriptionOptions:e},[4,kE(t,i)];case 2:return r.sent(),[2,i.token]}}))}))}function WE(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=i.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:wE(e)})]}}))}))}function zE(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function qE(t){return new Promise((function(e){setTimeout(e,t)}))}var GE=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw mE.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(ag.b)(this,void 0,void 0,(function(){var n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,EE(this.firebaseDependencies)];case 1:n=i.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:vE,i.label=2;case 2:return[2,LE(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return UE(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw mE.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw mE.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw mE.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw mE.create("only-available-in-window")},t.prototype.onMessage=function(){throw mE.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw mE.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,QE()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,XE(n,e)]:(i=!1,e.notification?[4,$E(YE(e))]:[3,3]);case 2:o.sent(),i=!0,o.label=3;case 3:return!0===i&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(r=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var i=e.notification.body;i&&(t.notification.body=i);var r=e.notification.image;r&&(t.notification.image=r)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var i=e.fcmOptions.analytics_label;i&&(t.fcmOptions.analyticsLabel=i)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(r):this.bgMessageHandler.next(r)),[4,qE(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Object(ag.b)(this,void 0,void 0,(function(){var i;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return t.newSubscription?[3,2]:[4,UE(this.firebaseDependencies,self.registration)];case 1:return r.sent(),[2];case 2:return[4,EE(this.firebaseDependencies)];case 3:return i=r.sent(),[4,UE(this.firebaseDependencies,self.registration)];case 4:return r.sent(),[4,LE(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==i?void 0:i.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:vE)];case 5:return r.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Object(ag.b)(this,void 0,void 0,(function(){var i,r,o,s,a;return Object(ag.d)(this,(function(u){switch(u.label){case 0:return(i=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(r=function(t){var e,n,i;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(i=t.notification)||void 0===i?void 0:i.click_action)||(zE(t.data)?self.location.origin:null)}(i))?(o=new URL(r,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,KE(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return a=u.sent(),[4,qE(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(i.messageType=bE.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,a.postMessage(i)]):[2]}}))}))},t}();function YE(t){var e,n=Object(ag.a)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function KE(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i,r,o,s,a;return Object(ag.d)(this,(function(u){switch(u.label){case 0:return[4,QE()];case 1:e=u.sent();try{for(n=Object(ag.h)(e),i=n.next();!i.done;i=n.next())if(r=i.value,o=new URL(r.url,self.location.href),t.host===o.host)return[2,r]}catch(l){s={error:l}}finally{try{i&&!i.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function XE(t,e){var n,i;e.isFirebaseMessaging=!0,e.messageType=bE.PUSH_RECEIVED;try{for(var r=Object(ag.h)(t),o=r.next();!o.done;o=r.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}function QE(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function $E(t){var e,n=t.actions,i=Notification.maxActions;return n&&i&&n.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var ZE=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===bE.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),zE(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw mE.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,LE(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=vE),[2]}))}))},t.prototype.updateSwReg=function(t){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw mE.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t,e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),mE.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,UE(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t;return Object(ag.d)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw mE.create("denied"===t?"permission-blocked":"permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw mE.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw mE.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw mE.create("invalid-sw-registration");if(this.swRegistration)throw mE.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw mE.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw mE.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return n=function(t){switch(t){case bE.NOTIFICATION_CLICKED:return"notification_open";case bE.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return i.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function JE(t){return mE.create("missing-app-config-values",{valueName:t})}var tk={isSupported:ek};function ek(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}sg.a.INTERNAL.registerComponent(new ab.a("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw JE("App Configuration Object");if(!t.name)throw JE("App Name");var i=t.options;try{for(var r=Object(ag.h)(["projectId","apiKey","appId","messagingSenderId"]),o=r.next();!o.done;o=r.next()){var s=o.value;if(!i[s])throw JE(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!ek())throw mE.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new GE(n):new ZE(n)}),"PUBLIC").setServiceProps(tk));var nk="firebasestorage.googleapis.com",ik=function(t){function e(n,i){var r=t.call(this,sk(n),"Firebase Storage: "+i)||this;return r.customData={serverResponse:null},Object.setPrototypeOf(r,e.prototype),r}return Object(ag.c)(e,t),e.prototype.codeEquals=function(t){return sk(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(lg.c),rk="canceled",ok="invalid-argument";function sk(t){return"storage/"+t}function ak(){return new ik("unknown","An unknown error occurred, please check the error payload for server response.")}function uk(){return new ik(rk,"User canceled the upload/download.")}function lk(){return new ik("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function hk(){return new ik("app-deleted","The Firebase app was deleted.")}function ck(t,e){return new ik("invalid-format","String does not match format '"+t+"': "+e)}function pk(t){throw new ik("internal-error","Internal error: "+t)}var dk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},fk=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function gk(t,e){switch(t){case dk.RAW:return new fk(yk(e));case dk.BASE64:case dk.BASE64URL:return new fk(mk(t,e));case dk.DATA_URL:return new fk((n=new vk(e)).base64?mk(dk.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw ck(dk.DATA_URL,"Malformed data URL.")}return yk(e)}(n.rest),new vk(e).contentType)}var n;throw ak()}function yk(t){for(var e=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|63&i);else if(55296==(64512&i))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var r=i,o=t.charCodeAt(++n);e.push(240|(i=65536|(1023&r)<<10|1023&o)>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else e.push(239,191,189);else 56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function mk(t,e){switch(t){case dk.BASE64:var n=-1!==e.indexOf("-"),i=-1!==e.indexOf("_");if(n||i)throw ck(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case dk.BASE64URL:var r=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(r||o)throw ck(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(l){throw ck(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var vk=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw ck(dk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,i,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=(i=";base64").length&&n.substring(n.length-i.length)===i,this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}(),bk={STATE_CHANGED:"state_changed"},_k="running",wk="pausing",xk="paused",Pk="success",Ck="canceling",Ik="canceled",Ok="error",Sk={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Tk(t){switch(t){case _k:case wk:case Ck:return Sk.RUNNING;case xk:return Sk.PAUSED;case Pk:return Sk.SUCCESS;case Ik:return Sk.CANCELED;case Ok:default:return Sk.ERROR}}function Ek(t){return null!=t}function kk(t){return"string"==typeof t||t instanceof String}function Ak(t){return Dk()&&t instanceof Blob}function Dk(){return"undefined"!=typeof Blob}function jk(t,e,n,i){if(i<e)throw new ik(ok,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(i>n)throw new ik(ok,"Invalid value for '"+t+"'. Expected "+n+" or less.")}var Rk=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Mk=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Rk.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Rk.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Rk.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,i){if(this.sent_)throw pk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),Ek(i))for(var r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return Ek(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw pk("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw pk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw pk("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){Ek(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){Ek(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Nk=function(){function t(){}return t.prototype.createXhrIo=function(){return new Mk},t}();function Fk(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Vk(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Fk();if(void 0!==n){for(var i=new n,r=0;r<t.length;r++)i.append(t[r]);return i.getBlob()}if(Dk())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var Lk=function(){function t(t,e){var n=0,i="";Ak(t)?(this.data_=t,n=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=i}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Ak(this.data_)){var i=(o=e,s=n,(r=this.data_).webkitSlice?r.webkitSlice(o,s):r.mozSlice?r.mozSlice(o,s):r.slice?r.slice(o,s):null);return null===i?null:new t(i)}var r,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Dk()){var i=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Vk.apply(null,i))}var r=e.map((function(t){return kk(t)?gk(dk.RAW,t).data:t.data_})),o=0;r.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return r.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Uk=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(i){return new t(e,"")}if(""===n.path)return n;throw new ik("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,i="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=nk.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var l=a[u],h=l.regex.exec(e);if(h){var c=h[l.indices.path];c||(c=""),n=new t(h[l.indices.bucket],c),l.postModify(n);break}}if(null==n)throw function(t){return new ik("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function Bk(t){var e,n;try{e=JSON.parse(t)}catch(i){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Hk(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Wk(t){return"https://"+nk+"/v0"+t}function zk(t){var e=encodeURIComponent,n="?";for(var i in t)t.hasOwnProperty(i)&&(n=n+(e(i)+"=")+e(t[i])+"&");return n.slice(0,-1)}function qk(t,e){return e}var Gk=function(){return function(t,e,n,i){this.server=t,this.local=e||t,this.writable=!!n,this.xform=i||qk}}(),Yk=null;function Kk(t,e,n){var i=Bk(e);return null===i?null:function(t,e,n){for(var i={type:"file"},r=n.length,o=0;o<r;o++){var s=n[o];i[s.local]=s.xform(i,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Uk(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(i,t),i}(t,i,n)}function Xk(t,e){for(var n={},i=e.length,r=0;r<i;r++){var o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Qk=function(){return function(t,e,n,i){this.url=t,this.method=e,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function $k(t){if(!t)throw ak()}function Zk(t,e){return function(n,i){var r=Kk(t,i,e);return $k(null!==r),r}}function Jk(t){return function(e,n){var i;return(i=401===e.getStatus()?new ik("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new ik("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new ik("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,i}}function tA(t){var e=Jk(t);return function(n,i){var r=e(n,i);return 404===n.getStatus()&&(r=new ik("object-not-found","Object '"+t.path+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function eA(t,e,n){var i=Wk(e.fullServerUrl()),r=t.maxOperationRetryTime,o=new Qk(i,"GET",Zk(t,n),r);return o.errorHandler=tA(e),o}function nA(t,e,n){var i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),i}var iA=function(){return function(t,e,n,i){this.current=t,this.total=e,this.finalized=!!n,this.metadata=i||null}}();function rA(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(i){$k(!1)}return $k(!!n&&-1!==(e||["active"]).indexOf(n)),n}var oA=262144,sA=function(){return function(t,e,n){if("function"==typeof t||Ek(e)||Ek(n))this.next=t,this.error=e||null,this.complete=n||null;else{var i=t;this.next=i.next||null,this.error=i.error||null,this.complete=i.complete||null}}}(),aA=function(){return function(t,e,n,i,r,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=i,this.task=r,this.ref=o}}();function uA(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var lA=function(){function t(t,e,n,i,r,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=r,this.metadata_=o,this.mappings_=i,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=_k,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(rk)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(Ok))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(rk)?s.completeTransitions_():(s.error_=t,s.transition_(Ok))},this.promise_=new Promise((function(t,e){s.resolve_=t,s.reject_=e,s.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===_k&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.service_.getAuthToken().then((function(n){switch(e.state_){case _k:t(n);break;case Ck:e.transition_(Ik);break;case wk:e.transition_(xk)}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,i,r){var o=e.bucketOnlyServerUrl(),s=nA(e,i,r),a={name:s.fullPath},u=Wk(o),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=Xk(s,n),c=new Qk(u,"POST",(function(t){var e;rA(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){$k(!1)}return $k(kk(e)),e}),t.maxUploadRetryTime);return c.urlParams=a,c.headers=l,c.body=h,c.errorHandler=Jk(e),c}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),i=t.service_.makeRequest(n,e);t.request_=i,i.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var i=function(t,e,n,i){var r=new Qk(n,"POST",(function(t){var e=rA(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){$k(!1)}n||$k(!1);var r=Number(n);return $k(!isNaN(r)),new iA(r,i.size(),"final"===e)}),t.maxUploadRetryTime);return r.headers={"X-Goog-Upload-Command":"query"},r.errorHandler=Jk(e),r}(t.service_,t.location_,e,t.blob_),r=t.service_.makeRequest(i,n);t.request_=r,r.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=oA*this.chunkMultiplier_,n=new iA(this.transferred_,this.blob_.size()),i=this.uploadUrl_;this.resolveToken_((function(r){var o;try{o=function(t,e,n,i,r,o,s,a){var u=new iA(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=i.size()),i.size()!==u.total)throw new ik("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,h=l;r>0&&(h=Math.min(h,r));var c=u.current,p={"X-Goog-Upload-Command":h===l?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=i.slice(c,c+h);if(null===d)throw lk();var f=new Qk(n,"POST",(function(t,n){var r,s=rA(t,["active","final"]),a=u.current+h,l=i.size();return r="final"===s?Zk(e,o)(t,n):null,new iA(a,l,"final"===s,r)}),e.maxUploadRetryTime);return f.headers=p,f.body=d.uploadData(),f.progressCallback=a||null,f.errorHandler=Jk(t),f}(t.location_,t.service_,i,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(a){return t.error_=a,void t.transition_(Ok)}var s=t.service_.makeRequest(o,r);t.request_=s,s.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(Pk)):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){oA*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=eA(t.service_,t.location_,t.mappings_),i=t.service_.makeRequest(n,e);t.request_=i,i.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_(Pk)}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,i,r){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=nA(e,i,r),l=Xk(u,n),h=Lk.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",i,"\r\n--"+a+"--");if(null===h)throw lk();var c={name:u.fullPath},p=Wk(o),d=t.maxUploadRetryTime,f=new Qk(p,"POST",Zk(t,n),d);return f.urlParams=c,f.headers=s,f.body=h.uploadData(),f.errorHandler=Jk(e),f}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),i=t.service_.makeRequest(n,e);t.request_=i,i.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(Pk)}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case Ck:case wk:this.state_=t,null!==this.request_&&this.request_.cancel();break;case _k:var e=this.state_===xk;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case xk:this.state_=t,this.notifyObservers_();break;case Ik:this.error_=uk(),this.state_=t,this.notifyObservers_();break;case Ok:case Pk:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case wk:this.transition_(xk);break;case Ck:this.transition_(Ik);break;case _k:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Tk(this.state_);return new aA(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,i){var r=this,o=new sA(e,n,i);return this.addObserver_(o),function(){r.removeObserver_(o)}},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Tk(this.state_)){case Sk.SUCCESS:uA(this.resolve_.bind(null,this.snapshot))();break;case Sk.CANCELED:case Sk.ERROR:uA(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(Tk(this.state_)){case Sk.RUNNING:case Sk.PAUSED:t.next&&uA(t.next.bind(t,this.snapshot))();break;case Sk.SUCCESS:t.complete&&uA(t.complete.bind(t))();break;case Sk.CANCELED:case Sk.ERROR:t.error&&uA(t.error.bind(t,this.error_))();break;default:t.error&&uA(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){var t=this.state_===xk||this.state_===wk;return t&&this.transition_(_k),t},t.prototype.pause=function(){var t=this.state_===_k;return t&&this.transition_(wk),t},t.prototype.cancel=function(){var t=this.state_===_k||this.state_===wk;return t&&this.transition_(Ck),t},t}(),hA=function(){function t(t,e){this.service=t,this.location=e instanceof Uk?e:Uk.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(Yk)return Yk;var t=[];t.push(new Gk("bucket")),t.push(new Gk("generation")),t.push(new Gk("metageneration")),t.push(new Gk("name","fullPath",!0));var e=new Gk("name");e.xform=function(t,e){return function(t){return!kk(t)||t.length<2?t:Hk(t)}(e)},t.push(e);var n=new Gk("size");return n.xform=function(t,e){return Ek(e)?Number(e):e},t.push(n),t.push(new Gk("timeCreated")),t.push(new Gk("updated")),t.push(new Gk("md5Hash",null,!0)),t.push(new Gk("cacheControl",null,!0)),t.push(new Gk("contentDisposition",null,!0)),t.push(new Gk("contentEncoding",null,!0)),t.push(new Gk("contentLanguage",null,!0)),t.push(new Gk("contentType",null,!0)),t.push(new Gk("metadata","customMetadata",!0)),Yk=t}()},t.prototype.child=function(t){var e=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new Uk(this.location.bucket,e);return this.newRef(this.service,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Uk(this.location.bucket,t);return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new Uk(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Hk(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),this.throwIfRoot_("put"),new lA(this,this.service,this.location,this.mappings(),new Lk(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=dk.RAW),this.throwIfRoot_("putString");var i=gk(e,t),r=Object.assign({},n);return!Ek(r.contentType)&&Ek(i.contentType)&&(r.contentType=i.contentType),new lA(this,this.service,this.location,this.mappings(),new Lk(i.data,!0),r)},t.prototype.delete=function(){var t=this;return this.throwIfRoot_("delete"),this.service.getAuthToken().then((function(e){var n=function(t,e){var n=Wk(e.fullServerUrl()),i=new Qk(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return i.successCodes=[200,204],i.errorHandler=tA(e),i}(t.service,t.location);return t.service.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return[4,this.list({pageToken:e})];case 1:return n=o.sent(),(i=t.prefixes).push.apply(i,n.prefixes),(r=t.items).push.apply(r,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(t,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){var e=this,n=t||{};return"number"==typeof n.maxResults&&jk("options.maxResults",1,1e3,n.maxResults),this.service.getAuthToken().then((function(t){var i=function(t,e,n,i,r){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),i&&(o.pageToken=i),r&&(o.maxResults=r);var s=Wk(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new Qk(s,"GET",function(t,e){return function(n,i){var r=function(t,e,n){var i=Bk(n);return null===i?null:function(t,e,n){var i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var r=0,o=n.prefixes;r<o.length;r++){var s=o[r].replace(/\/$/,""),a=t.makeStorageReference(new Uk(e,s));i.prefixes.push(a)}if(n.items)for(var u=0,l=n.items;u<l.length;u++)a=t.makeStorageReference(new Uk(e,l[u].name)),i.items.push(a);return i}(t,e,i)}(t,e,i);return $k(null!==r),r}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Jk(e),u}(e.service,e.location,"/",n.pageToken,n.maxResults);return e.service.makeRequest(i,t).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then((function(e){var n=eA(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then((function(n){var i=function(t,e,n,i){var r=Wk(e.fullServerUrl()),o=Xk(n,i),s=t.maxOperationRetryTime,a=new Qk(r,"PATCH",Zk(t,i),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=tA(e),a}(e.service,e.location,t,e.mappings());return e.service.makeRequest(i,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then((function(e){var n=function(t,e,n){var i=Wk(e.fullServerUrl()),r=t.maxOperationRetryTime,o=new Qk(i,"GET",function(t,e){return function(n,i){var r=Kk(t,i,e);return $k(null!==r),function(t,e){var n=Bk(e);if(null===n)return null;if(!kk(n.downloadTokens))return null;var i=n.downloadTokens;if(0===i.length)return null;var r=encodeURIComponent;return i.split(",").map((function(e){var n=t.fullPath;return Wk("/b/"+r(t.bucket)+"/o/"+r(n))+zk({alt:"media",token:e})}))[0]}(r,i)}}(t,n),r);return o.errorHandler=tA(e),o}(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new ik("no-download-url","The given file does not have any download URLs.");return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new ik("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),cA=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),pA=function(){function t(t,e,n,i,r,o,s,a,u,l,h){var c=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=i,this.successCodes_=r.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=l,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){c.resolve_=t,c.reject_=e,c.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var i,r=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?r(a):r()}catch(u){o(u)}else null!==s?((i=ak()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,i):i)):o(i=n.canceled?t.appDelete_?hk():uk():new ik("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new dA(!1,null,!0)):this.backoffId_=function(e,n,i){var r=1,o=null,s=!1,a=0;function u(){return 2===a}var l=!1;function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l||(l=!0,n.apply(null,t))}function c(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new dA(!1,null,!0));else{var i=t.pool_.createXhrIo();t.pendingXhr_=i,null!==t.progressCallback_&&i.addUploadProgressListener(r),i.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(r),t.pendingXhr_=null;var i=(n=n).getErrorCode()===Rk.NO_ERROR,o=n.getStatus();if(i&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new dA(s,n))}else{var a=n.getErrorCode()===Rk.ABORT;e(!1,new dA(!1,null,a))}}))}function r(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(p,u())}),e)}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!l)if(t)h.call.apply(h,Object(ag.g)([null,t],e));else{var i;u()||s?h.call.apply(h,Object(ag.g)([null,t],e)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),c(i))}}var d=!1;function f(t){d||(d=!0,l||(null!==o?(t||(a=2),clearTimeout(o),c(0)):t||(a=1)))}return c(0),setTimeout((function(){s=!0,f(!0)}),i),f}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),i=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||i},t}(),dA=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}(),fA=function(){function t(e,n,i,r){var o;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,this.authProvider_=n,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=i,this.bucket_=null!=r?Uk.makeFromBucketSpec(r):t.extractBucket_(null===(o=this.app_)||void 0===o?void 0:o.options),this.internals_=new gA(this)}return t.extractBucket_=function(t){var e=null==t?void 0:t.storageBucket;return null==e?null:Uk.makeFromBucketSpec(e)},t.prototype.getAuthToken=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t,e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return(t=this.authProvider_.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(t){return t.cancel()})),this.requests_.clear()},t.prototype.makeStorageReference=function(t){return new hA(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new cA(hk());var i=function(t,e,n,i){var r=zk(t.urlParams),o=t.url+r,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==sg.a?sg.a.SDK_VERSION:"AppManager")}(s),new pA(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this.appId_,e,this.pool_);return this.requests_.add(i),i.getPromise().then((function(){return n.requests_.delete(i)}),(function(){return n.requests_.delete(i)})),i},t.prototype.ref=function(t){if(/^[A-Za-z]+:\/\//.test(t))throw new ik(ok,"Expected child path but got a URL, use refFromURL instead.");if(null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new hA(this,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw new ik(ok,"Expected full URL but got a child path, use ref instead.");try{Uk.makeFromUrl(t)}catch(e){throw new ik(ok,"Expected valid full URL but got an invalid one.")}return new hA(this,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){jk("time",0,Number.POSITIVE_INFINITY,t),this.maxUploadRetryTime_=t},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){jk("time",0,Number.POSITIVE_INFINITY,t),this.maxOperationRetryTime_=t},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),t}(),gA=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},t}();function yA(t,e){var n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new fA(n,i,new Nk,e)}!function(t){var e={TaskState:Sk,TaskEvent:bk,StringFormat:dk,Storage:fA,Reference:hA};t.INTERNAL.registerComponent(new ab.a("storage",yA,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.1")}(sg.a);var mA,vA,bA,_A="0.4.4",wA=_A,xA="FB-PERF-TRACE-MEASURE",PA="_wt_",CA="_fcp",IA="_fid",OA="@firebase/performance/config",SA="@firebase/performance/configexpire",TA="Performance",EA=((mA={})["trace started"]="Trace {$traceName} was started before.",mA["trace stopped"]="Trace {$traceName} is not running.",mA["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",mA["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",mA["no window"]="Window is not available.",mA["no app id"]="App id is not available.",mA["no project id"]="Project id is not available.",mA["no api key"]="Api key is not available.",mA["invalid cc log"]="Attempted to queue invalid cc event",mA["FB not default"]="Performance can only start when Firebase app instance is the default one.",mA["RC response not ok"]="RC response is not ok",mA["invalid attribute name"]="Attribute name {$attributeName} is invalid.",mA["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",mA["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",mA["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",mA),kA=new lg.b("performance",TA,EA),AA=new ug.b(TA);AA.logLevel=ug.a.INFO;var DA,jA=function(){function t(t){if(this.window=t,!t)throw kA.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(lg.w)()||(AA.info("IndexedDB is not supported by current browswer"),!1):(AA.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,i=t.getEntries();n<i.length;n++)e(i[n])})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===vA&&(vA=new t(bA)),vA},t}();function RA(t,e){var n=t.length-e.length;if(n<0||n>1)throw kA.create("invalid String merger input");for(var i=[],r=0;r<t.length;r++)i.push(t.charAt(r)),e.length>r&&i.push(e.charAt(r));return i.join("")}var MA,NA=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=RA("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=RA("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw kA.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw kA.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw kA.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===DA&&(DA=new t),DA},t}();function FA(){return MA}var VA=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),LA=["firebase_","google_","ga_"],UA=new RegExp("^[a-zA-Z]\\w*$");function BA(){var t=jA.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function HA(){switch(jA.getInstance().document.visibilityState){case"visible":return VA.VISIBLE;case"hidden":return VA.HIDDEN;default:return VA.UNKNOWN}}function WA(){var t=jA.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function zA(t){if(!t)return t;var e=NA.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=qA(e.tracesSamplingRate),e.logNetworkAfterSampling=qA(e.networkRequestsSamplingRate),t}function qA(t){return Math.random()<=t}var GA,YA=1;function KA(){return YA=2,GA=GA||function(){var t=jA.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=NA.getInstance().installationsService.getId()).then((function(t){MA=t})),t;var t})).then((function(t){return function(t){var e=function(){var t=jA.getInstance().localStorage;if(t){var e=t.getItem(SA);if(e&&Number(e)>Date.now()){var n=t.getItem(OA);if(n)try{return JSON.parse(n)}catch(i){return}}}}();return e?(zA(e),Promise.resolve()):function(t){return(e=NA.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+NA.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+NA.getInstance().getApiKey(),i=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:NA.getInstance().getAppId(),app_version:wA,sdk_version:"0.0.1"})});return fetch(i).then((function(t){if(t.ok)return t.json();throw kA.create("RC response not ok")}))})).catch((function(){AA.info("Could not fetch config, will use default configs")}));var e}(t).then(zA).then((function(t){return function(t){var e=jA.getInstance().localStorage;t&&e&&(e.setItem(OA,JSON.stringify(t)),e.setItem(SA,String(Date.now()+60*NA.getInstance().configTimeToLive*60*1e3)))}(t)}),(function(){}))}(t)})).then((function(){return XA()}),(function(){return XA()}))}function XA(){YA=3}var QA,$A=1e4,ZA=3,JA=[],tD=!1;function eD(t){if(!t.eventTime||!t.message)throw kA.create("invalid cc log");JA=Object(ag.g)(JA,[t])}function nD(t,e){var n;QA||(n=oD,QA=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];eD({message:n.apply(void 0,t),eventTime:Date.now()})}),QA(t,e)}function iD(t){var e=NA.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&jA.getInstance().requiredApisAvailable()&&(t.isAuto&&HA()!==VA.VISIBLE||(3===YA?rD(t):KA().then((function(){return rD(t)}),(function(){return rD(t)}))))}function rD(t){if(FA()){var e=NA.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return nD(t,1)}),0)}}function oD(t,e){return 0===e?(i={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},r={application_info:sD(),network_request_metric:i},JSON.stringify(r)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var i={application_info:sD(),trace_metric:e};return JSON.stringify(i)}(t);var n,i,r}function sD(){return{google_app_id:NA.getInstance().getAppId(),app_instance_id:FA(),web_app_info:{sdk_version:wA,page_url:jA.getInstance().getUrl(),service_worker_status:BA(),visibility_state:HA(),effective_connection_type:WA()},application_process_state:0}}var aD=["_fp",CA,IA],uD=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=jA.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw kA.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw kA.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),iD(this)},t.prototype.record=function(t,e,n){if(t<=0)throw kA.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw kA.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(ag.a)({},n.attributes)),n&&n.metrics)for(var i=0,r=Object.keys(n.metrics);i<r.length;i++){var o=r[i];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}iD(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith(PA)&&aD.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw kA.create("invalid custom metric name",{customMetricName:t});var n,i;this.counters[t]=(n=e,(i=Math.floor(n))<n&&AA.info("Metric value should be an Integer, setting the value as : "+i+"."),i)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||LA.some((function(e){return t.startsWith(e)}))||!t.match(UA))}(t),i=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&i)this.customAttributes[t]=e;else{if(!n)throw kA.create("invalid attribute name",{attributeName:t});if(!i)throw kA.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(ag.a)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,i){var r=jA.getInstance().getUrl();if(r){var o=new t(PA+r,!0),s=Math.floor(1e3*jA.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find((function(t){return"first-paint"===t.name}));a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric(CA,Math.floor(1e3*u.startTime)),i&&o.putMetric(IA,Math.floor(1e3*i))}iD(o)}},t.createUserTimingTrace=function(e){iD(new t(e,!1,e))},t}();function lD(t){var e=t;if(e&&void 0!==e.responseStart){var n=jA.getInstance().getTimeOrigin(),i=Math.floor(1e3*(e.startTime+n)),r=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=NA.getInstance();if(e.instrumentationEnabled){var n=t.url,i=e.logEndPointUrl.split("?")[0],r=e.flTransportEndpointUrl.split("?")[0];n!==i&&n!==r&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return nD(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:i,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:o})}}function hD(){FA()&&(setTimeout((function(){return function(){var t=jA.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var i=setTimeout((function(){uD.createOobTrace(e,n),i=void 0}),5e3);t.onFirstInputDelay((function(t){i&&(clearTimeout(i),uD.createOobTrace(e,n,t))}))}else uD.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=jA.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)lD(n[e]);t.setupObserver("resource",lD)}()}),0),setTimeout((function(){return function(){for(var t=jA.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)cD(n[e]);t.setupObserver("measure",cD)}()}),0))}function cD(t){var e=t.name;e.substring(0,xA.length)!==xA&&uD.createUserTimingTrace(e)}var pD=function(){function t(t){this.app=t,jA.getInstance().requiredApisAvailable()&&Object(lg.N)().then((function(t){t&&(tD||(function t(e){setTimeout((function(){if(0!==ZA)return JA.length?void function(){var e=Object(ag.g)(JA);JA=[];var n=e.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}));(function(e,n){return function(t){var e=NA.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(e).then((function(t){return t.ok||AA.info("Call to Firebase backend failed."),t.json()})).then((function(e){var i=Number(e.nextRequestWaitMillis),r=$A;isNaN(i)||(r=Math.max(i,r));var o=e.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(JA=Object(ag.g)(n,JA),AA.info("Retry transport request later.")),ZA=3,t(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:NA.getInstance().logSource,log_event:n},e).catch((function(){JA=Object(ag.g)(e,JA),ZA--,AA.info("Tries left: "+ZA+"."),t($A)}))}():t($A)}),e)}(5500),tD=!0),KA().then(hD,hD))})).catch((function(t){AA.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new uD(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return NA.getInstance().instrumentationEnabled},set:function(t){NA.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return NA.getInstance().dataCollectionEnabled},set:function(t){NA.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new ab.a("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw kA.create("FB not default");if("undefined"==typeof window)throw kA.create("no window");return function(t){bA=t}(window),NA.getInstance().firebaseAppInstance=t,NA.getInstance().installationsService=e,new pD(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC")),t.registerVersion("@firebase/performance",_A)}(sg.a);var dD,fD="https://www.googletagmanager.com/gtag/js",gD=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),yD=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),mD=new ug.b("@firebase/analytics");function vD(t,e,n,i,r,o){return Object(ag.b)(this,void 0,void 0,(function(){var s,a,u,l;return Object(ag.d)(this,(function(h){switch(h.label){case 0:s=i[r],h.label=1;case 1:return h.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return h.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=h.sent(),(u=a.find((function(t){return t.measurementId===r})))?[4,e[u.appId]]:[3,6];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return l=h.sent(),mD.error(l),[3,8];case 8:return t(gD.CONFIG,r,o),[2]}}))}))}function bD(t,e,n,i,r){return Object(ag.b)(this,void 0,void 0,(function(){var o,s,a,u,l,h,c;return Object(ag.d)(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],r&&r.send_to?(s=r.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=p.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),i=n&&e[n.appId];if(!i)return o=[],"break";o.push(i)},l=0,h=s;l<h.length&&"break"!==u(h[l]);l++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(gD.EVENT,i,r||{}),[3,5];case 4:return c=p.sent(),mD.error(c),[3,5];case 5:return[2]}}))}))}var _D=((dD={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",dD["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",dD["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",dD["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",dD["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",dD["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",dD["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",dD["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',dD["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',dD),wD=new lg.b("analytics","Analytics",_D),xD=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function PD(t){var e;return Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s,a;return Object(ag.d)(this,(function(u){switch(u.label){case 0:return n=t.appId,i={method:"GET",headers:(l=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":l}))},r="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(r,i)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw wD.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var l}))}))}function CD(t,e,n,i){var r=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===i&&(i=xD),Object(ag.b)(this,void 0,void 0,(function(){var e,s,a,u,l,h,c;return Object(ag.d)(this,(function(p){switch(p.label){case 0:e=t.appId,s=t.measurementId,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,ID(n,r)];case 2:return p.sent(),[3,4];case 3:if(a=p.sent(),s)return mD.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return p.trys.push([4,6,,7]),[4,PD(t)];case 5:return u=p.sent(),i.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof lg.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l=p.sent())){if(i.deleteThrottleMetadata(e),s)return mD.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:e,measurementId:s}];throw l}return h=503===Number(l.customData.httpStatus)?Object(lg.j)(o,i.intervalMillis,30):Object(lg.j)(o,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},i.setThrottleMetadata(e,c),mD.debug("Calling attemptFetch again in "+h+" millis"),[2,CD(t,c,n,i)];case 7:return[2]}}))}))}function ID(t,e){return new Promise((function(n,i){var r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener((function(){clearTimeout(o),i(wD.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var OD,SD,TD=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),ED={},kD=[],AD={},DD="dataLayer",jD="gtag",RD=!1;function MD(t){if(RD)throw wD.create("already-initialized");t.dataLayerName&&(DD=t.dataLayerName),t.gtagName&&(jD=t.gtagName)}var ND="analytics";function FD(){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){switch(t.label){case 0:if(Object(lg.s)())return[2,!1];if(!Object(lg.e)())return[2,!1];if(!Object(lg.w)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(lg.N)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new ab.a(ND,(function(t){return function(t,e){!function(){var t=[];if(Object(lg.s)()&&t.push("This is a browser extension environment."),Object(lg.e)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=wD.create("invalid-analytics-context",{errorInfo:e});mD.warn(n.message)}}();var n=t.options.appId;if(!n)throw wD.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw wD.create("no-api-key");mD.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=ED[n])throw wD.create("already-exists",{id:n});if(!RD){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var i=n[e];if(i.src&&i.src.includes(fD))return i}return null})()||function(t){var e=document.createElement("script");e.src=fD+"?l="+t,e.async=!0,document.head.appendChild(e)}(DD),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(DD);var i=function(t,e,n,i,r){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(o=window[r]),window[r]=function(t,e,n,i){return function(r,o,s){return Object(ag.b)(this,void 0,void 0,(function(){var a;return Object(ag.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),r!==gD.EVENT?[3,2]:[4,bD(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return r!==gD.CONFIG?[3,4]:[4,vD(t,e,n,i,o,s)];case 3:return u.sent(),[3,5];case 4:t(gD.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),mD.error(a),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}(ED,kD,AD,DD,jD);SD=i.wrappedGtag,OD=i.gtagCore,RD=!0}return ED[n]=function(t,e,n,i,r){return Object(ag.b)(this,void 0,void 0,(function(){var o,s,a,u,l,h,c;return Object(ag.d)(this,(function(p){switch(p.label){case 0:return(o=function(t,e,n){return void 0===e&&(e=xD),Object(ag.b)(this,void 0,void 0,(function(){var n,i,r,o,s,a,u=this;return Object(ag.d)(this,(function(l){if(r=(n=t.options).apiKey,o=n.measurementId,!(i=n.appId))throw wD.create("no-app-id");if(!r){if(o)return[2,{measurementId:o,appId:i}];throw wD.create("no-api-key")}return s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new TD,setTimeout((function(){return Object(ag.b)(u,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){return a.abort(),[2]}))}))}),6e4),[2,CD({appId:i,apiKey:r,measurementId:o},s,a,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&mD.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return mD.error(t)})),e.push(o),s=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t;return Object(ag.d)(this,(function(e){switch(e.label){case 0:return Object(lg.w)()?[3,1]:(mD.warn(wD.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(lg.N)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),mD.warn(wD.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?i.getId():void 0})),[4,Promise.all([o,s])];case 1:return a=p.sent(),u=a[0],l=a[1],r("js",new Date),(c={}).origin="firebase",c.update=!0,h=c,null!=l&&(h.firebase_id=l),r(gD.CONFIG,u.measurementId,h),[2,u.measurementId]}}))}))}(t,kD,AD,e,OD),{app:t,logEvent:function(t,e,i){(function(t,e,n,i,r){return Object(ag.b)(this,void 0,void 0,(function(){var o,s;return Object(ag.d)(this,(function(a){switch(a.label){case 0:return r&&r.global?(t(gD.EVENT,n,i),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Object(ag.a)(Object(ag.a)({},i),{send_to:o}),t(gD.EVENT,n,s),a.label=3;case 3:return[2]}}))}))})(SD,ED[n],t,e,i).catch((function(t){return mD.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,i){return Object(ag.b)(this,void 0,void 0,(function(){var r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return i&&i.global?(t(gD.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:r=o.sent(),t(gD.CONFIG,r,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(SD,ED[n],t,e).catch((function(t){return mD.error(t)}))},setUserId:function(t,e){(function(t,e,n,i){return Object(ag.b)(this,void 0,void 0,(function(){var r;return Object(ag.d)(this,(function(o){switch(o.label){case 0:return i&&i.global?(t(gD.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:r=o.sent(),t(gD.CONFIG,r,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(SD,ED[n],t,e).catch((function(t){return mD.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,i){return Object(ag.b)(this,void 0,void 0,(function(){var r,o,s,a,u;return Object(ag.d)(this,(function(l){switch(l.label){case 0:if(!i||!i.global)return[3,1];for(r={},o=0,s=Object.keys(n);o<s.length;o++)r["user_properties."+(a=s[o])]=n[a];return t(gD.SET,r),[2,Promise.resolve()];case 1:return[4,e];case 2:u=l.sent(),t(gD.CONFIG,u,{update:!0,user_properties:n}),l.label=3;case 3:return[2]}}))}))})(SD,ED[n],t,e).catch((function(t){return mD.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return[4,t];case 1:return n=i.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(ED[n],t).catch((function(t){return mD.error(t)}))},INTERNAL:{delete:function(){return delete ED[n],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:MD,EventName:yD,isSupported:FD})),t.INTERNAL.registerComponent(new ab.a("analytics-internal",(function(t){try{return{logEvent:t.getProvider(ND).getImmediate().logEvent}}catch(e){throw wD.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.2")}(sg.a);var VD,LD=function(){function t(t,e,n,i){this.client=t,this.storage=e,this.storageCache=n,this.logger=i}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,i=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+i+"."),i},t.prototype.fetch=function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i,r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(i=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,i]:(t.eTag=i&&i.eTag,[4,this.client.fetch(t)]);case 2:return r=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===r.status&&o.push(this.storage.setLastSuccessfulFetchResponse(r)),[4,Promise.all(o)];case 3:return s.sent(),[2,r]}}))}))},t}(),UD=((VD={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",VD["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",VD["registration-api-key"]="Undefined API key. Check Firebase app initialization.",VD["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",VD["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",VD["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",VD["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",VD["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",VD["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",VD["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',VD["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',VD["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",VD["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",VD),BD=new lg.b("remoteconfig","Remote Config",UD),HD=function(){function t(t,e,n,i,r,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=i,this.apiKey=r,this.appId=o}return t.prototype.fetch=function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,u,l,h,c,p,d,f,g,y;return Object(ag.d)(this,(function(m){switch(m.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=m.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",i=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===v&&(v=navigator),v.languages&&v.languages[0]||v.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(r)},s=fetch(i,o),a=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),m.label=2;case 2:return m.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return m.sent(),[4,s];case 4:return u=m.sent(),[3,6];case 5:throw l=m.sent(),h="fetch-client-network","AbortError"===l.name&&(h="fetch-timeout"),BD.create(h,{originalErrorMessage:l.message});case 6:if(c=u.status,p=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,m.label=7;case 7:return m.trys.push([7,9,,10]),[4,u.json()];case 8:return g=m.sent(),[3,10];case 9:throw y=m.sent(),BD.create("fetch-client-parse",{originalErrorMessage:y.message});case 10:d=g.entries,f=g.state,m.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===f?c=500:"NO_CHANGE"===f?c=304:"NO_TEMPLATE"!==f&&"EMPTY_CONFIG"!==f||(d={}),304!==c&&200!==c)throw BD.create("fetch-status",{httpStatus:c});return[2,{status:c,eTag:p,config:d}]}var v}))}))},t}(),WD=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),zD=["1","true","t","yes","y","on"],qD=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&zD.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),GD=function(){function t(t,e,n,i,r){this.app=t,this._client=e,this._storageCache=n,this._storage=i,this._logger=r,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ug.a.DEBUG;break;case"silent":this._logger.logLevel=ug.a.SILENT;break;default:this._logger.logLevel=ug.a.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t,e,n;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=i.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return i.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t,e,n,i=this;return Object(ag.d)(this,(function(r){switch(r.label){case 0:t=new WD,setTimeout((function(){return Object(ag.b)(i,void 0,void 0,(function(){return Object(ag.d)(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return r.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return r.sent(),[3,6];case 4:return e=r.sent(),n=(o=e)instanceof lg.c&&-1!==o.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw r.sent(),e;case 6:return[2]}var o}))}))},t.prototype.fetchAndActivate=function(){return Object(ag.b)(this,void 0,void 0,(function(){return Object(ag.d)(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(ag.a)(Object(ag.a)({},t),e))).reduce((function(t,e){return t[e]=n.getValue(e),t}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new qD("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new qD("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new qD("static"))},t}();function YD(t,e){var n=t.target.error||void 0;return BD.create(e,{originalErrorMessage:n&&n.message})}var KD="app_namespace_store",XD=function(){function t(t,e,n,i){void 0===i&&(i=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(YD(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(KD,{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=i}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return e=i.sent(),[2,new Promise((function(i,r){var o=e.transaction([KD],"readonly").objectStore(KD),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){r(YD(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;i(e?e.value:void 0)}}catch(u){r(BD.create("storage-get",{originalErrorMessage:u&&u.message}))}}))]}}))}))},t.prototype.set=function(t,e){return Object(ag.b)(this,void 0,void 0,(function(){var n,i=this;return Object(ag.d)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return n=r.sent(),[2,new Promise((function(r,o){var s=n.transaction([KD],"readwrite").objectStore(KD),a=i.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(YD(t,"storage-set"))},u.onsuccess=function(){r()}}catch(l){o(BD.create("storage-set",{originalErrorMessage:l&&l.message}))}}))]}}))}))},t.prototype.delete=function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ag.d)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return e=i.sent(),[2,new Promise((function(i,r){var o=e.transaction([KD],"readwrite").objectStore(KD),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){r(YD(t,"storage-delete"))},a.onsuccess=function(){i()}}catch(u){r(BD.create("storage-delete",{originalErrorMessage:u&&u.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),QD=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(ag.b)(this,void 0,void 0,(function(){var t,e,n,i,r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(i=s.sent())&&(this.lastFetchStatus=i),[4,e];case 2:return(r=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=r),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function $D(t,e){return new Promise((function(n,i){var r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener((function(){clearTimeout(o),i(BD.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var ZD,JD=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(ag.b)(this,void 0,void 0,(function(){var e;return Object(ag.d)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,i=e.backoffCount;return Object(ag.b)(this,void 0,void 0,(function(){var e,r,o;return Object(ag.d)(this,(function(s){switch(s.label){case 0:return[4,$D(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof lg.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(r=s.sent()))throw r;return o={throttleEndTimeMillis:Date.now()+Object(lg.j)(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),tj="@firebase/remote-config";(ZD=sg.a).INTERNAL.registerComponent(new ab.a("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw BD.create("registration-window");var r=n.options,o=r.projectId,s=r.apiKey,a=r.appId;if(!o)throw BD.create("registration-project-id");if(!s)throw BD.create("registration-api-key");if(!a)throw BD.create("registration-app-id");var u=new XD(a,n.name,e=e||"firebase"),l=new QD(u),h=new ug.b(tj);h.logLevel=ug.a.ERROR;var c=new HD(i,ZD.SDK_VERSION,e,o,s,a),p=new JD(c,u),d=new LD(p,u,l,h),f=new GD(n,d,l,u,h);return f.ensureInitialized(),f}),"PUBLIC").setMultipleInstances(!0)),ZD.registerVersion(tj,"0.1.30"),sg.a.registerVersion("firebase","8.0.1","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),sg.a.registerVersion("firebase","8.0.1");let ej=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return xl(this.value);case"E":return t=this.error,new v(e=>e.error(t));case"C":return Dl()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function nj(t,e=0){return function(n){return n.lift(new ij(t,e))}}class ij{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new rj(t,this.scheduler,this.delay))}}class rj extends f{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(rj.dispatch,this.delay,new oj(t,this.destination)))}_next(t){this.scheduleMessage(ej.createNext(t))}_error(t){this.scheduleMessage(ej.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(ej.createComplete()),this.unsubscribe()}}class oj{constructor(t,e){this.notification=t,this.destination=e}}class sj extends c{constructor(t,e){super()}schedule(t,e=0){return this}}class aj extends sj{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,i=void 0;try{this.work(t)}catch(r){n=!0,i=!!r&&r||new Error(r)}if(n)return this.unsubscribe(),i}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}class uj extends aj{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}let lj=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class hj extends lj{constructor(t,e=lj.now){super(t,()=>hj.delegate&&hj.delegate!==this?hj.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return hj.delegate&&hj.delegate!==this?hj.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}class cj extends hj{}const pj=new cj(uj),dj=pj;class fj extends P{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new gj(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let o;if(this.closed)throw new _;if(this.isStopped||this.hasError?o=c.EMPTY:(this.observers.push(t),o=new w(this,t)),i&&t.add(t=new rj(t,i)),e)for(let s=0;s<r&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<r&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||dj).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let o=0;for(;o<r&&!(t-i[o].time<n);)o++;return r>e&&(o=Math.max(o,r-e)),o>0&&i.splice(0,o),i}}class gj{constructor(t,e){this.time=t,this.value=e}}const yj=new hj(aj);let mj=1;const vj=(()=>Promise.resolve())(),bj={};function _j(t){return t in bj&&(delete bj[t],!0)}const wj={setImmediate(t){const e=mj++;return bj[e]=!0,vj.then(()=>_j(e)&&t()),e},clearImmediate(t){_j(t)}};class xj extends aj{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=wj.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(wj.clearImmediate(e),t.scheduled=void 0)}}class Pj extends hj{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,i=-1,r=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++i<r&&(t=e.shift()));if(this.active=!1,n){for(;++i<r&&(t=e.shift());)t.unsubscribe();throw n}}}const Cj=new Pj(xj);class Ij extends v{constructor(t,e=0,n=Cj){var i;super(),this.source=t,this.delayTime=e,this.scheduler=n,(u(i=e)||!(i-parseFloat(i)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=Cj)}static create(t,e=0,n=Cj){return new Ij(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(Ij.dispatch,this.delayTime,{source:this.source,subscriber:t})}}class Oj{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new Ij(e,this.delay,this.scheduler).subscribe(t)}}function Sj(){}sg.a.registerVersion("firebase","8.0.1","app");class Tj{constructor(t,e=pj){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const i=this.zone;return this.delegate.schedule((function(e){i.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class Ej{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sj,{},Sj,Sj)),e.pipe(hh({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class kj{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Tj(Zone.current)),this.insideAngular=t.run(()=>new Tj(Zone.current,yj))}}const Aj=["ngOnDestroy"],Dj=new Nt("angularfire2.app.options"),jj=new Nt("angularfire2.app.nameOrConfig"),Rj=new ks("6.0.4");function Mj(t,e,n){const i="object"==typeof n&&n||{};return i.name=i.name||"string"==typeof n&&n||"[DEFAULT]",sg.a.apps.filter(t=>t&&t.name===i.name)[0]||e.runOutsideAngular(()=>sg.a.initializeApp(t,i))}const Nj={provide:class{},useFactory:Mj,deps:[Dj,Na,[new nt,jj]]};let Fj=(()=>{class t{constructor(t){sg.a.registerVersion("angularfire",Rj.full,t.toString()),sg.a.registerVersion("angular",As.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:Dj,useValue:e},{provide:jj,useValue:n}]}}}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Yt(wa))},providers:[Nj]}),t})(),Vj=(()=>{class t{constructor(t,e,i,r){const o=new kj(r),s=function(t){return function(e){return(e=e.lift(new Ej(t.ngZone))).pipe(function(t,e=0){return function(n){return n.lift(new Oj(t,e))}}(t.outsideAngular),nj(t.insideAngular))}}(o),a=xl(void 0).pipe(nj(o.outsideAngular),Xl(()=>r.runOutsideAngular(()=>n.e(7).then(n.bind(null,"6nsN")))),O(()=>Mj(t,r,e)),O(t=>r.runOutsideAngular(()=>t.auth())),function(t,e,n){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:void 0,refCount:!1,scheduler:void 0},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let r,o,s=0,a=!1,u=!1;return function(l){let h;s++,!r||a?(a=!1,r=new fj(t,e,i),h=r.subscribe(this),o=l.subscribe({next(t){r.next(t)},error(t){a=!0,r.error(t)},complete(){u=!0,o=void 0,r.complete()}})):h=r.subscribe(this),this.add(()=>{s--,h.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}({bufferSize:1,refCount:!1}));return function(t){return"server"===t}(i)?this.authState=this.user=this.idToken=this.idTokenResult=xl(null):(a.pipe(uh()).subscribe(),this.authState=a.pipe(Xl(t=>t.getRedirectResult().then(()=>t,()=>t)),Xl(t=>r.runOutsideAngular(()=>new v(t.onAuthStateChanged.bind(t)))),s),this.user=a.pipe(Xl(t=>t.getRedirectResult().then(()=>t,()=>t)),Xl(t=>r.runOutsideAngular(()=>new v(t.onIdTokenChanged.bind(t)))),s),this.idToken=this.user.pipe(Xl(t=>t?N(t.getIdToken()):xl(null))),this.idTokenResult=this.user.pipe(Xl(t=>t?N(t.getIdTokenResult()):xl(null)))),((t,e,n)=>new Proxy(t,{get:(i,r)=>n.runOutsideAngular(()=>{if(t[r])return t[r];if(Aj.includes(r))return()=>{};const i=e.toPromise().then(t=>{const e=t&&t[r];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>i[e],apply:(t,e,n)=>i.then(t=>t&&t(...n))})})}))(this,a,r)}}return t.\u0275fac=function(e){return new(e||t)(Yt(Dj),Yt(jj,8),Yt(wa),Yt(Na))},t.\u0275prov=ut({factory:function(){return new t(Yt(Dj),Yt(jj,8),Yt(wa),Yt(Na))},token:t,providedIn:"any"}),t})(),Lj=(()=>{class t{}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[Vj]}),t})(),Uj=(()=>{class t{constructor(t){this.auth=t,this.user=t.authState}login(){this.auth.signInWithPopup(new sg.a.auth.GoogleAuthProvider).then(t=>{this.userName=t.user.displayName,sessionStorage.setItem("loggedIn","1")})}logout(){this.auth.signOut().then(t=>{sessionStorage.removeItem("loggedIn")})}isLoggedIn(){return null!=sessionStorage.getItem("loggedIn")}getUserName(){return this.userName}}return t.\u0275fac=function(e){return new(e||t)(Yt(Vj))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bj=(()=>{class t{setScore(t){this.score=t}getScore(){return this.score}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Hj=function(){return["/table"]},Wj=function(){return["/lineC"]},zj=function(){return["/barC"]},qj=function(){return["/quiz"]},Gj=function(){return["/record"]},Yj=function(){return["/login"]};let Kj=(()=>{class t{constructor(t,e){this.auth=t,this.quiz=e,this.title="Group-5 Project"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(Ao(Uj),Ao(Bj))},t.\u0275cmp=he({type:t,selectors:[["app-root"]],decls:42,vars:14,consts:[[1,"container-fluid"],[1,"navbar","navbar-expand-lg","navbar-light","bg-light","fixed-top"],["href","#",1,"navbar-brand",2,"font-weight","bold"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item","active",2,"padding-left","30%"],[1,"nav-link",3,"routerLink"],[1,"sr-only"],[1,"nav-item","dropdown",2,"padding-left","30%"],["href","#","id","navbarDropdownMenuLink","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink"],[1,"nav-item",2,"padding-left","30%"],[1,"page-footer","font-small","blue","fixed-bottom"],["Style","background-color:lightblue;",1,"footer-copyright","text-center","py-3"],[2,"width","100%"]],template:function(t,e){1&t&&(Mo(0,"body"),Fo(1,"br"),Mo(2,"div",0),Mo(3,"nav",1),Mo(4,"a",2),Jo(5,"Covid-19 Info Board"),No(),Mo(6,"button",3),Fo(7,"span",4),No(),Mo(8,"div",5),Mo(9,"ul",6),Mo(10,"li",7),Mo(11,"a",8),Jo(12,"Table "),Mo(13,"span",9),Jo(14,"(current)"),No(),No(),No(),Mo(15,"li",10),Mo(16,"a",11),Jo(17," Graph "),No(),Mo(18,"div",12),Mo(19,"a",13),Jo(20,"Line"),No(),Mo(21,"a",13),Jo(22,"Bar"),No(),No(),No(),Mo(23,"li",14),Mo(24,"a",8),Jo(25,"Test"),No(),No(),Mo(26,"li",14),Mo(27,"a",8),Jo(28,"Sharing"),No(),No(),Mo(29,"li",14),Mo(30,"a",8),Jo(31),No(),No(),No(),No(),No(),Fo(32,"hr"),Fo(33,"hr"),Fo(34,"router-outlet"),Mo(35,"footer",15),Mo(36,"div",16),Jo(37," \xa9 2020 Copyright: DePaul 2020 Autumn CSC-436 Group 5 "),Fo(38,"br"),Jo(39),No(),No(),Fo(40,"hr"),Fo(41,"div",17),No(),No()),2&t&&(Mi(11),jo("routerLink",sa(8,Hj)),Mi(8),jo("routerLink",sa(9,Wj)),Mi(2),jo("routerLink",sa(10,zj)),Mi(3),jo("routerLink",sa(11,qj)),Mi(3),jo("routerLink",sa(12,Gj)),Mi(3),jo("routerLink",sa(13,Yj)),Mi(1),ts(e.auth.isLoggedIn()?e.auth.getUserName():"Login"),Mi(8),es(" Your Test Score is:",e.quiz.getScore()," "))},directives:[Rp,Np],styles:["#nav[_ngcontent-%COMP%]{padding-right:20px;background-color:brown}"]}),t})();var Xj=function(t,e){return(Xj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Qj(t,e){function n(){this.constructor=t}Xj(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var $j=function(){return($j=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function Zj(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{u(i.next(t))}catch(e){o(e)}}function a(t){try{u(i.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))}function Jj(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function tR(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eR(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function nR(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(eR(arguments[e]));return t}var iR=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value/100},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"percent",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this._value+"%"},t}();function rR(t){return new iR(t)}function oR(t){return Number(t)!==t}function sR(t){return{}.toString.call(t)}function aR(t){if("string"==typeof t)return t;if("number"==typeof t)return""+t;throw new Error("Expected a string or number but got "+sR(t))}function uR(t){return!!t}function lR(t){if(cR(t)&&!yR(t)){var e=Number(t);return oR(e)&&gR(t)&&""!=t?lR(t.replace(/[^0-9.\-]+/g,"")):e}return t}function hR(t){if(cR(t)&&!gR(t)){if(yR(t))return aR(t);if(mR(t))return t.toString()}return t}function cR(t){return null!=t}function pR(t){if(cR(t))return t;throw new Error("Value doesn't exist")}function dR(t,e){return cR(t)?t:e}function fR(t){return"[object Date]"===sR(t)}function gR(t){return"string"==typeof t}function yR(t){return"number"==typeof t&&Number(t)==t}function mR(t){return"object"==typeof t&&null!=t}function vR(t){return Array.isArray(t)}var bR=Math.PI,_R=bR/2,wR=bR/180,xR=180/bR;function PR(t,e,n){return cR(t)?OR(t=lR(t),e,n):t}function CR(t,e,n){if(!yR(e)||e<=0){var i=Math.round(t);return n&&i-t==.5&&i--,i}var r=Math.pow(10,e);return Math.round(t*r)/r}function IR(t,e){if(!yR(e)||e<=0)return Math.ceil(t);var n=Math.pow(10,e);return Math.ceil(t*n)/n}function OR(t,e,n){if(yR(e)){if(yR(n)&&n<e){var i=n;n=e,e=i}t<e&&(t=e)}return yR(n)&&t>n&&(t=n),t}function SR(t){return CR(Math.sin(wR*t),10)}function TR(t){return CR(Math.tan(wR*t),10)}function ER(t){return CR(Math.cos(wR*t),10)}function kR(t,e){return yR(t)?yR(e)&&e>t?e:t:yR(e)?e:null}function AR(t,e){return yR(t)?yR(e)&&e<t?e:t:yR(e)?e:null}function DR(t,e){var n=pR(t.start),i=pR(e.start),r=pR(t.end),o=pR(e.end);return Math.max(n,i)<=Math.min(r,o)}function jR(t){var e=pR(t.start);return{start:1-pR(t.end),end:1-e}}function RR(t,e){return t?(e||(e={x:0,y:0}),Math.sqrt(Math.pow(Math.abs(t.x-e.x),2)+Math.pow(Math.abs(t.y-e.y),2))):0}function MR(t,e,n,i,r){if(!t)return 0;e||(e={x:0,y:0});var o=0,s=t;if(r>0)for(var a=0;a<=r;a++){var u=HR(t,e,n,i,a/r);o+=RR(s,u),s=u}return o}function NR(t,e,n,i){var r=RR(e,i),o=RR(t,n);return Math.abs(o/r)}function FR(t,e,n){return yR(n)||(n=.5),{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}}function VR(t,e){e||(e={x:2*t.x,y:2*t.y});var n=Math.atan2(e.y-t.y,e.x-t.x)*xR;return n<0&&(n+=360),GR(n)}function LR(t){if(t){var e=t.length;if(0!==e){for(var n,i=void 0,r=void 0,o=void 0,s=0;s<e;s++){var a=t[s];(!yR(r)||a.x>r)&&(r=a.x),(!yR(i)||a.x<i)&&(i=a.x),(!yR(n)||a.y<n)&&(n=a.y),(!yR(o)||a.y>o)&&(o=a.y)}return{x:i,y:n,width:r-i,height:o-n}}}return{x:0,y:0,width:0,height:0}}function UR(t){var e=t.length;if(0!==e){for(var n=void 0,i=void 0,r=void 0,o=void 0,s=0;s<e;s++){var a=t[s];n=AR(a.x,n),i=AR(a.y,i),r=kR(a.x+a.width,r),o=kR(a.y+a.height,o)}return{x:n,y:i,width:r-n,height:o-i}}}function BR(t,e,n,i){return{x:(1-i)*(1-i)*t.x+2*(1-i)*i*n.x+i*i*e.x,y:(1-i)*(1-i)*t.y+2*(1-i)*i*n.y+i*i*e.y}}function HR(t,e,n,i,r){var o={x:0,y:0},s=1-r,a=s*s,u=a*s;return o.x=t.x*u+3*n.x*a*r+3*i.x*s*r*r+e.x*r*r*r,o.y=t.y*u+3*n.y*a*r+3*i.y*s*r*r+e.y*r*r*r,o}function WR(t,e,n,i,r,o){return r=qR(r),o=qR(o),{x:(e.x/r-t.x+n.x)*r,y:(e.y/o-t.y+n.y)*o}}function zR(t,e,n,i,r,o){return r=qR(r),o=qR(o),{x:(e.x+n.x/r-i.x)*r,y:(e.y+n.y/o-i.y)*o}}function qR(t){return 1-t+1e-5}function GR(t){return 360==t?360:t%360}function YR(t,e,n){if(e>n){var i=e;e=n,n=i}t=GR(t);var r=(e-GR(e))/360;return t<e&&(t+=360*(r+1)),t>n&&(t-360>e?t-=360:t=t<e+(n-e)/2+180?n:e),t<e&&(t=t>e+(n-e)/2-180?e:n),t}function KR(t,e,n){var i=Number.MAX_VALUE,r=Number.MAX_VALUE,o=-Number.MAX_VALUE,s=-Number.MAX_VALUE,a=[];yR(n)||(n=1),a.push(XR(n,t)),a.push(XR(n,e));for(var u=Math.min(90*Math.floor(t/90),90*Math.floor(e/90)),l=Math.max(90*Math.ceil(t/90),90*Math.ceil(e/90)),h=u;h<=l;h+=90)h>=t&&h<=e&&a.push(XR(n,h));for(var c=0;c<a.length;c++){var p=a[c];p.x<i&&(i=p.x),p.y<r&&(r=p.y),p.x>o&&(o=p.x),p.y>s&&(s=p.y)}return{x:i,y:r,width:o-i,height:s-r}}function XR(t,e){return{x:t*ER(e),y:t*SR(e)}}function QR(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>e.y&&t.y<e.y+e.height}function $R(t,e){for(var n=t.length,i=0;i<n;++i)if(t[i]===e)return i;return-1}function ZR(t,e){for(var n=t.length,i=0;i<n;++i)if(e(t[i]))return!0;return!1}function JR(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=e(t[r],r);return i}function tM(t,e){for(var n=t.length,i=0;i<n;++i)e(t[i],i)}function eM(t,e){for(var n=t.length,i=0;i<n&&e(t[i],i);++i);}function nM(t,e){var n=!1,i=t.indexOf(e);if(-1!==i){n=!0,t.splice(i,1);for(var r=t.length;i<r;)t[i]===e?(t.splice(i,1),--r):++i}return n}function iM(t,e,n){var i=$R(t,e);-1!==i&&uM(t,i),null==n?t.push(e):aM(t,n,e)}function rM(t,e,n){yR(n)?0===n?t.unshift(e):t.splice(n,0,e):t.push(e)}function oM(t){return Array.isArray(t)?t:[t]}function sM(t){for(var e=t.length,n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function aM(t,e,n){t.splice(e,0,n)}function uM(t,e){t.splice(e,1)}function lM(t,e,n){for(var i=0,r=t.length,o=!1;i<r;){var s=i+r>>1,a=e(n,t[s]);a<0?r=s:0===a?(o=!0,i=s+1):i=s+1}return{found:o,index:o?i-1:i}}function hM(t,e){for(var n=t.length,i=0;i<n;++i)if(e(t[i],i))return i;return-1}function cM(t,e){for(var n=t.length,i=0;i<n;)e(t[i])?++i:(t.splice(i,1),--n)}var pM=function(){function t(t){this._disposed=!1,this._dispose=t}return t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._dispose())},t}(),dM=function(t){function e(e){return t.call(this,(function(){tM(e,(function(t){t.dispose()}))}))||this}return Qj(e,t),e}(pM),fM=function(t){function e(){var e=t.call(this,(function(){cR(e._disposer)&&(e._disposer.dispose(),e._disposer=void 0)}))||this;return e}return Qj(e,t),e.prototype.get=function(){return this._value},e.prototype.set=function(t,e){cR(this._disposer)&&this._disposer.dispose(),this._disposer=e,this._value=t},e.prototype.reset=function(){this.set(void 0,void 0)},e}(pM),gM=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._counter=0,e}return Qj(e,t),e.prototype.increment=function(){var t=this;return++this._counter,new pM((function(){--t._counter,0===t._counter&&t.dispose()}))},e}(pM),yM=!1,mM=[],vM=[],bM=[],_M=[],wM="function"==typeof requestAnimationFrame?function(t){requestAnimationFrame(t)}:function(t){setTimeout(t,16.666666666666668)};function xM(){for(var t=Date.now(),e=mM.length,n=0;n<e;++n)mM[n](t);for(function(t,e){for(var n=t.length,i=e;i<n;++i)t[i-e]=t[i];t.length=n-e}(mM,e),n=0;n<vM.length;++n)vM[n](t);for(vM.length=0,n=0;n<bM.length;++n)bM[n](t);bM.length=0,0===mM.length&&0===vM.length?yM=!1:wM(xM)}function PM(){yM||(yM=!0,wM(xM))}function CM(t){bM.push(t),PM()}var IM=function(){function t(){this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}return t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{tM(t,(function(t){t.disposer.dispose()}))}finally{this._killed=null,this._iterating=null}}},t.prototype.hasListeners=function(){return 0!==this._listeners.length},t.prototype.hasListenersByType=function(t){return ZR(this._listeners,(function(e){return(null===e.type||e.type===t)&&!e.killed}))},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.enableType=function(t){delete this._disabled[t]},t.prototype.disableType=function(t,e){void 0===e&&(e=1/0),this._disabled[t]=e},t.prototype._removeListener=function(t){if(0===this._iterating){var e=this._listeners.indexOf(t);if(-1===e)throw new Error("Invalid state: could not remove listener");this._listeners.splice(e,1)}else this._killed.push(t)},t.prototype._removeExistingListener=function(t,e,n,i){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((function(r){r.once!==t||r.type!==e||null!=n&&r.callback!==n||r.context!==i||r.disposer.dispose()}))},t.prototype.isEnabled=function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(t)&&null==this._disabled[t]},t.prototype.has=function(t,e,n){return-1!==hM(this._listeners,(function(i){return!0!==i.once&&i.type===t&&(null==e||i.callback===e)&&i.context===n}))},t.prototype._shouldDispatch=function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");var e=this._disabled[t];return yR(e)?(e<=1?delete this._disabled[t]:--this._disabled[t],!1):this._enabled},t.prototype._eachListener=function(t){var e=this;++this._iterating;try{tM(this._listeners,t)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(tM(this._killed,(function(t){e._removeListener(t)})),this._killed.length=0)}},t.prototype.dispatchImmediately=function(t,e){this._shouldDispatch(t)&&this._eachListener((function(n){n.killed||null!==n.type&&n.type!==t||n.dispatch(t,e)}))},t.prototype.dispatch=function(t,e){this._shouldDispatch(t)&&this._eachListener((function(n){n.killed||null!==n.type&&n.type!==t||_M.push((function(){n.killed||n.dispatch(t,e)}))}))},t.prototype._on=function(t,e,n,i,r,o){var s=this;if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(t,e,n,i);var a={type:e,callback:n,context:i,shouldClone:r,dispatch:o,killed:!1,once:t,disposer:new pM((function(){a.killed=!0,s._removeListener(a)}))};return this._listeners.push(a),a},t.prototype.onAll=function(t,e,n){return void 0===n&&(n=!0),this._on(!1,null,t,e,n,(function(n,i){return t.call(e,n,i)})).disposer},t.prototype.on=function(t,e,n,i){return void 0===i&&(i=!0),this._on(!1,t,e,n,i,(function(t,i){return e.call(n,i)})).disposer},t.prototype.once=function(t,e,n,i){void 0===i&&(i=!0);var r=this._on(!0,t,e,n,i,(function(t,i){r.disposer.dispose(),e.call(n,i)}));return r.disposer},t.prototype.off=function(t,e,n){this._removeExistingListener(!1,t,e,n)},t.prototype.copyFrom=function(t){var e=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");tM(t._listeners,(function(t){!t.killed&&t.shouldClone&&(null===t.type?e.onAll(t.callback,t.context):t.once?e.once(t.type,t.callback,t.context):e.on(t.type,t.callback,t.context))}))},t}(),OM=function(t){function e(e){var n=t.call(this)||this;return n.target=e,n}return Qj(e,t),e.prototype.copyFrom=function(t){var e=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");tM(t._listeners,(function(n){n.context!==t.target&&!n.killed&&n.shouldClone&&(null===n.type?e.onAll(n.callback,n.context):n.once?e.once(n.type,n.callback,n.context):e.on(n.type,n.callback,n.context))}))},e}(IM);function SM(t){var e=[];for(var n in t)TM(t,n)&&e.push(n);return e}function TM(t,e){return{}.hasOwnProperty.call(t,e)}function EM(t,e){for(var n in t)if(TM(t,n)&&!e(n,t[n]))break}function kM(t,e){EM(t,(function(t,n){return e(t,n),!0}))}function AM(t,e,n){tM(function(t,e){return SM(t).sort(e)}(t,n),(function(n){e(n,t[n])}))}function DM(t,e){return Object.assign({},t,e)}function jM(t,e,n){tM(n,(function(n){cR(t[n])&&(e[n]=t[n])}))}function RM(t,e){jM(t,e,SM(t))}function MM(t){return function(e){for(var n=t.length,i=0;i<n&&e(t[i]);++i);}}function NM(t){var e=[];return t((function(t){return e.push(t),!0})),e}function FM(t,e){t(e)}function VM(t,e){t((function(t){return e(t),!0}))}function LM(t,e){return MM(NM(t).sort(e))}function UM(t,e){return function(n){return t((function(t){return n(e(t))}))}}function BM(t){return function(e){var n=0;t((function(t){return e([n++,t])}))}}function HM(t,e){var n=!1;return t((function(t){return!e(t)||(n=!0,!1)})),n}var WM=function(){function t(t,e){this.createNewItems=!1,this.list=t,this._create=e,this.reset()}return t.prototype.reset=function(){this._listCopy=NM(this.list.iterator())},t.prototype.clear=function(){this._listCopy.length=0},t.prototype.getFirst=function(){return this.returnItem(0)},t.prototype.getLast=function(){return this.returnItem(this._listCopy.length-1)},t.prototype.find=function(t){var e=hM(this._listCopy,t);if(-1!==e){var n=this._listCopy[e];return nM(this._listCopy,n),n}return this.getLast()},t.prototype.removeItem=function(t){return nM(this._listCopy,t)},t.prototype.returnItem=function(t){if(t>=0&&t<this._listCopy.length){var e=this._listCopy[t];return nM(this._listCopy,e),e}if(this.createNewItems)return this._create()},t.prototype.iterator=function(){return MM(this._listCopy)},t}();function zM(t,e){return t===e?0:t<e?-1:1}function qM(t,e){return new Array(e+1).join(t)}var GM=function(t){function e(e){var n=e.events.on("removed",(function(t){t.oldValue.dispose()}),void 0,!1);return t.call(this,(function(){n.dispose(),VM(e.iterator(),(function(t){t[1].dispose()}))}))||this}return Qj(e,t),e}(pM),YM=function(){function t(){this.events=new IM,this._dictionary={}}return t.prototype.hasKey=function(t){return TM(this._dictionary,t)},t.prototype.getKey=function(t){return this._dictionary[t]},t.prototype.insertKey=function(t,e){if(TM(this._dictionary,t))throw new Error("Key "+t+" already exists in dictionary");this._dictionary[t]=e,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:t,newValue:e})},t.prototype.setKey=function(t,e){if(TM(this._dictionary,t)){var n=this._dictionary[t];n!==e&&(this._dictionary[t]=e,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:t,oldValue:n,newValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:n}))}else this._dictionary[t]=e,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:t,newValue:e})},t.prototype.updateKey=function(t,e){if(!TM(this._dictionary,t))throw new Error("Key "+t+" doesn't exist in dictionary");var n=this._dictionary[t],i=e(n);n!==i&&(this._dictionary[t]=i,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:t,oldValue:n,newValue:i}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:n}))},t.prototype.removeKey=function(t){if(TM(this._dictionary,t)){var e=this._dictionary[t];delete this._dictionary[t],this.events.isEnabled("removeKey")&&this.events.dispatchImmediately("removeKey",{type:"removeKey",target:this,key:t,oldValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:e})}},t.prototype.insertKeyIfEmpty=function(t,e){return this.hasKey(t)||this.insertKey(t,e()),this.getKey(t)},t.prototype.clear=function(){var t=this;this.events.isEnabled("removed")&&kM(this._dictionary,(function(e,n){t.events.dispatchImmediately("removed",{type:"removed",target:t,oldValue:n})})),this._dictionary={},this.events.isEnabled("cleared")&&this.events.dispatchImmediately("cleared",{type:"cleared",target:this})},t.prototype.copyFrom=function(t){var e=this;VM(t.iterator(),(function(t){e.setKey(t[0],t[1])}))},t.prototype.iterator=function(){return t=this._dictionary,function(e){for(var n in t)if(TM(t,n)&&!e([n,t[n]]))break};var t},t.prototype[Symbol.iterator]=function(){var t,e,n,i;return Jj(this,(function(r){switch(r.label){case 0:for(e in t=[],this._dictionary)t.push(e);n=0,r.label=1;case 1:return n<t.length?TM(this._dictionary,i=t[n])?[4,[i,this._dictionary[i]]]:[3,3]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))},t.prototype.each=function(t){VM(this.iterator(),(function(e){var n=eR(e,2);return t(n[0],n[1])}))},t.prototype.sortedIterator=function(){return LM(this.iterator(),(function(t,e){return zM(t[0],e[0])}))},t}(),KM=function(t){function e(e){var n=t.call(this)||this;return n.template=e,n}return Qj(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;VM(t.iterator(),(function(t){e.setKey(t[0],t[1].clone())}))},e.prototype.create=function(t){var e=this;return this.insertKeyIfEmpty(t,(function(){return e.template.clone()}))},e}(YM),XM=new(function(){function t(){this._storage=new YM,this.ttl=1e3}return t.prototype.set=function(t,e,n,i){var r=this._storage.insertKeyIfEmpty(t,(function(){return new YM})),o={touched:(new Date).getTime(),ttl:yR(i)?i:this.ttl,value:n};r.setKey(e,o)},t.prototype.get=function(t,e,n){if(void 0===n&&(n=void 0),this._storage.hasKey(t)){var i=this._storage.getKey(t);if(i.hasKey(e)){var r=i.getKey(e);return r.ttl&&r.touched+r.ttl<(new Date).getTime()&&(r.expired=!0),r.expired?(i.removeKey(e),n):r.value}return n}return n},t.prototype.clear=function(t){t?this._storage.removeKey(t):this._storage.clear()},t}()),QM=new(function(){function t(){var t=this;this.events=new IM,this.themes=[],this.loadedThemes={},this._uidCount=0,this.registeredClasses={},this._placeholders={},this.invalidSprites={},this.invalidDatas={},this.invalidRawDatas=[],this.invalidDataItems=[],this.invalidDataRange=[],this.invalidPositions={},this.invalidLayouts={},this.baseSprites=[],this.baseSpritesByUid={},this.queue=[],this.deferred=[],this.uid=this.getUniqueId(),this.invalidSprites.noBase=[],this.invalidDatas.noBase=[],this.invalidLayouts.noBase=[],this.invalidPositions.noBase=[],"undefined"!=typeof addEventListener&&(addEventListener("beforeprint",(function(){tM(t.baseSprites,(function(t){var e=t.paper.svg;e.setAttribute("viewBox","0 0 "+e.clientWidth+" "+e.clientHeight)}))})),addEventListener("afterprint",(function(){tM(t.baseSprites,(function(t){t.paper.svg.removeAttribute("viewBox")}))})))}return t.prototype.getUniqueId=function(){var t=this._uidCount;return this._uidCount+=1,"id-"+t},Object.defineProperty(t.prototype,"map",{get:function(){return this._map||(this._map=new YM),this._map},enumerable:!0,configurable:!0}),t.prototype.setCache=function(t,e,n){XM.set(this.uid,t,e,n)},t.prototype.getCache=function(t,e){return void 0===e&&(e=void 0),XM.get(this.uid,t,e)},t.prototype.dispatch=function(t,e){this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatch(t,{type:t,target:this})):this.events.dispatch(t,{type:t,target:this}))},t.prototype.dispatchImmediately=function(t,e){this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatchImmediately(t,e)):this.events.dispatchImmediately(t,{type:t,target:this}))},t.prototype.getPlaceholder=function(t){return cR(this._placeholders[t])||(this._placeholders[t]="__amcharts_"+t+"_"+function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<8;i++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}()+"__"),this._placeholders[t]},t.prototype.addToInvalidComponents=function(t){iM(t.baseId?this.invalidDatas[t.baseId]:this.invalidDatas.noBase,t)},t.prototype.removeFromInvalidComponents=function(t){t.baseId&&nM(this.invalidDatas[t.baseId],t),nM(this.invalidDatas.noBase,t)},t.prototype.addToInvalidSprites=function(t){rM(t.baseId?this.invalidSprites[t.baseId]:this.invalidSprites.noBase,t)},t.prototype.removeFromInvalidSprites=function(t){t.baseId&&nM(this.invalidSprites[t.baseId],t),nM(this.invalidSprites.noBase,t)},t.prototype.addToInvalidPositions=function(t){rM(t.baseId?this.invalidPositions[t.baseId]:this.invalidPositions.noBase,t)},t.prototype.removeFromInvalidPositions=function(t){t.baseId&&nM(this.invalidPositions[t.baseId],t),nM(this.invalidPositions.noBase,t)},t.prototype.addToInvalidLayouts=function(t){rM(t.baseId?this.invalidLayouts[t.baseId]:this.invalidLayouts.noBase,t)},t.prototype.removeFromInvalidLayouts=function(t){t.baseId&&nM(this.invalidLayouts[t.baseId],t),nM(this.invalidLayouts.noBase,t)},t}());function $M(t,e){var n=QM.registeredClasses[e];return null!=n&&t instanceof n}var ZM=function(){function t(t,e,n){this._array=t,this._start=e,this._end=n}return t.prototype.iterator=function(){var t=this;return function(e){if(t._start!==t._end)if(t._start<t._end)for(var n=t._start;n<t._end&&e(t._array[n]);++n);else for(n=t._start-1;n>=t._end&&e(t._array[n]);--n);}},t.prototype.backwards=function(){return new t(this._array,this._end,this._start)},t.prototype.range=function(e,n){if(e<=n){if(this._start===this._end)return this;if(this._start<this._end){var i=n-e;return e=Math.max(this._start+e,this._start),n=Math.min(e+i,this._end),new t(this._array,e,n)}return i=n-e,e=Math.max(this._start-e,this._end),n=Math.max(e-i,this._end),new t(this._array,e,n)}throw new Error("Start index must be lower than end index")},t}(),JM=(function(t){function e(e,n,i){var r=t.call(this,[e.events.on("inserted",(function(t){var n=t.newValue,i=r._getKey(n),o=0;FM(e.iterator(),(function(t){return t!==n&&(r._getKey(t)===i&&++o,!0)})),r._insert(n,i,o)}),void 0,!1),e.events.on("removed",(function(t){r._remove(t.oldValue)}),void 0,!1)])||this;return r._keys=[],r._groups={},r._getKey=n,r._sort=i,VM(e.iterator(),(function(t){r._insert(t,n(t))})),r}Qj(e,t),e.prototype._insert=function(t,e,n){if(null==this._groups[e]){this._groups[e]=[];var i=lM(this._keys,this._sort,e),r=i.index;if(i.found)throw new Error("Key already exists: "+e);aM(this._keys,r,e)}null==n?this._groups[e].push(t):aM(this._groups[e],n,t)},e.prototype._remove=function(t){var e=this._getKey(t),n=this._groups[e];if(null!=n&&(nM(n,t),0===n.length)){delete this._groups[e];var i=lM(this._keys,this._sort,e),r=i.index;if(!i.found)throw new Error("Key doesn't exist: "+e);uM(this._keys,r)}},e.prototype.iterator=function(){var t,e=this;return t=UM(MM(this._keys),(function(t){return MM(e._groups[t])})),function(e){var n=!0,i=function(t){return n=e(t)};t((function(t){return t(i),n}))}}}(dM),function(t){function e(e,n){void 0===n&&(n=!0);var i=this;if(n){var r=e.events.on("removed",(function(t){t.oldValue.dispose()}),void 0,!1);i=t.call(this,(function(){r.dispose(),VM(e.iterator(),(function(t){t.dispose()}))}))||this}else i=t.call(this,(function(){VM(e.iterator(),(function(t){t.dispose()}))}))||this;return i}return Qj(e,t),e}(pM));function tN(t,e){if(!(t>=0&&t<e))throw new Error("Index out of bounds: "+t)}var eN=function(){function t(t){void 0===t&&(t=[]),this.events=new IM,this._values=t}return Object.defineProperty(t.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){return-1!==this._values.indexOf(t)},t.prototype.removeValue=function(t){for(var e=0,n=this._values.length;e<n;)this._values[e]===t?(this.removeIndex(e),--n):++e},t.prototype.indexOf=function(t){return $R(this._values,t)},Object.defineProperty(t.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.hasIndex=function(t){return t>=0&&t<this._values.length},t.prototype.getIndex=function(t){return this._values[t]},t.prototype.setIndex=function(t,e){tN(t,this._values.length);var n=this._values[t];return n!==e&&(this._values[t]=e,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:t,oldValue:n,newValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:n}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e})),n},t.prototype.insertIndex=function(t,e){tN(t,this._values.length+1),aM(this._values,t,e),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:t,newValue:e}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e})},t.prototype._sortQuicksort=function(t,e,n){if(t<e){var i=this._sortPartition(t,e,n);this._sortQuicksort(t,i,n),this._sortQuicksort(i+1,e,n)}},t.prototype._sortPartition=function(t,e,n){for(var i=this._values,r=i[t],o=t-1,s=e+1;;){do{++o}while(n(i[o],r)<0);do{--s}while(n(i[s],r)>0);if(o>=s)return s;this.swap(o,s)}},t.prototype.sort=function(t){this._sortQuicksort(0,this._values.length-1,t)},t.prototype.swap=function(t,e){var n=this._values.length;if(tN(t,n),tN(e,n),t!==e){var i=this._values[t],r=this._values[e];this._values[t]=r,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:t,oldValue:i,newValue:r}),this._values[e]=i,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:e,oldValue:r,newValue:i})}},t.prototype.removeIndex=function(t){tN(t,this._values.length);var e=this._values[t];return uM(this._values,t),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:t,oldValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:e}),e},t.prototype.moveValue=function(t,e){var n=this.indexOf(t);if(-1!==n){var i=this._values[n];uM(this._values,n),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:n,oldValue:i})}null==e?(e=this._values.length,this._values.push(t)):aM(this._values,e,t),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t}),-1===n&&this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t})},t.prototype.push=function(t){var e=this._values.push(t)-1;return this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t}),t},t.prototype.unshift=function(t){this.insertIndex(0,t)},t.prototype.pushAll=function(t){var e=this;tM(t,(function(t){e.push(t)}))},t.prototype.copyFrom=function(t){this.pushAll(t._values)},t.prototype.pop=function(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)},t.prototype.shift=function(){return this._values.length?this.removeIndex(0):void 0},t.prototype.setAll=function(t){var e=this,n=sM(this._values);this._values.length=0,tM(t,(function(t){e._values.push(t)})),this.events.isEnabled("setAll")&&this.events.dispatchImmediately("setAll",{type:"setAll",target:this,oldArray:n,newArray:this._values}),this.events.isEnabled("removed")&&tM(n,(function(t){e.events.dispatchImmediately("removed",{type:"removed",target:e,oldValue:t})})),this.events.isEnabled("inserted")&&tM(this._values,(function(t){e.events.dispatchImmediately("inserted",{type:"inserted",target:e,newValue:t})}))},t.prototype.clear=function(){this.setAll([])},t.prototype.iterator=function(){return MM(this._values)},t.prototype[Symbol.iterator]=function(){var t,e;return Jj(this,(function(n){switch(n.label){case 0:t=this._values.length,e=0,n.label=1;case 1:return e<t?[4,this._values[e]]:[3,4];case 2:n.sent(),n.label=3;case 3:return++e,[3,1];case 4:return[2]}}))},t.prototype.each=function(t){tM(this._values,t)},t.prototype.range=function(t,e){if(t<=e){var n=e-t;return t=Math.max(t,0),e=Math.min(t+n,this._values.length),new ZM(this._values,t,e)}throw new Error("Start index must be lower than end index")},t.prototype.backwards=function(){return new ZM(this._values,this._values.length,0)},t}(),nN=function(t){function e(e){var n=t.call(this)||this;return n.template=e,n}return Qj(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;VM(t.iterator(),(function(t){e.push(t.clone())}))},e.prototype.create=function(t){var e=null!=t?new t:this.template.clone();return this.push(e),e},e.prototype.clone=function(){for(var t=new e(this.template),n=this.values,i=n.length,r=0;r<i;++r)t.push(n[r].clone());return t},e}(eN),iN=function(){function t(t){this._values=[],this.events=new IM,null!=t&&this.setAll(t)}return Object.defineProperty(t.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),t.prototype._insert=function(t){return this._values.push(t),this._values.length-1},Object.defineProperty(t.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return $R(this._values,t)},t.prototype.contains=function(t){return-1!==this.indexOf(t)},t.prototype.getIndex=function(t){return this._values[t]},Object.defineProperty(t.prototype,"first",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._values[this._values.length-1]},enumerable:!0,configurable:!0}),t.prototype.insert=function(t){var e=this._insert(t);this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,index:e,newValue:t})},t.prototype.remove=function(t){var e=this.indexOf(t);if(-1!==e){var n=this._values[e];uM(this._values,e),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,index:e,oldValue:n})}},t.prototype.setAll=function(t){var e=this;!function(t,e){for(var n=t.length;n--;)e(t[n],n)}(this._values,(function(t,n){e._values.pop(),e.events.isEnabled("removed")&&e.events.dispatchImmediately("removed",{type:"removed",target:e,index:n,oldValue:t})})),tM(t,(function(t){e.insert(t)}))},t.prototype.clear=function(){this.setAll([])},t.prototype.slice=function(e,n){var i=new t;return i._values=this._values.slice(e,n),i},t.prototype.findClosestIndex=function(t,e,n){void 0===n&&(n="any");var i,r,o=-1,s=0;return FM(this.iterator(),(function(a){var u=e(a);if("any"===n){if(u===t)return o=s,!1;var l=Math.abs(t-u);(!cR(r)||r>l)&&(o=s,i=u,r=l)}else"left"===n&&u<t?(!cR(i)||i<u)&&(o=s,i=u):"right"===n&&u>=t&&(!cR(i)||i>=u)&&(o=s,i=u);return++s,!0})),-1===o&&("left"===n?o=0:"right"===n&&(o=this.length-1)),o},t.prototype.iterator=function(){return MM(this._values)},t.prototype[Symbol.iterator]=function(){var t,e;return Jj(this,(function(n){switch(n.label){case 0:t=this._values.length,e=0,n.label=1;case 1:return e<t?[4,this._values[e]]:[3,4];case 2:n.sent(),n.label=3;case 3:return++e,[3,1];case 4:return[2]}}))},t.prototype.each=function(t){tM(this._values,t)},t}(),rN=function(t){function e(e){var n=t.call(this)||this;return n._ordering=e,n}return Qj(e,t),e.prototype._insert=function(t){var e=lM(this._values,this._ordering,t).index;return aM(this._values,e,t),e},e.prototype.indexOf=function(t){var e=lM(this._values,this._ordering,t);return e.found?e.index:-1},e.prototype.update=function(t){var e=$R(this._values,t);if(-1!==e){var n=this._values.length-1;(0===e||this._ordering(this._values[e-1],t)<0)&&(e===n||this._ordering(t,this._values[e+1])<0)||(uM(this._values,e),this._insert(t))}},e}(iN),oN=function(t){function e(e){var n=t.call(this)||this;return n.template=e,n}return Qj(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;VM(t.iterator(),(function(t){e.insert(t.clone())}))},e.prototype.slice=function(t,n){var i=new e(this.template);return i._values=this._values.slice(t,n),i},e.prototype.create=function(t){var e=null!=t?new t:this.template.clone();return this.insert(e),e},e}(iN),sN=function(t){function e(e,n){var i=t.call(this,n)||this;return i.template=e,i}return Qj(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;VM(t.iterator(),(function(t){e.insert(t.clone())}))},e.prototype.create=function(t){var e=null!=t?new t:this.template.clone();return this.insert(e),e},e}(rN);function aN(t,e){return t===e?0:t<e?-1:1}function uN(t){switch(t){case 0:return 0;case-1:return 1;case 1:return-1}}function lN(t,e){return 0===t?e:t}var hN=new(function(){function t(){this._callbackId=0,this._callbacks=new rN((function(t,e){return lN(aN(t.priority,e.priority),aN(t.id,e.id))}))}return t.prototype.addAll=function(t,e,n,i,r){void 0===i&&(i=0),this._callbacks.insert({id:++this._callbackId,key:e,callback:n,priority:i,scope:r,type:t})},t.prototype.isEnabled=function(t,e){return ZR(this._callbacks.values,(function(n){return n.key===e&&t instanceof n.type}))},t.prototype.applyAll=function(t,e,n){var i=this._callbacks.values,r=i.length;if(0==r)return n;for(var o=0;o<r;++o){var s=i[o];s.key===e&&t instanceof s.type&&(n=s.callback.call(s.scope,n,t,e))}return n},t}()),cN=function(){function t(t){this._callbackId=0,this._callbacks=new rN((function(t,e){return lN(aN(t.priority,e.priority),aN(t.id,e.id))})),this._disabled={},this.object=t,this.events=this._callbacks.events}return t.prototype.add=function(t,e,n,i){void 0===n&&(n=0),this._callbacks.insert({id:++this._callbackId,key:t,callback:e,priority:n,scope:i})},t.prototype.has=function(t,e,n,i){return void 0===n&&(n=0),HM(this._callbacks.iterator(),(function(r){return r.key===t&&r.callback===e&&r.priority===n&&r.scope===i}))},t.prototype.remove=function(t,e){var n=this;tM(NM(this._callbacks.iterator()),(function(i){i.key!==t||yR(e)&&e!==i.priority||n._callbacks.remove(i)}))},t.prototype.enableKey=function(t){delete this._disabled[t]},t.prototype.disableKey=function(t,e){void 0===e&&(e=1/0),this._disabled[t]=e},t.prototype._hasListenersByType=function(t){return ZR(this._callbacks.values,(function(e){return e.key===t}))},t.prototype.isEnabled=function(t){return null==this._disabled[t]&&(this._hasListenersByType(t)||hN.isEnabled(this.object,t))},t.prototype._shouldDispatch=function(t){var e=this._disabled[t];return!yR(e)||(e<=1?delete this._disabled[t]:--this._disabled[t],!1)},t.prototype.apply=function(t,e){if(this._shouldDispatch(t)){var n=this._callbacks.values,i=n.length;if(i>0)for(var r=0;r<i;++r){var o=n[r];o.key===t&&(e=o.callback.call(o.scope,e,this.object,t))}return hN.applyAll(this.object,t,e)}return e},t.prototype.keys=function(){return NM(UM(this._callbacks.iterator(),(function(t){return t.key})))},t.prototype.copyFrom=function(t){var e=this;VM(t._callbacks.iterator(),(function(t){e.add(t.key,t.callback,t.priority,t.scope)})),kM(t._disabled,(function(t,n){e._disabled[t]=n}))},t.prototype.clear=function(){this._callbacks.clear()},t}(),pN={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},rebeccapurple:{r:102,g:51,b:153},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};function dN(t){return 1==t.length?"0"+t:""+t}function fN(t,e,n){return n=OR(n,0,1),t?e?{r:t.r+Math.round((e.r-t.r)*n),g:t.g+Math.round((e.g-t.g)*n),b:t.b+Math.round((e.b-t.b)*n),a:(t.a||1)+Math.round(((e.a||1)-(t.a||1))*n)}:t:e||t}function gN(t,e){return Math.round((e>0?255-t:t)*e)}function yN(t){var e,n,i,r=t.h,o=t.s,s=t.l;if(0==o)e=n=i=s;else{var a=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},u=s<.5?s*(1+o):s+o-s*o,l=2*s-u;e=a(l,u,r+1/3),n=a(l,u,r),i=a(l,u,r-1/3)}return{r:Math.round(255*e),g:Math.round(255*n),b:Math.round(255*i)}}function mN(t){var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),o=Math.min(e,n,i),s=0,a=0,u=(r+o)/2;if(r===o)s=a=0;else{var l=r-o;switch(a=u>.5?l/(2-r-o):l/(r+o),r){case e:s=(n-i)/l+(n<i?6:0);break;case n:s=(i-e)/l+2;break;case i:s=(e-n)/l+4}s/=6}return{h:s,s:a,l:u}}var vN=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"rgb",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hex",{get:function(){return this._value?"#"+dN((t=this._value).r.toString(16))+dN(t.g.toString(16))+dN(t.b.toString(16)):"none";var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rgba",{get:function(){return this._value?cR((t=this._value).a)&&1!==t.a?"rgba("+t.r+","+t.g+","+t.b+","+t.a+")":"rgb("+t.r+","+t.g+","+t.b+")":"none";var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return null!=this._value&&null!=this._value.a?this._value.a:1},set:function(t){this._value&&(this._value.a=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lightColor",{get:function(){return this._lightColor||(this._lightColor=new t({r:255,g:255,b:255})),this._lightColor},set:function(t){this._lightColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"darkColor",{get:function(){return this._darkColor||(this._darkColor=new t({r:0,g:0,b:0})),this._darkColor},set:function(t){this._darkColor=t},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.alpha<1?this.rgba:this.hex},t.prototype.lighten=function(e){return new t(function(t,e){return t?{r:Math.max(0,Math.min(255,t.r+gN(t.r,e))),g:Math.max(0,Math.min(255,t.g+gN(t.g,e))),b:Math.max(0,Math.min(255,t.b+gN(t.b,e))),a:t.a}:t}(this.rgb,e))},t.prototype.brighten=function(e){return new t(function(t,e){if(t){var n=gN(Math.min(Math.max(t.r,t.g,t.b),230),e);return{r:Math.max(0,Math.min(255,Math.round(t.r+n))),g:Math.max(0,Math.min(255,Math.round(t.g+n))),b:Math.max(0,Math.min(255,Math.round(t.b+n))),a:t.a}}return t}(this.rgb,e))},t.prototype.saturate=function(e){return new t(function(t,e){if(null==t||1==e)return t;var n=mN(t);return n.s=e,yN(n)}(this.rgb,e))},Object.defineProperty(t.prototype,"alternative",{get:function(){if(null!=this.rgb)return(299*(t=this.rgb).r+587*t.g+114*t.b)/1e3>=128?this.darkColor:this.lightColor;throw new Error("Color does not exist");var t},enumerable:!0,configurable:!0}),t}();function bN(t,e){if(!cR(t))return new vN(void 0);if("string"==typeof t){var n="_color_"+t+"_"+(e||"1"),i=QM.getCache(n);if(i)return new vN({r:i.r,g:i.g,b:i.b,a:i.a});var r=function(t,e){var n;return pN[t]?n=pN[t]:"#"===t.charAt(0)?n=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,i){return e+e+n+n+i+i}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,i,r){return e+e+n+n+i+i+r+r}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:parseInt(e[4],16)/256}:void 0}(t)}(t):t.match(/^rgba?\(/)&&(n=function(t){var e=(t=t.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(!(e=t.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i)))return;return{r:parseInt(e[1]),g:parseInt(e[2]),b:parseInt(e[3]),a:parseFloat(e[4])}}(t)),n||(n={r:0,g:0,b:0,a:1}),cR(e)&&(n.a=e),n}(t,e);return QM.setCache(n,r),new vN(r)}return t instanceof vN?(cR(e)&&(t.alpha=e),t):new vN(t)}function _N(t){return cR(t)&&!function(t){return t instanceof vN}(t)?function(t){return bN(t)}(t):t}var wN=function(){function t(){this._disposed=!1,this._disposers=[],this.className="BaseObject"}return t.prototype.debug=function(){},Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid||(this._uid=QM.getUniqueId(),QM.map.setKey(this._uid,this)),this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"map",{get:function(){return this._map||(this._map=new YM),this._map},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delayedMap",{get:function(){return this._delayedMap||(this._delayedMap=new YM),this._delayedMap},enumerable:!0,configurable:!0}),t.prototype.addDelayedMap=function(t,e){var n=this.delayedMap;n.hasKey(e)||n.setKey(e,[]),n.getKey(e).push({property:t,target:this})},t.prototype.processDelayedMap=function(){var t=this;this.delayedMap.each((function(e,n){if(t.map.hasKey(e)){var i=t.map.getKey(e);tM(n,(function(t){t.target[t.property]=i})),t.delayedMap.removeKey(e)}}))},t.prototype.applyTheme=function(){var t=this;if(QM){var e=this.getCurrentThemes();e&&tM(e,(function(e,n){e(t)}))}},Object.defineProperty(t.prototype,"themes",{get:function(){return this._themes},set:function(t){this._themes=t},enumerable:!0,configurable:!0}),t.prototype.getCurrentThemes=function(){return this.themes||QM.themes},t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._disposers;for(this._disposers=null;0!==t.length;)t.shift().dispose();this.clearCache(),this.clonedFrom&&this.clonedFrom.clones.removeValue(this);var e=this._uid;null!=e&&QM.map.removeKey(e)}},t.prototype.addDisposer=function(t){this._disposers.push(t)},t.prototype.removeDispose=function(t){if(!this._disposed){var e=$R(this._disposers,t);e>-1&&this._disposers.splice(e,1)}t.dispose()},t.prototype.clone=function(t){t||(t="clone-"+QM.getUniqueId());var e=new this.constructor;return e.cloneId=t,e.copyFrom(this),e},Object.defineProperty(t.prototype,"clones",{get:function(){return this._clones||(this._clones=new eN),this._clones},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){t.clones.push(this),this.clonedFrom=t},Object.defineProperty(t.prototype,"className",{get:function(){return this._className},set:function(t){this._className=t},enumerable:!0,configurable:!0}),t.prototype.setCache=function(t,e,n){XM.set(this.uid,t,e,n)},t.prototype.getCache=function(t,e){return void 0===e&&(e=void 0),XM.get(this.uid,t,e)},t.prototype.clearCache=function(){XM.clear(this.uid)},t.prototype.setTimeout=function(t,e){var n=this,i=setTimeout((function(){n.removeDispose(r),t()}),e),r=new pM((function(){clearTimeout(i)}));return this._disposers.push(r),r},t.prototype.setInterval=function(t,e){var n=this,i=setInterval((function(){n.removeDispose(r),t()}),e),r=new pM((function(){clearTimeout(i)}));return this._disposers.push(r),r},Object.defineProperty(t.prototype,"config",{set:function(t){try{this.processConfig(t)}catch(e){this.raiseCriticalError(e)}},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(e){var n=this;if(e){var i=this;if(AM(e,(function(e,r){var o,s=r;if("callback"==e&&"function"==typeof r&&r.call(i),n.hasProperty(e))if(!mR(s)||!cR(s.type)||mR(i[e])&&cR(i[e].className)&&!s.forceCreate&&i[e].className==s.type||n.asIs(e)?o=i[e]:(o=n.createClassInstance(s.type))?i[e]=o:o=i[e],o instanceof cN)n.processAdapters(o,s);else if(o instanceof IM)n.processEvents(o,s);else if("locale"==e&&gR(s))window["am4lang_"+s]&&(i[e]=window["am4lang_"+s]);else if("parent"==e&&gR(s)){var a=n.map.getKey(s);a?i[e]=a:n.addDelayedMap("parent",s)}else if(n.asIs(e))i[e]=s;else if(n.asFunction(e)&&gR(s)){if(!cR(QM.registeredClasses[s]))throw Error("Invalid easing function: "+s);i[e]=QM.registeredClasses[s]}else if(s instanceof t)i[e]=s;else if(o instanceof t)o.config=s;else if(o instanceof nN||o instanceof oN||o instanceof sN){if(vR(s))o instanceof nN?n.processListTemplate(s,o):n.processOrderedTemplate(s,o);else if(mR(s))if(s instanceof t)o.template=s;else{var u;u=cR(s.template)?s.template:s,o.template instanceof t?o.template.config=u:kM(u,(function(e,i){var r=o.template[e];r instanceof cN?n.processAdapters(r,i):r instanceof IM?n.processEvents(r,i):r instanceof KM?n.processDictionaryTemplate(r,i):o.template[e]instanceof t?o.template[e].config=i:mR(i)&&cR(i.type)?(r=n.createClassInstance(i.type))?(r instanceof t&&(r.config=i),o.template[e]=r):o.template[e]=i:r instanceof eN?n.processList(i,r):o.template[e]=n.maybeColorOrPercent(i)})),cR(s.values)&&(o instanceof nN?n.processListTemplate(s.values,o):n.processOrderedTemplate(s.values,o))}}else o instanceof eN?"children"==e?n.processList(s,o,n):n.processList(s,o):o instanceof KM?n.processDictionaryTemplate(o,s):o instanceof YM?n.processDictionary(o,s):o instanceof vN||o instanceof iR?i[e]=n.maybeColorOrPercent(s):mR(o)&&mR(s)?RM(s,o):(s=n.maybeColorOrPercent(s),i[e]=s);else n.isReserved(e)||(i[e]=s)}),this.configOrder),this.processingErrors.length){var r=this.processingErrors.join("\n");throw this._processingErrors=[],Error(r)}}},t.prototype.maybeColorOrPercent=function(t){if(gR(t)){if(t.match(/^[\-]?[0-9.]+\%$/))return rR(lR(t));if(t.match(/^\#[0-9abcdef]{3,}$/i))return bN(t)}return t},t.prototype.processAdapters=function(t,e){var n=this;vR(e)?tM(e,(function(e,i){t.add(e.key,e.callback,e.priority||0,n)})):mR(e)&&kM(e,(function(e,n){t.has(e,n)||t.add(e,n)}))},t.prototype.processEvents=function(t,e){var n=this;mR(e)?kM(e,(function(e,n){t.has(e,n)||t.on(e,n)})):vR(e)&&tM(e,(function(e,i){t.on(e.type,e.callback,n)}))},t.prototype.processDictionaryTemplate=function(e,n){mR(n)&&kM(n,(function(n,i){var r;(r="template"==n?e.template:e.hasKey(n)?e.getKey(n):e.create(n))instanceof t?r.config=i:mR(r)&&mR(i)?RM(i,r):r.setKey(n,i)}))},t.prototype.processDictionary=function(t,e){mR(e)&&kM(e,(function(e,n){t.setKey(e,n)}))},t.prototype.processListTemplate=function(e,n){var i=this;for(tM(e,(function(e,r){var o,s=i.getConfigEntryType(e);if(n.hasIndex(r)&&!e.forceCreate)o=n.getIndex(r);else{if(e instanceof t)return void n.push(e);o=s?n.create(s):n.create()}e===o||mR(e)&&(o instanceof t?o.config=e:mR(o)&&mR(e)?RM(e,o):n.setIndex(n.indexOf(o),e))}));e.length>n.length;)n.pop()},t.prototype.processOrderedTemplate=function(e,n){var i=this;tM(e,(function(e,r){var o,s=i.getConfigEntryType(e);o=s?n.create(s):n.create(),mR(e)&&(o instanceof t?o.config=e:mR(o)&&mR(e)?RM(e,o):n.insert(e))}))},t.prototype.processList=function(e,n,i){var r=this;vR(e)||(e=[e]);var o=n.length;for(tM(e,(function(e,s){if(mR(e)){var a=void 0;if(s<o&&!e.forceCreate)a=n.getIndex(s);else{if(e instanceof t)return void n.push(e);a=r.createEntryInstance(e),i?a.parent=i:n.push(a)}a instanceof t?a.config=e:mR(a)&&mR(e)&&RM(e,a)}else n.hasIndex(s)?n.setIndex(s,e):n.push(e)}));e.length>n.length;)n.pop()},t.prototype.configOrder=function(t,e){return t==e?0:"language"==t?-1:"language"==e?1:0},t.prototype.asIs=function(t){return-1!=$R(["locale"],t)},t.prototype.asFunction=function(t){return!1},t.prototype.createClassInstance=function(t){if(cR(QM.registeredClasses[t]))return new QM.registeredClasses[t];throw Error('Invalid type: "'+t+'".')},t.prototype.createEntryInstance=function(t){var e;return cR(t.type)&&(e=this.createClassInstance(t.type)),e||t},t.prototype.getConfigEntryType=function(t){if(cR(t.type)){if(cR(QM.registeredClasses[t.type]))return QM.registeredClasses[t.type];throw Error('Invalid type: "'+t.type+'".')}},t.prototype.hasProperty=function(t){return t in this},t.prototype.isReserved=function(t){return-1!==["type","forceCreate"].indexOf(t)},Object.defineProperty(t.prototype,"processingErrors",{get:function(){return this._processingErrors||(this._processingErrors=[]),this._processingErrors},enumerable:!0,configurable:!0}),t}(),xN=function(t){function e(){var e=t.call(this)||this;return e.className="BaseObjectEvents",e}return Qj(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventDispatcher||(this._eventDispatcher=new IM,this._disposers.push(this._eventDispatcher)),this._eventDispatcher},enumerable:!0,configurable:!0}),e.prototype.dispatch=function(t,e){this._eventDispatcher&&this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatch(t,{type:t,target:this})):this.events.dispatch(t,{type:t,target:this}))},e.prototype.dispatchImmediately=function(t,e){this._eventDispatcher&&this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatchImmediately(t,e)):this.events.dispatchImmediately(t,{type:t,target:this}))},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e._eventDispatcher&&this.events.copyFrom(e._eventDispatcher)},e}(wN),PN="string",CN="number",IN="date",ON="duration",SN="__\xa7\xa7\xa7__",TN="__\xa7\xa7\xa7\xa7__";function EN(t,e){return kM(t,(function(t,n){cR(n)&&(e[t]=n)})),e}function kN(t){return/^[^#]*/.exec(t)[0]}function AN(){var t="#";if(/apple/i.test(navigator.vendor)){var e=document.baseURI;if(e){e=kN(e);var n=kN(location.href);e!==n&&(t=n+t)}}return t}function DN(t){return cR(t)&&""!==t.toString()}function jN(t,e){return yR(t)?t:null!=t&&yR(t.value)&&yR(e)?e*t.value:0}function RN(t,e,n){var i;return yR(t)?(i=t)<0&&(i=n?e+i:e-i):null!=t&&yR(t.value)&&(i=e*t.value),i}function MN(t){var e=t.split("");return e[0]=e[0].toUpperCase(),e.join("")}function NN(t){return JSON.stringify(t)}function FN(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function VN(t,e,n,i){if(t.length<=e)return[t];var r=[];if(n)for(var o=-1,s=t.replace(/([,;:!?\\\/\.]+[\s]+|[\s])/g,"__\xa7\xa7\xa7__$1__\xa7\xa7\xa7__").split(SN),a=0;a<s.length;a++){var u=s[a],l=u.length;if(0!==l){var h;if(l>e){if(i&&(u=BN(u)),h=u.match(new RegExp(".{1,"+e+"}","g"))){if(i)for(var c=0;c<h.length;c++)h[c]=BN(h[c]);r=r.concat(h)}}else-1===o&&(r.push(""),o=0),r[o].length+l+1>e&&""!==r[o]&&(r.push(""),o++),r[o]+=u;o=r.length-1}}else if(h=t.match(new RegExp(".{1,"+e+"}","g"))){if(i)for(c=0;c<h.length;c++)h[c]=BN(h[c]);r=h}return 1==r.length&&n&&r[0].length>e&&(r=[]),r}function LN(t,e,n,i,r){return t.length<=e?t:((e-=n.length)<1&&(e=1),(VN(t,e,i,r)[0]||"")+n)}function UN(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function BN(t){return t.split("").reverse().join("")}function HN(t,e,n){return void 0===e&&(e=0),void 0===n&&(n="0"),"string"!=typeof t&&(t=t.toString()),e>t.length?Array(e-t.length+1).join(n)+t:t}function WN(t){return t.replace(/\/(date|number|duration)$/i,"")}function zN(t){return t?t.replace(/<[^>]*>/g,""):t}function qN(t){return t?zN(t.replace(/[\n\r]+/g,". ")):t}function GN(t){if(fR(t))return new Date(t);if(yR(t))return new Date(t);var e=Number(t);return yR(e)?new Date(e):new Date(t)}function YN(t){if(fR(t))return t.getTime();if(yR(t))return t;if(gR(t)){var e=Number(t);return yR(e)?e:void 0}}function KN(t,e){void 0===e&&(e=!1);var n=new Date(t.getFullYear(),0,0),i=t.getTime()-n.getTime()+60*(n.getTimezoneOffset()-t.getTimezoneOffset())*1e3;return Math.floor(i/864e5)}function XN(t,e){void 0===e&&(e=!1);var n=KN(t,e)-1,i=Math.floor((n-(t.getDay()||7)+10)/7);return 0===i?i=53:53===i&&(i=1),i}function QN(t,e){void 0===e&&(e=!1);var n=XN(new Date(t.getFullYear(),t.getMonth(),1),e),i=XN(t,e);return 1==i&&(i=53),i-n+1}function $N(t,e){return t>12?t-=12:0===t&&(t=12),cR(e)?t+(e-1):t}function ZN(t,e,n,i){if(void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),i)return e?"Coordinated Universal Time":"UTC";var r=t.toLocaleString("UTC"),o=t.toLocaleString("UTC",{timeZoneName:e?"long":"short"}).substr(r.length);return!1===n&&(o=o.replace(/ (standard|daylight|summer|winter) /i," ")),o}function JN(t,e,n){return t>n?n:t<e?e:t}function tF(t,e,n){var i=n-e;return(t>n||t<e)&&(t=e+(t-i*Math.floor(t/i))),t}function eF(t,e){var n=t.x,i=t.y,r=[];if(e){for(;cR(e.parent);)r.push(e),e=e.parent;r.reverse();for(var o=0;o<r.length;o++){var s=r[o],a=s.rotation,u=n-s.pixelX-s.ex,l=i-s.pixelY-s.ey;s.dx&&(n-=s.dx),s.dy&&(i-=s.dy);var h=s.scale;s.group&&(h=s.group.scale),n=(ER(-a)*u-SR(-a)*l)/h-s.pixelPaddingLeft,i=(ER(-a)*l+SR(-a)*u)/h-s.pixelPaddingTop}}return{x:n,y:i}}function nF(t,e){var n=t.x,i=t.y;if(e)for(;cR(e.parent);){var r=e.rotation;i+=e.pixelPaddingTop+e.ey;var o=e.scale;e.group&&(o=e.group.scale);var s=e.pixelX+((n+=e.pixelPaddingLeft+e.ex)*ER(r)-i*SR(r))*o,a=e.pixelY+(n*SR(r)+i*ER(r))*o;e.dx&&(s+=e.dx),e.dy&&(a+=e.dy),n=s,i=a,e=e.parent}return{x:n,y:i}}function iF(t,e,n){return eF(nF(t,e),n)}function rF(t,e){var n=nF(t,e),i=nF({x:t.x+t.width,y:t.y+t.height},e);return{x:n.x,y:n.y,width:i.x-n.x,height:i.y-n.y}}function oF(t,e,n){try{var i=e.getBoundingClientRect();return yR(n)||(n=1),{x:(t.x-i.left)/n,y:(t.y-i.top)/n}}catch(r){return t}}function sF(t,e){try{var n=e.getBoundingClientRect();return{x:t.x+n.left,y:t.y+n.top}}catch(i){return t}}function aF(t,e){return e&&e.htmlContainer?eF(oF(t,pR(e.htmlContainer),e.svgContainer.cssScale),e):t}function uF(t,e){return e&&e.htmlContainer?sF(nF(t,e),pR(e.htmlContainer)):t}var lF=/^([a-zA-Z][a-zA-Z0-9\+\.\-]*:)?(?:(\/\/)([^\@]+\@)?([^\/\?\#\:]*)(\:[0-9]+)?)?([^\?\#]*)(\?[^\#]*)?(\#.*)?$/;function hF(t){var e=lF.exec(t);return{protocol:e&&e[1]||"",separator:e&&e[2]||"",authority:e&&e[3]||"",domain:e&&e[4]||"",port:e&&e[5]||"",path:e&&e[6]||"",query:e&&e[7]||"",hash:e&&e[8]||""}}function cF(t){return t.protocol+t.separator+t.authority+t.domain+t.port+t.path+t.query+t.hash}function pF(t){return""===t.protocol&&""===t.separator&&""===t.authority&&""===t.domain&&""===t.port}function dF(t,e){var n=hF(t),i=hF(e);if(pF(n))throw new Error("Left URL is not absolute");if(pF(i)){if(""!==i.path)if("/"===i.path[0])n.path=i.path;else{var r=n.path.split(/\//),o=i.path.split(/\//);if(0===r.length?0!==o.length&&r.push(""):r.length>1&&r.pop(),function(t,e){for(var n=e.length,i=0;i<n;++i)t.push(e[i])}(r,o),n.path=r.join("/"),""!==n.path&&"/"!==n.path[0])throw new Error("URL path must start with /")}return n.query=i.query,n.hash=i.hash,cF(n)}return cF(i)}function fF(){return!!window.MSInputMethodContext&&!!document.documentMode}function gF(t){return+t}function yF(t,e){return Math.pow(t,e)}function mF(t,e){return 1-Math.pow(1-t,e)}function vF(t,e){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}function bF(t){return mF(t,3)}function _F(t){return Math.sin(t*_R)}function wF(t){return t*t*t}function xF(t){return--t*t*t+1}QM.registeredClasses["ease.linear"]=gF,QM.registeredClasses["ease.quadIn"]=function(t){return t*t},QM.registeredClasses["ease.quadOut"]=function(t){return t*(2-t)},QM.registeredClasses["ease.quadInOut"]=function(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2},QM.registeredClasses["ease.polyIn"]=yF,QM.registeredClasses["ease.polyOut"]=mF,QM.registeredClasses["ease.polyInOut"]=vF,QM.registeredClasses["ease.polyIn3"]=function(t){return yF(t,3)},QM.registeredClasses["ease.polyOut3"]=bF,QM.registeredClasses["ease.polyInOut3"]=function(t){return vF(t,3)},QM.registeredClasses["ease.expIn"]=function(t){return Math.pow(2,10*t-10)},QM.registeredClasses["ease.expOut"]=function(t){return 1-Math.pow(2,-10*t)},QM.registeredClasses["ease.expInOut"]=function(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2},QM.registeredClasses["ease.sinIn"]=function(t){return 1-Math.cos(t*_R)},QM.registeredClasses["ease.sinOut"]=_F,QM.registeredClasses["ease.sinInOut"]=function(t){return(1-Math.cos(bR*t))/2},QM.registeredClasses["ease.cubicIn"]=wF,QM.registeredClasses["ease.cubicOut"]=xF,QM.registeredClasses["ease.cubicInOut"]=function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2},QM.registeredClasses["ease.circleIn"]=function(t){return 1-Math.sqrt(1-t*t)},QM.registeredClasses["ease.circleOut"]=function(t){return Math.sqrt(1- --t*t)},QM.registeredClasses["ease.circleInOut"]=function(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2};var PF=7.5625;function CF(t){return(t=+t)<.36363636363636365?PF*t*t:t<.7272727272727273?PF*(t-=.5454545454545454)*t+.75:t<.9090909090909091?PF*(t-=.8181818181818182)*t+.9375:PF*(t-=.9545454545454546)*t+.984375}QM.registeredClasses["ease.bounceIn"]=function(t){return 1-CF(1-t)},QM.registeredClasses["ease.bounceOut"]=CF,QM.registeredClasses["ease.bounceInOut"]=function(t){return((t*=2)<=1?1-CF(1-t):CF(t-1)+1)/2};var IF=.3/(2*Math.PI),OF=Math.asin(1)*IF;QM.registeredClasses["ease.elasticIn"]=function(t){return 1*Math.pow(2,10*--t)*Math.sin((OF-t)/IF)},QM.registeredClasses["ease.elasticOut"]=function(t){return 1-1*Math.pow(2,-10*(t=+t))*Math.sin((t+OF)/IF)},QM.registeredClasses["ease.elasticInOut"]=function(t){return((t=2*t-1)<0?1*Math.pow(2,10*t)*Math.sin((OF-t)/IF):2-1*Math.pow(2,-10*t)*Math.sin((OF+t)/IF))/2};var SF=function(t){function e(){var e=t.call(this)||this;return e.transitionDuration=0,e.transitionEasing=xF,e.properties={},e.propertyFields={},e.filters=new eN,e.isTemplate=!1,e.className="SpriteState",e._disposers.push(new JM(e.filters)),e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"adapter",{get:function(){var t=this;return this._adapterO||(this._adapterO=new cN(this),this._adapterO.events.on("inserted",(function(e){t[e.newValue.key]=t[e.newValue.key]}),void 0,!1),this._adapterO.events.on("removed",(function(e){t[e.newValue.key]=t[e.newValue.key]}),void 0,!1)),this._adapterO},enumerable:!0,configurable:!0}),e.prototype.getPropertyValue=function(t){var e=this.properties[t],n=this.sprite;if(n){var i=this.propertyFields[t];if(cR(i)&&(n.dataItem&&(e=n.dataItem.dataContext[i]),null==e&&(e="__unset")),cR(e))this._adapterO&&(e=this._adapterO.apply(t,e));else{var r=n.getPropertyValue(t);(e=this._adapterO?this._adapterO.apply(t,r):r)==r&&(e=void 0)}}return e},e.prototype.copyFrom=function(t){t&&t!=this&&(this.transitionDuration=t.transitionDuration,this.transitionEasing=t.transitionEasing,EN(t.properties,this.properties),EN(t.propertyFields,this.propertyFields),this.filters.copyFrom(t.filters),t._adapterO&&this.adapter.copyFrom(t._adapterO))},Object.defineProperty(e.prototype,"allValues",{get:function(){var t=this,e={};return kM(this.properties,(function(n,i){e[n]=t.getPropertyValue(n)})),this._adapterO&&kM(this._adapterO.keys(),(function(n,i){var r=t.getPropertyValue(i);e[i]=r})),kM(this.propertyFields,(function(n){var i=t.getPropertyValue(n);e[n]=i})),e},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.properties={},this.filters.clear()},e.prototype.processConfig=function(e){cR(e)&&cR(e.properties)&&kM(e.properties,(function(t,n){gR(n)&&(n.match(/^[0-9.\-]+\%$/)?e.properties[t]=rR(lR(n)):n.match(/^\#[0-9abcdef]{3,}$/i)&&(e.properties[t]=_N(n)))})),t.prototype.processConfig.call(this,e)},e.prototype.asFunction=function(e){return"transitionEasing"==e||t.prototype.asIs.call(this,e)},e}(wN);QM.registeredClasses.SpriteState=SF;var TF=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._interactionEvents=new YM,e}return Qj(e,t),e.prototype._dispatchSpriteEvent=function(t){if(!this.target.disabled&&!this.target.isTemplate&&this.target.events.isEnabled(t.type)){var e=DM(t,{target:this.target});this.target.events.dispatchImmediately(e.type,e)}},e.prototype._dispatchSpritePointEvent=function(t){if(!this.target.disabled&&!this.target.isTemplate&&this.target.events.isEnabled(t.type)){var e=DM(t,{target:this.target,spritePoint:t.point?aF(t.point,this.target):void 0,svgPoint:this.target.getSvgPoint(t.point)});this.target.events.dispatchImmediately(e.type,e)}},e.prototype._addInteractionObjectEvent=function(t,e,n,i){var r=this,o=i+"-"+t;return this._interactionEvents.insertKeyIfEmpty(o,(function(){var s=r.target.interactions.events.on(t,e,n,i);return new gM((function(){r._interactionEvents.removeKey(o),s.dispose()}))})).increment()},e.prototype._on=function(e,n,i,r,o,s){var a=t.prototype._on.call(this,e,n,i,r,o,s),u=[a.disposer];switch(n){case"hit":case"track":case"doublehit":case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":u.push(this._addInteractionObjectEvent(n,this._dispatchSpritePointEvent,this,o));break;case"rightclick":case"down":case"up":case"drag":case"dragged":case"dragstart":case"dragstop":case"over":case"out":case"swipe":case"swipeleft":case"swiperight":case"resize":case"focus":case"blur":case"toggled":u.push(this._addInteractionObjectEvent(n,this._dispatchSpriteEvent,this,o))}switch(n){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"toggled":this.target.togglable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":this.target.hoverable=!0;case"out":this.target.hoverable=!0;break;case"focus":case"blur":this.target.focusable=!0}return a.disposer=new dM(u),a},e}(OM),EF=function(){function t(){}return t.opacity=1,t.strokeOpacity=1,t.strokeWidth=1,t.fillOpacity=1,t.fill=bN("#000000"),t.stroke=bN("#000000"),t.focusable=void 0,t.tabindex=0,t}(),kF={verbose:!0,commercialLicense:!1,classNamePrefix:"amcharts-",autoSetClassName:!1,minPolylineStep:.5,onlyShowOnViewport:!1,queue:!1,autoDispose:!1,licenses:[],suppressErrors:!1,suppressWarnings:!1,animationsEnabled:!0,nonce:"",deferredDelay:100,disableHoverOnTransform:"never"};function AF(t,e,n){return e+(n-e)*t}function DF(t,e,n){return new iR(AF(t,e.percent,n.percent))}function jF(t,e,n){var i=new vN(fN(e.rgb,n.rgb,t));return e.alpha!=n.alpha&&(i.alpha=e.alpha+(n.alpha-e.alpha)*t),i}function RF(t,e){return e+t.charAt(0).toUpperCase()+t.substr(1)}var MF,NF=function(){function t(t){this._disposer=new pM((function(){for(;0!==t.length;)t[0].dispose()}))}return t.prototype.isDisposed=function(){return this._disposer.isDisposed()},t.prototype.dispose=function(){this._disposer.dispose()},t}(),FF=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.duration=0,o.easing=gF,o.progress=0,o._loop=0,o._pause=!1,o._delayTimeout=null,o._time=0,o._isFinished=!1,o.className="Animation",!1===kF.animationsEnabled&&(i=0),o.object=e,o.animationOptions=oM(n),o.duration=i,r&&(o.easing=r),o.applyTheme(),o}return Qj(e,t),e.prototype.debug=function(){},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.pause()},e.prototype.delay=function(t){var e=this;if(t>0){this.pause(),iM(this.object.animations,this);var n=setTimeout((function(){e._delayTimeout=null,e.start()}),t);this._delayTimeout=new pM((function(){clearTimeout(n)}))}return this},e.prototype._start=function(){this._isFinished=!1,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),this.stopSameAnimations(),this._pause=!1,iM(uL.animations,this),iM(this.object.animations,this),uL.requestFrame()},e.prototype.start=function(){this._start(),this._startTime=Date.now(),this._time=0,this.staticOptions=[];for(var t=this.animationOptions.length-1;t>=0;t--){var e=this.animationOptions[t];if(cR(e.from)||(e.childObject?e.from=e.childObject[e.property]:(e.from=this.object[e.property],cR(e.from)||(e.from=EF[e.property]))),e.from==e.to)nM(this.animationOptions,e);else if(!cR(e.from)||!(e.from instanceof iR)&&e.to instanceof iR||e.from instanceof iR&&!(e.to instanceof iR))this.staticOptions.push(e),nM(this.animationOptions,e);else if(yR(e.to))if(e.updateMethod=AF,e.from instanceof iR){var n=this.object[RF(e.property,"pixel")];isNaN(n)?(this.staticOptions.push(e),nM(this.animationOptions,e)):e.from=n}else isNaN(e.from)&&(this.staticOptions.push(e),nM(this.animationOptions,e));else e.to instanceof vN?e.from?e.updateMethod=jF:(this.staticOptions.push(e),nM(this.animationOptions,e)):e.to instanceof iR?(e.updateMethod=DF,isNaN(e.from)||(n=this.object[RF(e.property,"relative")],isNaN(n)||(e.from=rR(100*n)))):(this.staticOptions.push(e),nM(this.animationOptions,e))}return this.applyStaticOptions(),this.events.isEnabled("animationstarted")&&this.events.dispatchImmediately("animationstarted",{type:"animationstarted",target:this,progress:this.progress}),this.update(),0===this.duration&&this.end(),this},e.prototype.loop=function(t){return yR(t)||(t=1/0),this._loop=t,this},e.prototype.pause=function(){return this._pause=!0,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),nM(uL.animations,this),nM(this.object.animations,this),this},e.prototype.resume=function(){return this._start(),this._startTime=Date.now()-this._time,this},e.prototype.end=function(){return 0==this._loop&&this.pause(),this.setProgress(1),this.applyStaticOptions(),this.events.isEnabled("animationended")&&this.events.dispatchImmediately("animationended",{type:"animationended",target:this,progress:this.progress}),this._loop>0?(this._loop--,this.start()):(this.stop(),this._isFinished=!0),this},e.prototype.kill=function(){this.pause(),this._isFinished=!0},e.prototype.isFinished=function(){return this._isFinished},e.prototype.applyStaticOptions=function(){var t=this;tM(this.staticOptions,(function(e){e.childObject?e.childObject[e.property]=1==t.progress?e.to:e.from:t.object[e.property]=1==t.progress?e.to:e.from}))},e.prototype.stop=function(t){return this.pause(),t||this.events.isEnabled("animationstopped")&&this.events.dispatchImmediately("animationstopped",{type:"animationstopped",target:this,progress:this.progress}),this},e.prototype.setProgress=function(t){var e=this;this._time=this.duration*t,tM(this.animationOptions,(function(n){if(n.updateMethod&&cR(n.from)){var i=n.updateMethod(t,n.from,n.to);n.childObject?n.childObject[n.property]=i:e.object[n.property]=i}})),this.progress=t,this.events.isEnabled("animationprogress")&&this.events.dispatchImmediately("animationprogress",{type:"animationprogress",target:this,progress:this.progress}),uL.requestFrame()},e.prototype.update=function(){if(!this._pause){var t=void 0;this._time=OR(Date.now()-this._startTime,0,this.duration);var e=this._time/this.duration;t=this.easing(e),(0==this.duration||!yR(t)||e>=1)&&(t=1),this.setProgress(t),1==CR(this._time/this.duration,6)&&this.end()}return this},Object.defineProperty(e.prototype,"delayed",{get:function(){return!!this._delayTimeout},enumerable:!0,configurable:!0}),e.prototype.stopSameAnimations=function(){var t=this;tM(sM(this.object.animations),(function(e){if(e!==t&&!e.delayed){var n=[];tM(t.animationOptions,(function(t){tM(e.animationOptions,(function(i){t.property==i.property&&t.childObject==i.childObject&&(n.push(i),0==e.animationOptions.length&&e.kill())}))})),tM(n,(function(t){nM(e.animationOptions,t)}))}}))},e.prototype.asFunction=function(e){return"easing"==e||t.prototype.asIs.call(this,e)},e}(xN),VF="http://www.w3.org/2000/svg",LF="http://www.w3.org/2000/xmlns/",UF="http://www.w3.org/1999/xlink";function BF(t,e,n,i){return t.addEventListener(e,n,i||!1),new pM((function(){t.removeEventListener(e,n,i||!1)}))}function HF(t){if(gR(t)){var e=document.getElementById(t);if(null==e&&(e=document.getElementsByClassName(t)[0]),e instanceof HTMLElement)return e}else if(t instanceof HTMLElement)return t}function WF(t,e){if(t)if(t.classList)t.classList.add(e);else{var n=t.getAttribute("class");t.setAttribute("class",n?n.split(" ").filter((function(t){return t!==e})).join(" ")+" "+e:e)}}function zF(t,e){if(t)if(t.classList)t.classList.remove(e);else{var n=t.getAttribute("class");n&&t.setAttribute("class",n.split(" ").filter((function(t){return t!==e})).join(" "))}}function qF(t,e,n){t.style[e]=n}function GF(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function YF(){var t=document.createElement("button");t.style.position="fixed",t.style.top="0px",t.style.left="-10000px",document.body.appendChild(t),t.focus(),t.blur(),document.body.removeChild(t)}function KF(t,e){for(var n=e;;){if(t===n)return!0;if(null==n.parentNode){if(null==n.host)return!1;n=n.host}else n=n.parentNode}}function XF(t){for(var e=t;;){if(null==e.parentNode)return null!=e.host?e:null;e=e.parentNode}}function QF(t){for(var e=t.ownerDocument,n=t;;){if(null==n.parentNode)return n===e||null!=n.host?n:null;n=n.parentNode}}var $F=function(t){function e(e,n,i){var r=this,o=function(t){return null==t?(cR(MF)||((e=document.createElement("style")).type="text/css",""!=kF.nonce&&e.setAttribute("nonce",kF.nonce),document.head.appendChild(e),MF=e.sheet),MF):((e=document.createElement("style")).type="text/css",""!=kF.nonce&&e.setAttribute("nonce",kF.nonce),t.appendChild(e),e.sheet);var e}(e);return(r=t.call(this,(function(){var t=$R(o.cssRules,r._rule);if(-1===t)throw new Error("Could not dispose StyleRule");o.deleteRule(t)}))||this)._rule=function(t,e){var n=t.cssRules.length;return t.insertRule(e+"{}",n),t.cssRules[n]}(o,n),kM(i,(function(t,e){r.setStyle(t,e)})),r}return Qj(e,t),Object.defineProperty(e.prototype,"selector",{get:function(){return this._rule.selectorText},set:function(t){this._rule.selectorText=t},enumerable:!0,configurable:!0}),e.prototype._setVendorPrefixName=function(t,e){var n=this._rule.style;n.setProperty("-webkit-"+t,e,""),n.setProperty("-moz-"+t,e,""),n.setProperty("-ms-"+t,e,""),n.setProperty("-o-"+t,e,""),n.setProperty(t,e,"")},e.prototype.setStyle=function(t,e){"transition"===t?this._setVendorPrefixName(t,e):this._rule.style.setProperty(t,e,"")},e}(pM),ZF=0;function JF(t){var e=GF(t,"font-family");if(e)return e;var n=t.parentElement||t.parentNode;return n?JF(n):void 0}function tV(t){var e=GF(t,"font-size");if(e)return e;var n=t.parentElement||t.parentNode;return n?tV(n):void 0}function eV(t,e){var n=t.getBoundingClientRect(),i=vR(e)?e:e?[e]:[];if(i.length){for(var r=0;r<i.length;r++){var o=i[r];if(!eV(o))return!1;var s=o.getBoundingClientRect();if(n.top>=0&&n.left>=0&&n.top<=s.top+s.height&&n.left<=s.left+s.width)return!0}return!1}return n.top>=0&&n.left>=0&&n.top<=(window.innerHeight||document.documentElement.clientHeight)&&n.left<=(window.innerWidth||document.documentElement.clientWidth)}!function(t){function e(e,n,i){var r=this,o=cR(i)?i:"__style_"+ ++ZF+"__";return(r=t.call(this,e,"."+o,n)||this)._className=o,r}Qj(e,t),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(t){this._className=t,this.selector="."+t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._className}}($F);var nV=function(){function t(t){this._isDisposed=!1,this._x=0,this._y=0,this._rotationY=0,this._rotationX=0,this._rotation=0,this._scale=1,this.node="string"==typeof t?document.createElementNS(VF,t):t}return t.prototype.removeNode=function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)},Object.defineProperty(t.prototype,"transformString",{get:function(){if(this.node)return this._transformString},enumerable:!0,configurable:!0}),t.prototype.transform=function(){var t="translate("+this._x+","+this._y+")";if(1!=this._scale&&(t+=(t?" ":"")+"scale("+this._scale+")"),0!=this._rotation){var e="rotate("+this._rotation+")";this._rotationX&&this._rotationY&&(e="rotate("+this._rotation+" "+this._rotationX+" "+this._rotationY+")"),t+=(t?" ":"")+e}this._transformString=t,this.node.setAttribute("transform",t)},t.prototype.getBBox=function(){var t={width:0,height:0,x:0,y:0};if(this.node&&this.node.parentNode)try{var e=this.node.getBBox();t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height}catch(n){}return t},t.prototype.moveTo=function(t){if(t){var e=t.x,n=t.y;this._x==e&&this._y==n||(this._x=e,this._y=n,this.transform())}},Object.defineProperty(t.prototype,"content",{get:function(){return this.node.innerHTML||""},set:function(t){this.node.innerHTML=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.node.textContent||""},set:function(t){this.node.textContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!=t&&(this._rotation=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationX",{get:function(){return this._rotationX},set:function(t){this._rotationX!=t&&(this._rotationX=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY},set:function(t){this._rotationY!=t&&(this._rotationY=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale!=t&&(this._scale=t,this.transform())},enumerable:!0,configurable:!0}),t.prototype.removeAttr=function(t){this.node.removeAttribute(t)},t.prototype.attr=function(t){var e=this;return kM(t,(function(t,n){cR(n)?e.node.setAttribute(t,n):e.node.removeAttribute(t)})),this},t.prototype.getAttr=function(t){return this.node.getAttribute(t)},t.prototype.attrNS=function(t,e,n){return this.node.setAttributeNS(t,e,n),this},t.prototype.getAttrNS=function(t,e){return this.node.getAttributeNS(t,e)},t.prototype.removeStyle=function(t){this.node.style[t]=null,delete this.node.style[t]},t.prototype.getStyle=function(t){return this.node.style[t]},t.prototype.addStyle=function(t){var e=this;return kM(t,(function(t,n){cR(n)?e.node.style[t]=n:e.removeStyle(t)})),this},t.prototype.addClass=function(t){WF(this.node,t)},t.prototype.removeClass=function(t){zF(this.node,t)},t.prototype.setClass=function(t){this.node.setAttribute("class",t)},t.prototype.removeChildNodes=function(){for(;this.node.childNodes.length>0;)this.node.removeChild(this.node.firstChild)},t.prototype.isDisposed=function(){return this._isDisposed},t.prototype.dispose=function(){this.removeNode()},t}(),iV=function(t){function e(e){return t.call(this,e)||this}return Qj(e,t),e.prototype.add=function(t){t&&this.node.appendChild(t.node)},e.prototype.addToBack=function(t){if(t){var e=this.node.childNodes[0];e?e!=t.node&&this.node.insertBefore(t.node,e):this.node.appendChild(t.node)}},e.prototype.removeElement=function(t){if(t)try{t.node&&t.node.parentNode==this.node&&this.node.removeChild(t.node)}catch(e){}},e.prototype.hasChild=function(t){for(var e=0;e<this.node.childNodes.length;e++)if(this.node.childNodes[e]==t.node)return!0;return!1},Object.defineProperty(e.prototype,"content",{get:function(){return this.node.innerHTML},set:function(t){this.node.innerHTML=t},enumerable:!0,configurable:!0}),e.prototype.removeChildren=function(){if(this.node.childNodes)for(;this.node.childNodes.length>0;){var t=this.node.firstChild;t&&t.parentNode&&t.parentNode.removeChild(t)}},e}(nV),rV=function(t){function e(){var e=t.call(this)||this;return e._purposes={stroke:bN("#e5e5e5"),fill:bN("#f3f3f3"),primaryButton:bN("#6794dc"),primaryButtonHover:bN("#6771dc"),primaryButtonDown:bN("#68dc75"),primaryButtonActive:bN("#68dc75"),primaryButtonText:bN("#FFFFFF"),primaryButtonStroke:bN("#FFFFFF"),secondaryButton:bN("#d9d9d9"),secondaryButtonHover:bN("#d9d9d9").brighten(-.25),secondaryButtonDown:bN("#d9d9d9").brighten(-.35),secondaryButtonActive:bN("#d9d9d9").brighten(.35),secondaryButtonText:bN("#000000"),secondaryButtonStroke:bN("#FFFFFF"),grid:bN("#000000"),background:bN("#ffffff"),alternativeBackground:bN("#000000"),text:bN("#000000"),alternativeText:bN("#FFFFFF"),disabledBackground:bN("#999999"),positive:bN("#67dc75"),negative:bN("#dc6788")},e.className="InterfaceColorSet",e.applyTheme(),e}return Qj(e,t),e.prototype.debug=function(){},e.prototype.getFor=function(t){return this._purposes[t]},e.prototype.setFor=function(t,e){this._purposes[t]=e},e}(wN);QM.registeredClasses.InterfaceColorSet=rV;var oV=new YM,sV=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._domEvents={},e}return Qj(e,t),e.prototype._addDOMEvent=function(t,e,n,i){var r=this;if(!this._domEvents[t]){var o=function(t){n.call(i,e,t)};this.target.element.addEventListener(t,o,!1),this._domEvents[t]=new gM((function(){delete r._domEvents[t],r.target.element.removeEventListener(t,o,!1)}))}return this._domEvents[t].increment()},e.prototype._dispatchKeyboardEvent=function(t,e){this.target.events.isEnabled(t)&&this.target.events.dispatchImmediately(t,{type:t,target:this.target,event:e})},e.prototype._on=function(e,n,i,r,o,s){var a=t.prototype._on.call(this,e,n,i,r,o,s),u=[a.disposer];switch(n){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":case"out":this.target.hoverable=!0;break;case"focus":case"blur":case"focusin":case"focusout":this.target.focusable=!0;break;case"keydown":case"keyup":case"keypress":case"input":u.push(this._addDOMEvent(n,n,this._dispatchKeyboardEvent,this))}return a.disposer=new dM(u),a},e}(OM),aV=function(t){function e(e){var n=t.call(this)||this;return n._eventDispatcher=new sV(n),n.eventDisposers=new YM,n.replacedStyles=new YM,n._clickable=!1,n._contextMenuDisabled=!1,n._hoverable=!1,n._trackable=!1,n._draggable=!1,n._swipeable=!1,n._resizable=!1,n._wheelable=!1,n._inert=!1,n._isHover=!1,n.isRealHover=!1,n._isHoverByTouch=!1,n._isDown=!1,n._isFocused=!1,n._isTouchProtected=!1,n._inertiaOptions=new YM,n.inertias=new YM,n._hitOptions={},n._hoverOptions={},n._swipeOptions={},n._keyboardOptions={},n._mouseOptions={},n._cursorOptions={defaultStyle:[{property:"cursor",value:"default"}]},n._disposers.push(n._eventDispatcher),n._element=e,n.className="InteractionObject",n._disposers.push(new GM(n.inertias)),n._disposers.push(new GM(n.eventDisposers)),n.applyTheme(),n}return Qj(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHover",{get:function(){return this._isHover},set:function(t){this.isHover!=t&&(this._isHover=t,t?xV().overObjects.moveValue(this):(this.isRealHover=!1,xV().overObjects.removeValue(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHoverByTouch",{get:function(){return this._isHoverByTouch},set:function(t){this.isHoverByTouch!=t&&(this._isHoverByTouch=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overPointers",{get:function(){return this._overPointers||(this._overPointers=new eN),this._overPointers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDown",{get:function(){return this._isDown},set:function(t){this.isDown!=t&&(this._isDown=t,t?xV().downObjects.moveValue(this):xV().downObjects.removeValue(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"downPointers",{get:function(){return this._downPointers||(this._downPointers=new eN),this._downPointers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFocused",{get:function(){return this._isFocused},set:function(t){this.isFocused!=t&&(this._isFocused=t,xV().focusedObject=t?this:void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTouchProtected",{get:function(){return this._isTouchProtected},set:function(t){this._isTouchProtected!=t&&(this._isTouchProtected=t,t?xV().unprepElement(this):(this.draggable||this.swipeable||this.trackable||this.resizable)&&xV().prepElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return this._clickable},set:function(t){this._clickable!==t&&(this._clickable=t,xV().processClickable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contextMenuDisabled",{get:function(){return this._contextMenuDisabled},set:function(t){this._contextMenuDisabled!==t&&(this._contextMenuDisabled=t,xV().processContextMenu(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverable",{get:function(){return this._hoverable},set:function(t){this._hoverable!==t&&(this._hoverable=t,xV().processHoverable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackable",{get:function(){return this._trackable},set:function(t){this._trackable!==t&&(this._trackable=t,xV().processTrackable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggable",{get:function(){return this._draggable},set:function(t){this._draggable!==t&&(this._draggable=t,xV().processDraggable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeable",{get:function(){return this._swipeable},set:function(t){this._swipeable!==t&&(this._swipeable=t,xV().processSwipeable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){this._resizable!==t&&(this._resizable=t,xV().processResizable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelable",{get:function(){return this._wheelable},set:function(t){this._wheelable!==t&&(this._wheelable=t,xV().processWheelable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inert",{get:function(){return this._inert},set:function(t){this._inert!==t&&(this._inert=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusable",{get:function(){return this._focusable},set:function(t){this._focusable!==t&&(this._focusable=t,this._focusable&&-1==this.tabindex&&(this._tabindex=1),xV().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){return dR(this._tabindex,-1)},set:function(t){this._tabindex!==t&&(this._tabindex=t,t>-1&&(this.focusable=!0),xV().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},set:function(t){this._element=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalPosition",{get:function(){return this._originalPosition||{x:0,y:0}},set:function(t){this._originalPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalScale",{get:function(){return dR(this._originalScale,1)},set:function(t){this._originalScale!==t&&(this._originalScale=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalAngle",{get:function(){return dR(this._originalAngle,0)},set:function(t){this._originalAngle!==t&&(this._originalAngle=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inertiaOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("inertiaOptions",this._inertiaOptions):this._inertiaOptions},set:function(t){this._inertiaOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hitOptions",this._hitOptions):this._hitOptions},set:function(t){this._hitOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hoverOptions",this._hoverOptions):this._hoverOptions},set:function(t){this._hoverOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("swipeOptions",this._swipeOptions):this._swipeOptions},set:function(t){this._swipeOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyboardOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("keyboardOptions",this._keyboardOptions):this._keyboardOptions},set:function(t){this._keyboardOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("mouseOptions",this._mouseOptions):this._mouseOptions},set:function(t){this._mouseOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("cursorOptions",this._cursorOptions):this._cursorOptions},set:function(t){this._cursorOptions=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.inertiaOptions=e.inertiaOptions,this.hitOptions=e.hitOptions,this.hoverOptions=e.hoverOptions,this.swipeOptions=e.swipeOptions,this.keyboardOptions=e.keyboardOptions,this.cursorOptions=e.cursorOptions,this.contextMenuDisabled=e.contextMenuDisabled,xV().applyCursorOverStyle(this)},e.prototype.setEventDisposer=function(t,e,n){var i=this.eventDisposers.getKey(t);e?null==i&&this.eventDisposers.setKey(t,n()):null!=i&&(i.dispose(),this.eventDisposers.removeKey(t))},e.prototype.dispose=function(){t.prototype.dispose.call(this);var e=xV();e.overObjects.removeValue(this),e.downObjects.removeValue(this),e.trackedObjects.removeValue(this),e.transformedObjects.removeValue(this),this.isHover&&this.wheelable&&e.unlockWheel(),e.focusedObject===this&&(e.focusedObject=void 0)},e}(xN),uV=function(){function t(t,e){this._disposed=!1,this.directionX=0,this.directionY=0,this.interaction=t,this.keyboardEvent=e,this._startedOn=(new Date).getTime(),xV().processDragStart(t),uL.animations.push(this),this.update()}return t.prototype.update=function(){var t=this.interaction,e=xV().getKeyboardOption(t,"speed"),n=xV().getKeyboardOption(t,"accelleration"),i=xV().getKeyboardOption(t,"accellerationDelay"),r={x:0,y:0};this.keyboardEvent.shiftKey?(e*=.5,n=1):this.keyboardEvent.ctrlKey&&(e*=2);var o=(new Date).getTime()-this._startedOn,s=o-i;if(n>0&&s>0){var a=o/i;o=i,r.x+=this.directionX*(e*n*a*s),r.y+=this.directionY*(e*n*a*s)}r.x+=this.directionX*(e*o),r.y+=this.directionY*(e*o),xV().handleTransformMove(t,r,{x:0,y:0},this.keyboardEvent,!0,!1)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||(xV().processDragStop(this.interaction),nM(uL.animations,this))},t}(),lV=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.animations=[],o.className="Inertia",o.interaction=e,o.type=n,o.point=i,o.startPoint=r,o._disposers.push(new NF(o.animations)),o}return Qj(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.point.x},set:function(t){yR(t)&&(this.point.x=t,this.handleMove())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.point.y},set:function(t){yR(t)&&(this.point.y=t,this.handleMove())},enumerable:!0,configurable:!0}),e.prototype.handleMove=function(){this.interaction.events.isEnabled("drag")&&this.interaction.events.dispatchImmediately("drag",{type:"drag",target:this.interaction,shift:{x:this.x-this.startPoint.x,y:this.y-this.startPoint.y},startPoint:this.startPoint,point:{x:this.x,y:this.y},touch:!1})},e.prototype.done=function(){this.interaction.inertias.removeKey(this.type),"move"===this.type&&xV().processDragStop(this.interaction),this.dispose()},e}(wN),hV=new(function(){function t(){}return t.prototype.getEventKey=function(t){var e;switch(t.keyCode||t.which){case 38:e="up";break;case 40:e="down";break;case 37:e="left";break;case 39:e="right";break;case 13:e="enter";break;case 27:e="esc";break;case 36:e="home";break;case 35:e="end";break;case 9:e="tab";break;case 17:e="ctrl";break;case 18:e="alt";break;case 16:e="shift";break;case 32:e="space";break;case 36:e="home";break;case 35:e="end";break;case 33:e="pgup";break;case 34:e="pgdn";break;case 45:e="ins";break;case 46:e="del";break;case 107:e="plus";break;case 109:e="minus";break;default:e="other"}return e},t.prototype.isKey=function(t,e){var n=this.getEventKey(t);return gR(e)&&(e=[e]),-1!==e.indexOf(n)},t.prototype.shiftKey=function(t){return t.shiftKey},t.prototype.ctrlKey=function(t){return t.ctrlKey},t.prototype.altKey=function(t){return t.altKey},t.prototype.metaKey=function(t){return t.metaKey},t}()),cV={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6};function pV(t){switch(t){case"year":return;case"month":return"year";case"week":case"day":return"month";case"hour":return"day";case"minute":return"hour";case"second":return"minute";case"millisecond":return"second"}}function dV(t,e){return cR(e)||(e=1),cV[t]*e}function fV(){return(new Date).getTime()}function gV(t){return new Date(t.getTime())}function yV(t,e,n,i){t=new Date(t.getTime()),e=new Date(e.getTime());var r=0,o=0;i||"millisecond"==n||(r=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-r),o=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-o));var s=!1;switch(n){case"year":t.getUTCFullYear()!=e.getUTCFullYear()&&(s=!0);break;case"month":(t.getUTCFullYear()!=e.getUTCFullYear()||t.getUTCMonth()!=e.getUTCMonth())&&(s=!0);break;case"day":(t.getUTCMonth()!=e.getUTCMonth()||t.getUTCDate()!=e.getUTCDate())&&(s=!0);break;case"hour":t.getUTCHours()!=e.getUTCHours()&&(s=!0);break;case"minute":t.getUTCMinutes()!=e.getUTCMinutes()&&(s=!0);break;case"second":t.getUTCSeconds()!=e.getUTCSeconds()&&(s=!0);break;case"millisecond":t.getTime()!=e.getTime()&&(s=!0)}if(s)return!0;var a=pV(n);return!!a&&(t.setUTCMinutes(t.getUTCMinutes()+r),e.setUTCMinutes(e.getUTCMinutes()+o),yV(t,e,a,i))}function mV(t,e,n,i){var r=0;switch(i||"millisecond"==e||(r=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-r)),e){case"day":var o=t.getUTCDate();t.setUTCDate(o+n);break;case"second":var s=t.getUTCSeconds();t.setUTCSeconds(s+n);break;case"millisecond":var a=t.getUTCMilliseconds();t.setUTCMilliseconds(a+n);break;case"hour":var u=t.getUTCHours();t.setUTCHours(u+n);break;case"minute":var l=t.getUTCMinutes();t.setUTCMinutes(l+n);break;case"year":var h=t.getUTCFullYear();t.setUTCFullYear(h+n);break;case"month":var c=t.getUTCMonth();t.setUTCMonth(c+n);break;case"week":var p=t.getUTCDate();t.setUTCDate(p+7*n)}if(!i&&"millisecond"!=e&&(t.setUTCMinutes(t.getUTCMinutes()+r),"day"==e||"week"==e||"month"==e||"year"==e)){var d=t.getTimezoneOffset();if(d!=r){var f=d-r;t.setUTCMinutes(t.getUTCMinutes()+f),t.getTimezoneOffset()!=d&&t.setUTCMinutes(t.getUTCMinutes()-f)}}return t}function vV(t,e,n,i,r,o){yR(n)||(n=1);var s=0;switch(r||"millisecond"==e||(s=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-s)),e){case"day":var a=t.getUTCDate();if(n>1){if(o){o=vV(o,"day",1);var u=t.getTime()-o.getTime(),l=Math.floor(u/dV("day")/n),h=dV("day",l*n);t.setTime(o.getTime()+h-s*dV("minute"))}}else t.setUTCDate(a);t.setUTCHours(0,0,0,0);break;case"second":var c=t.getUTCSeconds();n>1&&(c=Math.floor(c/n)*n),t.setUTCSeconds(c,0);break;case"millisecond":if(1==n)return t;var p=t.getUTCMilliseconds();p=Math.floor(p/n)*n,t.setUTCMilliseconds(p);break;case"hour":var d=t.getUTCHours();n>1&&(d=Math.floor(d/n)*n),t.setUTCHours(d,0,0,0);break;case"minute":var f=t.getUTCMinutes();p=t.getUTCMilliseconds(),n>1&&(f=Math.floor(f/n)*n),t.setUTCMinutes(f,0,0);break;case"month":var g=t.getUTCMonth();n>1&&(g=Math.floor(g/n)*n),t.setUTCMonth(g,1),t.setUTCHours(0,0,0,0);break;case"year":var y=t.getUTCFullYear();n>1&&(y=Math.floor(y/n)*n),t.setUTCFullYear(y,0,1),t.setUTCHours(0,0,0,0);break;case"week":var m=t.getUTCDate(),v=t.getUTCDay();yR(i)||(i=1),t.setUTCDate(m=v>=i?m-v+i:m-(7+v)+i),t.setUTCHours(0,0,0,0)}if(!r&&"millisecond"!=e&&(t.setUTCMinutes(t.getUTCMinutes()+s),"day"==e||"week"==e||"month"==e||"year"==e)){var b=t.getTimezoneOffset();if(b!=s){var _=b-s;t.setUTCMinutes(t.getUTCMinutes()+_)}}return t}function bV(t,e){return new Date(t.toLocaleString("en-US",{timeZone:e}))}var _V=function(t){function e(){var n=t.call(this)||this;return n._globalEventsAdded=!1,n._pointerEvents={pointerdown:"mousedown",pointerup:"mouseup",pointermove:"mousemove",pointercancel:"mouseup",pointerover:"mouseover",pointerout:"mouseout",wheel:"wheel"},n._usePointerEventsOnly=!1,n._useTouchEventsOnly=!1,n._addHoverEvents=!0,n._passiveSupported=!1,n._delayedEvents={out:[]},n.overObjects=new eN,n.downObjects=new eN,n.trackedObjects=new eN,n.transformedObjects=new eN,n.pointers=new YM,n.inertiaOptions=new YM,n.hitOptions={doubleHitTime:300,hitTolerance:10,noFocus:!0},n.hoverOptions={touchOutBehavior:"leave",touchOutDelay:1e3},n.swipeOptions={time:500,verticalThreshold:75,horizontalThreshold:30},n.keyboardOptions={speed:.1,accelleration:1.2,accellerationDelay:2e3},n.mouseOptions={sensitivity:1},n.className="Interaction",n.body=n.getInteraction(document.body),n._disposers.push(n.body),window.hasOwnProperty("PointerEvent")?(n._pointerEvents.pointerdown="pointerdown",n._pointerEvents.pointerup="pointerup",n._pointerEvents.pointermove="pointermove",n._pointerEvents.pointercancel="pointercancel",n._pointerEvents.pointerover="pointerover",n._pointerEvents.pointerout="pointerout"):window.hasOwnProperty("MSPointerEvent")?(n._pointerEvents.pointerdown="MSPointerDown",n._pointerEvents.pointerup="MSPointerUp",n._pointerEvents.pointermove="MSPointerMove",n._pointerEvents.pointercancel="MSPointerUp",n._pointerEvents.pointerover="MSPointerOver",n._pointerEvents.pointerout="MSPointerOut"):"undefined"!=typeof matchMedia&&matchMedia("(pointer:fine)").matches?"ontouchstart"in window&&(n._addHoverEvents=!1,n._useTouchEventsOnly=!0):window.navigator.userAgent.match(/MSIE /)||n.fullFF()?n._usePointerEventsOnly=!0:n._useTouchEventsOnly=!0,"onwheel"in document.createElement("div")?n._pointerEvents.wheel="wheel":cR(document.onmousewheel)&&(n._pointerEvents.wheel="mousewheel"),n.inertiaOptions.setKey("move",{time:100,duration:500,factor:1,easing:bF}),n.inertiaOptions.setKey("resize",{time:100,duration:500,factor:1,easing:bF}),n._passiveSupported=e.passiveSupported,n.applyTheme(),n}return Qj(e,t),e.prototype.fullFF=function(){return window.navigator.userAgent.match(/Firefox/)&&!window.navigator.userAgent.match(/Android/)},e.prototype.debug=function(){},e.prototype.addGlobalEvents=function(){var t=this;this._globalEventsAdded||(this._useTouchEventsOnly||(this._disposers.push(BF(document,this._pointerEvents.pointerdown,(function(e){t.handleGlobalPointerDown(e)}))),this._disposers.push(BF(document,this._pointerEvents.pointermove,(function(e){t.handleGlobalPointerMove(e)}))),this._disposers.push(BF(document,this._pointerEvents.pointerup,(function(e){t.handleGlobalPointerUp(e)}))),this._disposers.push(BF(document,this._pointerEvents.pointercancel,(function(e){t.handleGlobalPointerUp(e,!0)}))),this._disposers.push(BF(document,"mouseenter",(function(e){cR(e.relatedTarget)||0!=e.buttons&&0!=e.which||t.handleDocumentLeave(e)})))),this._usePointerEventsOnly||(this._disposers.push(BF(document,"touchstart",(function(e){t.handleGlobalTouchStart(e)}))),this._disposers.push(BF(document,"touchmove",(function(e){t.handleGlobalTouchMove(e)}))),this._disposers.push(BF(document,"touchend",(function(e){t.handleGlobalTouchEnd(e)})))),this._disposers.push(BF(document,"keydown",(function(e){t.handleGlobalKeyDown(e)}))),this._disposers.push(BF(document,"keyup",(function(e){t.handleGlobalKeyUp(e)}))),this._globalEventsAdded=!0)},e.prototype.processClickable=function(t){this.processTouchable(t)},e.prototype.processContextMenu=function(t){t.contextMenuDisabled?t.eventDisposers.hasKey("contextMenuDisabled")||t.eventDisposers.setKey("contextMenuDisabled",BF(t.element,"contextmenu",(function(t){t.preventDefault()}))):t.eventDisposers.hasKey("contextMenuDisabled")&&t.eventDisposers.getKey("contextMenuDisabled").dispose()},e.prototype.processHoverable=function(t){var e=this;if(t.hoverable||t.trackable)this.addGlobalEvents(),this.applyCursorOverStyle(t),!t.eventDisposers.hasKey("hoverable")&&this._addHoverEvents&&t.eventDisposers.setKey("hoverable",new dM([BF(t.element,this._pointerEvents.pointerout,(function(n){return e.handlePointerOut(t,n)})),BF(t.element,this._pointerEvents.pointerover,(function(n){return e.handlePointerOver(t,n)}))]));else{var n=t.eventDisposers.getKey("hoverable");null!=n&&(n.dispose(),t.eventDisposers.removeKey("hoverable"))}this.processTouchable(t)},e.prototype.processMovable=function(t){(t.draggable||t.swipeable||t.trackable||t.resizable)&&(this.isGlobalElement(t)||t.isTouchProtected||this.prepElement(t),this.applyCursorOverStyle(t)),this.processTouchable(t)},e.prototype.processTrackable=function(t){this.processHoverable(t),this.processMovable(t),t.trackable?this.trackedObjects.moveValue(t):this.trackedObjects.removeValue(t)},e.prototype.processDraggable=function(t){this.processMovable(t)},e.prototype.processSwipeable=function(t){this.processMovable(t)},e.prototype.processResizable=function(t){this.processMovable(t)},e.prototype.processWheelable=function(t){var e=this;if(t.wheelable)t.eventDisposers.hasKey("wheelable")||t.eventDisposers.setKey("wheelable",new dM([BF(t.element,this._pointerEvents.wheel,(function(n){return e.handleMouseWheel(t,n)}),!!this._passiveSupported&&{passive:!1}),t.events.on("out",(function(n){t.wheelable&&e.unlockWheel()})),t.events.on("over",(function(n){t.wheelable&&e.lockWheel()}))]));else{var n=t.eventDisposers.getKey("wheelable");null!=n&&(n.dispose(),t.eventDisposers.removeKey("wheelable"))}},e.prototype.processFocusable=function(t){var e=this;if(!0===t.focusable&&t.tabindex>-1&&!this._useTouchEventsOnly)t.eventDisposers.hasKey("focusable")||t.eventDisposers.setKey("focusable",new dM([BF(t.element,"focus",(function(n){return e.handleFocus(t,n)})),BF(t.element,"blur",(function(n){return e.handleBlur(t,n)})),BF(t.element,this._pointerEvents.pointerdown,(function(n){return e.handleFocusBlur(t,n)})),BF(t.element,"touchstart",(function(n){return e.handleFocusBlur(t,n)}),!!this._passiveSupported&&{passive:!1})]));else{var n=t.eventDisposers.getKey("focusable");null!=n&&(n.dispose(),t.eventDisposers.removeKey("focusable"))}},e.prototype.processTouchable=function(t){var e=this;if(t.clickable||t.hoverable||t.trackable||t.draggable||t.swipeable||t.resizable)this.addGlobalEvents(),t.eventDisposers.hasKey("touchable")||(this._useTouchEventsOnly||this._usePointerEventsOnly?this._useTouchEventsOnly?this._usePointerEventsOnly||t.eventDisposers.setKey("touchable",BF(t.element,"touchstart",(function(n){return e.handleTouchDown(t,n)}),!!this._passiveSupported&&{passive:!1})):t.eventDisposers.setKey("touchable",BF(t.element,this._pointerEvents.pointerdown,(function(n){return e.handlePointerDown(t,n)}))):t.eventDisposers.setKey("touchable",new dM([BF(t.element,this._pointerEvents.pointerdown,(function(n){return e.handlePointerDown(t,n)})),BF(t.element,"touchstart",(function(n){return e.handleTouchDown(t,n)}),!!this._passiveSupported&&{passive:!1})])));else{var n=t.eventDisposers.getKey("touchable");null!=n&&(n.dispose(),t.eventDisposers.removeKey("touchable"))}},e.prototype.handleFocus=function(t,e){t.focusable?(t.isFocused=!0,t.events.isEnabled("focus")&&!uL.isPaused&&t.events.dispatchImmediately("focus",{type:"focus",target:t,event:e})):e.preventDefault()},e.prototype.handleFocusBlur=function(t,e){!1!==t.focusable&&this.getHitOption(t,"noFocus")&&t.events.once("focus",(function(){t.events.disableType("blur"),YF(),t.sprite&&t.sprite.handleBlur(),t.events.enableType("blur")}))},e.prototype.handleBlur=function(t,e){t.focusable?(t.isFocused=!1,t.events.isEnabled("blur")&&!uL.isPaused&&t.events.dispatchImmediately("blur",{type:"blur",target:t,event:e})):e.preventDefault()},e.prototype.handleGlobalKeyDown=function(t){if(this.focusedObject)if(hV.isKey(t,"esc"))YF();else if(this.focusedObject.draggable&&hV.isKey(t,["up","down","left","right"])){t.preventDefault();var e=this.focusedObject,n="interactionKeyboardObject";if(e.eventDisposers.hasKey(n))return;var i=new uV(e,t);switch(e.eventDisposers.setKey(n,i),hV.getEventKey(t)){case"up":i.directionY=-1;break;case"down":i.directionY=1;break;case"left":i.directionX=-1;break;case"right":i.directionX=1}}},e.prototype.handleGlobalKeyUp=function(t){var e="interactionKeyboardObject";if(this.focusedObject){var n=this.focusedObject.eventDisposers.getKey(e);null!=n&&(t.preventDefault(),n.dispose(),this.focusedObject.eventDisposers.removeKey(e)),hV.isKey(t,"enter")&&this.focusedObject.sprite&&this.focusedObject.sprite.events.isEnabled("hit")&&!this.focusedObject.sprite.events.isEnabled("toggled")&&this.focusedObject.dispatchImmediately("hit")}},e.prototype.handleGlobalPointerMove=function(t){var e=this.getPointer(t);e.point=this.getPointerPoint(t),this.events.isEnabled("track")&&!uL.isPaused&&this.events.dispatchImmediately("track",{type:"track",target:this,event:t,pointer:e,touch:e.touch}),this.addBreadCrumb(e,e.point),this.handleGlobalMove(e,t)},e.prototype.handleGlobalPointerDown=function(t){this.processDelayed();var e=this.getPointer(t);this.events.isEnabled("down")&&!uL.isPaused&&this.events.dispatchImmediately("down",{type:"down",target:this,event:t,pointer:e,touch:e.touch})},e.prototype.preventTouchAction=function(t){t.defaultPrevented||t.preventDefault()},e.prototype.handleGlobalPointerUp=function(t,e){void 0===e&&(e=!1);var n=this.getPointer(t);this.events.isEnabled("up")&&!uL.isPaused&&this.events.dispatchImmediately("up",{type:"up",target:this,event:t,pointer:n,touch:n.touch}),this.handleGlobalUp(n,t,e)},e.prototype.handleGlobalTouchMove=function(t){for(var e=0;e<t.changedTouches.length;e++){var n=this.getPointer(t.changedTouches[e]);n.point=this.getPointerPoint(t.changedTouches[e]),this.events.isEnabled("track")&&!uL.isPaused&&this.events.dispatchImmediately("track",{type:"track",target:this,event:t,pointer:n,touch:n.touch}),this.addBreadCrumb(n,n.point),this.handleGlobalMove(n,t)}},e.prototype.handleGlobalTouchStart=function(t){this.processDelayed();for(var e=0;e<t.changedTouches.length;e++){var n=this.getPointer(t.changedTouches[e]);this._usePointerEventsOnly||!this.events.isEnabled("down")||uL.isPaused||this.events.dispatchImmediately("down",{type:"down",target:this,event:t,pointer:n,touch:n.touch})}},e.prototype.handleGlobalTouchEnd=function(t){for(var e=0;e<t.changedTouches.length;e++){var n=this.getPointer(t.changedTouches[e]);this.events.isEnabled("up")&&!uL.isPaused&&this.events.dispatchImmediately("up",{type:"up",target:this,event:t,pointer:n,touch:n.touch}),this.handleGlobalUp(n,t)}},e.prototype.handlePointerDown=function(t,e){var n=this.getPointer(e);(n.touch||1==e.which||3==e.which)&&(n.button=e.which,this.resetPointer(n,e),this.handleDown(t,n,e))},e.prototype.handlePointerOver=function(t,e){var n=this.getPointer(e);this.handleOver(t,n,e)},e.prototype.handlePointerOut=function(t,e){var n=this.getPointer(e);this.handleOut(t,n,e)},e.prototype.handleMouseWheel=function(t,e){var n=this.getPointer(e);n.point=this.getPointerPoint(e);var i,r,o=1;if(1==e.deltaMode&&(o=50),o*=this.getMouseOption(t,"sensitivity"),!(e instanceof WheelEvent))throw new Error("Invalid event type");i=Math.round(-1*e.wheelDeltaX||e.deltaX)*o,r=Math.round(-1*e.wheelDeltaY||e.deltaY)*o,this.handleWheel(t,n,i,r,e)},e.prototype.handleTouchDown=function(t,e){for(var n=0;n<e.changedTouches.length;n++){var i=this.getPointer(e.changedTouches[n]);this.maybePreventDefault(t,e,i),this.resetPointer(i,e.changedTouches[n]),this.handleDown(t,i,e)}},e.prototype.handleHit=function(t,e,n){var i=fV();if(t.lastHit&&t.lastHit>=i-this.getHitOption(t,"doubleHitTime")){if(i-t.lastHit<100)return;t.lastHit=void 0,t.lastHitPointer=void 0,t.events.isEnabled("doublehit")&&!uL.isPaused&&t.events.dispatchImmediately("doublehit",{type:"doublehit",target:t,point:e.point,event:n,touch:e.touch})}else t.lastHit=i,t.lastHitPointer=e,3===e.button?t.events.isEnabled("rightclick")&&!uL.isPaused&&t.events.dispatchImmediately("rightclick",{type:"rightclick",target:t,event:n}):t.events.isEnabled("hit")&&!uL.isPaused&&t.events.dispatchImmediately("hit",{type:"hit",target:t,event:n,point:e.point,touch:e.touch})},e.prototype.handleOver=function(t,e,n,i){if(void 0===i&&(i=!1),t.hoverable){var r=!1;this.shouldCancelHovers(e)&&this.areTransformed()&&this.moved(e,this.getHitOption(t,"hitTolerance"))&&(r=!0,this.cancelAllHovers(n)),this.processDelayed(),t.overPointers.moveValue(e),t.isRealHover||(r||(t.isHover=!0,t.isRealHover=!0,this.overObjects.moveValue(t)),this.handleTrack(this.body,e,n,!0),!t.events.isEnabled("over")||uL.isPaused||r||t.events.dispatchImmediately("over",{type:"over",target:t,event:n,pointer:e,touch:e.touch}))}},e.prototype.handleOut=function(t,e,n,i,r){var o=this;if(void 0===i&&(i=!1),void 0===r&&(r=!1),t.hoverable&&(t.overPointers.removeValue(e),t.isHover&&(!t.hasDelayedOut||r))){if(i&&t.overPointers.length)return;if(e.touch&&!r&&!this.old(e)){var s=this.getHoverOption(t,"touchOutBehavior");if("leave"==s)return this._delayedEvents.out.push({type:"out",io:t,pointer:e,event:n,keepUntil:fV()+500}),void(t.hasDelayedOut=!0);if("delay"==s&&this.getHoverOption(t,"touchOutDelay"))return void this._delayedEvents.out.push({type:"out",io:t,pointer:e,event:n,keepUntil:fV()+500,timeout:this.setTimeout((function(){o.handleOut(t,e,n,!0)}),this.getHoverOption(t,"touchOutDelay"))})}t.isHover=!1,this.overObjects.removeValue(t),t.events.isEnabled("out")&&!uL.isPaused&&t.events.dispatchImmediately("out",{type:"out",target:t,event:n,pointer:e,touch:e.touch}),t.overPointers.clear(),t.hasDelayedOut=!1}},e.prototype.processDelayed=function(){for(var t;t=this._delayedEvents.out.pop();)t.timeout&&t.timeout.dispose(),this.handleOut(t.io,t.pointer,t.event,!1,!0)},e.prototype.handleDown=function(t,e,n){this.maybePreventDefault(t,n,e),t.inert&&this.stopInertia(t),this.handleOver(t,e,n,!0),t.downPointers.moveValue(e),this.applyCursorDownStyle(t,e),t.isDown||(!1!==t.focusable&&this.getHitOption(t,"noFocus")&&this.focusedObject&&YF(),t.isDown=!0,this.downObjects.moveValue(t),t.draggable&&this.processDragStart(t,e,n),t.resizable&&this.processResizeStart(t,e,n)),t.events.isEnabled("down")&&!uL.isPaused&&t.events.dispatchImmediately("down",{type:"down",target:t,event:n,pointer:e,touch:e.touch})},e.prototype.handleGlobalUp=function(t,e,n){var i=this;void 0===n&&(n=!1);var r=this.downObjects.values.slice();r.sort((function(t,e){if(t&&e){var n=t.element.compareDocumentPosition(e.element);return n&Node.DOCUMENT_POSITION_CONTAINED_BY?1:n&Node.DOCUMENT_POSITION_CONTAINS?-1:0}return 0})),tM(r,(function(r){r&&r.downPointers.contains(t)&&i.handleUp(r,t,e,n)}))},e.prototype.handleDocumentLeave=function(t){var e=this;VM(this.downObjects.backwards().iterator(),(function(n){n.downPointers.each((function(i){e.handleUp(n,i,t)}))}))},e.prototype.handleUp=function(t,e,n,i){void 0===i&&(i=!1),this.restoreCursorDownStyle(t,e),t.downPointers.removeValue(e),(e.touch||this._useTouchEventsOnly)&&this.handleOut(t,e,n,!0),t.isDown&&(0==t.downPointers.length&&(t.isDown=!1,this.downObjects.removeValue(t)),t.events.isEnabled("up")&&!uL.isPaused&&t.events.dispatchImmediately("up",{type:"up",target:t,event:n,pointer:e,touch:e.touch}),i||(t.swipeable&&this.swiped(t,e)?this.handleSwipe(t,e,n):(t.clickable&&!this.moved(e,this.getHitOption(t,"hitTolerance"))&&this.handleHit(t,e,n),t.inert&&this.moved(e,this.getHitOption(t,"hitTolerance"))?this.handleInertia(t,e):t.draggable&&this.processDragStop(t,e,n),t.resizable&&this.processResizeStop(t,e,n))))},e.prototype.maybePreventDefault=function(t,e,n){!cR(e)||!(t.draggable||t.swipeable||t.trackable||t.resizable)||this.isGlobalElement(t)||!1===e.cancelable||t.isTouchProtected&&n&&n.touch||e.preventDefault()},e.prototype.cancelAllHovers=function(t){var e=this;VM(this.overObjects.backwards().iterator(),(function(n){if(n){var i=n.overPointers.getIndex(0);e.handleOut(n,i,t,!0,!0)}}))},e.prototype.shouldCancelHovers=function(t){return"always"==kF.disableHoverOnTransform||"touch"==kF.disableHoverOnTransform&&t.touch},e.prototype.handleGlobalMove=function(t,e){var n,i=this;if(!t.touch){var r="function"==typeof(n=t.lastEvent).composedPath?n.composedPath()[0]:n.target;VM(this.overObjects.backwards().iterator(),(function(n){if(n&&n.overPointers.contains(t)&&n.hoverable){var o=!1;n.element&&t.lastEvent&&KF(n.element,r)||(o=!0),o&&i.handleOut(n,t,e,!0)}}))}VM(this.transformedObjects.backwards().iterator(),(function(n){!n.downPointers.contains(t)||n.swipeable&&i.swiping(n,t)||!n.draggable&&!n.resizable||i.handleTransform(n,e)})),VM(this.trackedObjects.backwards().iterator(),(function(n){n.overPointers.contains(t)||i.handleTrack(n,t,e)}))},e.prototype.handleTrack=function(t,e,n,i){void 0===i&&(i=!1),(i||this.moved(e,0))&&t.events.isEnabled("track")&&!uL.isPaused&&t.events.dispatchImmediately("track",{type:"track",target:t,event:n,point:e.point,pointer:e,touch:e.touch})},e.prototype.handleSwipe=function(t,e,n){t.events.isEnabled("swipe")&&!uL.isPaused&&t.events.dispatchImmediately("swipe",{type:"swipe",target:t,event:n,touch:e.touch}),e.startPoint.x<e.point.x?t.events.isEnabled("swiperight")&&!uL.isPaused&&t.events.dispatchImmediately("swiperight",{type:"swiperight",target:t,event:n,touch:e.touch}):t.events.isEnabled("swipeleft")&&!uL.isPaused&&t.events.dispatchImmediately("swipeleft",{type:"swipeleft",target:t,event:n,touch:e.touch})},e.prototype.handleWheel=function(t,e,n,i,r){var o={x:n,y:i};t.events.isEnabled("wheel")&&!uL.isPaused&&t.events.dispatchImmediately("wheel",{type:"wheel",target:t,event:r,point:e.point,shift:o}),n<0?t.events.isEnabled("wheelleft")&&!uL.isPaused&&t.events.dispatchImmediately("wheelleft",{type:"wheelleft",target:t,event:r,point:e.point,shift:o}):n>0?t.events.isEnabled("swiperight")&&!uL.isPaused&&t.events.dispatchImmediately("wheelright",{type:"wheelright",target:t,event:r,point:e.point,shift:o}):i<0?t.events.isEnabled("wheelup")&&!uL.isPaused&&t.events.dispatchImmediately("wheelup",{type:"wheelup",target:t,event:r,point:e.point,shift:o}):i>0&&t.events.isEnabled("wheeldown")&&!uL.isPaused&&t.events.dispatchImmediately("wheeldown",{type:"wheeldown",target:t,event:r,point:e.point,shift:o})},e.prototype.handleInertia=function(t,e){t.draggable&&0===t.downPointers.length&&this.handleMoveInertia(t,e),t.resizable&&t.downPointers.length>1&&this.handleResizeInertia(t,e)},e.prototype.handleMoveInertia=function(t,e){var n=new lV(t,"move",{x:e.point.x,y:e.point.y},{x:e.startPoint.x,y:e.startPoint.y}),i=this.getTrailPoint(e,fV()-this.getInertiaOption(t,"move","time"));if(void 0!==i){var r=this.getInertiaOption(t,"move","factor"),o=new FF(n,[{to:e.point.x+(e.point.x-i.point.x)*r,property:"x"},{to:e.point.y+(e.point.y-i.point.y)*r,property:"y"}],this.getInertiaOption(t,"move","duration"),this.getInertiaOption(t,"move","easing")).start();this._disposers.push(o.events.on("animationended",(function(t){n.done()}))),t.inertias.setKey("move",n)}else this.processDragStop(t,e,e.lastUpEvent)},e.prototype.handleResizeInertia=function(t,e){},e.prototype.handleTransform=function(t,e){var n,i,r,o=t.downPointers.getIndex(0),s=null,a=null;o&&(s=o.point,a=o.startPoint),r=i={x:t.originalPosition.x,y:t.originalPosition.y};for(var u=!0,l=1;l<t.downPointers.length;l++){var h=t.downPointers.getIndex(l);if(a.x!=h.startPoint.x&&a.y!=h.startPoint.y){u=!1,i=(n=h).point,r=n.startPoint;break}}var c=o&&this.moved(o,0);if(t.draggable&&o&&o.dragStartEvents&&o.dragStartEvents.length&&c&&t.events.isEnabled("dragstart")&&!uL.isPaused&&t.events.dispatchImmediately("dragstart",o.dragStartEvents.shift()),u&&t.draggable)this.handleTransformMove(t,s,a,e,c,o.touch),this.shouldCancelHovers(o)&&this.moved(o,this.getHitOption(t,"hitTolerance"))&&this.cancelAllHovers(e);else{var p=n&&this.moved(n,0);(this.shouldCancelHovers(o)&&this.moved(o,this.getHitOption(t,"hitTolerance"))||this.shouldCancelHovers(n)&&this.moved(n,this.getHitOption(t,"hitTolerance")))&&this.cancelAllHovers(e),t.draggable&&t.resizable?(this.handleTransformMove(t,s,a,e,c&&p,o.touch),this.handleTransformResize(t,s,a,i,r,e,c&&p,o.touch)):(t.draggable&&this.handleTransformMove(t,s,a,e,c,o.touch),!t.resizable||u&&!e.ctrlKey||this.handleTransformResize(t,s,a,i,r,e,c&&p,o.touch))}},e.prototype.handleTransformMove=function(t,e,n,i,r,o){r&&(!t.events.isEnabled("drag")||uL.isPaused||t.isTouchProtected&&o||t.events.dispatchImmediately("drag",{type:"drag",target:t,event:i,shift:{x:e.x-n.x,y:e.y-n.y},startPoint:n,point:e,touch:o}))},e.prototype.handleTransformResize=function(t,e,n,i,r,o,s,a){if(t.events.isEnabled("resize")&&!uL.isPaused&&(!t.isTouchProtected||!a)){var u={type:"resize",target:t,event:o,scale:NR(e,n,i,r),startPoint1:n,point1:e,startPoint2:r,point2:i,touch:a};t.events.dispatchImmediately("resize",u)}},e.prototype.processDragStart=function(t,e,n){this.transformedObjects.moveValue(t),this.shouldCancelHovers(e)&&this.cancelAllHovers(n);var i={type:"dragstart",target:t,event:n,touch:!!e&&e.touch};e&&(e.dragTarget=t),e&&e.dragStartEvents?e.dragStartEvents.push(i):uL.isPaused||t.dispatchImmediately("dragstart",i)},e.prototype.processDragStop=function(t,e,n){e||(e=this.getDragPointer(t)),e&&(e.dragTarget=void 0),this.transformedObjects.removeValue(t),(!e||this.moved(e,0))&&t.events.isEnabled("dragstop")&&!uL.isPaused&&t.events.dispatchImmediately("dragstop",{type:"dragstop",target:t,touch:!!e&&e.touch})},e.prototype.processResizeStart=function(t,e,n){this.transformedObjects.moveValue(t)},e.prototype.processResizeStop=function(t,e,n){this.transformedObjects.removeValue(t)},e.prototype.dragStart=function(t,e){e||(e=this.getDragPointer(t)),e&&this.handleDown(t,e,e.lastDownEvent)},e.prototype.dragStop=function(t,e,n){e||(e=this.getDragPointer(t)),e&&!n&&this.handleGlobalUp(e,e.lastUpEvent,n)},e.prototype.getDragPointer=function(t){return t?t.downPointers.getIndex(0):this.transformedObjects.length?this.getDragPointer(this.transformedObjects.getIndex(0)):void 0},e.prototype.getPointerId=function(t){return(cR(t.identifier)?""+t.identifier:cR(t.pointerId)?""+t.pointerId:"m").replace("-","")},e.prototype.getPointerPoint=function(t){return{x:t.clientX,y:t.clientY}},e.prototype.getPointer=function(t){var e,n=this.getPointerId(t),i=this.getPointerPoint(t);return this.pointers.hasKey(n)?(e=this.pointers.getKey(n)).touch=this.isPointerTouch(t):(e={id:n,touch:this.isPointerTouch(t),startPoint:i,startTime:fV(),point:i,track:[],swipeCanceled:!1,dragStartEvents:[]},this.addBreadCrumb(e,i),this.pointers.setKey(n,e)),e.lastEvent=t,this.lastPointer=e,e},e.prototype.isPointerTouch=function(t){if("undefined"!=typeof Touch&&t instanceof Touch)return!0;if("undefined"!=typeof PointerEvent&&t instanceof PointerEvent&&cR(t.pointerType))switch(t.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(t instanceof MouseEvent)}else if(cR(t.type)&&t.type.match(/^mouse/))return!1;return!0},e.prototype.resetPointer=function(t,e){var n=this.getPointerPoint(e);t.startTime=fV(),t.startPoint={x:n.x,y:n.y},t.point={x:n.x,y:n.y},t.track=[],t.swipeCanceled=!1},e.prototype.addBreadCrumb=function(t,e){t.track.push({timestamp:fV(),point:e})},e.prototype.lockDocument=function(){this.prepElement(this.body)},e.prototype.unlockDocument=function(){0==this.transformedObjects.length&&this.restoreAllStyles(this.body)},e.prototype.lockElement=function(t){this.prepElement(t)},e.prototype.unlockElement=function(t){this.restoreAllStyles(t)},e.prototype.lockWheel=function(){window.addEventListener(this._pointerEvents.wheel,this.wheelLockEvent,!!this._passiveSupported&&{passive:!1})},e.prototype.unlockWheel=function(){window.removeEventListener(this._pointerEvents.wheel,this.wheelLockEvent)},e.prototype.isLocalElement=function(t,e,n){var i=this.getCache("local_pointer_"+t.id);if(cR(i))return i;var r=QF(e)||document;if(r.elementFromPoint){var o=r.elementFromPoint(t.point.x,t.point.y),s=o&&KF(e,o);return this.setCache("local_pointer_"+t.id+"_"+n,s,100),s}return!1},e.prototype.wheelLockEvent=function(t){return t.preventDefault(),!1},e.prototype.prepElement=function(t){var e=t.element;if(e){for(var n=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],i=0;i<n.length;i++)n[i]in e.style&&this.setTemporaryStyle(t,n[i],"none");this.setTemporaryStyle(t,"tapHighlightColor","rgba(0, 0, 0, 0)")}},e.prototype.unprepElement=function(t){var e=t.element;if(e){for(var n=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],i=0;i<n.length;i++)n[i]in e.style&&this.restoreStyle(t,n[i]);this.restoreStyle(t,"tapHighlightColor")}},e.prototype.getHitOption=function(t,e){var n=t.hitOptions[e];return void 0===n&&(n=this.hitOptions[e]),n},e.prototype.getHoverOption=function(t,e){var n=t.hoverOptions[e];return void 0===n&&(n=this.hoverOptions[e]),n},e.prototype.getSwipeOption=function(t,e){var n=t.swipeOptions[e];return void 0===n&&(n=this.swipeOptions[e]),n},e.prototype.getKeyboardOption=function(t,e){var n=t.keyboardOptions[e];return void 0===n&&(n=this.keyboardOptions[e]),n},e.prototype.getMouseOption=function(t,e){var n=t.mouseOptions[e];return void 0===n&&(n=this.mouseOptions[e]),n},e.prototype.getInertiaOption=function(t,e,n){var i=t.inertiaOptions.getKey(e);return i&&cR(i[n])?i[n]:this.inertiaOptions.getKey(e)[n]},e.prototype.stopInertia=function(t){for(var e,n=["move","resize"],i=0;i<n.length;i++)if(t.inertias.hasKey(e=n[i])){var r=t.inertias.getKey(e);if(r){r.dispose();continue}}},e.prototype.swiping=function(t,e){var n=fV();return!(e.swipeCanceled||!t.swipeable)&&Math.abs(e.startPoint.y-e.point.y)<this.getSwipeOption(t,"verticalThreshold")&&e.startTime>n-this.getSwipeOption(t,"time")},e.prototype.swiped=function(t,e){var n=fV();return!e.swipeCanceled&&Math.abs(e.startPoint.x-e.point.x)>this.getSwipeOption(t,"horizontalThreshold")&&Math.abs(e.startPoint.y-e.point.y)<this.getSwipeOption(t,"verticalThreshold")&&e.startTime>n-this.getSwipeOption(t,"time")},e.prototype.applyCursorOverStyle=function(t){var e=t.cursorOptions;if(cR(e.overStyle))for(var n=0;n<e.overStyle.length;n++)qF(t.element,e.overStyle[n].property,e.overStyle[n].value)},e.prototype.applyCursorDownStyle=function(t,e){if(!e.touch){var n=t.cursorOptions.downStyle;if(t.downPointers.contains(e)&&cR(n))for(var i=0;i<n.length;i++)this.setTemporaryStyle(this.body,n[i].property,n[i].value),this.setTemporaryStyle(t,n[i].property,n[i].value)}},e.prototype.restoreCursorDownStyle=function(t,e){if(!e.touch){var n=t.cursorOptions.downStyle;if(t.downPointers.contains(e)&&cR(n))for(var i=0;i<n.length;i++)this.restoreStyle(this.body,n[i].property),this.restoreStyle(t,n[i].property)}},e.prototype.setGlobalStyle=function(t){for(var e=xV().body,n=vR(t)?t:[t],i=0;i<n.length;i++)this.setTemporaryStyle(e,n[i].property,n[i].value)},e.prototype.restoreGlobalStyle=function(t){for(var e=xV().body,n=vR(t)?t:[t],i=0;i<n.length;i++)this.restoreStyle(e,n[i].property)},e.prototype.isGlobalElement=function(t){return document.body===t.element},e.prototype.moved=function(t,e,n){void 0===n&&(n=300);var i=this.getShift(t);return Math.abs(i.x)>e||Math.abs(i.y)>e},e.prototype.old=function(t,e){return void 0===e&&(e=300),fV()-t.startTime>e},e.prototype.getShift=function(t){return{x:t.startPoint.x-t.point.x,y:t.startPoint.y-t.point.y}},e.prototype.getTrailPoint=function(t,e){for(var n,i=0;i<t.track.length;i++)if(t.track[i].timestamp>=e){n=t.track[i];break}return n},e.prototype.pointerExists=function(t,e){var n=!1;return t.each((function(t){t!=e&&(n=t.point.x==e.point.x&&t.point.y==e.point.y)})),n},e.prototype.getInteraction=function(t){return new aV(t)},e.prototype.setTemporaryStyle=function(t,e,n){var i=t.element;cR(i.style[e])&&!t.replacedStyles.hasKey(e)&&t.replacedStyles.setKey(e,i.style[e]),qF(i,e,n)},e.prototype.restoreStyle=function(t,e){t.replacedStyles.hasKey(e)?(t.element.style[e]=t.replacedStyles.getKey(e),t.replacedStyles.removeKey(e)):delete t.element.style[e]},e.prototype.restoreAllStyles=function(t){VM(t.replacedStyles.iterator(),(function(e){var n=e[0];t.element.style[n]=e[1],t.replacedStyles.removeKey(n)}))},e.prototype.dispose=function(){this.isDisposed()||(t.prototype.dispose.call(this),this.restoreAllStyles(this.body),this.unlockWheel())},e.prototype.log=function(t,e,n){if(e.changedTouches)for(var i=0;i<e.changedTouches.length;i++)this.logTouch(t,e.type,e.changedTouches[i]);else{var r,o="";if(e.pointerType)switch(e.pointerType){case 2:o="touch";break;case 4:o="mouse";break;default:o=e.pointerType}else o="undefined"!=typeof TouchEvent&&e instanceof TouchEvent?"touch":e.type.match(/^mouse/)?"mouse":"???";r=cR(e.identifier)?e.identifier:cR(e.pointerId)?e.pointerId:"???",n?console.log(t+" ("+n.uid+")  "+e.type+"  "+o+"  "+r):console.log(t+"  "+e.type+"  "+o+"  "+r)}},e.prototype.areTransformed=function(t){var e=this.transformedObjects.length;if(t)for(var n=vR(t)?t:[t],i=0;i<n.length;i++)this.transformedObjects.contains(n[i])&&e--;return e>0},e.prototype.logTouch=function(t,e,n){console.log(t+"  "+e+"  touch  "+n.identifier)},Object.defineProperty(e,"passiveSupported",{get:function(){var t=this;if(null==this._passiveSupported)try{var e=Object.defineProperty({},"passive",{get:function(){t._passiveSupported=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(n){this._passiveSupported=!1}return this._passiveSupported},enumerable:!0,configurable:!0}),e}(xN),wV=null;function xV(){return null==wV&&(wV=new _V),wV}var PV=function(t){function e(){var e=t.call(this)||this;return e.adapter=new cN(e),e._elements={},e._IOs={},e._content="",e._title="",e._classPrefix="ampopup",e._defaultStyles=!0,e._showCurtain=!1,e._draggable=!0,e._align="center",e._dynamicResize=!0,e._verticalAlign="middle",e._shift={x:0,y:0},e._tempShift={x:0,y:0},e._readerTitle="",e._closable=!0,e._cssLoaded=!1,e._fitTo="window",e.isTemplate=!1,e._sized=!1,e.className="Popup",e}return Qj(e,t),e.prototype.open=function(){this.container&&(this._elements.wrapper&&this.container.appendChild(this._elements.wrapper),this._elements.curtain&&(this.container.appendChild(this._elements.curtain),this.showCurtain=this.showCurtain),this.positionElement(),this.dispatchImmediately("opened"))},e.prototype.close=function(){this._elements.wrapper&&this._elements.wrapper.parentElement&&this._elements.wrapper.parentElement.removeChild(this._elements.wrapper),this._elements.curtain&&this._elements.curtain.parentElement&&this._elements.curtain.parentElement.removeChild(this._elements.curtain),this.dispatchImmediately("closed"),this.releasePointers()},e.prototype.dispose=function(){this.close(),t.prototype.dispose.call(this)},e.prototype.positionElement=function(t){var e=this;void 0===t&&(t=!0),this._elements.wrapper&&setTimeout((function(){if(e._elements.wrapper){if(t||!e._sized){e._elements.wrapper.style.opacity="0.01",e._elements.wrapper.style.left="0",e._elements.wrapper.style.top="0",e._elements.wrapper.style.margin="0 0 0 0",e._elements.wrapper.style.width="",e._elements.wrapper.style.height="";var n=e._elements.wrapper.getBoundingClientRect();e._elements.wrapper.style.width=n.width+"px",e._elements.wrapper.style.height=n.height+"px",e._sized=!0}if(e.dynamicResize)for(var i=e._elements.wrapper.getElementsByTagName("img"),r=0;r<i.length;r++){var o=i[r];if(!o.complete){o.addEventListener("load",(function(){e.positionElement(!0)}));break}}setTimeout((function(){if(e._elements.wrapper){var n;switch(!t&&e._sized||!e._bbox?(n=e._elements.wrapper.getBoundingClientRect(),e._elements.wrapper.style.opacity=""):n=e._bbox,e.align){case"left":e._elements.wrapper.style.left="0",e._elements.wrapper.style.right="auto",e._elements.wrapper.style.marginLeft=e.toStyle(e._shift.x+e._tempShift.x);break;case"center":e._elements.wrapper.style.left="50%",e._elements.wrapper.style.right="auto",e._elements.wrapper.style.marginLeft=e.toStyle(Math.round(-n.width/2)+(e._shift.x+e._tempShift.x));break;case"right":e._elements.wrapper.style.left="auto",e._elements.wrapper.style.right="0",e._elements.wrapper.style.marginLeft=e.toStyle(e._shift.x+e._tempShift.x);break;default:e._elements.wrapper.style.left=e.toStyle(e.left)||"auto",e._elements.wrapper.style.right=e.toStyle(e.right)||"auto",e._elements.wrapper.style.marginLeft=e.toStyle(e._shift.x+e._tempShift.x)}switch(e.verticalAlign){case"top":e._elements.wrapper.style.top="0",e._elements.wrapper.style.bottom="auto",e._elements.wrapper.style.marginTop=e.toStyle(e._shift.y+e._tempShift.y);break;case"middle":e._elements.wrapper.style.top="50%",e._elements.wrapper.style.bottom="auto",e._elements.wrapper.style.marginTop=e.toStyle(Math.round(-n.height/2)+(e._shift.y+e._tempShift.y));break;case"bottom":e._elements.wrapper.style.top="auto",e._elements.wrapper.style.bottom="0",e._elements.wrapper.style.marginTop=e.toStyle(e._shift.y+e._tempShift.y);break;default:e._elements.wrapper.style.top=e.toStyle(e.top)||"auto",e._elements.wrapper.style.bottom=e.toStyle(e.bottom)||"auto",e._elements.wrapper.style.marginTop=e.toStyle(e._shift.y+e._tempShift.y)}}}),1)}}),1)},e.prototype.setupDragging=function(){var t=this;this.draggable?(this._IOs.header.events.has("drag")||this._IOs.header.events.on("drag",(function(e){t._tempShift.x=e.shift.x,t._tempShift.y=e.shift.y,t.positionElement(!1)})),this._IOs.header.events.has("dragstop")||this._IOs.header.events.on("dragstop",(function(e){t._shift.x+=t._tempShift.x,t._shift.y+=t._tempShift.y,t._tempShift.x=0,t._tempShift.y=0,t.positionElement(!1)}))):this._IOs.header&&(xV().unprepElement(this._IOs.header),this._IOs.header.events.has("drag")&&this._IOs.header.events.off("drag"),this._IOs.header.events.has("dragstop")&&this._IOs.header.events.off("dragstop"))},e.prototype.toStyle=function(t){return cR(t)?yR(t)?t+"px":t.toString():null},Object.defineProperty(e.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",this._classPrefix)},set:function(t){this._classPrefix=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classPrefixRaw",{get:function(){return this._classPrefix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.adapter.apply("content",this._content)},set:function(t){this._content!=t&&(this._content=t,this._elements.content||this.createContentElement(),this._elements.content.innerHTML=t,this.positionElement())},enumerable:!0,configurable:!0}),e.prototype.getClassNames=function(){return this.adapter.apply("classNames",{wrapperClass:this.classPrefix+"",headerClass:this.classPrefix+"-header",titleClass:this.classPrefix+"-title",contentClass:this.classPrefix+"-content",insideClass:this.classPrefix+"-inside",curtainClass:this.classPrefix+"-curtain",closeClass:this.classPrefix+"-close"})},e.prototype.createContentElement=function(){if(!this._elements.wrapper){var t=this.getClassNames(),e=document.createElement("div");e.className=t.contentClass,e.style.opacity="0.01";var n=document.createElement("a");n.className=t.closeClass;var i=document.createElement("div");i.className=t.headerClass;var r=document.createElement("div");r.innerHTML=this.title,r.className=t.titleClass,this.title||(r.style.display="none");var o=document.createElement("div");o.className=t.insideClass,o.innerHTML=this.content,this._IOs.wrapper=xV().getInteraction(e),this._IOs.header=xV().getInteraction(i),this._disposers.push(this._IOs.wrapper),this._IOs.wrapper.events.on("over",this.disablePointers,this),this._IOs.wrapper.events.on("out",this.releasePointers,this),this._IOs.close=xV().getInteraction(n),this._disposers.push(this._IOs.close),n.style.visibility="hidden",e.setAttribute("role","dialog"),i.appendChild(n),i.appendChild(r),e.appendChild(i),e.appendChild(o),this.container.appendChild(e),this._elements.wrapper=e,this._elements.header=i,this._elements.content=o,this._elements.title=r,this._elements.close=n,this.defaultStyles&&this.loadDefaultCSS(),this.createCurtainElement(),this.applyEvents(),this.applyReaderSettings(),this.setupDragging()}},Object.defineProperty(e.prototype,"title",{get:function(){return this.adapter.apply("title",this._title)},set:function(t){this._title!=t&&(this._title=t,this._elements.content||this.createContentElement(),this._elements.title.innerHTML=t,this.positionElement(),this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerTitle",{get:function(){return this.adapter.apply("readerTitle",""!=this._readerTitle?this._readerTitle:this.title)},set:function(t){this._readerTitle!=t&&(this._readerTitle=t,this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closable",{get:function(){return this.adapter.apply("closable",this._closable)},set:function(t){t!==this._closable&&(this._closable=t,this.applyEvents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitTo",{get:function(){return this.adapter.apply("fitTo",this._fitTo)},set:function(t){t!=this._fitTo&&(this._fitTo=t,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",this._defaultStyles)},set:function(t){this._defaultStyles!=t&&(this._defaultStyles=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showCurtain",{get:function(){return this.adapter.apply("showCurtain",this._showCurtain)},set:function(t){this._showCurtain!=t&&(this._showCurtain=t,this._elements.curtain&&(this._elements.curtain.style.display=t?"block":"none"))},enumerable:!0,configurable:!0}),e.prototype.createCurtainElement=function(){var t=this.getClassNames(),e=document.createElement("div");e.className=t.curtainClass,this.container.appendChild(e),this._IOs.curtain=xV().getInteraction(e),this._disposers.push(this._IOs.curtain),this._IOs.curtain.events.on("over",this.disablePointers,this),this._IOs.curtain.events.on("out",this.releasePointers,this),e.style.display=this.showCurtain?"block":"none",this._elements.curtain=e},Object.defineProperty(e.prototype,"draggable",{get:function(){return this.adapter.apply("draggable",this._draggable)},set:function(t){this._draggable!=t&&(this._draggable=t,this.setupDragging())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dynamicResize",{get:function(){return this.adapter.apply("dynamicResize",this._dynamicResize)},set:function(t){this._dynamicResize!=t&&(this._dynamicResize=t,this.positionElement(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.adapter.apply("align",this._align)},set:function(t){this._align!=t&&(this._align=t,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",this._verticalAlign)},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.adapter.apply("left",this._left)},set:function(t){this.left!=t&&(this._left=t,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.adapter.apply("right",this._right)},set:function(t){this.right!=t&&(this._right=t,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.adapter.apply("top",this._top)},set:function(t){this.top!=t&&(this._top=t,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.adapter.apply("bottom",this._bottom)},set:function(t){this.bottom!=t&&(this._bottom=t,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),e.prototype.loadDefaultCSS=function(){this._cssLoaded||(this._disposers.push(function(t,e){e||(e="ampopup");var n=new rV,i=n.getFor("text"),r=n.getFor("background");r.alpha=.8;var o=n.getFor("alternativeBackground");return o.alpha=.05,oV.insertKeyIfEmpty(e,(function(){var n=new dM([new $F(t,"."+e,{overflow:"visible",position:"absolute",top:"0",left:"0","z-index":"2000"}),new $F(t,"."+e+"-curtain",{width:"100%",height:"100%",position:"absolute",top:"0",left:"0","z-index":"2001","background-color":r.hex,opacity:"0.5"}),new $F(t,"."+e+"-header",{display:"block",width:"100%","min-height":"1.8em",background:o.rgba}),new $F(t,"."+e+"-title",{"font-weight":"bold","font-size":"110%",padding:"0.5em 1.2em 0.5em 1em"}),new $F(t,"."+e+"-content",{background:r.hex,"background-color":r.rgba,color:i.hex,display:"inline-block",position:"absolute",top:"0",left:"0","max-width":"90%","max-height":"90%",overflow:"auto","z-index":"2002"}),new $F(t,"."+e+"-inside",{padding:"1em"}),new $F(t,"."+e+"-close",{display:"block",position:"absolute",top:"0.3em",right:"0.3em","background-color":"rgb(100, 100, 100)",background:"rgba(100, 100, 100, 0.1) url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=) no-repeat center","background-size":"80%",width:"1.2em",height:"1.2em",cursor:"pointer"})]);return new gM((function(){oV.removeKey(e),n.dispose()}))})).increment()}(XF(this.container),this.classPrefix)),kM(this._elements,(function(t,e){e.style.display=""})),this._cssLoaded=!0)},e.prototype.applyEvents=function(){var t=this;if(this._IOs.close)if(this.closable){this._IOs.close.element.style.visibility="visible";var e=[xV().body.events.on("keyup",(function(e){hV.isKey(e.event,"esc")&&t.closable&&t.close()})),this._IOs.close.events.on("hit",(function(e){t.close()}))];e.push(this._IOs.curtain.events.on("hit",(function(e){t.showCurtain&&t.closable&&t.close()}))),this._disposers.push(new dM(e))}else this._IOs.close.element.style.visibility="hidden"},e.prototype.disablePointers=function(){this.sprite&&(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled,this.sprite.interactionsEnabled=!1)},e.prototype.releasePointers=function(){cR(this._spriteInteractionsEnabled)&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled,this._spriteInteractionsEnabled=void 0)},e.prototype.applyReaderSettings=function(){this.elements.wrapper.setAttribute("aria-label",this.readerTitle)},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.container=e.container,this.sprite=e.sprite,this.classPrefix=e.classPrefixRaw,this.content=e.content,this.title=e.title,this.readerTitle=e.readerTitle,this.defaultStyles=e.defaultStyles,this.showCurtain=e.showCurtain,this.align=e.align,this.verticalAlign=e.verticalAlign,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.adapter.copyFrom(e.adapter)},e}(xN),CV=function(t){function e(){var e=t.call(this)||this;return e.adapter=new cN(e),e.className="Modal",e.showCurtain=!0,e.draggable=!1,e}return Qj(e,t),e}(PV);function IV(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];kF.suppressWarnings||console&&console.warn.apply(console,nR(t))}var OV=function(){function t(){var t=this;this._targets=[],this._observer=new ResizeObserver((function(e){tM(e,(function(e){tM(t._targets,(function(t){t.target===e.target&&t.callback()}))}))}))}return t.prototype.addTarget=function(t,e){this._observer.observe(t,{box:"content-box"}),this._targets.push({target:t,callback:e})},t.prototype.removeTarget=function(t){this._observer.unobserve(t),cM(this._targets,(function(e){return e.target!==t}))},t}(),SV=function(){function t(){this._targets=[]}return t.prototype.addTarget=function(e,n){var i=this;if(0===this._targets.length){var r=null,o=function(){var e=Date.now();(null===r||e>r+t.delay)&&(r=e,tM(i._targets,(function(t){var e=t.target.getBoundingClientRect();e.width===t.size.width&&e.height===t.size.height||(t.size=e,t.callback())}))),i._timer=requestAnimationFrame(o)};this._timer=requestAnimationFrame(o)}var s=e.getBoundingClientRect();this._targets.push({target:e,callback:n,size:s})},t.prototype.removeTarget=function(t){cM(this._targets,(function(e){return e.target!==t})),0===this._targets.length&&cancelAnimationFrame(this._timer)},t.delay=200,t}(),TV=null,EV=function(){function t(t,e){this._disposed=!1,this._sensor=(null===TV&&(TV="undefined"!=typeof ResizeObserver?new OV:new SV),TV),this._element=t,this._sensor.addTarget(t,e)}return t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element))},Object.defineProperty(t.prototype,"sensor",{get:function(){return this._sensor},enumerable:!0,configurable:!0}),t.prototype.reset=function(){IV("resizeSensor.reset() is no longer needed and can be removed")},t}(),kV=[],AV=function(){function t(t,e){var n=this;this._disposed=!1,this.autoResize=!0,this.nonExportableSprites=[],this._disposers=[],this.cssScale=1,this._printing=!1,this.htmlElement=t,e||(this._printing=!1,this.initSensor(),this._disposers.push(BF(window,"beforeprint",(function(){n._printing=!0}))),this._disposers.push(BF(window,"afterprint",(function(){n._printing=!1})))),kV.push(this);var i=document.createElement("div"),r=i.style;r.width="100%",r.height="100%",r.position="relative",t.appendChild(i),this.SVGContainer=i}return t.prototype.initSensor=function(){var t=this;this.resizeSensor&&this.resizeSensor.dispose(),this.resizeSensor=new EV(this.htmlElement,(function(){t.autoResize&&!t._printing&&t.measure()})),this._disposers.push(this.resizeSensor)},t.prototype.measure=function(){var t,e,n,i,r,o=(t=this.htmlElement,e=getComputedStyle(t),n=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i=parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth),t.clientWidth-n-i),s=function(t){var e=getComputedStyle(t),n=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),i=parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth);return t.clientHeight-n-i}(this.htmlElement),a=this.container;a&&(this.width==o&&this.height==s||(this.width=o,this.height=s,o>0&&(a.maxWidth=o),s>0&&(a.maxHeight=s),r=this.SVGContainer,vM.push((function(){try{var t=r.getBoundingClientRect(),e=t.left-Math.round(t.left),n=t.top-Math.round(t.top);0!==e&&CM((function(){r.style.left=e+"px"})),0!==n&&CM((function(){r.style.top=n+"px"}))}catch(i){}})),PM()),a.maxWidth||(a.maxWidth=0),a.maxHeight||(a.maxHeight=0),this.cssScale=1,this.checkTransform(this.htmlElement))},Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){this._container=t,this.measure()},enumerable:!0,configurable:!0}),t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||nM(kV,this),tM(this._disposers,(function(t){t.dispose()}))},Object.defineProperty(t.prototype,"hideOverflow",{set:function(t){this.SVGContainer.style.overflow=t?"hidden":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modal",{get:function(){return cR(this._modal)||(this._modal=new CV,this._modal.container=this.SVGContainer,this._disposers.push(this._modal)),this._modal},enumerable:!0,configurable:!0}),t.prototype.openModal=function(t,e){this.closeModal();var n=this.modal;return n.content=t,n.readerTitle=e||"",n.title=e||"",n.open(),n},t.prototype.closeModal=function(){this._modal&&this.modal.close()},Object.defineProperty(t.prototype,"popups",{get:function(){if(!cR(this._popups)){var t=new PV;t.container=this.SVGContainer,this._popups=new nN(t),this._disposers.push(new JM(this._popups)),this._disposers.push(this._popups.template)}return this._popups},enumerable:!0,configurable:!0}),t.prototype.openPopup=function(t,e){var n=this.popups.create();return n.content=t,cR(e)&&(n.title=e),n.open(),n},t.prototype.closeAllPopups=function(){this.popups.each((function(t){t.close()}))},Object.defineProperty(t.prototype,"readerAlertElement",{get:function(){if(!cR(this._readerAlertElement)){var t=document.createElement("div");t.setAttribute("role","alert"),t.style.zIndex="-100000",t.style.opacity="0",t.style.position="absolute",t.style.top="0",this.SVGContainer.appendChild(t),this._readerAlertElement=t}return this._readerAlertElement},enumerable:!0,configurable:!0}),t.prototype.readerAlert=function(t){this.readerAlertElement.innerHTML=t},t.prototype.checkTransform=function(t){if(window.getComputedStyle){if(t&&t.style){var e=window.getComputedStyle(t,null);if(e){var n=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");if(n&&"none"!==n){var i=n.split("(")[1].split(")")[0].split(","),r=Number(i[0]),o=Number(i[1]),s=Math.sqrt(r*r+o*o);isNaN(s)||(this.cssScale*=s)}}}t.parentNode&&t.parentNode instanceof HTMLElement&&this.checkTransform(t.parentNode)}},t}(),DV=function(){function t(t,e){this.container=t,this.id=e;var n=document.createElementNS(VF,"svg");n.setAttribute("version","1.1"),n.setAttributeNS(LF,"xmlns",VF),n.setAttributeNS(LF,"xmlns:xlink",UF),n.setAttribute("role","group"),this.container.appendChild(n),this.defs=document.createElementNS(VF,"defs"),n.appendChild(this.defs),n.style.width="100%",n.style.height="100%",n.style.overflow="visible",this.svg=n}return t.prototype.add=function(t){return new nV(t)},t.prototype.addGroup=function(t){return new iV(t)},t.prototype.append=function(t){t&&this.svg.appendChild(t.node)},t.prototype.appendDef=function(t){t&&this.defs.appendChild(t.node)},t.prototype.foreignObject=function(){return new nV("foreignObject")},t.prototype.supportsForeignObject=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1")},t}(),jV=null;function RV(){if(null===jV){var t=document.createElement("div");t.hidden=!0,document.body.appendChild(t);var e=new AV(t,!0);jV=new DV(e.SVGContainer,"ghost")}return jV}var MV=function(t){function e(){var e=t.call(this)||this;e._elements=new eN,e.properties={},e.className="Pattern",e.width=10,e.height=10,e.x=0,e.y=0,e.patternUnits="userSpaceOnUse";var n=new rV;return e.backgroundFill=n.getFor("background"),e.backgroundOpacity=0,e.fillOpacity=1,e.fill=n.getFor("alternativeBackground"),e.stroke=n.getFor("alternativeBackground"),e.strokeOpacity=1,e.strokeWidth=1,e.shapeRendering="crispEdges",e.rotation=0,e.element=e.paper.addGroup("pattern"),e.id="pattern-"+QM.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e._disposers.push(new JM(e._elements)),e.patternUnits=e.patternUnits,e.width=e.width,e.height=e.height,e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){var t=this,e=this.element;if(e){e.removeChildNodes();var n=this.paper.add("rect");n.attr({width:this.width,height:this.height,"shape-rendering":"crispEdges",fill:this.backgroundFill.hex,"fill-opacity":this.backgroundOpacity,stroke:this.backgroundFill.hex,"stroke-opacity":0}),e.add(n),e.attr({x:this.x,y:this.y,width:this.width,height:this.height,stroke:this.stroke.hex,fill:this.fill.hex,"fill-opacity":this.fillOpacity,"stroke-opacity":this.strokeOpacity,"stroke-width":this.strokeWidth,"shape-rendering":this.shapeRendering,patternUnits:this.patternUnits,"stroke-dasharray":this.strokeDasharray}),VM(this._elements.iterator(),(function(e){e.rotation=t.rotation,e.rotationX=t.properties.rotationX,e.rotationY=t.properties.rotationY,t.element.add(e)}))}},e.prototype.animate=function(t,e,n){return new FF(this,t,e,n).start()},e.prototype.addElement=function(t){this._elements.push(t),this._disposers.push(t)},e.prototype.removeElement=function(t){this._elements.removeValue(t),this.removeDispose(t)},Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.properties.fillOpacity},set:function(t){this.properties.fillOpacity=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.properties.fill},set:function(t){this.properties.fill=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundFill",{get:function(){return this.properties.backgroundFill},set:function(t){this.properties.backgroundFill=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundOpacity",{get:function(){return this.properties.backgroundOpacity},set:function(t){this.properties.backgroundOpacity=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(t){this.properties.stroke=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeOpacity",{get:function(){return this.properties.strokeOpacity},set:function(t){this.properties.strokeOpacity=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(t){this.properties.strokeWidth=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeRendering",{get:function(){return this.properties.shapeRendering},set:function(t){this.properties.shapeRendering=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.properties.rotation},set:function(t){this.properties.rotation=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patternUnits",{get:function(){return this.properties.patternUnits},set:function(t){this.properties.patternUnits=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.properties.width},set:function(t){this.properties.width=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.properties.height},set:function(t){this.properties.height=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.properties.x},set:function(t){this.properties.x=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.properties.y},set:function(t){this.properties.y=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:RV()},set:function(t){this._paper!=t&&(this._paper=t,this.draw(),t.appendDef(this.element))},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){var n=this;t.prototype.copyFrom.call(this,e),kM(e.properties,(function(t,e){n[t]=e}))},Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new NF(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeDasharray",{get:function(){return this.properties.strokeDashArray},set:function(t){this.properties.strokeDashArray=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){if(e&&cR(e.elements)&&vR(e.elements))for(var n=0,i=e.elements.length;n<i;n++){var r=e.elements[n];if(cR(r.type)){var o=this.createEntryInstance(r);o instanceof wN&&(o.config=r),this.addElement(cR(r.typeProperty)?o[r.typeProperty]:o.element)}}t.prototype.processConfig.call(this,e)},e}(wN);QM.registeredClasses.Pattern=MV;var NV=function(t){function e(){var e=t.call(this)||this;return e._stops=new eN,e._rotation=0,e.className="LinearGradient",e._stops.events.on("setIndex",e.validate,e),e._stops.events.on("inserted",e.validate,e),e.element=e.paper.addGroup("linearGradient"),e.id="gradient-"+QM.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e.applyTheme(),e}return Qj(e,t),e.prototype.validate=function(){var t=this,e=(this._rotation+90)*wR,n=Math.round(50+50*Math.sin(e+Math.PI))+"%",i=Math.round(50+50*Math.cos(e))+"%",r=Math.round(50+50*Math.sin(e))+"%",o=Math.round(50+50*Math.cos(e+Math.PI))+"%",s=this.element;s.removeChildNodes(),s.attr({x1:n,x2:r,y1:i,y2:o}),VM(BM(this._stops.iterator()),(function(e){var n=e[0],i=e[1],r=i.offset;yR(r)||(r=n/(t._stops.length-1));var o=t.paper.add("stop");cR(i.color)&&o.attr({"stop-color":i.color.toString()}),yR(i.opacity)&&o.attr({"stop-opacity":i.opacity}),yR(r)&&o.attr({offset:r}),s.add(o)}))},e.prototype.clear=function(){this._stops.clear()},e.prototype.addColor=function(t,e,n){this._stops.push({color:t,opacity:e,offset:n})},Object.defineProperty(e.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:RV()},set:function(t){this._paper!=t&&(this._paper=t,this.validate(),t.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this.validate()},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.stops.copyFrom(e.stops),this._rotation=e.rotation},Object.defineProperty(e.prototype,"gradientUnits",{set:function(t){this.element.attr({gradientUnits:t})},enumerable:!0,configurable:!0}),e}(wN);QM.registeredClasses.LinearGradient=NV;var FV=function(t){function e(){var e=t.call(this)||this;return e._stops=new eN,e.element=e.paper.addGroup("radialGradient"),e.id="gradient-"+QM.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){var t,e=this,n=this.element;yR(this.cx)&&((t=this.cx)instanceof iR&&(t=t.percent+"%"),n.attr({cx:t})),yR(this.cy)&&((t=this.cy)instanceof iR&&(t=t.percent+"%"),n.attr({cy:t})),this.fx&&((t=this.fx)instanceof iR&&(t=t.percent+"%"),n.attr({fx:t})),this.fy&&((t=this.fy)instanceof iR&&(t=t.percent+"%"),n.attr({fy:t})),n.removeChildNodes(),VM(BM(this._stops.iterator()),(function(t){var i=t[0],r=t[1],o=r.offset;yR(o)||(o=i/(e._stops.length-1));var s=e.paper.add("stop");cR(r.color)&&s.attr({"stop-color":r.color.toString()}),yR(r.opacity)&&s.attr({"stop-opacity":r.opacity}),yR(o)&&s.attr({offset:o}),n.add(s)}))},e.prototype.addColor=function(t,e,n){this._stops.push({color:t,opacity:e,offset:n}),this.draw()},Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:RV()},set:function(t){this._paper!=t&&(this._paper=t,this.draw(),t.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cx",{get:function(){return this._cx},set:function(t){this._cx=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cy",{get:function(){return this._cy},set:function(t){this._cy=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fx",{get:function(){return this._fx},set:function(t){this._fx=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fy",{get:function(){return this._fy},set:function(t){this._fy=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.stops.copyFrom(e.stops),this.cx=e.cx,this.cy=e.cy,this.fx=e.fx,this.fy=e.fy},Object.defineProperty(e.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._stops.clear()},e}(wN);QM.registeredClasses.RadialGradient=FV;var VV,LV=function(){function t(){}return t.grab=[{property:"cursor",value:"move"},{property:"cursor",value:"grab"},{property:"cursor",value:"-webkit-grab"}],t.grabbing=[{property:"cursor",value:"move"},{property:"cursor",value:"grabbing"},{property:"cursor",value:"-webkit-grabbing"}],t.pointer=[{property:"cursor",value:"pointer"}],t.default=[{property:"cursor",value:"default"}],t.horizontalResize=[{property:"cursor",value:"ew-resize"}],t.verticalResize=[{property:"cursor",value:"ns-resize"}],t.notAllowed=[{property:"cursor",value:"not-allowed"}],t.text=[{property:"cursor",value:"text"}],t}(),UV={_decimalSeparator:".",_thousandSeparator:",",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_second:"HH:mm:ss",_date_minute:"HH:mm",_date_hour:"HH:mm",_date_day:"MMM dd",_date_week:"ww",_date_month:"MMM",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(t){var e="th";if(t<11||t>13)switch(t%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},"Zoom Out":"",Play:"",Stop:"",Legend:"","Click, tap or press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Click, tap or press ENTER to open":"","Click, tap or press ENTER to print.":"","Click, tap or press ENTER to export as %1.":"",'To save the image, right-click this link and choose "Save picture as..."':"",'To save the image, right-click thumbnail on the left and choose "Save picture as..."':"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""},BV=function(t){function e(){var e=t.call(this)||this;return e.adapter=new cN(e),e._locale=UV,e._defaultLocale=UV,e.className="Language",cR(kF.defaultLocale)&&(e.locale=kF.defaultLocale),e.applyTheme(),e}return Qj(e,t),e.prototype.getLocale=function(t){return null==t&&(t=this._locale),this.adapter.apply("locale",{locale:t}).locale},e.prototype.translate=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];e=this.getLocale(e);var r=t,o=this.getTranslations(e),s=o[t];if(null===s)s="";else if(cR(s))s&&(r=s);else if(e!==this._defaultLocale)return this.translate.apply(this,nR([t,this._defaultLocale],n));if(n.length)for(var a=n.length,u=0;u<a;++u)r=r.split("%"+(u+1)).join(n[u]);return this.adapter.apply("translate",{translation:r,locale:e}).translation},e.prototype.translateAny=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return this.translate.apply(this,nR([t,e],n))},e.prototype.setTranslationAny=function(t,e,n){(n||this.locale)[t]=e},e.prototype.translateEmpty=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=this.translate.apply(this,nR([t,e],n));return r==t?"":r},e.prototype.translateFunc=function(t,e){e=this.getLocale(e);var n=this.getTranslations(e)[t];return null!=n?n:e!==this._defaultLocale?this.translateFunc(t,this._defaultLocale):function(){return""}},e.prototype.translateAll=function(t,e){var n=this;return this.isDefault()?t:JR(t,(function(t){return n.translate(t,e)}))},e.prototype.isDefault=function(){return this._defaultLocale===this._locale},Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale!=t&&(this._locale=t,this.events.isEnabled("localechanged")&&this.events.dispatchImmediately("localechanged",{type:"localechanged",locale:t,target:this}))},enumerable:!0,configurable:!0}),e.prototype.getTranslations=function(t){return this.adapter.apply("translations",{translations:t,locale:t}).translations},e}(xN),HV=function(t){function e(){var e=t.call(this)||this;return e.adapter=new cN(e),e.className="TextFormatter",e.applyTheme(),e}return Qj(e,t),e.prototype.debug=function(){},e.prototype.format=function(t,e){cR(e)||(e="svg");var n="",i=(t=this.escape(t)).match(/\[([^\]]*?)\]/gm);if(!i)return this.wrap(t,"",e);for(var r=t.split(/\[[^\[\]]*\]/),o=0,s=r.length;o<s;o++){var a=r[o];if(""!==a){a=this.adapter.apply("chunk",a);var u="";o>0&&(u=i[o-1].replace("[","").replace("]","")),n+=this.wrap(a,u,e)}}return n=this.unescape(n),this.cleanUp(n)},e.prototype.escape=function(t){return t.replace(/\[\[/g,QM.getPlaceholder("1")).replace(/([^\/]{1})\]\]/g,"$1"+QM.getPlaceholder("2")).replace(/\]\]/g,QM.getPlaceholder("2")).replace(/\{\{/g,QM.getPlaceholder("3")).replace(/\}\}/g,QM.getPlaceholder("4")).replace(/\'\'/g,QM.getPlaceholder("5"))},e.prototype.unescape=function(t){return t.replace(new RegExp(QM.getPlaceholder("1"),"g"),"[[").replace(new RegExp(QM.getPlaceholder("2"),"g"),"]]").replace(new RegExp(QM.getPlaceholder("3"),"g"),"{{").replace(new RegExp(QM.getPlaceholder("4"),"g"),"}}").replace(new RegExp(QM.getPlaceholder("5"),"g"),"'")},e.prototype.cleanUp=function(t){return t.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")},e.prototype.wrap=function(t,e,n){switch(""!==e&&"/"!==e||(e=""),n){case"html":return this.wrapHtml(t,this.translateStyleShortcuts(e));default:return this.wrapSvg(t,this.translateStyleShortcuts(e))}},e.prototype.wrapSvg=function(t,e){return""===e?"<tspan>"+t+"</tspan>":"<tspan style='"+e+"'>"+t+"</tspan>"},e.prototype.getSvgElement=function(t,e){var n=new nV("tspan");return n.textContent=t,e&&n.node.setAttribute("style",e),n},e.prototype.wrapHtml=function(t,e){return""===e?"<span>"+t+"</span>":"<span style='"+this.styleSvgToHtml(e)+"'>"+t+"</span>"},e.prototype.getHtmlElement=function(t,e){var n=document.createElement("span");return n.innerHTML=t,e&&n.setAttribute("style",e),n},e.prototype.styleSvgToHtml=function(t){return t.replace(/fill:/,"color:")},e.prototype.translateStyleShortcuts=function(t){if(""==t||"[ ]"==t)return"";var e=QM.getCache("translateStyleShortcuts_"+t);if(e)return e;var n=t.match(/('[^']*')|("[^"]*")/gi);if(n)for(var i=0;i<n.length;i++)t=t.replace(n[i],n[i].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));var r=t.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w]+)|(\/)/gi);if(!r)return t;for(i=0;i<r.length;i++)r[i]=r[i].match(/^bold$/i)?"font-weight:"+r[i]:"/"==r[i]?"":r[i].match(/:/)?r[i].replace(/\+/g," "):"fill:"+r[i];var o=r.join(";");return QM.setCache("translateStyleShortcuts_"+t,o),o},e.prototype.chunk=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=[];t=this.escape(t);for(var r=e?t.split("'"):[t],o=0;o<r.length;o++){var s=r[o];if(""!==s)if(o%2==0)for(var a=(s=(s=s.replace(/\]\[/g,"]__\xa7\xa7\xa7__[")).replace(/\[\]/g,"[ ]")).split(/[\[\]]+/),u=0;u<a.length;u++)(l=this.cleanUp(this.unescape(a[u])))!==SN&&""!==l&&i.push(u%2==0?{type:"value",text:this.adapter.apply("chunk",l)}:{type:n?"value":"format",text:"["+l+"]"});else for(a=s.split(/[\[\]]+/),u=0;u<a.length;u++){var l;""!==(l=this.cleanUp(this.unescape(a[u])))&&(u%2==0?i.push({type:"text",text:l}):this.isImage(l)?i.push({type:"image",text:"["+l+"]"}):i.push({type:"format",text:"["+l+"]"}))}}return i},e.prototype.isImage=function(t){return!!t.match(/img[ ]?:/)},e}(wN);function WV(){return null==VV&&(VV=new HV),VV}QM.registeredClasses.TextFormatter=HV;var zV=function(t){function e(){var e=t.call(this)||this;return e._negativeBase=0,e._numberFormat="#,###.#####",e._outputFormat="svg",e._smallNumberThreshold=1,e.className="NumberFormatter",e.applyTheme(),e}return Qj(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.language&&this.language.dispose()},Object.defineProperty(e.prototype,"language",{get:function(){return this._language||(this._language=this.sprite?this.sprite.language:new BV),this._language},set:function(t){this._language=t},enumerable:!0,configurable:!0}),e.prototype.format=function(t,e,n){var i;(void 0===e||gR(e)&&"number"===e.toLowerCase())&&(e=this._numberFormat);var r=Number(t);if(mR(e))try{return this.intlLocales?new Intl.NumberFormat(this.intlLocales,e).format(r):new Intl.NumberFormat(void 0,e).format(r)}catch(a){return"Invalid"}else{e=WN(e);var o=this.parseFormat(e,this.language),s=void 0;s=r>this._negativeBase?o.positive:r<this._negativeBase?o.negative:o.zero,cR(n)&&!s.mod&&((s=JSON.parse(JSON.stringify(s))).decimals.active=0==r?0:n),i=s.template.split(SN).join(this.applyFormat(r,s))}return i},e.prototype.parseFormat=function(t,e){var n=this,i=this.getCache(t);if(cR(i))return i;var r={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:e.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:e.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:e.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:e.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:e.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:e.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1}},o=(t=t.replace("||",TN)).split("|");return r.positive.source=o[0],void 0===o[2]?r.zero=r.positive:r.zero.source=o[2],void 0===o[1]?r.negative=r.positive:r.negative.source=o[1],kM(r,(function(t,e){if(!e.parsed)if(void 0===n.getCache(e.source)){var i=e.source;"number"===i.toLowerCase()&&(i=gR(n._numberFormat)?n._numberFormat:"#,###.#####");for(var o=WV().chunk(i,!0),s=0;s<o.length;s++){var a=o[s];if(a.text=a.text.replace(TN,"|"),"value"===a.type){var u=a.text.match(/[#0.,]+[ ]?[abesABES%!]?[abesABES\u2030!]?/);if(u)if(null===u||""===u[0])e.template+=a.text;else{var l=u[0].match(/[abesABES%\u2030!]{2}|[abesABES%\u2030]{1}$/);l&&(e.mod=l[0].toLowerCase(),e.modSpacing=!!u[0].match(/[ ]{1}[abesABES%\u2030!]{1}$/));var h=u[0].split(".");if(""===h[0]);else{e.thousands.active=(h[0].match(/0/g)||[]).length,e.thousands.passive=(h[0].match(/\#/g)||[]).length+e.thousands.active;var c=h[0].split(",");1===c.length||(e.thousands.interval=pR(c.pop()).length,0===e.thousands.interval&&(e.thousands.interval=-1))}void 0===h[1]||(e.decimals.active=(h[1].match(/0/g)||[]).length,e.decimals.passive=(h[1].match(/\#/g)||[]).length+e.decimals.active),e.template+=a.text.split(u[0]).join(SN)}}else e.template+=a.text}n.setCache(e.source,e),e.parsed=!0}else r[t]=n.getCache(e.source)})),this.setCache(t,r),r},e.prototype.applyFormat=function(t,e){var n=t<0;t=Math.abs(t);var i,r="",o="",s=e.mod?e.mod.split(""):[];if(-1!==s.indexOf("b")){var a=this.applyPrefix(t,this.bytePrefixes,-1!==s.indexOf("!"));t=a[0],r=a[1],o=a[2],e.modSpacing&&(o=" "+o)}else if(-1!==s.indexOf("a")){var u=this.applyPrefix(t,t<this.smallNumberThreshold?this.smallNumberPrefixes:this.bigNumberPrefixes,-1!==s.indexOf("!"));t=u[0],r=u[1],o=u[2],e.modSpacing&&(o=" "+o)}else if(-1!==s.indexOf("%")){var l=AR(t.toString().length+2,21);t*=100,t=parseFloat(t.toPrecision(l)),o="%"}else-1!==s.indexOf("\u2030")&&(l=AR(t.toString().length+3,21),t*=1e3,t=parseFloat(t.toPrecision(l)),o="\u2030");if(-1!==s.indexOf("e"))i=e.decimals.passive>=0?t.toExponential(e.decimals.passive).split("e"):t.toExponential().split("e"),t=Number(i[0]),o="e"+i[1],e.modSpacing&&(o=" "+o);else if(0===e.decimals.passive)t=Math.round(t);else if(e.decimals.passive>0){var h=Math.pow(10,e.decimals.passive);t=Math.round(t*h)/h}var c="",p=function(t){if(oR(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(0===t&&1/t==-1/0)return"-0";var e=t<0;t=Math.abs(t);var n,i=pR(/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+t)),r=i[1],o=i[2]||"";if(null==i[3])n=""===o?r:r+"."+o;else{var s,a=+i[3];n=t<1?"0."+qM("0",s=a-1)+r+o:0==(s=a-o.length)?r+o:s<0?r+o.slice(0,s)+"."+o.slice(s):r+o+qM("0",s)}return e?"-"+n:n}(t).split("."),d=p[0];if(d.length<e.thousands.active&&(d=Array(e.thousands.active-d.length+1).join("0")+d),e.thousands.interval>0){for(var f=[],g=d.split("").reverse().join(""),y=0,m=d.length;y<=m;y+=e.thousands.interval){var v=g.substr(y,e.thousands.interval).split("").reverse().join("");""!==v&&f.unshift(v)}d=f.join(e.thousands.separator)}c+=d,1===p.length&&p.push("");var b=p[1];return b.length<e.decimals.active&&(b+=Array(e.decimals.active-b.length+1).join("0")),""!==b&&(c+=e.decimals.separator+b),""===c&&(c="0"),0!==t&&n&&-1===s.indexOf("s")&&(c="-"+c),r&&(c=r+c),o&&(c+=o),c},e.prototype.applyPrefix=function(t,e,n){void 0===n&&(n=!1);for(var i=t,r="",o="",s=!1,a=1,u=0,l=e.length;u<l;u++)e[u].number<=t&&(0===e[u].number?i=0:(i=t/e[u].number,a=e[u].number),r=e[u].prefix,o=e[u].suffix,s=!0);return!s&&n&&e.length&&0!=t&&(i=t/e[0].number,r=e[0].prefix,o=e[0].suffix,s=!0),s&&(i=parseFloat(i.toPrecision(AR(a.toString().length+Math.floor(i).toString().replace(/[^0-9]*/g,"").length,21)))),[i,r,o]},e.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){this._numberFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(t){this._intlLocales=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negativeBase",{get:function(){return this._negativeBase},set:function(t){this._negativeBase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bigNumberPrefixes",{get:function(){return cR(this._bigNumberPrefixes)||(this._bigNumberPrefixes=[{number:1e3,suffix:this.language.translate("_big_number_suffix_3")},{number:1e6,suffix:this.language.translate("_big_number_suffix_6")},{number:1e9,suffix:this.language.translate("_big_number_suffix_9")},{number:1e12,suffix:this.language.translate("_big_number_suffix_12")},{number:1e15,suffix:this.language.translate("_big_number_suffix_15")},{number:1e18,suffix:this.language.translate("_big_number_suffix_18")},{number:1e21,suffix:this.language.translate("_big_number_suffix_21")},{number:1e24,suffix:this.language.translate("_big_number_suffix_24")}]),this._bigNumberPrefixes},set:function(t){this._bigNumberPrefixes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smallNumberPrefixes",{get:function(){return cR(this._smallNumberPrefixes)||(this._smallNumberPrefixes=[{number:1e-24,suffix:this.language.translate("_small_number_suffix_24")},{number:1e-21,suffix:this.language.translate("_small_number_suffix_21")},{number:1e-18,suffix:this.language.translate("_small_number_suffix_18")},{number:1e-15,suffix:this.language.translate("_small_number_suffix_15")},{number:1e-12,suffix:this.language.translate("_small_number_suffix_12")},{number:1e-9,suffix:this.language.translate("_small_number_suffix_9")},{number:1e-6,suffix:this.language.translate("_small_number_suffix_6")},{number:.001,suffix:this.language.translate("_small_number_suffix_3")}]),this._smallNumberPrefixes},set:function(t){this._smallNumberPrefixes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smallNumberThreshold",{get:function(){return this._smallNumberThreshold},set:function(t){this._smallNumberThreshold=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytePrefixes",{get:function(){return cR(this._bytePrefixes)||(this._bytePrefixes=[{number:1,suffix:this.language.translate("_byte_suffix_B")},{number:1024,suffix:this.language.translate("_byte_suffix_KB")},{number:1048576,suffix:this.language.translate("_byte_suffix_MB")},{number:1073741824,suffix:this.language.translate("_byte_suffix_GB")},{number:1099511627776,suffix:this.language.translate("_byte_suffix_TB")},{number:0x4000000000000,suffix:this.language.translate("_byte_suffix_PB")}]),this._bytePrefixes},set:function(t){this._bytePrefixes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(t){this._outputFormat=t.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),e.prototype.escape=function(t){return t.replace("||",TN)},e.prototype.unescape=function(t){return t.replace(TN,"|")},e}(wN);QM.registeredClasses.NumberFormatter=zV;var qV=function(t){function e(){var e=t.call(this)||this;return e._dateFormat="yyyy-MM-dd",e._inputDateFormat="yyyy-MM-dd",e._utc=!1,e._firstDayOfWeek=1,e.months=["January","February","March","April","May","June","July","August","September","October","November","December"],e.monthsShort=["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e._outputFormat="svg",e.capitalize=!0,e.className="DateFormatter",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"language",{get:function(){return this._language},set:function(t){this._language=t,this.dateFormat=this._language.translate("_date")},enumerable:!0,configurable:!0}),e.prototype.format=function(t,e){var n,i;if(this.language||(this.language=this.sprite?this.sprite.language:new BV),void 0!==e&&""!==e||(e=this._dateFormat),i=gR(t)?this.parse(t):GN(t),mR(e))try{return this.intlLocales?new Intl.DateTimeFormat(this.intlLocales,e).format(i):new Intl.DateTimeFormat(void 0,e).format(i)}catch(o){return"Invalid"}else{e=WN(e);var r=this.parseFormat(e);if(cR(this.timezoneOffset)?i.setMinutes(i.getMinutes()+i.getTimezoneOffset()-this.timezoneOffset):cR(this.timezone)&&(i=bV(i,this.timezone)),!yR(i.getTime()))return this.language.translate("Invalid date");n=this.applyFormat(i,r,this.language),this.capitalize&&(n=n.replace(/^.{1}/,n.substr(0,1).toUpperCase()))}return n},e.prototype.parseFormat=function(t){var e=this.getCache(t);if(cR(e))return e;for(var n={template:"",parts:[]},i=WV().chunk(t,!0),r=0;r<i.length;r++){var o=i[r];if("value"===o.type){o.text.match(/^date$/i)&&gR(this._dateFormat)&&(o.text=this._dateFormat);var s=o.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(s)for(var a=0;a<s.length;a++)n.parts.push(s[a]),o.text=o.text.replace(s[a],SN)}n.template+=o.text}return this.setCache(t,n),n},e.prototype.applyFormat=function(t,e,n){var i,r,o,s,a,u,l,h,c=e.template,p=t.getTimezoneOffset(),d=t.getTime();this.utc?(i=t.getUTCFullYear(),r=t.getUTCMonth(),o=t.getUTCDay(),s=t.getUTCDate(),a=t.getUTCHours(),u=t.getUTCMinutes(),l=t.getUTCSeconds(),h=t.getUTCMilliseconds()):(i=t.getFullYear(),r=t.getMonth(),o=t.getDay(),s=t.getDate(),a=t.getHours(),u=t.getMinutes(),l=t.getSeconds(),h=t.getMilliseconds());for(var f=0,g=e.parts.length;f<g;f++){var y="";switch(e.parts[f]){case"G":y=n.translate(i<0?"_era_bc":"_era_ad");break;case"yyyy":y=Math.abs(i).toString(),i<0&&(y+=n.translate("_era_bc"));break;case"yyy":case"yy":case"y":y=Math.abs(i).toString().substr(-e.parts[f].length),i<0&&(y+=n.translate("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":var m=i;1==XN(t)&&o>4&&m--,y="YYYY"==e.parts[f]?Math.abs(m).toString():Math.abs(m).toString().substr(-e.parts[f].length),m<0&&(y+=n.translate("_era_bc"));break;case"u":break;case"q":y=""+Math.ceil((t.getMonth()+1)/3);break;case"MMMMM":y=n.translate(this.months[r]).substr(0,1);break;case"MMMM":y=n.translate(this.months[r]);break;case"MMM":y=n.translate(this.monthsShort[r]);break;case"MM":y=HN(r+1,2,"0");break;case"M":y=(r+1).toString();break;case"ww":y=HN(XN(t,this.utc),2,"0");break;case"w":y=XN(t,this.utc).toString();break;case"W":y=QN(t,this.utc).toString();break;case"dd":y=HN(s,2,"0");break;case"d":y=s.toString();break;case"DD":case"DDD":y=HN(KN(t,this.utc).toString(),e.parts[f].length,"0");break;case"D":y=KN(t,this.utc).toString();break;case"F":case"g":break;case"t":y=n.translateFunc("_dateOrd").call(this,s);break;case"E":y=(o||7).toString();break;case"EE":y=HN((o||7).toString(),2,"0");break;case"EEE":case"eee":y=n.translate(this.weekdaysShort[o]);break;case"EEEE":case"eeee":y=n.translate(this.weekdays[o]);break;case"EEEEE":case"eeeee":y=n.translate(this.weekdays[o]).substr(0,1);break;case"e":case"ee":y=(o-this.firstDayOfWeek+1).toString(),"ee"==e.parts[f]&&(y=HN(y,2,"0"));break;case"a":y=n.translate(a>=12?"PM":"AM");break;case"aa":y=n.translate(a>=12?"P.M.":"A.M.");break;case"aaa":y=n.translate(a>=12?"P":"A");break;case"h":y=$N(a).toString();break;case"hh":y=HN($N(a),2,"0");break;case"H":y=a.toString();break;case"HH":y=HN(a,2,"0");break;case"K":y=$N(a,0).toString();break;case"KK":y=HN($N(a,0),2,"0");break;case"k":y=(a+1).toString();break;case"kk":y=HN(a+1,2,"0");break;case"m":y=u.toString();break;case"mm":y=HN(u,2,"0");break;case"s":y=l.toString();break;case"ss":y=HN(l,2,"0");break;case"S":case"SS":case"SSS":y=Math.round(h/1e3*Math.pow(10,e.parts[f].length)).toString();break;case"x":y=d.toString();break;case"n":case"nn":case"nnn":y=HN(h,e.parts[f].length,"0");break;case"z":y=ZN(t,!1,!1,this.utc);break;case"zz":y=ZN(t,!0,!1,this.utc);break;case"zzz":y=ZN(t,!1,!0,this.utc);break;case"zzzz":y=ZN(t,!0,!0,this.utc);break;case"Z":case"ZZ":var v=Math.abs(p)/60,b=Math.floor(v),_=60*v-60*b;this.utc&&(b=0,_=0),"Z"==e.parts[f]?(y="GMT",y+=p>0?"-":"+",y+=HN(b,2)+":"+HN(_,2)):(y=p>0?"-":"+",y+=HN(b,2)+HN(_,2));break;case"i":y=t.toISOString();break;case"I":y=t.toUTCString()}c=c.replace(SN,y)}return c},e.prototype.parse=function(t,e){if(cR(e)||(e=this.inputDateFormat),t instanceof Date)return t;if("number"==typeof t)return new Date(t);var n;"string"!=typeof t&&(t=t.toString()),this.language||(this.language=this.sprite?this.sprite.language:new BV);var i="";e=(e=WN(e)).substr(0,t.length);for(var r=this.parseFormat(e),o={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},s={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this.utc},a=0,u=0,l=0;l<r.parts.length;l++){switch(u=l+a+1,r.parts[l]){case"yyyy":case"YYYY":i+="([0-9]{4})",o.year=u;break;case"yyy":case"YYY":i+="([0-9]{3})",o.year3=u;break;case"yy":case"YY":i+="([0-9]{2})",o.year2=u;break;case"y":case"Y":i+="([0-9]{1})",o.year1=u;break;case"MMMM":i+="("+this.getStringList(this.months).join("|")+")",o.monthLong=u;break;case"MMM":i+="("+this.getStringList(this.monthsShort).join("|")+")",o.monthShort=u;break;case"MM":case"M":i+="([0-9]{2}|[0-9]{1})",o.month=u;break;case"ww":case"w":i+="([0-9]{2}|[0-9]{1})",o.week=u;break;case"dd":case"d":i+="([0-9]{2}|[0-9]{1})",o.day=u;break;case"DDD":case"DD":case"D":i+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.yearDay=u;break;case"dddd":i+="("+this.getStringList(this.weekdays).join("|")+")",o.weekdayLong=u;break;case"ddd":i+="("+this.getStringList(this.weekdaysShort).join("|")+")",o.weekdayShort=u;break;case"aaa":case"aa":case"a":i+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",o.am=u;break;case"hh":case"h":i+="([0-9]{2}|[0-9]{1})",o.hour12Base1=u;break;case"HH":case"H":i+="([0-9]{2}|[0-9]{1})",o.hourBase0=u;break;case"KK":case"K":i+="([0-9]{2}|[0-9]{1})",o.hour12Base0=u;break;case"kk":case"k":i+="([0-9]{2}|[0-9]{1})",o.hourBase1=u;break;case"mm":case"m":i+="([0-9]{2}|[0-9]{1})",o.minute=u;break;case"ss":case"s":i+="([0-9]{2}|[0-9]{1})",o.second=u;break;case"SSS":case"SS":case"S":i+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=u,o.millisecondDigits=r.parts[l].length;break;case"nnn":case"nn":case"n":i+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=u;break;case"x":i+="([0-9]{1,})",o.timestamp=u;break;case"Z":i+="GMT([-+]+[0-9]{2}:[0-9]{2})",o.zone=u;break;case"ZZ":i+="([\\-+]+[0-9]{2}[0-9]{2})",o.zone=u;break;case"i":i+="([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2}).([0-9]{3})[0-9]*([Zz]?)",o.iso=u,a+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":a--}i+="[^0-9]*"}var h=new RegExp(i),c=t.match(h);if(c){if(o.year>-1&&(s.year=parseInt(c[o.year])),o.year3>-1){var p=parseInt(c[o.year3]);s.year=p+=1e3}if(o.year2>-1&&(p=parseInt(c[o.year2]),s.year=p+=p>50?1e3:2e3),o.year1>-1&&(p=parseInt(c[o.year1]),p=10*Math.floor((new Date).getFullYear()/10)+p,s.year=p),o.monthLong>-1&&(s.month=this.resolveMonth(c[o.monthLong])),o.monthShort>-1&&(s.month=this.resolveShortMonth(c[o.monthShort])),o.month>-1&&(s.month=parseInt(c[o.month])-1),o.week>-1&&-1===o.day&&(s.month=0,s.day=function(t,e,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);var r=new Date(e,0,4,0,0,0,0);return i&&r.setUTCFullYear(e),7*t+n-((r.getDay()||7)+3)}(parseInt(c[o.week]),s.year,1,this.utc)),o.day>-1&&(s.day=parseInt(c[o.day])),o.yearDay>-1&&(s.month=0,s.day=parseInt(c[o.yearDay])),o.hourBase0>-1&&(s.hour=parseInt(c[o.hourBase0])),o.hourBase1>-1&&(s.hour=parseInt(c[o.hourBase1])-1),o.hour12Base0>-1&&(11==(p=parseInt(c[o.hour12Base0]))&&(p=0),o.am>-1&&!this.isAm(c[o.am])&&(p+=12),s.hour=p),o.hour12Base1>-1&&(12==(p=parseInt(c[o.hour12Base1]))&&(p=0),o.am>-1&&!this.isAm(c[o.am])&&(p+=12),s.hour=p),o.minute>-1&&(s.minute=parseInt(c[o.minute])),o.second>-1&&(s.second=parseInt(c[o.second])),o.millisecond>-1&&(p=parseInt(c[o.millisecond]),2==o.millisecondDigits?p*=10:1==o.millisecondDigits&&(p*=100),s.millisecond=p),o.timestamp>-1){s.timestamp=parseInt(c[o.timestamp]);var d=new Date(s.timestamp);s.year=d.getUTCFullYear(),s.month=d.getUTCMonth(),s.day=d.getUTCDate(),s.hour=d.getUTCHours(),s.minute=d.getUTCMinutes(),s.second=d.getUTCSeconds(),s.millisecond=d.getUTCMilliseconds()}if(o.zone>-1){var f=pR(c[o.zone].replace(/:/,"").match(/([+\-]?)([0-9]{2})([0-9]{2})/)),g=f[1],y=f[3],m=60*parseInt(f[2])+parseInt(y);"+"==g&&(m*=-1);var v=(new Date).getTimezoneOffset();s.offset=m-v}o.iso>-1&&("Z"!=c[o.iso+7]&&"z"!=c[o.iso+7]||(s.utc=!0),s.year=lR(c[o.iso+0]),s.month=lR(c[o.iso+1])-1,s.day=lR(c[o.iso+2]),s.hour=lR(c[o.iso+3]),s.minute=lR(c[o.iso+4]),s.second=lR(c[o.iso+5]),s.millisecond=lR(c[o.iso+6])),n=s.utc?new Date(Date.UTC(s.year,s.month,s.day,s.hour,s.minute,s.second,s.millisecond)):new Date(s.year,s.month,s.day,s.hour,s.minute+s.offset,s.second,s.millisecond)}else n=new Date(t);return n},e.prototype.resolveMonth=function(t){var e=this.months.indexOf(t);return e>-1||this.language&&!this.language.isDefault()&&(e=this.language.translateAll(this.months).indexOf(t))>-1?e:0},e.prototype.resolveShortMonth=function(t){var e=this.monthsShort.indexOf(t);return e>-1||(e=this.months.indexOf(t))>-1||this.language&&!this.language.isDefault()&&(e=this.language.translateAll(this.monthsShort).indexOf(t))>-1?e:0},e.prototype.isAm=function(t){return this.getStringList(["AM","A.M.","A"]).indexOf(t.toUpperCase())>-1},e.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},e.prototype.getStringList=function(t){for(var e=[],n=0;n<t.length;n++)e.push(FN(this.language?this.language.translate(t[n]):t[n]));return e},Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(t){this._dateFormat=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDateFormat",{get:function(){return this._inputDateFormat},set:function(t){this._inputDateFormat=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(t){this._intlLocales=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"utc",{get:function(){return this._utc},set:function(t){this._utc=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezoneOffset",{get:function(){return this._timezoneOffset},set:function(t){this._timezoneOffset!=t&&(this._timezoneOffset=t,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezone",{get:function(){return this._timezone},set:function(t){this._timezone!=t&&(this._timezone=t,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstDayOfWeek",{get:function(){return this._firstDayOfWeek},set:function(t){this._firstDayOfWeek=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(t){this._outputFormat=t.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),e}(wN);QM.registeredClasses.DateFormatter=qV;var GV=function(t){function e(){var e=t.call(this)||this;return e._negativeBase=0,e._baseUnit="second",e._outputFormat="svg",e._unitValues={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},e._unitAliases={Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"},e.className="DurationFormatter",e.applyTheme(),e}return Qj(e,t),e.prototype.format=function(t,e,n){this.language||(this.language=this.sprite?this.sprite.language:new BV);var i=n||this._baseUnit;void 0!==e&&""!==e||(e=cR(this.durationFormat)?this.durationFormat:this.getFormat(lR(t),null,i)),e=WN(e);var r,o=this.parseFormat(e,i),s=Number(t),a=this.applyFormat(s,r=s>this._negativeBase?o.positive:s<this._negativeBase?o.negative:o.zero);return""!==r.color&&("svg"===this._outputFormat?a="<tspan fill='"+r.color+"'>"+a+"</tspan>":"html"===this._outputFormat&&(a="<span style='color: "+r.color+";'>"+a+"</span>")),a},e.prototype.parseFormat=function(t,e){var n=this,i=this.getCache(t);if(cR(i))return i;var r=e||this._baseUnit,o={positive:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1}},s=(t=t.replace("||",TN)).split("|");return o.positive.source=s[0],void 0===s[2]?o.zero=o.positive:o.zero.source=s[2],void 0===s[1]?o.negative=o.positive:o.negative.source=s[1],kM(o,(function(t,e){if(!e.parsed)if(void 0===n.getCache(e.source)){var i,r=e.source;(i=e.source.match(/^\[([^\]]*)\]/))&&i.length&&""!==i[0]&&(r=e.source.substr(i[0].length),e.color=i[1]);for(var s=WV().chunk(r,!0),a=0;a<s.length;a++){var u=s[a];if(u.text=u.text.replace(TN,"|"),"value"===u.type){u.text.match(/[yYMdDwhHKkmsSn]+a/)&&(e.absolute=!0,u.text=u.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));var l=u.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(l)for(var h=0;h<l.length;h++)cR(l[h])||(l[h]=n._unitAliases[l[h]]),e.parts.push(l[h]),u.text=u.text.replace(l[h],SN)}e.template+=u.text}n.setCache(e.source,e),e.parsed=!0}else o[t]=n.getCache(e.source)})),this.setCache(t,o),o},e.prototype.applyFormat=function(t,e){var n=!e.absolute&&t<this._negativeBase;t=Math.abs(t);for(var i=this.toTimeStamp(t,e.baseUnit),r=e.template,o=0,s=e.parts.length;o<s;o++){var a=e.parts[o],u=this.toTimeUnit(a.substr(0,1)),l=a.length,h=Math.floor(i/this._unitValues[u]);r=r.replace(SN,HN(h,l,"0")),i-=h*this._unitValues[u]}return n&&(r="-"+r),r},e.prototype.toTimeStamp=function(t,e){return t*this._unitValues[e]},e.prototype.toTimeUnit=function(t){switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}},e.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(e.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(t){this._baseUnit=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(t){this._outputFormat=t.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),e.prototype.getFormat=function(t,e,n){if(cR(this.durationFormat))return this.durationFormat;if(n||(n=this.baseUnit),cR(e)&&t!=e){t=Math.abs(t),e=Math.abs(e);var i=this.getValueUnit(kR(t,e),n);return this.durationFormats[n][i]}var r=this.getValueUnit(t,n);return this.durationFormats[n][r]},e.prototype.getValueUnit=function(t,e){var n;e||(e=this.baseUnit);var i=this.getMilliseconds(t,e);return EM(this._unitValues,(function(t,r){if(t==e||n){if(i/r<=1)return n||(n=t),!1;n=t}return!0})),n},e.prototype.getMilliseconds=function(t,e){return e||(e=this.baseUnit),t*this._unitValues[e]},Object.defineProperty(e.prototype,"durationFormat",{get:function(){return this._durationFormat},set:function(t){this._durationFormat!=t&&(this._durationFormat=t,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormats",{get:function(){return this._durationFormats||(this._durationFormats={millisecond:{millisecond:this.language.translate("_duration_millisecond"),second:this.language.translate("_duration_millisecond_second"),minute:this.language.translate("_duration_millisecond_minute"),hour:this.language.translate("_duration_millisecond_hour"),day:this.language.translate("_duration_millisecond_day"),week:this.language.translate("_duration_millisecond_week"),month:this.language.translate("_duration_millisecond_month"),year:this.language.translate("_duration_millisecond_year")},second:{second:this.language.translate("_duration_second"),minute:this.language.translate("_duration_second_minute"),hour:this.language.translate("_duration_second_hour"),day:this.language.translate("_duration_second_day"),week:this.language.translate("_duration_second_week"),month:this.language.translate("_duration_second_month"),year:this.language.translate("_duration_second_year")},minute:{minute:this.language.translate("_duration_minute"),hour:this.language.translate("_duration_minute_hour"),day:this.language.translate("_duration_minute_day"),week:this.language.translate("_duration_minute_week"),month:this.language.translate("_duration_minute_month"),year:this.language.translate("_duration_minute_year")},hour:{hour:this.language.translate("_duration_hour"),day:this.language.translate("_duration_hour_day"),week:this.language.translate("_duration_hour_week"),month:this.language.translate("_duration_hour_month"),year:this.language.translate("_duration_hour_year")},day:{day:this.language.translate("_duration_day"),week:this.language.translate("_duration_day_week"),month:this.language.translate("_duration_day_month"),year:this.language.translate("_duration_day_year")},week:{week:this.language.translate("_duration_week"),month:this.language.translate("_duration_week_month"),year:this.language.translate("_duration_week_year")},month:{month:this.language.translate("_duration_month"),year:this.language.translate("_duration_month_year")},year:{year:this.language.translate("_duration_year")}}),this._durationFormats},set:function(t){this._durationFormats=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),e}(wN);QM.registeredClasses.DurationFormatter=GV;var YV,KV=new YM,XV=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._validateDisposer=null,e}return Qj(e,t),e.prototype.invalidate=function(){null===this._validateDisposer&&(this._validateDisposer=QM.events.on("exitframe",this.validate,this))},e.prototype.validate=function(){null!==this._validateDisposer&&(this._validateDisposer.dispose(),this._validateDisposer=null)},e.prototype.dispose=function(){null!==this._validateDisposer&&(this._validateDisposer.dispose(),this._validateDisposer=null),t.prototype.dispose.call(this)},e}(xN),QV=function(t){function e(){var e=t.call(this)||this;return e.adapter=new cN(e),e.closeDelay=1e3,e.closeOnClick=!0,e._language=new fM,e._menuTag="ul",e._itemTag="li",e._labelTag="a",e._iconTag="img",e._classPrefix="amexport",e._defaultStyles=!0,e._align="right",e._verticalAlign="top",e._tabindex=0,e._ignoreNextClose=!1,e._items=[{label:"...",menu:[{label:"Image",menu:[{type:"png",label:"PNG"},{type:"jpg",label:"JPG"},{type:"svg",label:"SVG"},{type:"pdf",label:"PDF"}]},{label:"Data",menu:[{type:"json",label:"JSON"},{type:"csv",label:"CSV"},{type:"xlsx",label:"XLSX"},{type:"html",label:"HTML"},{type:"pdfdata",label:"PDF"}]},{label:"Print",type:"print"}]}],e.className="ExportMenu",e._disposers.push(e._language),e.invalidate(),e.applyTheme(),e}return Qj(e,t),e.prototype.validate=function(){this.draw(),t.prototype.validate.call(this)},e.prototype.draw=function(){var t=this;this._element?(this._element.innerHTML="",this._element.className=this.getMenuItemClass(0)):this._element=this.createMenuElement(0),this.defaultStyles&&(this._element.style.display="none"),pR(this._container).appendChild(this._element);for(var e=this.adapter.apply("items",{items:this._items}).items,n=e.length,i=0;i<n;i++)this.drawBranch(this._element,e[i],0);this._element=this.adapter.apply("menuElement",{menuElement:this._element}).menuElement,this._disposers.push(xV().body.events.on("down",(function(e){e.pointer.touch||(t._ignoreNextClose=!1),t.close()}))),this._disposers.push(xV().body.events.on("keydown",(function(e){var n=hV.getEventKey(e.event);switch(n){case"esc":t.close();break;case"up":case"down":case"left":case"right":t._currentSelection&&e.event.preventDefault(),t.moveSelection(n)}}))),this.defaultStyles&&this.loadDefaultCSS()},e.prototype.drawBranch=function(t,e,n){var i=this;if(!0!==(e=this.adapter.apply("branch",{branch:e,level:n}).branch).unsupported){e.ascendants||(e.ascendants=new eN);var r,o=e.type,s=this.createItemElement(n,o);e.icon?((r=this.createIconElement(n,o)).src=e.icon,(e.label||e.title)&&(r.title=e.title||e.label)):e.svg?(r=this.createSvgElement(n,o,e.svg),(e.label||e.title)&&(r.title=e.title||e.label)):((r=this.createLabelElement(n,o)).innerHTML=e.label?this.language.translate(e.label):"",e.title&&(r.title=e.title));var a=this.getReaderLabel(e,r.innerHTML);r.setAttribute("aria-label",a),s.appendChild(r),e.interactions=xV().getInteraction(r),e.element=s,this.typeClickable(o)&&(e.interactions.events.on("hit",(function(t){i.events.isEnabled("hit")&&i.events.dispatchImmediately("hit",{type:"hit",event:t.event,target:i,branch:e})})),e.interactions.events.on("keyup",(function(t){hV.isKey(t.event,"enter")&&i.events.isEnabled("enter")&&i.events.dispatchImmediately("enter",{type:"enter",event:t.event,target:i,branch:e})})));var u=this.getSubMenu(e);null!=u&&(e.interactions.events.on("keyup",(function(t){hV.isKey(t.event,"enter")&&(i.selectBranch(u[0]),i.setFocus(u[0]))})),e.interactions.events.on("hit",(function(t){i.selectBranch(e)}))),e.interactions.events.on("over",(function(t){t.pointer.touch&&(i._ignoreNextClose=!0),i.selectBranch(e),i.events.isEnabled("over")&&i.events.dispatchImmediately("over",{type:"over",event:t.event,target:i,branch:e})})),e.interactions.events.on("out",(function(t){t.pointer.touch||i.delayUnselectBranch(e),i.events.isEnabled("out")&&i.events.dispatchImmediately("out",{type:"out",event:t.event,target:i,branch:e})})),e.interactions.events.on("focus",(function(t){i.selectBranch(e)})),e.interactions.events.on("blur",(function(t){i.delayUnselectBranch(e)}));var l=n+1;if(e.menu){for(var h=this.createMenuElement(l),c=e.menu.length,p=0;p<c;p++){var d=new eN;e.menu[p].ascendants=d,e.ascendants.length&&d.copyFrom(e.ascendants),d.push(e),this.drawBranch(h,e.menu[p],l)}if(""==h.innerHTML)return;s.appendChild(h)}e.hidden&&this.hideBranch(e),e.id&&s.setAttribute("id",e.id),e.color&&(s.style.backgroundColor=e.color.hex),t.appendChild(s)}},e.prototype.createMenuElement=function(t){var e=document.createElement(this.menuTag);return e.className=this.getMenuItemClass(t),e.setAttribute("role",0===t?"menubar":"menu"),e},e.prototype.getMenuItemClass=function(t){var e=this.classPrefix+"-menu "+this.classPrefix+"-menu-level-"+t;return 0===t&&(e+=" "+this.classPrefix+"-menu-root "+this.classPrefix+"-"+this.align+" "+this.classPrefix+"-"+this.verticalAlign),this.adapter.apply("menuClass",{className:e,level:t}).className},e.prototype.createItemElement=function(t,e){var n=document.createElement(this.itemTag);return n.className=this.adapter.apply("itemClass",{className:this.classPrefix+"-item "+this.classPrefix+"-item-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank"),level:t,type:e}).className,n.setAttribute("role","menuitem"),n},e.prototype.createLabelElement=function(t,e){var n=document.createElement(this.labelTag),i=this.classPrefix+"-label "+this.classPrefix+"-label-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank");return this.typeClickable(e)&&(i+=" "+this.classPrefix+"-clickable"),n.className=this.adapter.apply("labelClass",{className:i,level:t,type:e}).className,n.setAttribute("tabindex",this.tabindex.toString()),n.setAttribute("role","menuitem"),n},e.prototype.createIconElement=function(t,e){var n=document.createElement(this.iconTag),i=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank");return this.typeClickable(e)&&(i+=" "+this.classPrefix+"-clickable"),n.className=this.adapter.apply("labelClass",{className:i,level:t,type:e}).className,n.setAttribute("tabindex",this.tabindex.toString()),n.setAttribute("role","menuitem"),n},e.prototype.createSvgElement=function(t,e,n){var i=(new DOMParser).parseFromString(n,"image/svg+xml").documentElement,r=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank");return this.typeClickable(e)&&(r+=" "+this.classPrefix+"-clickable"),i.setAttribute("class",this.adapter.apply("labelClass",{className:r,level:t,type:e}).className),i.setAttribute("tabindex",this.tabindex.toString()),i.setAttribute("role","menuitem"),i},e.prototype.dispose=function(){this._disposed||(t.prototype.dispose.call(this),this._element&&this._element.parentNode&&this._element.parentNode.removeChild(this._element))},e.prototype.typeClickable=function(t){return cR(t)},e.prototype.hasSubMenu=function(t){return!(!t.menu||!t.menu.length)},e.prototype.getSubMenu=function(t){if(t.menu&&t.menu.length)return t.menu},e.prototype.getReaderLabel=function(t,e){return e=zN(e),0==t.ascendants.length?(e="..."==e?this.language.translate("Export"):e,e+=" ["+this.language.translate("Press ENTER or use arrow keys to navigate")+"]"):this.hasSubMenu(t)?e+=" ["+this.language.translate("Click, tap or press ENTER to open")+"]":"print"==t.type?e=this.language.translate("Click, tap or press ENTER to print."):this.typeClickable(t.type)&&(e=this.language.translate("Click, tap or press ENTER to export as %1.",void 0,e)),this.adapter.apply("rederLabel",{label:e,branch:t}).label},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},set:function(t){this._container=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{set:function(t){this._menuTag=t,this._itemTag="ul"==t?"li":"div",this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menuTag",{get:function(){return this.adapter.apply("menuTag",{tag:this._menuTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemTag",{get:function(){return this.adapter.apply("itemTag",{tag:this._itemTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelTag",{get:function(){return this.adapter.apply("labelTag",{tag:this._labelTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconTag",{get:function(){return this.adapter.apply("iconTag",{tag:this._iconTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.adapter.apply("align",{align:this._align}).align},set:function(t){this._align=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",{verticalAlign:this._verticalAlign}).verticalAlign},set:function(t){this._verticalAlign=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",{classPrefix:this._classPrefix}).classPrefix},set:function(t){this._classPrefix=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",{defaultStyles:this._defaultStyles}).defaultStyles},set:function(t){this._defaultStyles!=t&&(this._defaultStyles=t,t&&this.loadDefaultCSS()),this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.loadDefaultCSS=function(){var t,e,n;this._disposers.push((t=XF(this.container),e=this.classPrefix||"amexport",n=new rV,KV.insertKeyIfEmpty(e,(function(){var i=new dM([new $F(t,"."+e+"-menu *",{"box-sizing":"border-box"}),new $F(t,"."+e+"-menu-level-0",{position:"absolute",top:"5px",right:"5px"}),new $F(t,"."+e+"-menu-level-0."+e+"-left",{right:"auto",left:"5px"}),new $F(t,"."+e+"-menu-level-0."+e+"-right",{right:"5px",left:"auto"}),new $F(t,"."+e+"-menu-level-0."+e+"-top",{top:"5px",bottom:"auto"}),new $F(t,"."+e+"-menu-level-0."+e+"-bottom",{top:"auto",bottom:"5px"}),new $F(t,"."+e+"-item."+e+"-item-level-0",{opacity:"0.3",width:"30px","min-height":"30px",transition:"all 100ms ease-in-out"}),new $F(t,"div:hover ."+e+"-item."+e+"-item-level-0, ."+e+"-item."+e+"-item-level-0.active",{opacity:"0.9"}),new $F(t,"."+e+"-item."+e+"-item-level-0 > a",{padding:"0","text-align":"center",overflow:"hidden"}),new $F(t,"."+e+"-item."+e+"-item-level-0:before",{display:"block"}),new $F(t,"."+e+"-item",{position:"relative",display:"block",opacity:"0","z-index":"1","border-radius":"3px","background-color":n.getFor("secondaryButton").hex,padding:"0",margin:"1px 1px 0 0",color:n.getFor("secondaryButton").alternative.hex,transition:"all 100ms ease-in-out, opacity 0.5s ease 0.5s"}),new $F(t,"."+e+"-left ."+e+"-item",{margin:"1px 0 0 1px"}),new $F(t,"."+e+"-item:hover, ."+e+"-item.active",{background:n.getFor("secondaryButtonHover").hex,color:n.getFor("secondaryButtonText").hex}),new $F(t,"."+e+"-item > ."+e+"-menu",{position:"absolute",top:"-1px",right:"0","margin-right":"100%"}),new $F(t,"."+e+"-left ."+e+"-item > ."+e+"-menu",{left:"0",right:"auto","margin-left":"100%","margin-right":"auto"}),new $F(t,"."+e+"-right ."+e+"-item > ."+e+"-menu",{left:"auto",right:"0","margin-left":"auto","margin-right":"100%"}),new $F(t,"."+e+"-top ."+e+"-item > ."+e+"-menu",{top:"-1px",bottom:"auto"}),new $F(t,"."+e+"-bottom ."+e+"-item > ."+e+"-menu",{top:"auto",bottom:"0"}),new $F(t,"."+e+"-item > ."+e+"-menu",{display:"none"}),new $F(t,"."+e+"-item:hover > ."+e+"-menu, ."+e+"-item.active > ."+e+"-menu",{display:"block"}),new $F(t,"."+e+"-item:hover > ."+e+"-menu > ."+e+"-item, ."+e+"-item.active > ."+e+"-menu > ."+e+"-item",{opacity:"1"}),new $F(t,"."+e+"-menu",{display:"block","list-style":"none",margin:"0",padding:"0"}),new $F(t,"."+e+"-label",{display:"block",cursor:"default",padding:"0.5em 1em"}),new $F(t,"."+e+"-icon",{display:"block",cursor:"default",padding:"0.2em 0.4em",width:"1.2em",height:"1.2em","min-width":"32px","min-height":"32px",margin:"auto auto","border-radius":"3px"}),new $F(t,"."+e+"-item-level-0 > ."+e+"-icon",{padding:"0.1em 0.2em"}),new $F(t,"."+e+"-clickable",{cursor:"pointer"})]);return new gM((function(){KV.removeKey(e),i.dispose()}))})).increment())),this._element&&(this._element.style.display="")},Object.defineProperty(e.prototype,"tabindex",{get:function(){return this.adapter.apply("tabindex",{tabindex:this._tabindex}).tabindex},set:function(t){this._tabindex=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){var t=this,e=this._language.get();return null==e&&(e=new BV,this._language.set(e,e.events.on("localechanged",(function(e){t.invalidate()})))),e},set:function(t){var e=this;this._language.set(t,t.events.on("localechanged",(function(t){e.invalidate()}))),this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.close=function(){var t=this;if(this._ignoreNextClose)this._ignoreNextClose=!1;else{if(this.closeOnClick&&(this._element.style.pointerEvents="none",setTimeout((function(){t._element.style.pointerEvents="auto"}),100)),this._currentSelection&&(this.setBlur(this._currentSelection),this._currentSelection=void 0),this._element)for(var e=this._element.getElementsByClassName("active"),n=e.length-1;n>=0;n--)e[n]&&zF(e[n],"active");this.events.dispatchImmediately("closed",{type:"closed",target:this})}},e.prototype.selectBranch=function(t){var e=this;t.closeTimeout&&(this.removeDispose(t.closeTimeout),t.closeTimeout=void 0),WF(t.interactions.element.parentElement,"active"),t.interactions.element.parentElement.setAttribute("aria-expanded","true"),this._currentSelection&&this._currentSelection!==t&&this._currentSelection.ascendants&&VM(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var n=!0,i=function(t){return n=e(t)},r=t.length,o=0;o<r&&(t[o](i),n);++o);}}(MM([this._currentSelection]),this._currentSelection.ascendants.iterator()),(function(n){t.ascendants.contains(n)||t===n||e.unselectBranch(n,!0)})),VM(t.ascendants.iterator(),(function(t){t.closeTimeout&&(e.removeDispose(t.closeTimeout),t.closeTimeout=void 0),WF(t.interactions.element.parentElement,"active")})),this._currentSelection=t,this.events.isEnabled("branchselected")&&this.events.dispatchImmediately("branchselected",{type:"branchselected",target:this,branch:t})},e.prototype.unselectBranch=function(t,e){zF(t.interactions.element.parentElement,"active"),t.interactions.element.parentElement.removeAttribute("aria-expanded"),this._currentSelection==t&&(this._currentSelection=void 0),this.events.isEnabled("branchunselected")&&this.events.dispatchImmediately("branchunselected",{type:"branchunselected",target:this,branch:t})},e.prototype.delayUnselectBranch=function(t,e){var n=this;t.closeTimeout&&(this.removeDispose(t.closeTimeout),t.closeTimeout=void 0),t.closeTimeout=this.setTimeout((function(){n.unselectBranch(t,e)}),this.closeDelay),!0!==e&&t.ascendants&&VM(t.ascendants.iterator(),(function(t){n.delayUnselectBranch(t,!0)}))},e.prototype.moveSelection=function(t){if(this._currentSelection){var e;if("up"==t)e=this.getPrevSibling(this._currentSelection);else if("down"==t)e=this.getNextSibling(this._currentSelection);else if("left"==t&&"right"==this.align||"right"==t&&"left"==this.align){var n=this.getSubMenu(this._currentSelection);null!=n&&(e=n[0])}else("right"==t&&"right"==this.align||"left"==t&&"left"==this.align)&&(e=this.getParentItem(this._currentSelection));e&&e!==this._currentSelection&&(this.selectBranch(e),this.setFocus(e),this._currentSelection=e)}},e.prototype.getSiblings=function(t){var e=this.getParentItem(t);return e&&e.menu?e.menu:[]},e.prototype.getParentItem=function(t){return t.ascendants&&t.ascendants.length?t.ascendants.getIndex(t.ascendants.length-1):void 0},e.prototype.getNextSibling=function(t){var e=this.getSiblings(t);if(e.length>1){var n=e.indexOf(t)+1;return e[n=e.length==n?0:n].unsupported?this.getNextSibling(e[n]):e[n]}return t},e.prototype.getPrevSibling=function(t){var e=this.getSiblings(t);if(e.length>1){var n=e.indexOf(t)-1;return e[n=-1==n?e.length-1:n].unsupported?this.getPrevSibling(e[n]):e[n]}return t},e.prototype.setFocus=function(t){if(t.interactions)try{t.interactions.element.focus()}catch(e){}},e.prototype.setBlur=function(t){if(t.interactions)try{t.interactions.element.blur()}catch(e){}},e.prototype.hideBranch=function(t){t.element.style.display="none"},e.prototype.showBranch=function(t){t.element.style.display=""},Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),e}(XV);function $V(t,e,n){return new Promise((function(i,r){var o=cR(n)&&"blob"==n.responseType,s=new XMLHttpRequest;if(s.onload=function(){if(200===s.status){var t;if(o)return void(a=t=s.response,new Promise((function(t,e){var n=new FileReader;n.onload=function(e){t(n.result)},n.onerror=function(t){e(t)},n.readAsText(a)}))).then((function(n){var r={xhr:s,error:!1,response:n,blob:t,type:s.getResponseHeader("Content-Type"),target:e};i(r)}));var n={xhr:s,error:!1,response:s.responseText||s.response,blob:t,type:s.getResponseHeader("Content-Type"),target:e};i(n)}else r({xhr:s,error:!0,type:s.getResponseHeader("Content-Type"),target:e});var a},s.onerror=function(){r({xhr:s,error:!0,type:s.getResponseHeader("Content-Type"),target:e})},s.open("GET",t,!0),n&&n.withCredentials&&(s.withCredentials=!0),cR(n)){if(cR(n.requestHeaders))for(var a=0;a<n.requestHeaders.length;a++){var u=n.requestHeaders[a];s.setRequestHeader(u.key,u.value)}cR(n.responseType)&&(s.responseType=n.responseType)}s.send()}))}var ZV=/src: ([^;]+);/;function JV(t){return Zj(this,void 0,void 0,(function(){var e;return Jj(this,(function(n){switch(n.label){case 0:e=t.sheet,n.label=1;case 1:return n.trys.push([1,2,,4]),[2,e.cssRules];case 2:return n.sent(),[4,new Promise((function(n,i){t.addEventListener("load",(function(){n(e.cssRules)}),!0),t.addEventListener("error",(function(t){i(t)}),!0),setTimeout((function(){i(new Error("Timeout while waiting for <style> to load"))}),1e4)}))];case 3:return[2,n.sent()];case 4:return[2]}}))}))}function tL(t,e,n){return Zj(this,void 0,void 0,(function(){var i,r,o,s;return Jj(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,$V(e)];case 1:return i=a.sent(),[3,3];case 2:return r=a.sent(),console.error("Failed to load stylesheet",e,r),[2];case 3:(o=t.createElement("style")).textContent=i.response,t.head.appendChild(o),a.label=4;case 4:return a.trys.push([4,,7,8]),[4,JV(o)];case 5:return s=a.sent(),[4,eL(t,e,s,n)];case 6:return a.sent(),[3,8];case 7:return t.head.removeChild(o),[7];case 8:return[2]}}))}))}function eL(t,e,n,i){return Zj(this,void 0,void 0,(function(){var r,o,s,a,u;return Jj(this,(function(l){switch(l.label){case 0:for(r=[],o=n.length,s=0;s<o;s++)(a=n[s]).type===CSSRule.IMPORT_RULE?(u=a.href)&&(u=dF(e,u),r.push(tL(t,u,i))):i(e,a);return r.length?[4,Promise.all(r)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}}))}))}function nL(t){return Zj(this,void 0,void 0,(function(){var e,n;return Jj(this,(function(i){switch(i.label){case 0:(e=document.createElement("iframe")).src="about:blank",e.setAttribute("title",""),document.head.appendChild(e),i.label=1;case 1:return i.trys.push([1,,3,4]),n=e.contentDocument,[4,Promise.all(JR(document.styleSheets,(function(e){var i=e.href;return null==i?eL(n,location.href,e.cssRules,t):(i=dF(location.href,i),tL(n,i,t))})))];case 2:return i.sent(),[3,4];case 3:return document.head.removeChild(e),[7];case 4:return[2]}}))}))}var iL=function(t){function e(e){var n=t.call(this)||this;return n.adapter=new cN(n),n._formatOptions=new YM,n._extraSprites=[],n._validateSprites=[],n.dataFieldsOrder=[],n._dynamicDataFields=!0,n._removedObjects=new eN,n._hiddenObjects=[],n._objectsAlreadyHidden=!1,n._filePrefix="amCharts",n.useWebFonts=!0,n.useRetina=!0,n.useSimplifiedExport=!0,n.timeoutDelay=2e3,n._exportRunning=!1,n._prevHasData=!1,n._container=e,n.className="Export",n._formatOptions.setKey("png",{}),n._formatOptions.setKey("jpg",{quality:.8}),n._formatOptions.setKey("gif",{}),n._formatOptions.setKey("svg",{}),n._formatOptions.setKey("pdf",{fontSize:14,imageFormat:"png",align:"left",addURL:!0,addColumnNames:!0}),n._formatOptions.setKey("json",{indent:2,useLocale:!0}),n._formatOptions.setKey("csv",{addColumnNames:!0,emptyAs:""}),n._formatOptions.setKey("xlsx",{addColumnNames:!0,useLocale:!0,emptyAs:""}),n._formatOptions.setKey("html",{addColumnNames:!0,emptyAs:""}),n._formatOptions.setKey("pdfdata",{fontSize:14,imageFormat:"png",addURL:!0,addColumnNames:!0,emptyAs:""}),n._formatOptions.setKey("print",{delay:500,printMethod:"iframe"}),n.adapter.add("options",(function(t){var e=n._formatOptions.getKey(t.type);return t.options=t.options?DM(e,t.options):e,t})),n.applyTheme(),n.dispatchImmediately("inited"),n}return Qj(e,t),Object.defineProperty(e.prototype,"menu",{get:function(){return this._menu},set:function(t){var e=this;this._menu&&this.removeDispose(this._menu),this._menu=t,this._menu.container=this.container,this._menu.language=this._language,this._menu.adapter.add("branch",(function(t){return t.branch.unsupported=!e.typeSupported(t.branch.type),t})),this._menu.events.on("hit",(function(t){e.export(t.branch.type,t.branch.options),e.menu.close()})),this._menu.events.on("enter",(function(t){e.export(t.branch.type,t.branch.options),e.menu.close()})),this._menu.events.on("over",(function(t){e._disablePointers()})),this._menu.events.on("out",(function(t){setTimeout((function(){e._releasePointers()}),10)})),this.dispatchImmediately("menucreated"),this._menu.adapter.add("classPrefix",(function(t){return t.classPrefix=kF.classNamePrefix+t.classPrefix,t})),this._disposers.push(this._menu)},enumerable:!0,configurable:!0}),e.prototype.typeSupported=function(t){var e=!0,n=this.getFormatOptions(t);return cR(n)&&n.disabled?e=!1:"pdf"===t||("xlsx"===t?e=!!this._hasData():("print"!=t||window.print)&&(-1===["json","csv","html","pdfdata"].indexOf(t)||this._hasData())||(e=!1)),this.adapter.apply("supported",{supported:e,type:t}).supported},e.prototype._hasData=function(){return this.data&&this.data.length},e.prototype._getFunction=function(t){switch(t){case"png":case"gif":case"jpg":return this.getImage;case"svg":return this.getSVG;case"pdf":case"pdfdata":return this.getPDF;case"xlsx":return this.getExcel;case"csv":return this.getCSV;case"json":return this.getJSON;case"html":return this.getHTML;case"print":return this.getPrint;default:return this.unsupported}},e.prototype.export=function(t,e){return Zj(this,void 0,void 0,(function(){var n,i,r=this;return Jj(this,(function(o){switch(o.label){case 0:return"custom"==t?(this.handleCustom(e),[2,!0]):(this._exportRunning=!0,this.events.isEnabled("exportstarted")&&this.events.dispatchImmediately("exportstarted",{type:"exportstarted",target:this,format:t,options:e}),this.showPreloader(),this.timeoutDelay&&(this.hideTimeout(),this._timeoutTimeout=this.setTimeout((function(){r.events.isEnabled("exporttimedout")&&r.events.dispatchImmediately("exporttimedout",{type:"exporttimedout",target:r,format:t,options:e}),r.showTimeout()}),this.timeoutDelay)),this.hideNonExportableSprites(),n=this._getFunction(t),e=this.adapter.apply("options",{options:e,type:t}).options,[4,(n=this.adapter.apply("exportFunction",{func:n,type:t,options:e}).func).call(this,t,e)]);case 1:return i=o.sent(),this._exportRunning=!1,this._releasePointers(),this.restoreNonExportableSprites(),i?(this.events.isEnabled("exportfinished")&&this.events.dispatchImmediately("exportfinished",{type:"exportfinished",target:this,format:t,options:e}),this.hidePreloader(),this.hideTimeout(),this.menu&&this.menu.close(),"print"===t?[2,this.print(i,e,this.adapter.apply("title",{title:this.title,options:e}).title)]:"pdfdata"==t?[2,this.download(i,this.filePrefix+".pdf")]:[2,this.download(i,this.filePrefix+"."+t)]):(this.events.isEnabled("error")&&this.events.dispatchImmediately("error",{type:"error",target:this,format:t,options:e}),[2,!1])}}))}))},e.prototype.unsupported=function(t,e){return Zj(this,void 0,void 0,(function(){return Jj(this,(function(t){return[2,""]}))}))},e.prototype.handleCustom=function(t){cR(t)&&cR(t.callback)&&t.callback.call(t.callbackTarget||this,t)},e.prototype.getPrint=function(t,e){return Zj(this,void 0,void 0,(function(){return Jj(this,(function(t){return[2,this.getImage("png",e)]}))}))},e.prototype.getFontFamilies=function(){return Zj(this,void 0,void 0,(function(){var t,e,n,i,r=this;return Jj(this,(function(o){switch(o.label){case 0:return t=this.getDOMURL(),e=[],n=[],[4,nL((function(i,o){if(o.type===CSSRule.FONT_FACE_RULE){var s=o.cssText,a=ZV.exec(s);if(null!==a){var u=a[1].split(/ *, */).map((function(n){return Zj(r,void 0,void 0,(function(){var r,o,s,a,u,l;return Jj(this,(function(h){switch(h.label){case 0:return null!==(r=/^url\(["']?([^"'\)]+)["']?\)([^,]*)$/.exec(n))?[3,1]:[2,n];case 1:o=r[2],s=dF(i,r[1]),h.label=2;case 2:return h.trys.push([2,7,,8]),[4,$V(s,void 0,{responseType:"blob"})];case 3:return a=h.sent(),null==window.navigator.msSaveOrOpenBlob?[3,4]:(u=t.createObjectURL(a.blob),e.push(u),[3,6]);case 4:return[4,(c=a.blob,new Promise((function(t,e){var n=new FileReader;n.onload=function(e){t(n.result)},n.onerror=function(t){e(t)},n.readAsDataURL(c)})))];case 5:u=h.sent(),h.label=6;case 6:return[2,'url("'+u+'")'+o];case 7:return l=h.sent(),console.error("Failed to load font",s,l),[2,null];case 8:return[2]}var c}))}))}));n.push(Promise.all(u).then((function(t){return 0===(t=t.filter((function(t){return null!=t}))).length?"":s.replace(ZV,"src: "+t.join(", ")+";")})))}}}))];case 1:return o.sent(),[4,Promise.all(n)];case 2:return i=o.sent(),[2,{blobs:e,cssText:i.filter((function(t){return!!t})).join("\n")}]}}))}))},e.prototype.getImage=function(t,e,n){return Zj(this,void 0,void 0,(function(){var i,r,o,s,a;return Jj(this,(function(u){switch(u.label){case 0:return(i=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),cR(e)||(e=this.getFormatOptions(t)),[4,this.awaitValidSprites()];case 1:return u.sent(),[4,this.simplifiedImageExport()];case 2:if(!u.sent())return[3,10];r=void 0,u.label=3;case 3:return u.trys.push([3,7,,9]),[4,this.getCanvas(e)];case 4:return r=u.sent(),!1===n?[3,6]:[4,this.addExtras(r,e)];case 5:r=u.sent(),u.label=6;case 6:return o=r.toDataURL(this.getContentType(t),e.quality),this.disposeCanvas(r),i||this.restoreNonExportableSprites(),[2,o];case 7:return s=u.sent(),console.error(s.message+"\n"+s.stack),IV("Simple export failed, falling back to advanced export"),r&&this.disposeCanvas(r),[4,this.getImageAdvanced(t,e,n)];case 8:return a=u.sent(),i||this.restoreNonExportableSprites(),[2,a];case 9:return[3,12];case 10:return[4,this.getImageAdvanced(t,e,n)];case 11:return a=u.sent(),i||this.restoreNonExportableSprites(),[2,a];case 12:return[2]}}))}))},e.prototype.addExtras=function(t,e,n){return Zj(this,void 0,void 0,(function(){var i,r,o,s,a,u,l,h,c,p,d,f,g,y,m=this;return Jj(this,(function(v){switch(v.label){case 0:return this.extraSprites.length?(i=0,r=0,o=t.width,s=t.height,a=0,u=0,[4,Promise.all(JR(this.extraSprites,(function(t){return Zj(m,void 0,void 0,(function(){var l,h,c,p;return Jj(this,(function(d){switch(d.label){case 0:return(l=t instanceof oL?{sprite:t,position:"bottom"}:t).position=l.position||"bottom",l.marginTop=l.marginTop||0,l.marginRight=l.marginRight||0,l.marginBottom=l.marginBottom||0,l.marginLeft=l.marginLeft||0,n?[4,l.sprite.exporting.getCanvasAdvanced(e)]:[3,2];case 1:return h=d.sent(),[3,4];case 2:return[4,l.sprite.exporting.getCanvas(e)];case 3:h=d.sent(),d.label=4;case 4:return c=h.width+l.marginLeft+l.marginRight,p=h.height+l.marginTop+l.marginBottom,"top"==l.position?(o=l.crop?s:kR(o,c),r+=p):"right"==l.position?(s=l.crop?s:kR(s,p),a+=c):"left"==l.position?(s=l.crop?s:kR(s,p),i+=c):"bottom"===l.position&&(o=l.crop?s:kR(o,c),u+=p),[2,{canvas:h,position:l.position,left:l.marginLeft,top:l.marginTop,width:c,height:p}]}}))}))})))]):[3,2];case 1:return l=v.sent(),(h=this.getDisposableCanvas()).width=i+o+a,h.height=r+s+u,c=h.getContext("2d"),(p=this.backgroundColor||this.findBackgroundColor(this.sprite.dom))&&(c.fillStyle=p.toString(),c.fillRect(0,0,h.width,h.height)),g=(d=i)+o,y=(f=r)+s,tM(l,(function(t){"top"==t.position?c.drawImage(t.canvas,i+t.left,(f-=t.height)+t.top):"right"==t.position?(c.drawImage(t.canvas,g+t.left,r+t.top),g+=t.width):"left"==t.position?c.drawImage(t.canvas,(d-=t.width)+t.left,r+t.top):"bottom"===t.position&&(c.drawImage(t.canvas,i+t.left,y+t.top),y+=t.height),m.disposeCanvas(t.canvas)})),c.drawImage(t,i,r),[2,h];case 2:return[2,t]}}))}))},e.prototype.getCanvas=function(t){return Zj(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,u,l,h,c,p,d,f,g,y,m;return Jj(this,(function(v){switch(v.label){case 0:cR(t)||(t={}),e=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),n=this.getDOMURL(),i=null,r=null,v.label=1;case 1:return v.trys.push([1,,4,5]),s=this.sprite.pixelWidth,a=this.sprite.pixelHeight,u=JF(this.sprite.dom),l=tV(this.sprite.dom),h=t.scale||1,c=this.getPixelRatio(t),h=this.getAdjustedScale(s*c,a*c,h,t),(o=this.getDisposableCanvas()).style.width=s*h+"px",o.style.height=a*h+"px",o.width=s*h,o.height=a*h,p=o.getContext("2d"),e&&(p.fillStyle=e.toString(),p.fillRect(0,0,s*h,a*h)),d=[],this.useWebFonts&&d.push(this.getFontFamilies().then((function(t){return r=t.blobs,t.cssText}))),d.push(this.imagesToDataURI(this.sprite.dom,t)),d.push(this.prepForeignObjects(this.sprite.dom,t)),[4,Promise.all(d)];case 2:return f=v.sent(),g=this.normalizeSVG("<style>"+f[0]+"</style>"+this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),t,s,a,h,u,l),y=new Blob([g],{type:"image/svg+xml"}),i=n.createObjectURL(y),[4,this.loadNewImage(i,s*h*c,a*h*c,"anonymous")];case 3:return m=v.sent(),p.drawImage(m,0,0),[3,5];case 4:return null!==i&&n.revokeObjectURL(i),null!==r&&tM(r,(function(t){n.revokeObjectURL(t)})),this.restoreRemovedObjects(),[7];case 5:return[2,o]}}))}))},e.prototype.getCanvasAdvanced=function(t){return Zj(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,u,l,h,c;return Jj(this,(function(p){switch(p.label){case 0:return cR(t)||(t={}),[4,this.imagesToDataURI(this.sprite.dom,t)];case 1:return p.sent(),e=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),[4,this.canvg];case 2:return n=p.sent(),i=this.sprite.pixelWidth,r=this.sprite.pixelHeight,o=JF(this.sprite.dom),s=tV(this.sprite.dom),a=t.scale||1,u=this.getPixelRatio(t),a=this.getAdjustedScale(i*u,r*u,a,t),l=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),t,i,r,a,o,s,e),(h=this.getDisposableCanvas()).style.width=i*u*a+"px",h.style.height=r*u*a+"px",h.width=i*u*a,h.height=r*u*a,c={useCORS:!0},1!=u&&(c.ignoreDimensions=!0,c.scaleWidth=i*u*a,c.scaleHeight=r*u*a),[4,n.fromString(h.getContext("2d"),l,c).render()];case 3:return p.sent(),[2,h]}}))}))},e.prototype.getImageAdvanced=function(t,e,n){return Zj(this,void 0,void 0,(function(){var i,r,o;return Jj(this,(function(s){switch(s.label){case 0:return(i=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),cR(e)||(e=this.getFormatOptions(t)),[4,this.getCanvasAdvanced(e)];case 1:return r=s.sent(),!1===n?[3,3]:[4,this.addExtras(r,e,!0)];case 2:r=s.sent(),s.label=3;case 3:return o=r.toDataURL(this.getContentType(t),e.quality),this.disposeCanvas(r),i||this.restoreNonExportableSprites(),[2,o]}}))}))},e.prototype.getDisposableCanvas=function(){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="-10000px",document.body.appendChild(t),t},e.prototype.disposeCanvas=function(t){document.body.removeChild(t)},e.prototype.getPixelRatio=function(t){return this.useRetina&&window.devicePixelRatio||1},e.prototype.getAdjustedScale=function(t,e,n,i){if(!i)return n;var r,o,s=t*n,a=t*n;return i.maxWidth&&s>i.maxWidth&&(r=i.maxWidth/t),i.maxHeight&&a>i.maxHeight&&(o=i.maxHeight/e),r||o?AR(r,o):(i.minWidth&&s<i.minWidth&&(r=i.minWidth/t),i.minHeight&&a<i.minHeight&&(o=i.minHeight/e),r||o?kR(r,o):n)},e.prototype.imagesToDataURI=function(t,n){return Zj(this,void 0,void 0,(function(){var i,r,o,s,a,u;return Jj(this,(function(l){switch(l.label){case 0:if(!(i=t.querySelectorAll("image")).length)return[3,2];for(r=[],o=i.length,s=0;s<o;s++)(u=(a=i[s]).getAttributeNS(e.XLINK,"href"))&&(-1!==u.indexOf("data:image")||(-1!==u.indexOf(".svg")?r.push(this.svgToDataURI(a,n)):r.push(this.imageToDataURI(a,n))));return[4,Promise.all(r)];case 1:return l.sent(),[2];case 2:return[2]}}))}))},e.prototype.prepForeignObjects=function(t,e){return Zj(this,void 0,void 0,(function(){var e,n,i;return Jj(this,(function(r){if((e=t.querySelectorAll("foreignObject")).length)for(n=e.length,i=0;i<n;i++)this.temporarilyRemoveObject(e[i]);return[2]}))}))},e.prototype.imageToDataURI=function(t,n){return Zj(this,void 0,void 0,(function(){var i,r,o;return Jj(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.loadNewImage(t.getAttributeNS(e.XLINK,"href"),null,null,"anonymous")];case 1:i=s.sent(),(r=document.createElement("canvas")).width=i.width,r.height=i.height,r.getContext("2d").drawImage(i,0,0);try{return o=r.toDataURL(),t.setAttribute("href",o),[2,o]}catch(a){return!1!==n.keepTainted&&this.temporarilyRemoveObject(t),[2,void 0]}return[3,3];case 2:return s.sent(),n&&!1===n.keepTainted||this.temporarilyRemoveObject(t),[2,void 0];case 3:return[2]}}))}))},e.prototype.svgToDataURI=function(t,n){return Zj(this,void 0,void 0,(function(){var i,r,o,s;return Jj(this,(function(a){switch(a.label){case 0:i=t.getAttributeNS(e.XLINK,"href"),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,$V(i)];case 2:return r=a.sent(),o=this.adapter.apply("charset",{charset:"base64",type:"svg",options:n}).charset,s=this.adapter.apply("svgToDataURI",{data:"data:"+this.getContentType("svg")+";"+o+","+btoa(r.response),options:n}).data,t.setAttributeNS(e.XLINK,"href",s),[2,s];case 3:return a.sent(),n&&!1===n.keepTainted||this.temporarilyRemoveObject(t),[2,void 0];case 4:return[2]}}))}))},e.prototype.temporarilyRemoveObject=function(t,e){var n=t.parentElement||t.parentNode;e||(e=this.sprite.paper.add("g").node),n.insertBefore(e,t),n.removeChild(t),this._removedObjects.push({element:t,placeholder:e})},e.prototype.restoreRemovedObjects=function(){for(var t;t=this._removedObjects.pop();)(t.placeholder.parentElement||t.placeholder.parentNode).insertBefore(t.element,t.placeholder)},e.prototype.simplifiedImageExport=function(){return Zj(this,void 0,void 0,(function(){var t,e,n,i,r,o,s;return Jj(this,(function(a){switch(a.label){case 0:if(!1===this.useSimplifiedExport)return[2,!1];if(!1===(t=QM.getCache("simplifiedImageExport"))||!0===t)return[2,t];a.label=1;case 1:a.trys.push([1,6,,7]),(e=document.createElement("canvas")).width=1,e.height=1,n=e.getContext("2d"),i=this.getDOMURL(),r=new Blob([this.normalizeSVG("<g></g>",{},1,1)],{type:"image/svg+xml"}),o=i.createObjectURL(r),s=void 0,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.loadNewImage(o,1,1)];case 3:return s=a.sent(),[3,5];case 4:return a.sent(),[2,!1];case 5:n.drawImage(s,0,0),i.revokeObjectURL(o);try{return QM.setCache("simplifiedImageExport",!0),[2,!0]}catch(u){return QM.setCache("simplifiedImageExport",!1),[2,!1]}return[3,7];case 6:return a.sent(),QM.setCache("simplifiedImageExport",!1),[2,!1];case 7:return[2]}}))}))},e.prototype.loadNewImage=function(t,e,n,i){return new Promise((function(r,o){var s;function a(){if(i){var e=s.src;s.onerror=function(){o(new Error('Loading image "'+t+'" failed'))},s.removeAttribute("crossorigin"),s.src="",s.src=e}else o(new Error('Loading image "'+t+'" failed'))}s=e&&n?new Image(e,n):new Image,i&&s.setAttribute("crossOrigin",i),s.onload=function(){r(s)},s.onabort=a,s.onerror=a,s.src=t}))},e.prototype.getDOMURL=function(){return self.URL||self.webkitURL||self},e.prototype.getSVG=function(t,e,n){return void 0===n&&(n=!0),Zj(this,void 0,void 0,(function(){var i,r,o,s,a,u,l,h,c,p;return Jj(this,(function(d){switch(d.label){case 0:return(i=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),cR(e)||(e=this.getFormatOptions(t)),[4,this.awaitValidSprites()];case 1:return d.sent(),r=this.sprite.pixelWidth,o=this.sprite.pixelHeight,s=JF(this.sprite.dom),a=tV(this.sprite.dom),u=e.scale||1,l=this.getPixelRatio(e),u=this.getAdjustedScale(r*l,o*l,u,e),h=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),e,r,o,u,s,a),c=this.adapter.apply("charset",{charset:"charset=utf-8",type:"svg",options:e}).charset,p=this.adapter.apply("getSVG",{data:n?"data:"+this.getContentType(t)+";"+c+","+encodeURIComponent(h):h,options:e}).data,i||this.restoreNonExportableSprites(),[2,p]}}))}))},e.prototype.normalizeSVG=function(t,e,n,i,r,o,s,a){var u="";n&&(u+='width="'+Math.round(n*r)+'px" '),i&&(u+='height="'+Math.round(i*r)+'px" ');var l="";o&&(l+="font-family: "+o.replace(/"/g,"")+";"),s&&(l+="font-size: "+s+";"),r&&(u+='viewBox="0 0 '+n+" "+i+'" ');var h=[],c=t.match(/<foreignObject[\s\S]*<\/foreignObject>/gi);if(c)for(var p=0;p<c.length;p++)t=t.replace(c[p],SN),h.push(c[p]);t.match(/<svg/)?""!==u&&(t=(t=(t=t.replace(/(<svg[^>]*)width="[^"]*"/,"$1")).replace(/(<svg[^>]*)height="[^"]*"/,"$1")).replace(/(<svg)/,"$1"+u)):t='<?xml version="1.0" encoding="utf-8"?><svg '+u+' style="'+l+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+t+"</svg>",a&&(t=t.replace(/(<svg[^>]*>)/,'$1<rect width="100%" height="100%" fill="'+a.rgba+'"/>')),/MSIE |Trident\//.test(navigator.userAgent)&&(t=t.replace(/<feColorMatrix [^\/>]*\/>/gi,""));var d=new RegExp("url\\("+FN(AN()),"g");if(t=(t=t.replace(d,"url(#")).replace(/url\(&quot;([^)]*)&quot;\)/gm,"url($1)"),h.length)for(p=0;p<h.length;p++)t=t.replace(SN,h[p]);return this.adapter.apply("normalizeSVG",{data:t,options:e}).data},e.prototype.serializeElement=function(t){return(new XMLSerializer).serializeToString(t)},e.prototype.getPDF=function(t,e){return Zj(this,void 0,void 0,(function(){function n(t){var e={};e.normal=t.normal.path,d[t.normal.path]=t.normal.bytes,t.bold?(e.bold=t.bold.path,d[t.bold.path]=t.bold.bytes):e.bold=t.normal.path,t.italics?(e.italics=t.italics.path,d[t.italics.path]=t.italics.bytes):e.italics=t.normal.path,t.bolditalics?(e.bolditalics=t.bolditalics.path,d[t.bolditalics.path]=t.bolditalics.bytes):e.bolditalics=t.normal.path,p[t.name]=e}var i,r,o,s,a,u,l,h,c,p,d;return Jj(this,(function(f){switch(f.label){case 0:return[4,this.getImage(e.imageFormat||"png",e)];case 1:return i=f.sent(),[4,this.pdfmake];case 2:return r=f.sent(),o=[30,30,30,30],s={pageSize:e.pageSize||"A4",pageOrientation:e.pageOrientation||"portrait",pageMargins:e.pageMargins||o,defaultStyle:{font:e.font?e.font.name:void 0},content:[]},a=this.adapter.apply("title",{title:this.title,options:e}).title,u=0,a&&(s.content.push({text:a,fontSize:e.fontSize||14,bold:!0,margin:[0,0,0,15]}),u+=50),e.addURL&&(s.content.push({text:this.language.translate("Saved from")+": "+document.location.href,fontSize:e.fontSize,margin:[0,0,0,15]}),u+=50),"pdfdata"!=t&&s.content.push({image:i,alignment:e.align||"left",fit:this.getPageSizeFit(s.pageSize,s.pageMargins,u)}),"pdfdata"==t||e.addData?(h=(l=s.content).push,c={},[4,this.getPDFData("pdf",e)]):[3,4];case 3:h.apply(l,[(c.table=f.sent(),c.fontSize=e.fontSize||14,c)]),f.label=4;case 4:return s=this.adapter.apply("pdfmakeDocument",{doc:s,options:e}).doc,p=null,d=null,e.font&&(p={},d={},n(e.font),e.extraFonts&&tM(e.extraFonts,n)),[4,new Promise((function(t,e){r.createPdf(s,null,p,d).getDataUrl((function(e){t(e)}))}))];case 5:return[2,f.sent()]}}))}))},e.prototype.getPDFData=function(t,e){return Zj(this,void 0,void 0,(function(){var t,n,i,r,o,s,a=this;return Jj(this,(function(u){if(t={body:[]},n=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"pdf"}).dataFields,i=this.data,e.pivot)r=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder,AM(n,(function(n,r){var o=[];e.addColumnNames&&o.push(r);for(var s=i.length,u=0;u<s;u++)o.push(a.convertToSpecialFormat(n,i[u][n],e,!0));t.body.push(a.getPDFDataRow(o,e,void 0,!0))}),(function(t,e){var n=r.indexOf(t),i=r.indexOf(e);return n>i?1:n<i?-1:0}));else for(e.addColumnNames&&(t.body.push(this.getPDFDataRow(n,e,void 0,!0)),t.headerRows=1),o=i.length,s=0;s<o;s++)t.body.push(this.getPDFDataRow(i[s],e,n));return[2,this.adapter.apply("pdfmakeTable",{table:t,options:e}).table]}))}))},e.prototype.getPDFDataRow=function(t,e,n,i){var r=this;void 0===i&&(i=!1);var o=[];n||(n=t);var s=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder;return AM(n,(function(n,s){var a=r.convertEmptyValue(n,t[n],e),u=i?a:r.convertToSpecialFormat(n,a,e);o.push(u=""+u)}),(function(t,e){var n=s.indexOf(t),i=s.indexOf(e);return n>i?1:n<i?-1:0})),o},e.prototype.getPageSizeFit=function(t,e,n){void 0===n&&(n=0);var i=[0,0,0,0];"number"==typeof e?i=[e,e,e,e]:2==e.length?i=[e[0],e[1],e[0],e[1]]:4==e.length&&(i=e);var r={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]}[t];return r[0]-=i[0]+i[2],r[1]-=i[1]+i[3]+n,r},e.prototype.getExcel=function(t,e){return Zj(this,void 0,void 0,(function(){var n,i,r,o,s,a,u,l,h,c=this;return Jj(this,(function(p){switch(p.label){case 0:return[4,this.xlsx];case 1:if(n=p.sent(),i=this.adapter.apply("xlsxWorkbookOptions",{options:{bookType:"xlsx",bookSST:!1,type:"base64"}}).options,r=this.normalizeExcelSheetName(this.adapter.apply("xlsxSheetName",{name:this.title||this.language.translate("Data")}).name),o={SheetNames:[r],Sheets:{}},s=[],a=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"xslx"}).dataFields,e.pivot)u=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder,AM(a,(function(t,n){var i=[];e.addColumnNames&&i.push(n);for(var r=c.data.length,o=0;o<r;o++)i.push(c.convertToSpecialFormat(t,c.data[o][t],e,!0));s.push(c.getExcelRow(i,e,void 0,!0))}),(function(t,e){var n=u.indexOf(t),i=u.indexOf(e);return n>i?1:n<i?-1:0}));else for(e.addColumnNames&&s.push(this.getExcelRow(a,e,void 0,!0)),l=this.data.length,h=0;h<l;h++)s.push(this.getExcelRow(this.data[h],e,a));return o.Sheets[r]=n.utils.aoa_to_sheet(s),o=this.adapter.apply("xlsxWorkbook",{workbook:o,options:e}).workbook,[2,this.adapter.apply("getExcel",{data:"data:"+this.getContentType(t)+";base64,"+n.write(o,i),options:e}).data]}}))}))},e.prototype.normalizeExcelSheetName=function(t){return LN(t=t.replace(/([:\\\/?*\[\]]+)/g," "),31,"...",!0)},e.prototype.getExcelRow=function(t,e,n,i){var r=this;void 0===i&&(i=!1);var o=[];n||(n=t);var s=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder;return AM(n,(function(n,s){var a=r.convertEmptyValue(n,t[n],e),u=i?a:r.convertToSpecialFormat(n,a,e,!0);o.push(u)}),(function(t,e){var n=s.indexOf(t),i=s.indexOf(e);return n>i?1:n<i?-1:0})),o},e.prototype.getCSV=function(t,e,n){return void 0===n&&(n=!0),Zj(this,void 0,void 0,(function(){var i,r,o,s,a,u,l,h,c,p=this;return Jj(this,(function(d){if(i="",r=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields,o="",s=this.data,e.pivot)a=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder,AM(r,(function(t,n){var r=[];e.addColumnNames&&r.push(n);for(var a=s.length,u=0;u<a;u++)r.push(p.convertToSpecialFormat(t,s[u][t],e,!0));i+=o+p.getCSVRow(r,e,void 0,!0),o="\n"}),(function(t,e){var n=a.indexOf(t),i=a.indexOf(e);return n>i?-1:n<i?1:0}));else{for(u=s.length,l=0;l<u;l++)h=this.getCSVRow(s[l],e,r),e.reverse?i=h+o+i:i+=o+h,o="\n";e.addColumnNames&&(i=this.getCSVRow(r,e,void 0,!0)+o+i)}return c=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getCSV",{data:n?"data:"+this.getContentType(t)+";"+c+","+encodeURIComponent(i):i,options:e}).data]}))}))},e.prototype.getCSVRow=function(t,e,n,i){var r=this;void 0===i&&(i=!1);var o=e.separator||",",s=[];n||(n=t);var a=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder;return AM(n,(function(n,a){var u=r.convertEmptyValue(n,t[n],e),l=i?u:r.convertToSpecialFormat(n,u,e);l=(l=""+l).replace(/"/g,'""'),(e.forceQuotes||l.search(new RegExp('"|\n|'+o,"g"))>=0)&&(l='"'+l+'"'),s.push(l)}),(function(t,e){var n=a.indexOf(t),i=a.indexOf(e);return n>i?1:n<i?-1:0})),s.join(o)},e.prototype.getHTML=function(t,e,n){return void 0===n&&(n=!0),Zj(this,void 0,void 0,(function(){var i,r,o,s,a,u,l,h=this;return Jj(this,(function(c){if(i="<table>",e.tableClass&&(i='<table class="'+e.tableClass+'">'),r=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"html"}).dataFields,o=this.data,e.pivot)s=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,i+="\n<tbody>",AM(r,(function(t,n){var r=[];e.addColumnNames&&r.push(n);for(var s=o.length,a=0;a<s;a++)r.push(h.convertToSpecialFormat(t,o[a][t],e,!0));i+="\n"+h.getHTMLRow(r,e,void 0,!0)}),(function(t,e){var n=s.indexOf(t),i=s.indexOf(e);return n>i?-1:n<i?1:0})),i+="\n</tbody>";else{for(e.addColumnNames&&(i+="\n<thead>\n"+this.getHTMLRow(r,e,void 0,!0,!0)+"\n</thead>"),i+="\n<tbody>",a=o.length,u=0;u<a;u++)i+="\n"+this.getHTMLRow(o[u],e,r);i+="\n</tbody>"}return i+="\n</table>",l=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getHTML",{data:n?"data:"+this.getContentType(t)+";"+l+","+encodeURIComponent(i):i,options:e}).data]}))}))},e.prototype.getHTMLRow=function(t,e,n,i,r){var o=this;void 0===i&&(i=!1),void 0===r&&(r=!1);var s="\t<tr>";e.rowClass&&(s='\t<tr class="'+e.rowClass+'">'),n||(n=t);var a=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,u=r?"th":"td",l=!0;return AM(n,(function(n,r){var a=o.convertEmptyValue(n,t[n],e),h=i?a:o.convertToSpecialFormat(n,a,e);h=(h=""+h).replace(/[\u00A0-\u9999<>\&]/gim,(function(t){return"&#"+t.charCodeAt(0)+";"}));var c=u;e.pivot&&l&&(c="th"),s+=e.cellClass?"\n\t\t<"+c+' class="'+e.cellClass+'">'+h+"</"+c+">":"\n\t\t<"+c+">"+h+"</"+c+">",l=!1}),(function(t,e){var n=a.indexOf(t),i=a.indexOf(e);return n>i?1:n<i?-1:0})),s+="\n\t</tr>"},e.prototype.getJSON=function(t,e,n){return void 0===n&&(n=!0),Zj(this,void 0,void 0,(function(){var i,r,o,s,a,u,l,h,c=this;return Jj(this,(function(p){if(r=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields,this._dynamicDataFields)i=this.data;else for(i=[],s=function(t,n){var s=o[n];if("object"==typeof s){var a={};kM(s,(function(t,n){cR(r[t])&&(a[r[t]]=c.convertToSpecialFormat(t,n,e))})),i.push(a)}},a=(o=this.data).length,u=0;u<a;u++)s(0,u);return l=JSON.stringify(i,(function(t,n){return"object"==typeof n&&kM(n,(function(t,i){n[t]=c.convertToSpecialFormat(t,i,e)})),n}),e.indent),h=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getJSON",{data:n?"data:"+this.getContentType(t)+";"+h+","+encodeURIComponent(l):l,options:e}).data]}))}))},e.prototype.convertToSpecialFormat=function(t,e,n,i){if("number"==typeof e)if(this.isDateField(t))e=new Date(e);else{if(this.isDurationField(t))return this.durationFormatter.format(e,this.durationFormat);if(this.isNumberField(t)&&this.numberFormat)return this.numberFormatter.format(e,this.numberFormat)}return e instanceof Date?n.useTimestamps?e=e.getTime():n.useLocale?i||(e=e.toLocaleString()):e=this.dateFormatter.format(e,this.dateFormat):gR(e)&&this.isDateField(t)&&this.dateFormat&&(e=this.dateFormatter.format(this.dateFormatter.parse(e),this.dateFormat)),e},e.prototype.convertEmptyValue=function(t,e,n){return cR(e)?e:n.emptyAs},e.prototype.download=function(t,e){return Zj(this,void 0,void 0,(function(){var n,i,r,o,s,a,u,l,h,c,p,d,f,g,y;return Jj(this,(function(m){if(this.msBlobDownloadSupport()){if(d=t.split(";"),f=d.shift().replace(/data:/,""),t=decodeURIComponent(d.join(";").replace(/^[^,]*,/,"")),-1!=["image/svg+xml","application/json","text/csv"].indexOf(f))return n=new Blob([t],{type:f}),window.navigator.msSaveBlob(n,e),[2,!0];try{r=atob(t),t=r}catch(v){return[2,!1]}for(a=new Array(t.length),u=0;u<t.length;++u)l=t.charCodeAt(u),a[u]=l;h=new Blob([new Uint8Array(a)],{type:f}),window.navigator.msSaveBlob(h,e)}else if(this.blobDownloadSupport()){if((i=document.createElement("a")).download=e,document.body.appendChild(i),d=t.split(";"),f=d.shift().replace(/data:/,""),t=decodeURIComponent(d.join(";").replace(/^[^,]*,/,"")),-1!=["image/svg+xml","application/json","text/csv","text/html"].indexOf(f))return o=new Blob([t],{type:f}),s=window.URL.createObjectURL(o),i.href=s,i.download=e,i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(s)}),100),[2,!0];try{r=atob(t),t=r}catch(v){return[2,!1]}for(a=new Array(t.length),u=0;u<t.length;++u)l=t.charCodeAt(u),a[u]=l;h=new Blob([new Uint8Array(a)],{type:f}),c=window.URL.createObjectURL(h),i.href=c,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout((function(){window.URL.revokeObjectURL(c)}),100)}else this.linkDownloadSupport()?((p=document.createElement("a")).download=e,p.href=t,document.body.appendChild(p),p.click(),document.body.removeChild(p)):this.legacyIE()?4===(d=t.match(/^data:(.*);[ ]*([^,]*),(.*)$/)).length&&("base64"==d[2]?d[1].match(/^image\//)&&this.showModal('<img src="'+t+'" style="float: left; max-width: 50%; max-height: 80%; margin: 0 1em 0.5em 0; border: 1px solid #eee;" /><p>'+this.language.translate('To save the image, right-click thumbnail on the left and choose "Save picture as..."')+'</p><p style="text-align: center;"><small>'+this.language.translate("(Press ESC to close this message)")+"</small></p>",this.language.translate("Image Export Complete")):(f=void 0,e.match(/\.svg$/)?f="image/svg+xml":(f="text/plain",e+=".txt"),(g=document.createElement("iframe")).width="1px",g.height="1px",g.style.display="none",document.body.appendChild(g),(y=g.contentDocument).open(f,"replace"),y.write(decodeURIComponent(d[3])),y.close(),y.execCommand("SaveAs",!0,e),document.body.removeChild(g))):window.location.href=t;return[2,!0]}))}))},e.prototype.downloadSupport=function(){return this.linkDownloadSupport()||this.msBlobDownloadSupport()},e.prototype.linkDownloadSupport=function(){var t=QM.getCache("linkDownloadSupport");if(!1===t||!0===t)return t;var e=void 0!==document.createElement("a").download;return QM.setCache("linkDownloadSupport",e),e},e.prototype.blobDownloadSupport=function(){return cR(window.Blob)},e.prototype.msBlobDownloadSupport=function(){return cR(window.navigator.msSaveOrOpenBlob)},e.prototype.legacyIE=function(){var t=document.createElement("div");return t.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e",1==t.getElementsByTagName("i").length},e.prototype.print=function(t,e,n){return Zj(this,void 0,void 0,(function(){return Jj(this,(function(i){return"css"==e.printMethod?[2,this.printViaCSS(t,e,n)]:[2,this.printViaIframe(t,e,n)]}))}))},e.prototype.printViaCSS=function(t,e,n){return Zj(this,void 0,void 0,(function(){var i,r,o,s;return Jj(this,(function(a){return i=document.documentElement.scrollTop||document.body.scrollTop,r=new $F(XF(this.container),"body > *",{display:"none",position:"fixed",visibility:"hidden",opacity:"0",clipPath:"polygon(0px 0px,0px 0px,0px 0px,0px 0px);"}),n&&document&&document.title&&(o=document.title,document.title=n),(s=new Image).src=t,s.style.maxWidth="100%",s.style.display="block",s.style.position="relative",s.style.visibility="visible",s.style.opacity="1",s.style.clipPath="none",document.body.appendChild(s),this.setTimeout((function(){window.print()}),50),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.delay<1e3?e.delay=1e3:e.delay<100&&(e.delay=100),this.setTimeout((function(){document.body.removeChild(s),r.dispose(),o&&(document.title=document.title),document.documentElement.scrollTop=document.body.scrollTop=i}),e.delay||500),[2,!0]}))}))},e.prototype.printViaIframe=function(t,e,n){return Zj(this,void 0,void 0,(function(){var i,r;return Jj(this,(function(o){return(i=document.createElement("iframe")).style.visibility="hidden",document.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),(r=new Image).src=t,r.style.maxWidth="100%",r.style.height="auto",n&&(i.contentWindow.document.title=n),i.contentWindow.document.body.appendChild(r),i.load=function(){i.contentWindow.document.body.appendChild(r)},this.setTimeout((function(){try{i.contentWindow.document.execCommand("print",!1,null)||i.contentWindow.print()}catch(t){i.contentWindow.print()}}),e.delay||50),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.delay<1e3?e.delay=1e3:e.delay<100&&(e.delay=100),this.setTimeout((function(){document.body.removeChild(i)}),e.delay+50||100),[2,!0]}))}))},e.prototype.findBackgroundColor=function(t){var e=1,n=GF(t,"background-color");if((n.match(/[^,]*,[^,]*,[^,]*,[ ]?0/)||"transparent"==n)&&(e=0),0==e){var i=t.parentElement;return i?this.findBackgroundColor(i):bN("#fff")}return bN(n,e)},Object.defineProperty(e.prototype,"container",{get:function(){return this.adapter.apply("container",{container:this._container}).container},set:function(t){this._container=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sprite",{get:function(){return this.adapter.apply("sprite",{sprite:this._sprite}).sprite},set:function(t){this._sprite=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraSprites",{get:function(){return this.adapter.apply("extraSprites",{extraSprites:this._extraSprites}).extraSprites},set:function(t){this._extraSprites=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validateSprites",{get:function(){return this.adapter.apply("validateSprites",{validateSprites:this._validateSprites}).validateSprites},set:function(t){this._validateSprites=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.adapter.apply("data",{data:this._data}).data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataFields",{get:function(){return this._dataFields||this.generateDataFields(),this.adapter.apply("dataFields",{dataFields:this._dataFields}).dataFields},set:function(t){this._dataFields=t,this._dynamicDataFields=!1},enumerable:!0,configurable:!0}),e.prototype.handleDataUpdated=function(){this._dynamicDataFields&&(this._dataFields=void 0);var t=this.data.length>0;this._prevHasData!=t&&(this._prevHasData=t,this.menu&&this.menu.invalidate())},Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this._dateFormatter||(this._dateFormatter=new qV,this._dateFormatter.language=this.language),this.adapter.apply("dateFormatter",{dateFormatter:this._dateFormatter}).dateFormatter},set:function(t){this._dateFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this.adapter.apply("dateFormat",{dateFormat:this._dateFormat}).dateFormat},set:function(t){this._dateFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFields",{get:function(){return this._dateFields||(this._dateFields=new eN),this.adapter.apply("dateFields",{dateFields:this._dateFields}).dateFields},set:function(t){this._dateFields=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter||(this._numberFormatter=new zV,this._numberFormatter.language=this.language),this.adapter.apply("numberFormatter",{numberFormatter:this._numberFormatter}).numberFormatter},set:function(t){this._numberFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this.adapter.apply("numberFormat",{numberFormat:this._numberFormat}).numberFormat},set:function(t){this._numberFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFields",{get:function(){return this._numberFields||(this._numberFields=new eN),this.adapter.apply("numberFields",{numberFields:this._numberFields}).numberFields},set:function(t){this._numberFields=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormatter",{get:function(){return this._durationFormatter||(this._durationFormatter=new GV,this._durationFormatter.language=this.language),this.adapter.apply("durationFormatter",{durationFormatter:this._durationFormatter}).durationFormatter},set:function(t){this._durationFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormat",{get:function(){return this.adapter.apply("durationFormat",{durationFormat:this._durationFormat}).durationFormat},set:function(t){this._durationFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFields",{get:function(){return this._durationFields||(this._durationFields=new eN),this.adapter.apply("durationFields",{durationFields:this._durationFields}).durationFields},set:function(t){this._durationFields=t},enumerable:!0,configurable:!0}),e.prototype.generateDataFields=function(){var t=this;this._dataFields={},this.data.length&&tM(this.data,(function(e){kM(e,(function(e,n){cR(t._dataFields[e])||(t._dataFields[e]=t.adapter.apply("dataFieldName",{name:e,field:e}).name)}))}))},e.prototype.isDateField=function(t){return this.adapter.apply("isDateField",{isDateField:this.dateFields.contains(t),field:t}).isDateField},e.prototype.isNumberField=function(t){return this.adapter.apply("isNumberField",{isNumberField:this.numberFields.contains(t),field:t}).isNumberField},e.prototype.isDurationField=function(t){return this.adapter.apply("isDurationField",{isDurationField:this.durationFields.contains(t),field:t}).isDurationField},e.prototype.getContentType=function(t){var e="";switch(t){case"png":case"gif":e="image/"+t;break;case"jpg":e="image/jpeg";break;case"svg":e="image/svg+xml";break;case"csv":e="text/csv";break;case"json":e="application/json";break;case"html":e="text/html";break;case"pdf":case"pdfdata":e="application/pdf";break;case"xlsx":e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}return this.adapter.apply("contentType",{contentType:e,type:t}).contentType},Object.defineProperty(e.prototype,"filePrefix",{get:function(){return this.adapter.apply("filePrefix",{filePrefix:this._filePrefix}).filePrefix},set:function(t){this._filePrefix=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this.adapter.apply("backgroundColor",{backgroundColor:this._backgroundColor}).backgroundColor},set:function(t){this._backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.adapter.apply("title",{title:this._title}).title},set:function(t){this._title=t},enumerable:!0,configurable:!0}),e.prototype.showPreloader=function(){var t=this.preloader;t&&(t.progress=.5,t.label.text="...")},e.prototype.hidePreloader=function(){var t=this.preloader;t&&(t.progress=1)},Object.defineProperty(e.prototype,"preloader",{get:function(){return this._sprite&&this._sprite.parent&&this._sprite.parent.preloader?this._sprite.parent.preloader:void 0},enumerable:!0,configurable:!0}),e.prototype.showTimeout=function(){this.showModal(this.adapter.apply("timeoutMessage",{message:this.language.translate("Export operation took longer than expected. Something might have gone wrong.")}).message)},e.prototype.hideTimeout=function(){this._timeoutTimeout&&(this.removeDispose(this._timeoutTimeout),this._timeoutTimeout=null),this.hideModal()},Object.defineProperty(e.prototype,"language",{get:function(){return this._language||(this._language=new BV),this._language},set:function(t){this._language=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return this._modal||(this._modal=new CV,this._modal.adapter.add("classPrefix",(function(t){return kF.classNamePrefix+t}))),this._modal},enumerable:!0,configurable:!0}),e.prototype.showModal=function(t,e){this.hideModal(),this.hidePreloader();var n=this.modal;n.container=this.sprite.svgContainer.SVGContainer,n.content=t,n.readerTitle=e,n.open()},e.prototype.hideModal=function(){this._modal&&this.modal.close()},e.prototype._canvg=function(){return Zj(this,void 0,void 0,(function(){var t;return Jj(this,(function(e){switch(e.label){case 0:return[4,n.e(1).then(n.bind(null,"iJDN"))];case 1:return null!=(t=e.sent()).default?[2,t.default]:[2,t]}}))}))},Object.defineProperty(e.prototype,"canvg",{get:function(){return this._canvg()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pdfmake",{get:function(){return null==YV&&(YV=function(){return Zj(this,void 0,void 0,(function(){var t,e,i,r;return Jj(this,(function(o){switch(o.label){case 0:return[4,Promise.all([n.e(3).then(n.t.bind(null,"5JmO",7)),n.e(3).then(n.bind(null,"b0eU"))])];case 1:return t=o.sent(),e=t[0],i=t[1],(r=window).pdfMake=r.pdfMake||{},r.pdfMake.vfs=i.default,e.vfs=i.default,[2,e]}}))}))}()),YV},enumerable:!0,configurable:!0}),e.prototype._xlsx=function(){return Zj(this,void 0,void 0,(function(){return Jj(this,(function(t){switch(t.label){case 0:return[4,n.e(6).then(n.t.bind(null,"EUZL",7))];case 1:return[2,t.sent()]}}))}))},Object.defineProperty(e.prototype,"xlsx",{get:function(){return this._xlsx()},enumerable:!0,configurable:!0}),e.prototype.setFormatOptions=function(t,e){this._formatOptions.setKey(t,e)},e.prototype.getFormatOptions=function(t){return this._formatOptions.getKey(t)},Object.defineProperty(e.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!0,configurable:!0}),e.prototype._disablePointers=function(){cR(this._spriteInteractionsEnabled)||(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled),this.sprite.interactionsEnabled=!1},e.prototype._releasePointers=function(){cR(this._spriteInteractionsEnabled)&&!this._exportRunning&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled)},e.prototype.hideNonExportableSprites=function(){var t=this;if(!this._objectsAlreadyHidden){var e=this.sprite.svgContainer;e&&tM(e.nonExportableSprites,(function(e){e.isHidden||e.isHiding||!e.visible||t._hiddenObjects.push(e),e.hide(0)})),this._objectsAlreadyHidden=!0}},e.prototype.restoreNonExportableSprites=function(){this._objectsAlreadyHidden&&(tM(this._hiddenObjects,(function(t){t.show(0)})),this._hiddenObjects=[],this._objectsAlreadyHidden=!1)},e.prototype.awaitValidSprites=function(){return Zj(this,void 0,void 0,(function(){var t;return Jj(this,(function(e){switch(e.label){case 0:return t=[],this.validateSprites.length&&tM(this.validateSprites,(function(e,n){e.invalid&&t.push(new Promise((function(t,n){e.events.once("validated",(function(e){t()}))})))})),t.length?[4,Promise.all(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.processConfig=function(e){QM.registeredClasses.ExportMenu=QV,e&&cR(e.menu)&&!cR(e.menu.type)&&(e.menu.type="ExportMenu"),t.prototype.processConfig.call(this,e)},e.XLINK="http://www.w3.org/1999/xlink",e}(XV),rL=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin"],oL=function(t){function e(){var e=t.call(this)||this;return e.properties={},e._eventDispatcher=new TF(e),e._bindings={},e._isTemplate=!1,e._isPath=!1,e._inited=!1,e._ready=!1,e.isHiding=!1,e._isHidden=!1,e.isShowing=!1,e.isStandaloneInstance=!1,e._isActive=!1,e._mask=new fM,e._positionPrecision=3,e._language=new fM,e._exporting=new fM,e._exportable=!0,e._bbox={x:0,y:0,width:0,height:0},e.invalid=!1,e.positionInvalid=!1,e.propertyFields={},e.applyOnClones=!1,e._measuredWidthSelf=0,e._measuredHeightSelf=0,e.maxLeft=0,e.maxRight=0,e.maxTop=0,e.maxBottom=0,e.maxLeftSelf=0,e.maxRightSelf=0,e.maxTopSelf=0,e.maxBottomSelf=0,e._isDragged=!1,e._isResized=!1,e._disabled=!1,e._internalDisabled=!1,e._updateDisabled=!1,e._internalDefaultsApplied=!1,e.rollOutDelay=0,e.isBaseSprite=!1,e.shouldClone=!0,e.appeared=!1,e.ex=0,e.ey=0,e.dragWhileResize=!1,e.measureFailed=!1,e.preventShow=!1,e.cloneTooltip=!0,e.className="Sprite",e._disposers.push(e._eventDispatcher),e.group=e.paper.addGroup("g"),e.setPropertyValue("scale",1),e.setPropertyValue("rotation",0),e.setPropertyValue("align","none"),e.setPropertyValue("valign","none"),e.setPropertyValue("pixelPerfect",!1),e.setPropertyValue("visible",!0),e.setPropertyValue("tooltipPosition","fixed"),e.setPropertyValue("verticalCenter","none"),e.setPropertyValue("horizontalCenter","none"),e.setPropertyValue("tooltipX",rR(50)),e.setPropertyValue("tooltipX",rR(50)),e.setPropertyValue("marginTop",0),e.setPropertyValue("marginBottom",0),e.setPropertyValue("marginLeft",0),e.setPropertyValue("marginRight",0),e.setPropertyValue("dx",0),e.setPropertyValue("dy",0),e.setPropertyValue("paddingTop",0),e.setPropertyValue("paddingBottom",0),e.setPropertyValue("paddingRight",0),e.setPropertyValue("paddingLeft",0),e.setPropertyValue("togglable",!1),e.setPropertyValue("hidden",!1),e.setPropertyValue("urlTarget","_self"),e.setPropertyValue("alwaysShowTooltip",!1),e.setPropertyValue("showTooltipOn","hover"),e._prevMeasuredWidth=0,e._prevMeasuredHeight=0,e._measuredWidth=0,e._measuredHeight=0,e._isMeasured=!0,e.invalidate(),e.applyTheme(),e._disposers.push(e.events),e._disposers.push(e.group),e._disposers.push(e._mask),e._disposers.push(e._language),e._disposers.push(e._exporting),e._disposers.push(new pM((function(){kM(e._bindings,(function(t,e){e.dispose()}))}))),e.setPropertyValue("interactionsEnabled",!0),e}return Qj(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new cN(this)),this._adapterO},enumerable:!0,configurable:!0}),e.prototype.applyTheme=function(){t.prototype.applyTheme.call(this),kF.autoSetClassName&&this.setClassName()},e.prototype.getCurrentThemes=function(){var t=this._themes;if(t)return t;var e=this._parent;return e?e.getCurrentThemes():QM.themes},e.prototype.applyInternalDefaults=function(){this._internalDefaultsApplied=!0},e.prototype.invalidate=function(){this.disabled||this._isTemplate||this.invalid||(this.invalid=!0,QM.addToInvalidSprites(this),uL.requestFrame())},e.prototype.validate=function(){this.dispatchImmediately("beforevalidated"),this._internalDefaultsApplied||this.applyInternalDefaults(),this.beforeDraw(),this.draw(),this.invalid=!1,QM.removeFromInvalidSprites(this),this.afterDraw()},e.prototype.invalidatePosition=function(){this.disabled||this._isTemplate||this.positionInvalid||(this.positionInvalid=!0,QM.addToInvalidPositions(this),uL.requestFrame())},e.prototype.validatePosition=function(){var t=this.pixelX,e=this.pixelY,n=this.dx,i=this.dy,r=t+n,o=e+i;this._updateDisabled&&(this._internalDisabled?this.group.attr({display:"none"}):this.disabled||this.removeSVGAttribute("display"),this._updateDisabled=!1);var s=this.measure(),a=this.group.transformString;this.group.moveTo({x:r,y:o}),this.group.rotation=this.rotation,this.group.scale=this.nonScaling?this.scale/this.globalScale:this.scale,(a!=this.group.transformString||s)&&(null==a?this.dispatch("transformed"):this.dispatchImmediately("transformed"),this.dispatch("positionchanged"),"hit"!=this.showTooltipOn&&"always"!=this.showTooltipOn||this.updateTooltipPosition()),t+n==r&&e+i==o&&(QM.removeFromInvalidPositions(this),this.positionInvalid=!1);var u=this._maskRectangle;u&&this._clipElement.moveTo({x:u.x-t,y:u.y-e})},e.prototype.beforeDraw=function(){},e.prototype.draw=function(){},e.prototype.afterDraw=function(){var t,e;if((this.isMeasured||"none"!==this.horizontalCenter||"none"!==this.verticalCenter)&&this.measureElement(),this._inited)this.dispatch("validated");else{if(this._adapterO)try{for(var n=tR(this._adapterO.keys()),i=n.next();!i.done;i=n.next()){var r=i.value;switch(r){case"mask":case"fill":case"opacity":case"fillOpacity":case"stroke":case"strokeOpacity":case"strokeWidth":case"shapeRendering":case"strokeDasharray":case"strokeDashoffset":case"strokeLinecap":case"strokeLinejoin":case"textDecoration":case"fontSize":case"fontFamily":case"fontWeight":this[r]=this[r]}}}catch(o){t={error:o}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.applyFilters(),this.visible=this.visible,this.interactionsEnabled=this.getPropertyValue("interactionsEnabled"),this._inited=!0,this.showOnInit||(this.appeared=!0),this.hidden&&this.hide(0),this.applyMask(),this.dispatch("validated"),this.dispatch("inited"),this.dispatchReady()}"always"==this.showTooltipOn&&(!this.visible||this.disabled||this.__disabled?this.hideTooltip(0):this.showTooltip())},e.prototype.dispatchReady=function(){this.isReady()||(this._ready=!0,this.dispatch("ready"))},e.prototype.reinit=function(){this._inited=!1,this.setState(this.defaultState),this.invalidate()},e.prototype.handleGlobalScale=function(){this.dispatch("globalscalechanged"),this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth),this.nonScaling&&this.validatePosition(),this.updateFilterScale()},e.prototype.updateFilterScale=function(){var t=this;VM(this.filters.iterator(),(function(e){e.scale=t.globalScale}))},e.prototype.removeFromInvalids=function(){QM.removeFromInvalidSprites(this),QM.removeFromInvalidPositions(this)},e.prototype.copyFrom=function(e){var n=this;t.prototype.copyFrom.call(this,e),this.isMeasured=e.isMeasured,this.states.copyFrom(e.states),e.filters.length>0&&e.filters.each((function(t){n.filters.push(t.clone())})),e._adapterO&&this.adapter.copyFrom(e._adapterO),e._interaction&&this.interactions.copyFrom(e.interactions),e._plugins&&this.plugins.copyFrom(e.plugins),this.configField=e.configField,this.applyOnClones=e.applyOnClones,this.disabled=e.disabled,this.virtualParent=e.virtualParent,this.exportable=e.exportable,e._tooltip&&(this._tooltip?this._tooltip.copyFrom(e.tooltip):e.cloneTooltip?this.tooltip=e.tooltip.clone():this._tooltip=e.tooltip),this._showSystemTooltip=e.showSystemTooltip,EN(e.propertyFields,this.propertyFields),EN(e.properties,this),e.fillModifier&&(this.fillModifier=e.fillModifier.clone()),e.strokeModifier&&(this.strokeModifier=e.strokeModifier.clone())},e.prototype.dispose=function(){if(!this.isDisposed()){if("always"==this.showTooltipOn&&this.tooltip&&this.tooltip.hide(),this.dispatchImmediately("beforedisposed"),this.isBaseSprite){if(this.htmlContainer)for(;this.htmlContainer.childNodes.length>0;)this.htmlContainer.removeChild(this.htmlContainer.firstChild);this.isBaseSprite=!1}if(t.prototype.dispose.call(this),this._adapterO&&this._adapterO.clear(),this.applyOnClones&&this._clones)for(var e=this._clones.length-1;e>=0;e--)this._clones.getIndex(e).dispose();this._svgContainer&&this._svgContainer.dispose(),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0),this._urlDisposer&&this._urlDisposer.dispose(),this.removeFromInvalids(),this.element&&this.element.dispose(),this.group&&this.group.dispose(),this._numberFormatter&&this._numberFormatter.dispose(),this._focusFilter&&this._focusFilter.dispose();var n=this.stroke;!n||n instanceof vN||!n.dispose||this.clonedFrom&&this.clonedFrom.stroke==n||n.dispose();var i=this.fill;if(!i||i instanceof vN||!i.dispose||this.clonedFrom&&this.clonedFrom.fill==i||i.dispose(),cR(this.id)&&this.map.removeKey(this.id),this.parent=void 0,this._filters)for(;this._filters.length>0;){var r=this._filters.getIndex(0);r.dispose(),this._filters.removeValue(r)}this._alwaysShowDisposers=void 0}},Object.defineProperty(e.prototype,"isTemplate",{get:function(){return this._isTemplate},set:function(t){t=uR(t),this._isTemplate!=t&&(this._isTemplate=t,this instanceof aL&&VM(this.children.iterator(),(function(e){e.isTemplate=t})),t?(this.parent=this._parent,this.removeFromInvalids()):this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSystemTooltip",{get:function(){return cR(this._showSystemTooltip)?this._showSystemTooltip:this.virtualParent?this.virtualParent.showSystemTooltip:!!this._parent&&this._parent.showSystemTooltip},set:function(t){t=uR(t),this._showSystemTooltip!=t&&(this._showSystemTooltip=t,this.applyAccessibility())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topParent",{get:function(){return this._topParent?this._topParent:this._parent?this._parent.topParent:void 0},set:function(t){this._topParent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(t){if(!this._isTemplate){var e=this._parent;e!=t&&(e&&e.children.removeValue(this),this._parent=t,t?(this.topParent=t.topParent,t.isTemplate&&(this.isTemplate=!0),this.baseId=t.baseId,t.children.push(this),this._tooltip&&!this._tooltipContainer&&(this._tooltip.parent=t.tooltipContainer),this._dataItem||(this.dataItem=t.dataItem),this.handleAlwaysShowTooltip(),this.dataItem&&this.applyAccessibility(),this.dispatchImmediately("parentset")):this.topParent=void 0)}},enumerable:!0,configurable:!0}),e.prototype.handleAlwaysShow=function(){this.showTooltip()},e.prototype.handleAlwaysShowTooltip=function(){var t=this,e=this._alwaysShowDisposers;if(e&&tM(e,(function(t){t.dispose()})),this._alwaysShowDisposers=[],"always"==this.showTooltipOn)for(;null!=t;){var n=t.events.on("visibilitychanged",this.handleAlwaysShow,this,!1);this.addDisposer(n),this._alwaysShowDisposers.push(n),t=t.parent}},Object.defineProperty(e.prototype,"virtualParent",{get:function(){return this._virtualParent},set:function(t){this._virtualParent=t,this.dataItem&&this.applyAccessibility()},enumerable:!0,configurable:!0}),e.prototype.appendDefs=function(){this.filterElement&&this.paper.appendDef(this.filterElement);var t=this.fill;t&&t.element&&this.paper.appendDef(t.element);var e=this.stroke;if(e&&e.element&&this.paper.appendDef(e.element),this.fillModifier&&this.fill instanceof vN){var n=this.fillModifier.modify(this.fill);n&&n.element&&this.paper.appendDef(n.element)}if(this.strokeModifier&&this.stroke instanceof vN){var i=this.strokeModifier.modify(this.stroke);i&&i.element&&this.paper.appendDef(i.element)}this._clipPath&&this.paper.appendDef(this._clipPath),!1===this._exportable&&(this.exportable=!1)},Object.defineProperty(e.prototype,"map",{get:function(){var t=this.topParent;return t?t.map:(this._map||(this._map=new YM),this._map)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delayedMap",{get:function(){var t=this.topParent;return t?t.delayedMap:(this._delayedMap||(this._delayedMap=new YM),this._delayedMap)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){if(this._id!=t){if(this._id=t,this.map.hasKey(t))throw Error("Duplicate id ("+t+") used on multiple objects.");this.map.setKey(t,this),kF.autoSetClassName&&this.setClassName()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dom",{get:function(){return this.group.node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paper",{get:function(){if(this._paper)return this._paper;var t=this._parent;return t?t.paper:RV()},set:function(t){this.setPaper(t)},enumerable:!0,configurable:!0}),e.prototype.setPaper=function(t){return this._paper!=t&&(this._paper=t,this.appendDefs(),!0)},Object.defineProperty(e.prototype,"htmlContainer",{get:function(){if(this._htmlContainer)return this._htmlContainer;var t=this._parent;return t?t.htmlContainer:void 0},set:function(t){this._htmlContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleElement",{get:function(){return this._titleElement||(this._titleElement=this.paper.add("title"),this.group.add(this._titleElement)),this._titleElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptionElement",{get:function(){return this._descriptionElement||(this._descriptionElement=this.paper.add("desc"),this.group.add(this._descriptionElement)),this._descriptionElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters||(this._filters=new eN,this._disposers.push(this._filters.events.onAll(this.applyFilters,this)),this._disposers.push(new JM(this._filters))),this._filters},enumerable:!0,configurable:!0}),e.prototype.setSVGAttributes=function(){this.fill=this.fill,this.opacity=this.opacity,this.fillOpacity=this.fillOpacity,this.stroke=this.stroke,this.strokeOpacity=this.strokeOpacity,this.shapeRendering=this.shapeRendering,this.strokeDasharray=this.strokeDasharray,this.strokeDashoffset=this.strokeDashoffset,this.strokeLinecap=this.strokeLinecap,this.strokeLinejoin=this.strokeLinejoin,this.focusable=this.focusable,this.tabindex=this.tabindex,this.role=this.role},e.prototype.setSVGAttribute=function(t){this.group.attr(t)},e.prototype.removeSVGAttribute=function(t){this.group.removeAttr(t)},e.prototype.setClassName=function(){var t=this.className,e=kF.classNamePrefix;this.element&&this.element.addClass(e+t),this.group.addClass(e+t+"-group"),cR(this.id)&&this.group.addClass(e+this.id),this.userClassName&&this.group.addClass(this.userClassName)},e.prototype.uidAttr=function(){return this.setSVGAttribute({id:this.uid}),this.uid},e.prototype.updateClipPath=function(){var t=this._clipElement;t&&t.moveTo({x:this.mask.pixelX,y:this.mask.pixelY})},e.prototype.createClipPath=function(){if(!this._clipPath){this._clipPath=this.paper.addGroup("clipPath"),this.paper.appendDef(this._clipPath),this._disposers.push(this._clipPath);var t=QM.getUniqueId();this._clipPath.attr({id:t}),this.group.attr({"clip-path":'url("'+AN()+t+'")'})}},e.prototype.applyMask=function(){var t=this.mask;if(this._clipPath&&t)if(t instanceof aL){this._clipElement.attr({width:kR(0,t.pixelWidth),height:kR(0,t.pixelHeight)});var e=iF({x:t.pixelX,y:t.pixelY},t.parent,this);this._clipPath.x=e.x,this._clipPath.y=e.y}else t.element&&t.element!=this._clipElement&&(this._clipElement=t.element,this._clipPath.add(this._clipElement)),this._clipPath.scale=t.scale,this._clipPath.x=t.pixelX,this._clipPath.y=t.pixelY,this._clipPath.rotation=t.rotation},e.prototype.applyFilters=function(){var t=this;if(this._filters&&this._filters.length>0){var e=100,n=100;this.filterElement?this.filterElement.removeChildNodes():(this.filterElement=this.paper.addGroup("filter"),this._disposers.push(this.filterElement)),this.paper.appendDef(this.filterElement);var i="filter-"+this.uid;this.filterElement.attr({id:i}),VM(this.filters.iterator(),(function(i){i.sprite=t,i.paper=t.paper,t.filterElement.attr({filterUnits:i.filterUnits}),i.appendPrimitives(t.filterElement),i.width>e&&(e=i.width),i.height>n&&(n=i.height),i.scale=t.globalScale})),this.filterElement.attr({width:e+"%",height:n+"%",x:-(e-100)/2+"%",y:-(n-100)/2+"%"}),this.group.attr({filter:'url("'+AN()+i+'")'})}else this.filterElement&&(this.group.removeAttr("filter"),this.filterElement.removeChildNodes())},e.prototype.removeClipPath=function(){this._clipPath&&(this.removeDispose(this._clipPath),this._clipPath=void 0)},e.prototype.setElement=function(t){this.element=t,this.setSVGAttributes(),this.applyAccessibility()},Object.defineProperty(e.prototype,"element",{get:function(){return this._element},set:function(t){this.removeElement(),this._element=t,this.group.add(t),t.node instanceof SVGPathElement&&(this._isPath=!0),this.invalid||this.validate(),kF.autoSetClassName&&this.setClassName()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"svgContainer",{get:function(){return this._svgContainer?this._svgContainer:this._parent?this._parent.svgContainer:void 0},set:function(t){this._svgContainer=t},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){if(this.element)if(this.definedBBox)this._bbox=this.definedBBox;else{var t=this.element.getBBox();this._bbox={x:t.x,y:t.y,width:t.width,height:t.height}}},e.prototype.updateCenter=function(){if(this.element){var t=this.element.transformString,e=this.bbox,n=0,i=0,r=e.x,o=e.y,s=e.width,a=e.height,u=this.pixelPaddingLeft,l=this.pixelPaddingRight,h=this.pixelPaddingTop,c=this.pixelPaddingBottom,p=kR(s+u+l,this.pixelWidth),d=kR(a+h+c,this.pixelHeight),f=e.x,g=e.x+p,y=e.y,m=e.y+d,v=this.verticalCenter;switch(this.horizontalCenter){case"none":n=r+u;break;case"left":n=u;break;case"middle":n=u-(s+l+u)/2;break;case"right":n=-l-s}switch(v){case"none":i=o+h;break;case"top":i=h;break;case"middle":i=h-(a+c+h)/2;break;case"bottom":i=-c-a}this._measuredHeight=d,this._measuredWidth=p;var b=CR(n-r,this._positionPrecision,!0),_=CR(i-o,this._positionPrecision,!0);this.ex=b-u,this.ey=_-h,this.maxLeft=f+b-u,this.maxRight=g+b-u,this.maxTop=y+_-h,this.maxBottom=m+_-h,this.pixelPerfect&&(b-=.5,_-=.5),this.element.moveTo({x:b,y:_}),t!=this.element.transformString&&this.dispatchImmediately("transformed")}},e.prototype.measure=function(){this.updateCenter();var t=this._measuredWidth,e=this._measuredHeight,n=this.maxLeft,i=this.maxRight,r=this.maxTop,o=this.maxBottom;this._measuredWidthSelf=t,this._measuredHeightSelf=e;var s=this._positionPrecision;if(this.maxLeftSelf=this.maxLeft,this.maxRightSelf=this.maxRight,this.maxTopSelf=this.maxTop,this.maxBottomSelf=this.maxBottom,0!==this.rotation||1!==this.scale||this.nonScaling){this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth);var a=this.paper.svg,u=a.createSVGMatrix(),l=this.rotation,h=this.scale;this.nonScaling&&(h=this.scale/this.globalScale),u.a=ER(l)*h,u.c=-SR(l)*h,u.e=0,u.b=SR(l)*h,u.d=ER(l)*h,u.f=0;var c=a.createSVGPoint();c.x=n,c.y=r;var p=a.createSVGPoint();p.x=i,p.y=r;var d=a.createSVGPoint();d.x=i,d.y=o;var f=a.createSVGPoint();f.x=n,f.y=o;var g=c.matrixTransform(u),y=p.matrixTransform(u),m=d.matrixTransform(u),v=f.matrixTransform(u);n=Math.min(g.x,y.x,m.x,v.x),i=Math.max(g.x,y.x,m.x,v.x),r=Math.min(g.y,y.y,m.y,v.y),t=i-n,e=(o=Math.max(g.y,y.y,m.y,v.y))-r,this.maxLeft=CR(n,s,!0),this.maxRight=CR(i,s,!0),this.maxTop=CR(r,s,!0),this.maxBottom=CR(o,s,!0)}return this._measuredWidth=CR(t,s,!0),this._measuredHeight=CR(e,s,!0),(this._measuredWidth!=this._prevMeasuredWidth||this._measuredHeight!=this._prevMeasuredHeight)&&(this._prevMeasuredHeight=this._measuredHeight,this._prevMeasuredWidth=this._measuredWidth,this.dispatch("sizechanged"),(this.isHover||"hit"==this.showTooltipOn||"always"==this.showTooltipOn)&&this.tooltip&&this.tooltip.visible&&(cR(this.tooltipText)||cR(this.tooltipHTML))&&this.updateTooltipPosition(),!0)},e.prototype.insertBefore=function(t){var e=this._parent;if(e){var n=e.children.indexOf(t);-1!==n&&(e.children.moveValue(this,n),e.sortChildren())}return this},e.prototype.insertAfter=function(t){var e=this._parent;if(e){var n=e.children.indexOf(t);-1!==n&&(e.children.moveValue(this,n+1),e.sortChildren())}return this},e.prototype.removeElement=function(){this._element&&(this.removeDispose(this._element),this._element=void 0)},e.prototype.getRelativeX=function(t){return t instanceof iR?t.value:this._parent?t/this._parent.innerWidth:0},e.prototype.getRelativeY=function(t){return t instanceof iR?t.value:this._parent?t/this._parent.innerHeight:0},e.prototype.getPixelX=function(t){var e=0;return yR(t)?e=t:t instanceof iR&&this._parent&&(e=CR(this._parent.innerWidth*t.value,this._positionPrecision,!0)),e},e.prototype.getPixelY=function(t){var e=0;return yR(t)?e=t:t instanceof iR&&this._parent&&(e=CR(this._parent.innerHeight*t.value,this._positionPrecision,!0)),e},e.prototype.moveTo=function(t,e,n,i){this.isDragged&&!i||(t&&(yR(t.x)&&this.setPropertyValue("x",CR(t.x,this._positionPrecision,!0)),yR(t.y)&&this.setPropertyValue("y",CR(t.y,this._positionPrecision,!0))),yR(e)&&(this.rotation=e),yR(n)&&(this.scale=n),this.invalidatePosition())},Object.defineProperty(e.prototype,"mask",{get:function(){return this._adapterO?this._adapterO.apply("mask",this._mask.get()):this._mask.get()},set:function(t){var e=this;this._mask.get()!==t&&(t?(this.createClipPath(),t instanceof aL?this._clipElement=this.paper.add("rect"):(t.isMeasured=!1,t.element&&(this._clipElement=t.element)),this._clipElement&&this._clipPath.add(this._clipElement),this._mask.set(t,new dM([t.events.on("maxsizechanged",(function(){e.inited&&e.applyMask()}),void 0,!1),t.events.on("validated",this.applyMask,this,!1),t.events.on("positionchanged",this.applyMask,this,!1)])),this.applyMask()):(this._mask.reset(),this.group.removeAttr("clip-path"),this.removeClipPath()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskRectangle",{get:function(){return this._maskRectangle},set:function(t){t?(this.createClipPath(),this._clipElement||(this._clipElement=this.paper.add("rect"),this._clipPath.add(this._clipElement)),this._clipElement.attr({width:t.width,height:t.height})):(this.removeClipPath(),this._clipElement=void 0),this._maskRectangle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMeasured",{get:function(){return this._isMeasured},set:function(t){(t=uR(t))||(this._measuredWidth=0,this._measuredHeight=0),this._isMeasured!=t&&(this._isMeasured=t,this.invalidatePosition())},enumerable:!0,configurable:!0}),e.prototype.hitTest=function(t){this.invalid&&this.validate(),t.invalid&&t.validate();var e=this.pixelX+this.maxLeft,n=this.pixelY+this.maxTop,i=t.pixelX+t.maxLeft,r=t.pixelY+t.maxTop;return!(i>e+this.maxRight||i+t.maxRight<e||r>n+this.maxBottom||r+t.maxBottom<n)},Object.defineProperty(e.prototype,"inited",{get:function(){return this._inited},enumerable:!0,configurable:!0}),e.prototype.isReady=function(){return this._ready},Object.defineProperty(e.prototype,"states",{get:function(){if(!this._states){var t=new SF;this._states=new KM(t),this._disposers.push(this._states.events.on("insertKey",this.processState,this,!1)),this._disposers.push(this._states.events.on("setKey",this.processState,this,!1)),this._disposers.push(new GM(this._states)),this._disposers.push(t)}return this._states},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenState",{get:function(){if(!this.states.getKey("hidden")){var t=this.states.create("hidden");t.properties.opacity=0,t.properties.visible=!1}return this.states.getKey("hidden")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultState",{get:function(){return this.states.getKey("default")||(this.states.create("default").properties.opacity=1),this.states.getKey("default")},enumerable:!0,configurable:!0}),e.prototype.processState=function(t){var e=t.newValue;if(e.sprite=this,e.name=t.key,(this.states.hasKey("hover")||"hover"==this.showTooltipOn&&(cR(this.tooltipHTML)||cR(this.tooltipText)))&&(this.hoverable=!0),(this.states.hasKey("down")||"hover"==this.showTooltipOn&&(cR(this.tooltipHTML)||cR(this.tooltipText)))&&(this.clickable=!0),this.states.hasKey("focus")&&(this.focusable=!0),this.applyOnClones)for(var n=this.clones.values,i=n.length,r=0;r<i;++r){var o=n[r];o.isDisposed()||o.states.setKey(e.name,e)}},Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new NF(this._animations))),this._animations},enumerable:!0,configurable:!0}),e.prototype.getSvgPoint=function(t){try{var e=this.htmlContainer.getBoundingClientRect();return{x:t.x-e.left,y:t.y-e.top}}catch(n){return t}},e.prototype.animate=function(t,e,n){return new FF(this,t,e,n).start()},e.prototype.setState=function(t,e,n){var i;if(t instanceof SF)this.states.setKey(t.name,t),i=t;else if(!(i=this.states.getKey(t)))return;if("hover"==i.name){if(this.isHidden)return;this.isHover=!0}return"hidden"==i.name?this.isHiding=!0:this.visible||this.setVisibility(i.properties.visible||this.defaultState.properties.visible),"active"==i.name&&(this.isActive=!0),yR(e)||(e=i.transitionDuration),cR(n)||(n=i.transitionEasing),this.transitTo(i,e,n)},e.prototype.applyCurrentState=function(t){var e=this.setState(this.defaultState,t);return this.isHover&&(e=this.setState("hover",t)),this.isDown&&this.interactions.downPointers.length&&(e=this.setState("down",t)),this.isFocused=this.isFocused,this.isActive&&(e=this.setState("active",t),this.isHover&&this.states.hasKey("hoverActive")&&(e=this.setState("hoverActive",t))),e},e.prototype.transitTo=function(t,e,n){var i,r=this,o=[];if(kM(t.allValues,(function(t,e){var n=r[t];e!=n&&null==r.defaultState.properties[t]&&(r.defaultState.properties[t]=n),"__unset"!=e&&o.push({from:n,to:e,property:t})})),o.length>0&&((i=this.animate(o,e,n))&&!i.isFinished()?this._disposers.push(i.events.on("animationended",(function(){r.dispatchImmediately("transitionended")}))):this.dispatchImmediately("transitionended")),t.filters.length>0){var s=[];VM(t.filters.iterator(),(function(t){var i=t.clone();s.push(i);var o=[];VM(r.filters.iterator(),(function(t){t.className==i.className&&(HM(r.defaultState.filters.iterator(),(function(t){return t.className===i.className}))||r.defaultState.filters.push(t),kM(i.properties,(function(e,n){var i=t.properties[e];i!=n&&o.push({property:e,from:i,to:n})})))})),i.animate(o,e,n)})),this.filters.clear(),this.filters.pushAll(s)}return i},e.prototype.isInTransition=function(){return this.animations.length>0},Object.defineProperty(e.prototype,"isHover",{get:function(){return!!this.isInteractive()&&this.interactions.isHover},set:function(t){(t=uR(t))!==this.isHover&&this.isInteractive()&&(this.interactions.isHover=t,t?this.handleOver():(this.interactions.isRealHover=!1,this.handleOut()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDragged",{get:function(){return this._isDragged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResized",{get:function(){return this._isResized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDown",{get:function(){return!!this.isInteractive()&&this.interactions.isDown},set:function(t){t=uR(t),this.isInteractive()&&this.isDown!=t&&(this.interactions.isDown=t,t?this.handleDown():this.handleUp())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFocused",{get:function(){return!!this.isInteractive()&&this.interactions.isFocused},set:function(t){t=uR(t),this.focusable&&this.isFocused!=t&&this.isInteractive()&&(this.interactions.isFocused=t,!0===t?this.handleFocus():this.handleBlur())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},set:function(t){this.setActive(t)},enumerable:!0,configurable:!0}),e.prototype.setActive=function(t){t=uR(t),this._isActive!==t&&(this._isActive=t,t&&this.states.hasKey("active")?(this.setState("active"),this.isHover&&this.states.hasKey("hoverActive")&&this.setState("hoverActive")):this.applyCurrentState(),this.dispatchImmediately("toggled"))},Object.defineProperty(e.prototype,"disabled",{get:function(){var t=this.getPropertyValue("disabled");return cR(t)?t:this.virtualParent?this.virtualParent.disabled:!!this._parent&&this._parent.disabled},set:function(t){this.setDisabled(t)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(t){if(t=uR(t),this.getPropertyValue("disabled")!=t){if(this.setPropertyValue("disabled",t,!0),t)this.parent=this._parent,this.removeFromInvalids(),this.group.attr({display:"none"}),this.dispatch("disabled");else{if(this._parent){var e=this._parent.element;e.hasChild(this.group)||e.add(this.group)}this instanceof aL?(this.deepInvalidate(),this._background&&this._background.invalidate()):this.invalidate(),this.__disabled||this.removeSVGAttribute("display"),this.dispatch("enabled")}return this.dispatch("transformed"),uL.requestFrame(),!0}return!1},Object.defineProperty(e.prototype,"__disabled",{get:function(){return this._internalDisabled},set:function(t){this._internalDisabled!=t&&(this._internalDisabled=t,this._updateDisabled=!0,this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter?this._numberFormatter:this.virtualParent?this.virtualParent.numberFormatter:this._parent?this._parent.numberFormatter:(this._numberFormatter=new zV,this._numberFormatter.language=this.language,this.numberFormatter)},set:function(t){this._numberFormatter=t,this._numberFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.virtualParent?this.virtualParent.dateFormatter:this._parent?this._parent.dateFormatter:(this._dateFormatter=new qV,this._dateFormatter.language=this.language,this.dateFormatter)},set:function(t){this._dateFormatter=t,this._dateFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormatter",{get:function(){return this._durationFormatter?this._durationFormatter:this.virtualParent?this.virtualParent.durationFormatter:this._parent?this._parent.durationFormatter:(this._durationFormatter=new GV,this._durationFormatter.language=this.language,this.durationFormatter)},set:function(t){this._durationFormatter=t,this._durationFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){var t=this._language.get();return t||(this.virtualParent?this.virtualParent.language:this._parent?this._parent.language:(t=new BV,this.language=t,t))},set:function(t){var e=this;this._language.get()!==t&&this._language.set(t,t.events.on("localechanged",(function(t){if(e._numberFormatter&&(e._numberFormatter.language=e.language),e._dateFormatter&&(e._dateFormatter.language=e.language),e._durationFormatter&&(e._durationFormatter.language=e.language),e._exporting.get()){var n=e._exporting.get();n.numberFormatter.language=e.language,n.dateFormatter.language=e.language,n.durationFormatter.language=e.language,n.language=e.language}e instanceof aL&&e.deepInvalidate()})))},enumerable:!0,configurable:!0}),e.prototype.populateString=function(t,e){if(cR(t)){t=aR(t);var n=(t=WV().escape(t)).match(/\{([^}]+)\}/g),i=void 0;if(n)for(i=0;i<n.length;i++){var r=n[i].replace(/\{([^}]+)\}/,"$1"),o=this.getTagValue(r,"",e);cR(o)||(o=""),t=t.split(n[i]).join(o)}t=WV().unescape(t)}else t="";return this._adapterO?this._adapterO.apply("populateString",t):t},e.prototype.getTagValue=function(t,e,n){var i;cR(n)||(n=this.dataItem);for(var r,o=[],s=/([^.]+)\(([^)]*)\)|([^.]+)/g;null!==(r=s.exec(t));)if(r[3])o.push({prop:r[3]});else{var a=[];if(""!=UN(r[2]))for(var u=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,l=void 0;null!==(l=u.exec(r[2]));)a.push(l[1]||l[2]||l[3]);o.push({method:r[1],params:a})}if(n){cR(i=this.getTagValueFromObject(o,n.values))&&!mR(i)||(i=this.getTagValueFromObject(o,n));var h=n.dataContext;!cR(i)&&h&&(cR(i=this.getTagValueFromObject(o,n.dataContext))||(i=this.getTagValueFromObject([{prop:t}],h)),!cR(i)&&h.dataContext&&(i=this.getTagValueFromObject(o,h.dataContext))),!cR(i)&&n.component&&n.component.dataItem!==n&&(i=n.component.getTagValue(t,e))}return cR(i)||(i=this.getTagValueFromObject(o,this.populateStringFrom||this)),!cR(i)&&this._parent&&(i=this._parent.getTagValue(t,e)),i},e.prototype.getTagValueFromObject=function(t,e,n){for(var i=e,r=!1,o=0,s=t.length;o<s;o++){var a=t[o];if(a.prop){if(!cR(i=i[a.prop]))return}else switch(a.method){case"formatNumber":var u=YN(i);cR(u)&&(i=this.numberFormatter.format(u,n||a.params[0]||void 0),r=!0);break;case"formatDate":var l=void 0;if(!fR(l=gR(i)?this.dateFormatter.parse(i):GN(i))||oR(l.getTime()))return;cR(l)&&(i=this.dateFormatter.format(l,n||a.params[0]||void 0),r=!0);break;case"formatDuration":var h=YN(i);cR(h)&&(i=this.durationFormatter.format(h,n||a.params[0]||void 0,a.params[1]||void 0),r=!0);break;case"urlEncode":case"encodeURIComponent":i=encodeURIComponent(i);break;default:i[a.method]&&i[a.method].apply(this,a.params)}}if(!r){var c=[{method:"",params:n}];if(cR(n)){var p=function(t){if(void 0===t)return PN;var e=(t=(t=(t=t.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return e?e[1]:t===CN?CN:t===IN?IN:t===ON?ON:t.match(/[#0]/)?CN:t.match(/[ymwdhnsqaxkzgtei]/)?IN:PN}(n);p===CN?c[0].method="formatNumber":p===IN?c[0].method="formatDate":p===ON&&(c[0].method="formatDuration")}else yR(i)?(c[0].method="formatNumber",c[0].params=""):fR(i)&&(c[0].method="formatDate",c[0].params="");c[0].method&&(i=this.getTagValueFromObject(c,i))}return i},Object.defineProperty(e.prototype,"dataItem",{get:function(){if(!this._dataItem){if(this.virtualParent)return this.virtualParent.dataItem;if(this._parent)return this._parent.dataItem}return this._dataItem},set:function(t){this.setDataItem(t)},enumerable:!0,configurable:!0}),e.prototype.setDataItem=function(t){var e=this;if(this._dataItem!=t){if(this._dataItem=t,t){if(this.configField){var n=t.dataContext;n&&(this.config=n[this.configField],!this.config&&n.dataContext&&(this.config=n.dataContext[this.configField]))}var i=t.dataContext;if(i){var r=i.dataContext;kM(this.propertyFields,(function(t,n){if(cR(i[n]))e[t]=i[n];else if(r){var o=r[n];cR(o)&&(e[t]=o)}}))}}this.invalidate()}},e.prototype.getPropertyValue=function(t){var e=this.properties[t];return this._isTemplate||(this._adapterO&&(e=this._adapterO.apply(t,e)),e=hN.applyAll(this,t,e)),e},e.prototype.setColorProperty=function(t,e,n){var i=this.properties[t];return!(e instanceof vN&&i instanceof vN&&e.toString()==i.toString())&&this.setPropertyValue(t,e,n)},e.prototype.setPercentProperty=function(t,e,n,i,r,o){if(yR(e=function(t){return!cR(t)||yR(t)||function(t){return t instanceof iR}(t)?t:gR(t)&&-1!=t.indexOf("%")?rR(lR(t)):lR(t)}(e)))return yR(r)&&(e=CR(e,r,o)),this.setPropertyValue(t,e,n,i);var s=this.properties[t];return!(e instanceof iR&&s instanceof iR&&e.value==s.value)&&this.setPropertyValue(t,e,n,i)},e.prototype.setPropertyValue=function(t,e,n,i){if(this.properties[t]!==e&&!this.isDisposed()){if(this.properties[t]=e,this.events.isEnabled("propertychanged")&&this.events.dispatchImmediately("propertychanged",{type:"propertychanged",target:this,property:t}),n&&this.invalidate(),i&&this.invalidatePosition(),this.applyOnClones)for(var r=this.clones.values,o=r.length,s=0;s<o;++s){var a=r[s];a.isDisposed()||(a[t]=e)}return!0}return!1},e.prototype.bind=function(t,e,n,i){var r=this;void 0===n&&(n=t),cR(this._bindings[t])&&this._bindings[t].dispose(),this[t]=e[n],this._bindings[t]=e.events.on("propertychanged",(function(o){if(o.property===n){var s=e[n];i&&(s=i(s)),r[t]=s}}))},e.prototype.observe=function(t,e,n,i){var r=this;return new dM(JR(oM(t),(function(t){return r.events.on("propertychanged",(function(i){i.property===t&&e.call(n,i)}),n,i)})))},e.prototype.applyAccessibility=function(){var t=this.readerTitle,e=this.readerDescription,n=this.role,i=this.readerHidden,r=this.readerChecked,o=this.readerControls,s=this.readerLive,a=this.readerOrientation,u=this.readerValueNow,l=this.readerValueText,h=[],c=[],p=this.readerLabelledBy;p&&h.push(p);var d=this.readerDescribedBy;if(d&&c.push(d),t)if(h.length||this.showSystemTooltip){var f=this.titleElement,g=this.uid+"-title";f.node.textContent!=t&&(f.node.textContent=t,f.attr({id:g})),h.push(g)}else this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0),this.setSVGAttribute({"aria-label":t});else this.removeSVGAttribute("aria-label"),this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0);if(e){var y=this.descriptionElement,m=this.uid+"-description";y.node.textContent!=e&&(y.node.textContent=e,y.attr({id:m})),c.push(m)}else this._descriptionElement&&(this.group.removeElement(this._descriptionElement),this._descriptionElement=void 0);h.length?this.setSVGAttribute({"aria-labelledby":h.join(" ")}):this.removeSVGAttribute("aria-labelledby"),c.length?this.setSVGAttribute({"aria-describedby":c.join(" ")}):this.removeSVGAttribute("aria-describedby"),n?this.setSVGAttribute({role:n}):this.removeSVGAttribute("role"),i?this.setSVGAttribute({"aria-hidden":"true"}):this.removeSVGAttribute("aria-hidden"),r?this.setSVGAttribute({"aria-checked":"true"}):!1===r?this.setSVGAttribute({"aria-checked":"false"}):this.removeSVGAttribute("aria-checked"),o?this.setSVGAttribute({"aria-controls":o}):this.removeSVGAttribute("aria-controls"),s?this.setSVGAttribute({"aria-live":s}):this.removeSVGAttribute("aria-live"),a?this.setSVGAttribute({"aria-orientation":a}):this.removeSVGAttribute("aria-orientation"),u?this.setSVGAttribute({"aria-valuenow":u}):this.removeSVGAttribute("aria-valuenow"),l?this.setSVGAttribute({"aria-valuetext":l}):this.removeSVGAttribute("aria-valuetext")},Object.defineProperty(e.prototype,"readerTitle",{get:function(){var t=this.getPropertyValue("readerTitle");return cR(t)&&this.dataItem?this.populateString(t):t},set:function(t){t=hR(t),this.setPropertyValue("readerTitle",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerDescription",{get:function(){var t=this.getPropertyValue("readerDescription");return cR(t)&&this.dataItem?this.populateString(t):this.getPropertyValue("readerDescription")},set:function(t){t=hR(t),this.setPropertyValue("readerDescription",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"role",{get:function(){return this.getPropertyValue("role")},set:function(t){t=hR(t),this.setPropertyValue("role",t)&&(this.applyAccessibility(),"slider"==t&&(this.setSVGAttribute({"aria-valuemin":"0"}),this.setSVGAttribute({"aria-valuemax":"100"})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerHidden",{get:function(){return this.getPropertyValue("readerHidden")},set:function(t){t=uR(t),this.setPropertyValue("readerHidden",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerChecked",{get:function(){return this.getPropertyValue("readerChecked")},set:function(t){t=uR(t),this.setPropertyValue("readerChecked",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerControls",{get:function(){return this.getPropertyValue("readerControls")},set:function(t){t=hR(t),this.setPropertyValue("readerControls",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerLive",{get:function(){return this.getPropertyValue("readerLive")},set:function(t){t=hR(t),this.setPropertyValue("readerLive",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerLabelledBy",{get:function(){return this.getPropertyValue("readerLabelledBy")},set:function(t){t=hR(t),this.setPropertyValue("readerLabelledBy",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerDescribedBy",{get:function(){return this.getPropertyValue("readerDescribedBy")},set:function(t){t=hR(t),this.setPropertyValue("readerDescribedBy",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerOrientation",{get:function(){return this.getPropertyValue("readerOrientation")},set:function(t){t=hR(t),this.setPropertyValue("readerOrientation",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerValueNow",{get:function(){return this.getPropertyValue("readerValueNow")},set:function(t){t=hR(t),this.setPropertyValue("readerValueNow",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerValueText",{get:function(){return this.getPropertyValue("readerValueText")},set:function(t){t=hR(t),this.setPropertyValue("readerValueText",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyboardOptions",{get:function(){if(!this.interactions.keyboardOptions){if(this.virtualParent)return this.virtualParent.keyboardOptions;if(this._parent)return this._parent.keyboardOptions}return this.interactions.keyboardOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseOptions",{get:function(){if(!this.interactions.mouseOptions){if(this.virtualParent)return this.virtualParent.mouseOptions;if(this._parent)return this._parent.mouseOptions}return this.interactions.mouseOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactions",{get:function(){if(!this._interaction){var t=xV().getInteraction(this.dom);this._interaction=t,this._interaction.clickable=this.clickable,this._interaction.hoverable=this.hoverable,this._interaction.trackable=this.trackable,this._interaction.draggable=this.draggable,this._interaction.swipeable=this.swipeable,this._interaction.resizable=this.resizable,this._interaction.wheelable=this.wheelable,this._interaction.contextMenuDisabled=this.contextMenuDisabled,this._interaction.inert=this.inert,this._interaction.sprite=this,this._disposers.push(this._interaction)}return this._interaction},enumerable:!0,configurable:!0}),e.prototype.isInteractive=function(){return!!this._interaction},Object.defineProperty(e.prototype,"focusable",{get:function(){return this.getPropertyValue("focusable")},set:function(t){var e=this;t=uR(t),this.setPropertyValue("focusable",t)&&(t||this.isInteractive())&&(this.interactions.focusable=t,t?(this.setSVGAttribute({focusable:t}),this._tabindex||(this.tabindex=0)):(this.removeSVGAttribute("focusable"),this.tabindex=void 0),this.interactions.setEventDisposer("sprite-focusable",t,(function(){return new dM([e.events.on("blur",e.handleBlur,e,!1),e.events.on("focus",e.handleFocus,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleFocus=function(t){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!0,this.topParent.focusedElement=this),this.focusFilter&&this.filters.push(this.focusFilter),this.hoverOnFocus&&(this.isHover=!0,this.handleOver()))},e.prototype.handleBlur=function(t){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!1,this.topParent.focusedElement=void 0),this.focusFilter&&this.filters.removeValue(this.focusFilter),this.hoverOnFocus&&(this.isHover=!1,this.handleOut()))},Object.defineProperty(e.prototype,"focusFilter",{get:function(){return this._focusFilter||(this.virtualParent?this.virtualParent.focusFilter:this._parent?this._parent.focusFilter:void 0)},set:function(t){this._focusFilter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverOnFocus",{get:function(){return this.getPropertyValue("hoverOnFocus")},set:function(t){t!==this.hoverOnFocus&&this.setPropertyValue("hoverOnFocus",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){var t=this._tabindex;return null!=t?t:this.virtualParent?this.virtualParent.tabindex:this._parent?this._parent.tabindex:void 0},set:function(t){t=lR(t),this.setPropertyValue("tabindex",t)&&yR(t)&&(this.interactions.tabindex=t,this.setSVGAttribute({tabindex:t}),this._tabindex=t,this.focusable=t>-1||void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inertiaOptions",{get:function(){return!this.interactions.inertiaOptions&&this._parent?this._parent.inertiaOptions:this.interactions.inertiaOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggable",{get:function(){return this.getPropertyValue("draggable")},set:function(t){var e=this;t=uR(t),this.setPropertyValue("draggable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.draggable=t,this.interactions.setEventDisposer("sprite-draggable",t,(function(){return new dM([e.events.on("down",e.handleDown,e,!1),e.events.on("dragstart",e.handleDragStart,e,!1),e.events.on("drag",e.handleDragMove,e,!1),e.events.on("dragstop",e.handleDragStop,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleDragStart=function(t){this.interactions.isTouchProtected&&t.touch||(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this._isDragged=!0,this.hideTooltip(0))},e.prototype.dragStart=function(t){this._isDragged=!0,xV().dragStart(this.interactions,t)},e.prototype.handleDragStop=function(t){this.interactions.isTouchProtected&&t.touch||(this._isDragged=!1,this.showTooltip(),this.interactions.originalPosition=void 0)},e.prototype.dragStop=function(t,e){this._isDragged=!1,xV().dragStop(this.interactions,t,e)},e.prototype.handleDragMove=function(t){if(!this.interactions.isTouchProtected||!t.touch){var e=this.interactions.originalPosition;if(e&&this._isDragged){var n=this._parent.globalScale*this.svgContainer.cssScale;this.moveTo({x:e.x+t.shift.x/n,y:e.y+t.shift.y/n},void 0,void 0,!0)}this.dispatchImmediately("dragged",t)}},Object.defineProperty(e.prototype,"inert",{get:function(){return this.getPropertyValue("inert")},set:function(t){t=uR(t),this.setPropertyValue("inert",t)&&(t||this.isInteractive())&&(this.interactions.inert=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverOptions",{get:function(){if(!this.interactions.hoverOptions){if(this.virtualParent)return this.virtualParent.hoverOptions;if(this._parent)return this._parent.hoverOptions}return this.interactions.hoverOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverable",{get:function(){return this.getPropertyValue("hoverable")},set:function(t){var e=this;t=uR(t),this.setPropertyValue("hoverable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.hoverable=t,this.interactions.setEventDisposer("sprite-hoverable",t,(function(){return new dM([e.events.on("over",e.handleOver,e,!1),e.events.on("out",e.handleOut,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleOver=function(t){if(this._outTimeout&&this._outTimeout.dispose(),this.isHover){this.states.hasKey("hover")&&(this.isHidden||this.applyCurrentState());var e=void 0;t&&t.pointer&&(e=oF(t.pointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale)),"hover"==this.showTooltipOn&&this.showTooltip(e)}else"hover"==this.showTooltipOn&&this.hideTooltip(),!this.isHidden&&this.states.hasKey("hover")&&this.applyCurrentState()},e.prototype.handleOut=function(t){var e=this;this.tooltip&&this.tooltip.targetSprite==this&&this.tooltip.keepTargetHover?this._outTimeout=this.setTimeout((function(){e.tooltip.isHover||(e.tooltip.targetSprite==e&&e.hideTooltip(),e._outTimeout=e.setTimeout(e.handleOutReal.bind(e),e.rollOutDelay))}),10):("hover"==this.showTooltipOn&&this.hideTooltip(),this._outTimeout=this.setTimeout(this.handleOutReal.bind(this),this.rollOutDelay))},e.prototype.handleOutReal=function(){this.isHidden||this.isHiding||!this.states.hasKey("hover")||this.applyCurrentState()},Object.defineProperty(e.prototype,"hitOptions",{get:function(){if(!this.interactions.hitOptions){if(this.virtualParent)return this.virtualParent.hitOptions;if(this._parent)return this._parent.hitOptions}return this.interactions.hitOptions},enumerable:!0,configurable:!0}),e.prototype.handleDown=function(t){1===this.interactions.downPointers.length&&(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this.interactions.originalAngle=this.rotation,this.interactions.originalScale=this.scale,this.states.hasKey("down")&&this.setState("down"))},e.prototype.handleUp=function(t){var e=this;this._isResized=!1,this.states.hasKey("down")&&this.applyCurrentState(),"hit"==this.showTooltipOn&&(this.updateTooltipPosition(t.pointer.point),this._disposers.push(QM.events.once("exitframe",(function(){e.showTooltip()}))),this._disposers.push(xV().body.events.once("down",(function(t){e.hideTooltip()}))))},Object.defineProperty(e.prototype,"clickable",{get:function(){return this.getPropertyValue("clickable")},set:function(t){var e=this;t=uR(t),this.setPropertyValue("clickable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.clickable=t,this.interactions.setEventDisposer("sprite-clickable",t,(function(){return new dM([e.events.on("down",e.handleDown,e,!1),e.events.on("up",e.handleUp,e,!1)])})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"togglable",{get:function(){return this.getPropertyValue("togglable")},set:function(t){var e=this;t=uR(t),this.setPropertyValue("togglable",t)&&(t||this.isInteractive())&&this.interactions.setEventDisposer("sprite-togglable",t,(function(){return e.events.on("hit",e.handleToggle,e,!1)}))},enumerable:!0,configurable:!0}),e.prototype.handleToggle=function(t){this.isActive=!this.isActive},Object.defineProperty(e.prototype,"contextMenuDisabled",{get:function(){return this.getPropertyValue("contextMenuDisabled")},set:function(t){t=uR(t),this.setPropertyValue("contextMenuDisabled",t)&&(this.interactions.contextMenuDisabled=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.getPropertyValue("url")},set:function(t){this.setPropertyValue("url",t)&&(this._urlDisposer&&this._urlDisposer.dispose(),DN(t)&&(this._urlDisposer=this.events.on("hit",this.urlHandler,this,!1),this.clickable=!0,this.cursorOverStyle=LV.pointer))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseId",{get:function(){return!this._baseId&&this._parent&&(this.baseId=this._parent.baseId),this._baseId},set:function(t){this.setBaseId(t)},enumerable:!0,configurable:!0}),e.prototype.setBaseId=function(t){t!=this._baseId&&(this.invalid&&(this.invalid=!1,QM.removeFromInvalidSprites(this),this.invalidate()),this._baseId=t)},Object.defineProperty(e.prototype,"baseSprite",{get:function(){return this.isBaseSprite?this:this._parent?this._parent.baseSprite:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlTarget",{get:function(){return this.getPropertyValue("urlTarget")},set:function(t){this.setPropertyValue("urlTarget",t)},enumerable:!0,configurable:!0}),e.prototype.urlHandler=function(t){if(DN(this.url)){var e=this.populateString(this.url);"_self"===this.urlTarget?window.location.href=e:window.open(e,this.urlTarget)}},Object.defineProperty(e.prototype,"swipeOptions",{get:function(){if(!this.interactions.swipeOptions){if(this.virtualParent)return this.virtualParent.swipeOptions;if(this._parent)return this._parent.swipeOptions}return this.interactions.swipeOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeable",{get:function(){return this.getPropertyValue("swipeable")},set:function(t){t=uR(t),this.setPropertyValue("swipeable",t)&&(this.applyCursorStyle(),(t||this.isInteractive())&&(this.interactions.swipeable=t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackable",{get:function(){return this.getPropertyValue("trackable")},set:function(t){t=uR(t),this.setPropertyValue("trackable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.trackable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelable",{get:function(){return this.getPropertyValue("wheelable")},set:function(t){this.setPropertyValue("wheelable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.wheelable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this.getPropertyValue("resizable")},set:function(t){var e=this;t=uR(t),this.setPropertyValue("resizable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.resizable=t,this.interactions.setEventDisposer("sprite-resizable",t,(function(){return new dM([e.events.on("down",e.handleDown,e,!1),e.events.on("resize",e.handleResize,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleResize=function(t){if((!this.interactions.isTouchProtected||!t.touch)&&(this._isResized=!0,this.scale=this.interactions.originalScale*t.scale,this.validatePosition(),this.draggable||this.dragWhileResize)){this._isDragged=!1;var e=FR(oF(t.point1,this.htmlContainer,this.svgContainer.cssScale),oF(t.point2,this.htmlContainer,this.svgContainer.cssScale)),n=aF(t.startPoint1,this._parent),i=aF(t.startPoint2,this._parent),r=this.interactions.originalPosition,o=this.interactions.originalScale;if(r){var s=FR({x:(n.x-r.x)/o,y:(n.y-r.y)/o},{x:(i.x-r.x)/o,y:(i.y-r.y)/o}),a=eF(e,this._parent);this.moveTo({x:a.x-s.x*this.scale,y:a.y-s.y*this.scale},void 0,void 0,!0)}}},Object.defineProperty(e.prototype,"cursorOptions",{get:function(){if(!this.interactions.cursorOptions){if(this.virtualParent)return this.virtualParent.cursorOptions;if(this._parent)return this._parent.cursorOptions}return this.interactions.cursorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorOverStyle",{set:function(t){this.cursorOptions.overStyle||(this.interactions.cursorOptions={defaultStyle:this.cursorOptions.defaultStyle}),this.cursorOptions.overStyle=t,xV().applyCursorOverStyle(this.interactions)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorDownStyle",{set:function(t){this.cursorOptions.downStyle=t},enumerable:!0,configurable:!0}),e.prototype.applyCursorStyle=function(){},Object.defineProperty(e.prototype,"interactionsEnabled",{get:function(){return!1!==this.getPropertyValue("interactionsEnabled")&&(this.virtualParent?this.virtualParent.interactionsEnabled:!this._parent||this._parent.interactionsEnabled)},set:function(t){if(t=uR(t),this.setPropertyValue("interactionsEnabled",t)){var e=null;t?this.group.node.style.pointerEvents="":e="none",this.group.node.style.pointerEvents=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exporting",{get:function(){return this.getExporting()},set:function(t){this._exporting.set(t,t)},enumerable:!0,configurable:!0}),e.prototype.getExporting=function(){var t=this._exporting.get();return t||(!this.isStandaloneInstance&&this._parent?this._parent.exporting:((t=new iL(this.svgContainer.SVGContainer)).sprite=this,t.language=this.language,t.numberFormatter=this.numberFormatter,t.dateFormatter=this.dateFormatter,t.durationFormatter=this.durationFormatter,this._exporting.set(t,t),t))},Object.defineProperty(e.prototype,"exportable",{get:function(){return this._exportable},set:function(t){var e=this.svgContainer;this._exportable=t,e&&(t?nM(e.nonExportableSprites,this):-1==$R(e.nonExportableSprites,this)&&e.nonExportableSprites.push(this))},enumerable:!0,configurable:!0}),e.prototype.modalPrefix=function(t){return kF.classNamePrefix+t},Object.defineProperty(e.prototype,"modal",{get:function(){var t=this.svgContainer;if(t){var e=t.modal;return e.adapter.has("classPrefix",this.modalPrefix)||e.adapter.add("classPrefix",this.modalPrefix),e}},enumerable:!0,configurable:!0}),e.prototype.openModal=function(t,e){var n=this.svgContainer;if(n)return n.openModal(t,e)},e.prototype.closeModal=function(){var t=this.svgContainer;t&&t.closeModal()},Object.defineProperty(e.prototype,"popups",{get:function(){var t=this.svgContainer;if(t){var e=t.popups;return e.template.sprite=this,e.template.adapter.has("classPrefix",this.modalPrefix)||e.template.adapter.add("classPrefix",this.modalPrefix),e}},enumerable:!0,configurable:!0}),e.prototype.openPopup=function(t,e){var n=this.svgContainer;if(n)return n.openPopup(t,e)},e.prototype.closeAllPopups=function(){var t=this.svgContainer;t&&t.closeAllPopups()},Object.defineProperty(e.prototype,"x",{get:function(){return this.getPropertyValue("x")},set:function(t){this.isDragged||this.setPercentProperty("x",t,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelX",{get:function(){var t=OR(this.getPixelX(this.x),this.minX,this.maxX);return this._adapterO?this._adapterO.apply("pixelX",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeX",{get:function(){return this._adapterO?this._adapterO.apply("relativeX",this.getRelativeX(this.x)):this.getRelativeX(this.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minX",{get:function(){return this.getPropertyValue("minX")},set:function(t){yR(t)&&(t=CR(t,this._positionPrecision,!0),this.setPropertyValue("minX",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this.getPropertyValue("maxX")},set:function(t){yR(t)&&(t=CR(t,this._positionPrecision,!0),this.setPropertyValue("maxX",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.getPropertyValue("y")},set:function(t){this.isDragged||this.setPercentProperty("y",t,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelY",{get:function(){var t=OR(this.getPixelY(this.y),this.minY,this.maxY);return this._adapterO?this._adapterO.apply("pixelY",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeY",{get:function(){return this._adapterO?this._adapterO.apply("relativeY",this.getRelativeX(this.y)):this.getRelativeX(this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this.getPropertyValue("minY")},set:function(t){yR(t)&&(t=CR(t,this._positionPrecision,!0),this.setPropertyValue("minY",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.getPropertyValue("maxY")},set:function(t){yR(t)&&(t=CR(t,this._positionPrecision,!0),this.setPropertyValue("maxY",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx",{get:function(){return this.getPropertyValue("dx")},set:function(t){yR(t)&&(t=CR(t,this._positionPrecision,!0),this.setPropertyValue("dx",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy",{get:function(){return this.getPropertyValue("dy")},set:function(t){yR(t)&&(t=CR(t,this._positionPrecision,!0),this.setPropertyValue("dy",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.getPropertyValue("rotation")},set:function(t){yR(t=lR(t))||(t=0),this.setPropertyValue("rotation",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.getPropertyValue("align")},set:function(t){t=hR(t),this.setPropertyValue("align",t)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valign",{get:function(){return this.getPropertyValue("valign")},set:function(t){t=hR(t),this.setPropertyValue("valign",t)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalCenter",{get:function(){return this.getPropertyValue("horizontalCenter")},set:function(t){t=hR(t),this.setPropertyValue("horizontalCenter",t)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalCenter",{get:function(){return this.getPropertyValue("verticalCenter")},set:function(t){t=hR(t),this.setPropertyValue("verticalCenter",t)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){var t=this.getPropertyValue("maxWidth");if(!yR(t)&&this._parent){var e=this._parent.maxWidth;return"absolute"!=this._parent.layout&&"none"!=this.align&&null!=this.align&&(e=e-this.pixelMarginLeft-this.pixelMarginRight),e}return t},set:function(t){this.setMaxWidth(t)},enumerable:!0,configurable:!0}),e.prototype.setMaxWidth=function(t){var e=this.maxWidth,n=this.maxHeight;this.setPropertyValue("maxWidth",t)&&(yR(this.relativeWidth)&&this.invalidate(),this.dispatchImmediately("maxsizechanged",{type:"maxsizechanged",target:this,previousWidth:e,previousHeight:n}))},Object.defineProperty(e.prototype,"maxHeight",{get:function(){var t=this.getPropertyValue("maxHeight");if(!yR(t)&&this._parent){var e=this._parent.maxHeight;return"absolute"!=this._parent.layout&&"none"!=this.valign&&null!=this.valign&&(e=e-this.pixelMarginTop-this.pixelMarginBottom),e}return t},set:function(t){this.setMaxHeight(t)},enumerable:!0,configurable:!0}),e.prototype.setMaxHeight=function(t){var e=this.maxWidth,n=this.maxHeight;this.setPropertyValue("maxHeight",t)&&(yR(this.relativeHeight)&&this.invalidate(),this.dispatchImmediately("maxsizechanged",{type:"maxsizechanged",target:this,previousWidth:e,previousHeight:n}))},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(t){this.setPropertyValue("minWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(t){this.setPropertyValue("minHeight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(t){this.setPercentProperty("width",t,!0,!1,this._positionPrecision,!0)&&(this.percentWidth=void 0,this.relativeWidth=void 0,t instanceof iR?(this.percentWidth=t.percent,yR(this._pixelWidth)&&(this.maxWidth=void 0),this._pixelWidth=void 0):(this._pixelWidth=Number(t),this.maxWidth=this._pixelWidth),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(t){this.setPercentProperty("height",t,!0,!1,this._positionPrecision,!0)&&(this.percentHeight=void 0,this._relativeHeight=void 0,t instanceof iR?(this.percentHeight=t.percent,yR(this._pixelHeight)&&(this.maxHeight=void 0),this._pixelHeight=void 0):(this._pixelHeight=Number(t),this.maxHeight=this._pixelHeight),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelWidth",{get:function(){var t;t=yR(this.percentWidth)?this.maxWidth:yR(this._pixelWidth)?this._pixelWidth:0;var e=this.minWidth;null!=e&&t<e&&(t=e);var n=CR(t,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelWidth",n):n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelHeight",{get:function(){var t;t=yR(this.percentHeight)?this.maxHeight:yR(this._pixelHeight)?this._pixelHeight:0;var e=this.minHeight;null!=e&&t<e&&(t=e);var n=CR(t,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelHeight",n):n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeWidth",{get:function(){var t=this._relativeWidth;if(yR(t))return this._adapterO?this._adapterO.apply("relativeWidth",t):t},set:function(t){this._relativeWidth!=t&&(this._relativeWidth=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeHeight",{get:function(){var t=this._relativeHeight;if(yR(t))return this._adapterO?this._adapterO.apply("relativeHeight",t):t},set:function(t){this._relativeHeight!=t&&(this._relativeHeight=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measuredWidth",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredWidth",this._measuredWidth):this._measuredWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measuredHeight",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredHeight",this._measuredHeight):this._measuredHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outerWidth",{get:function(){var t=this.pixelWidth+this.pixelMarginRight+this.pixelMarginLeft;return this._adapterO?this._adapterO.apply("outerWidth",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outerHeight",{get:function(){var t=this.pixelHeight+this.pixelMarginTop+this.pixelMarginBottom;return this._adapterO?this._adapterO.apply("outerHeight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerWidth",{get:function(){var t=Math.max(0,this.pixelWidth-this.pixelPaddingRight-this.pixelPaddingLeft);return this._adapterO?this._adapterO.apply("innerWidth",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerHeight",{get:function(){var t=Math.max(0,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom);return this._adapterO?this._adapterO.apply("innerHeight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalScale",{get:function(){var t=this.scale;return this._parent&&(t*=this._parent.globalScale),this._adapterO?this._adapterO.apply("globalScale",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.getPropertyValue("scale")},set:function(t){(t=lR(t))<0&&(t=0),t!=this.getPropertyValue("scale")&&(this.setPropertyValue("scale",t,!1,!0),this.handleGlobalScale())},enumerable:!0,configurable:!0}),e.prototype.margin=function(t,e,n,i){return this.marginTop=t,this.marginRight=e,this.marginBottom=n,this.marginLeft=i,this},Object.defineProperty(e.prototype,"marginLeft",{get:function(){return this.getPropertyValue("marginLeft")},set:function(t){this.setPercentProperty("marginLeft",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginRight",{get:function(){return this.getPropertyValue("marginRight")},set:function(t){this.setPercentProperty("marginRight",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginTop",{get:function(){return this.getPropertyValue("marginTop")},set:function(t){this.setPercentProperty("marginTop",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginBottom",{get:function(){return this.getPropertyValue("marginBottom")},set:function(t){this.setPercentProperty("marginBottom",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginRight",{get:function(){var t=this.getPixelX(this.marginRight);return this._adapterO?this._adapterO.apply("pixelMarginRight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginRight",{get:function(){var t=this.getRelativeX(this.marginRight);return this._adapterO?this._adapterO.apply("relativeMarginRight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginLeft",{get:function(){var t=this.getPixelX(this.marginLeft);return this._adapterO?this._adapterO.apply("pixelMarginLeft",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginLeft",{get:function(){var t=this.getRelativeX(this.marginLeft);return this._adapterO?this._adapterO.apply("relativeMarginLeft",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginTop",{get:function(){var t=this.getPixelY(this.marginTop);return this._adapterO?this._adapterO.apply("pixelMarginTop",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginTop",{get:function(){var t=this.getRelativeY(this.marginTop);return this._adapterO?this._adapterO.apply("relativeMarginTop",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginBottom",{get:function(){var t=this.getPixelY(this.marginBottom);return this._adapterO?this._adapterO.apply("pixelMarginBottom",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginBottom",{get:function(){var t=this.getRelativeY(this.marginBottom);return this._adapterO?this._adapterO.apply("relativeMarginBottom",t):t},enumerable:!0,configurable:!0}),e.prototype.padding=function(t,e,n,i){return this.paddingTop=t,this.paddingRight=e,this.paddingBottom=n,this.paddingLeft=i,this},Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft")},set:function(t){this.setPercentProperty("paddingLeft",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight")},set:function(t){this.setPercentProperty("paddingRight",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return this.getPropertyValue("paddingTop")},set:function(t){this.setPercentProperty("paddingTop",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return this.getPropertyValue("paddingBottom")},set:function(t){this.setPercentProperty("paddingBottom",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingRight",{get:function(){return this.getPixelX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingRight",{get:function(){return this.getRelativeX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingLeft",{get:function(){return this.getPixelX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingLeft",{get:function(){return this.getRelativeX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingTop",{get:function(){return this.getPixelY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingTop",{get:function(){return this.getRelativeY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingBottom",{get:function(){return this.getPixelY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingBottom",{get:function(){return this.getRelativeY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(t){this.setPath(t)},enumerable:!0,configurable:!0}),e.prototype.setPath=function(t){return!!this.setPropertyValue("path",t)&&(this._adapterO&&(t=this._adapterO.apply("path",t)),this._isPath||(this.element&&(!this.element.node||this.element.node instanceof SVGPathElement)||(this.element=this.paper.add("path")),this._isPath=!0),cR(t)?this.element.attr({d:t}):this.element.removeAttr("d"),this.invalidatePosition(),this.inited||this.events.once("inited",this.validatePosition,this,!1),!0)},Object.defineProperty(e.prototype,"fillModifier",{get:function(){return this.getPropertyValue("fillModifier")},set:function(t){this.setPropertyValue("fillModifier",t)&&this.setFill(this.fill)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeModifier",{get:function(){return this.getPropertyValue("strokeModifier")},set:function(t){this.setPropertyValue("strokeModifier",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.getPropertyValue("fillOpacity")},set:function(t){t=PR(t,0,1),this.setPropertyValue("fillOpacity",t)&&this.setSVGAttribute({"fill-opacity":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.getPropertyValue("fill")},set:function(t){this.setFill(t)},enumerable:!0,configurable:!0}),e.prototype.setFill=function(t){if(mR(t)&&!("r"in t)||(t=_N(t)),this.setColorProperty("fill",t)||this.fillModifier)if(t instanceof vN&&this.fillModifier&&(t=this.fillModifier.modify(t)),this.realFill=t,t instanceof vN)this.setSVGAttribute({fill:t.toString()});else if(cR(t)){if(t instanceof MV||t instanceof NV||t instanceof FV){var e=t;e.paper=this.paper,this.setSVGAttribute({fill:'url("'+AN()+e.id+'")'})}}else this.removeSVGAttribute("fill")},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.getPropertyValue("opacity")},set:function(t){t=PR(t,0,1),this.setPropertyValue("opacity",t)&&this.setSVGAttribute({opacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.getPropertyValue("stroke")},set:function(t){this.setStroke(t)},enumerable:!0,configurable:!0}),e.prototype.setStroke=function(t){if(mR(t)&&!("r"in t)||(t=_N(t)),this.setColorProperty("stroke",t)||this.strokeModifier)if(t instanceof vN&&this.strokeModifier&&(t=this.strokeModifier.modify(t)),this.realStroke=t,t instanceof vN)"none"==t.hex?this.removeSVGAttribute("stroke"):this.setSVGAttribute({stroke:t.toString()});else if(cR(t)){if(t instanceof MV||t instanceof NV||t instanceof FV){var e=t;e.paper=this.paper,this.setSVGAttribute({stroke:'url("'+AN()+e.id+'")'})}}else this.removeSVGAttribute("stroke")},Object.defineProperty(e.prototype,"strokeOpacity",{get:function(){return this.getPropertyValue("strokeOpacity")},set:function(t){t=PR(t,0,1),this.setPropertyValue("strokeOpacity",t)&&this.setSVGAttribute({"stroke-opacity":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonScalingStroke",{get:function(){return this.getPropertyValue("nonScalingStroke")},set:function(t){t=uR(t),this.setPropertyValue("nonScalingStroke",t)&&(this.strokeWidth=this.strokeWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonScaling",{get:function(){return this.getPropertyValue("nonScaling")},set:function(t){t=uR(t),this.setPropertyValue("nonScaling",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.getPropertyValue("strokeWidth")},set:function(t){t=lR(t),this.setPropertyValue("strokeWidth",t,!0),this.nonScalingStroke&&(yR(t)||(t=1),t/=this.globalScale),this.setSVGAttribute({"stroke-width":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeDasharray",{get:function(){return this.getPropertyValue("strokeDasharray")},set:function(t){t=hR(t),this.setPropertyValue("strokeDasharray",t)&&this.setSVGAttribute({"stroke-dasharray":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeDashoffset",{get:function(){return this.getPropertyValue("strokeDashoffset")},set:function(t){t=lR(t),this.setPropertyValue("strokeDashoffset",t)&&this.setSVGAttribute({"stroke-dashoffset":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeLinecap",{get:function(){return this.getPropertyValue("strokeLinecap")},set:function(t){this.setPropertyValue("strokeLinecap",t)&&this.setSVGAttribute({"stroke-linecap":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeLinejoin",{get:function(){return this.getPropertyValue("strokeLinejoin")},set:function(t){this.setPropertyValue("strokeLinejoin",t)&&this.setSVGAttribute({"stroke-linejoin":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeRendering",{get:function(){return this.getPropertyValue("shapeRendering")},set:function(t){t=hR(t),this.setPropertyValue("shapeRendering",t)&&this.setSVGAttribute({"shape-rendering":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPerfect",{get:function(){return this.getPropertyValue("pixelPerfect")},set:function(t){t=uR(t),this._positionPrecision=t?0:3,this.setPropertyValue("pixelPerfect",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rtl",{get:function(){return cR(this._rtl)?this._rtl:!!this._topParent&&this._topParent.rtl},set:function(t){t=uR(t),this.isBaseSprite&&(this.topParent.rtl=t),this._rtl=t},enumerable:!0,configurable:!0}),e.prototype.show=function(t){return this.showReal(t)},e.prototype.showReal=function(t){var e=this;if(!this.preventShow){var n,i=this.defaultState.properties;if(!this.disabled&&(this.isHidden||!this.visible||this.isHiding||null!=i.opacity&&this.opacity<i.opacity&&!this.isShowing)&&!this.isDisposed()){this.invalid&&this.validate(),this.positionInvalid&&this.validatePosition(),yR(t)||(t=this.defaultState.transitionDuration),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this._showHideDisposer&&this.removeDispose(this._showHideDisposer),this._isHidden=!1,this.isHiding=!1,this.isShowing=!0,(n=this.applyCurrentState(t))&&!n.isFinished()?(this._showHideDisposer=n.events.on("animationended",(function(){e.isShowing=!1})),this._disposers.push(this._showHideDisposer)):this.isShowing=!1;var r=this.defaultState.properties.visible;cR(r)||(r=!0),this.visible=r,this.readerHidden=!1,this.dispatchImmediately("shown")}return n}},e.prototype.hide=function(t){return this.hideReal(t)},e.prototype.hideReal=function(t){var e,n=this;if(!this.isHiding&&this.visible&&!this.isDisposed()){this.tooltip&&this.tooltip.currentSprite==this&&this.hideTooltip(0),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this.isShowing=!1,this._showHideDisposer&&this.removeDispose(this._showHideDisposer);var i=this.hiddenState;i?(e=this.setState(i,t,void 0))&&!e.isFinished()?(this._hideAnimation=e,this._showHideDisposer=e.events.on("animationended",(function(){n.isHiding=!1,n._isHidden=!0,0==i.properties.visible&&(n.visible=!1)}),this),this._disposers.push(this._showHideDisposer),this._disposers.push(e)):(this.isHiding=!1,this._isHidden=!0):(this.visible=!1,this.isHiding=!1,this._isHidden=!0),this.readerHidden=!0,this.dispatchImmediately("hidden"),this.invalidate()}return yR(t)||(t=this.hiddenState.transitionDuration),e},Object.defineProperty(e.prototype,"visible",{get:function(){return this.getVisibility()},set:function(t){t=uR(t),this.setVisibility(t)},enumerable:!0,configurable:!0}),e.prototype.getVisibility=function(){var t=this.getPropertyValue("visible");return cR(t)||(t=!0),t},e.prototype.setVisibility=function(t){this.setPropertyValue("visible",t)&&(t?this.group.removeAttr("visibility"):this.group.attr({visibility:"hidden"}),this.events.isEnabled("visibilitychanged")&&this.events.dispatchImmediately("visibilitychanged",{type:"visibilitychanged",target:this,visible:t}))},Object.defineProperty(e.prototype,"zIndex",{get:function(){return this.getPropertyValue("zIndex")},set:function(t){t=lR(t),this.setPropertyValue("zIndex",t)&&this.dispatch("zIndexChanged")},enumerable:!0,configurable:!0}),e.prototype.toFront=function(){var t=this._parent;t&&t.children.indexOf(this)!=t.children.length-1&&(t.children.moveValue(this,t.children.length-1),this.dispatch("zIndexChanged"))},e.prototype.toBack=function(){var t=this._parent;t&&0!=t.children.indexOf(this)&&(t.children.moveValue(this,0),this.dispatch("zIndexChanged"))},Object.defineProperty(e.prototype,"userClassName",{get:function(){return this.getPropertyValue("userClassName")},set:function(t){this.setPropertyValue("userClassName",t)&&(!t&&this.userClassName&&this.group.removeClass(this.userClassName),this.setClassName())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip?this._tooltip:this.virtualParent?this.virtualParent.tooltip:this._parent?this._parent.tooltip:void 0},set:function(t){this._tooltip&&this.removeDispose(this._tooltip),this._tooltip=t,t&&(t.parent=this.tooltipContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipDataItem",{get:function(){return this._tooltipDataItem||this.dataItem},set:function(t){this._tooltipDataItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipColorSource",{get:function(){return this._tooltipColorSource},set:function(t){this._tooltipColorSource=t},enumerable:!0,configurable:!0}),e.prototype.showTooltip=function(t){"always"==this.showTooltipOn&&!this._tooltip&&this.tooltip&&(this._tooltip=this.tooltip.clone()),!t&&"pointer"==this.tooltipPosition&&this.isHover&&(t=oF(xV().lastPointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale));for(var e=this;null!=e;){if(!e.visible||e.disabled||e.__disabled)return void(this._tooltip&&this._tooltip.visible&&this._tooltip.hide(0));e=e.parent}if(cR(this.tooltipText)||cR(this.tooltipHTML)){var n=this.tooltip,i=this.tooltipDataItem;if(n){n.targetSprite=this;var r=this,o=this.tooltipColorSource;if((n.getStrokeFromObject||n.getFillFromObject)&&o&&(o.isTemplate?i&&eM(i.sprites,(function(t){return t.clonedFrom!=o||(r=t,!1)})):r=o),n.getStrokeFromObject){for(var s=this.stroke,a=r;null!=a.parent&&(null==(s=a.stroke)&&(a=a.parent),null==s););s instanceof vN?n.background.animate({property:"stroke",to:s},n.animationDuration):n.background.stroke=s}if(n.dataItem=i,n.label.populateStringFrom=this,n.getFillFromObject){var u=this.fill;for(a=r;null!=a.parent;)if(null==(u=a.fill)||u instanceof vN&&null==u.rgb)a=a.parent;else if(null!=u)break;null==u&&(u=bN("#000000")),u instanceof vN&&n.visible?n.background.animate({property:"fill",to:u},n.animationDuration):n.background.fill=u,n.autoTextColor&&u instanceof vN&&(n.label.fill=u.alternative)}var l="";if(this.tooltipHTML&&(n.html=this.tooltipHTML,l=this.tooltipHTML),this.tooltipText&&(n.text=this.tooltipText,l=this.tooltipText),this.updateTooltipPosition(t)){if(n.readerDescribedBy=this.uidAttr(),n.label.invalid&&n.label.validate(),null!=l&&""!=l&&""!=n.label.currentText){n&&!n.parent&&(n.parent=this.tooltipContainer);var h=n.defaultState.transitionDuration;return h<=0&&(h=1),n.show(h),n.currentSprite=this,!0}this.hideTooltip(0)}else this.hideTooltip(0)}}return!1},e.prototype.updateTooltipPosition=function(t){var e=this;if("pointer"!=this.tooltipPosition){var n=nF({x:this.getTooltipX(),y:this.getTooltipY()},this);return this.pointTooltipTo(n)}if(this._interactionDisposer&&this._interactionDisposer.dispose(),this._interactionDisposer=xV().body.events.on("track",(function(t){return e.pointTooltipTo(oF(t.point,e.svgContainer.SVGContainer,e.svgContainer.cssScale),!0)})),t)return this.pointTooltipTo(t,!0)},e.prototype.pointTooltipTo=function(t,e){var n=this.tooltip;if(n&&this.topParent){if(n.showInViewport)return n.pointTo(t,e),!0;if(QR(t,{x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight}))return n.pointTo(t,e),!0}return!1},e.prototype.hideTooltip=function(t){if("always"!=this.showTooltipOn){var e=this.tooltip;e&&(e.targetSprite==this&&(e.targetSprite=void 0),e.hide(t),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0))}},Object.defineProperty(e.prototype,"tooltipHTML",{get:function(){return this.getPropertyValue("tooltipHTML")},set:function(t){t=hR(t),this.hoverable=!0,this.setPropertyValue("tooltipHTML",t)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipText",{get:function(){return this.getPropertyValue("tooltipText")},set:function(t){(t=hR(t))&&(this.hoverable=!0),this.setPropertyValue("tooltipText",t)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipContainer",{get:function(){return this._tooltipContainer?this._tooltipContainer:this._parent?this._parent.tooltipContainer:void 0},set:function(t){this._tooltipContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipX",{get:function(){return this.getTooltipX()},set:function(t){this.setPercentProperty("tooltipX",t)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alwaysShowTooltip",{get:function(){return"always"==this.getPropertyValue("showTooltipOn")},set:function(t){(t=uR(t))&&(this.showTooltipOn="always")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltipOn",{get:function(){return this.getPropertyValue("showTooltipOn")},set:function(t){this.setPropertyValue("showTooltipOn",t)&&("hit"==t&&(this.clickable=!0),this.tooltip&&("always"==t?this.showTooltip():this.handleAlwaysShowTooltip()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipPosition",{get:function(){return this.getPropertyValue("tooltipPosition")},set:function(t){this.setPropertyValue("tooltipPosition",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipY",{get:function(){return this.getTooltipY()},set:function(t){this.setPercentProperty("tooltipY",t)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),e.prototype.getTooltipX=function(){var t,e=this.getPropertyValue("tooltipX");return cR(e)||(e=rR(50)),yR(e)&&(t=e),e instanceof iR&&(t=this.maxLeftSelf+this._measuredWidthSelf*e.value-this.pixelPaddingLeft-this.ex),yR(t)||(t=0),t},e.prototype.getTooltipY=function(){var t,e=this.getPropertyValue("tooltipY");return cR(e)||(e=rR(50)),yR(e)&&(t=e),e instanceof iR&&(t=this.maxTopSelf+this._measuredHeightSelf*e.value-this.pixelPaddingTop-this.ey),yR(t)||(t=0),t},e.prototype.raiseCriticalError=function(t,e){this.svgContainer&&(this.modal.content=this._adapterO?this._adapterO.apply("criticalError",t).message:t.message,e?this.modal.closable=!0:this.disabled=!0,kF.suppressErrors||this.modal.open()),kF.verbose&&console.log(t)},e.prototype.processConfig=function(e){e&&(cR(e.tooltipColorSource)&&gR(e.tooltipColorSource)&&this.map.hasKey(e.tooltipColorSource)&&(e.tooltipColorSource=this.map.getKey(e.tooltipColorSource)),cR(e.cursorOverStyle)&&gR(e.cursorOverStyle)&&(e.cursorOverStyle=this.getCursorStyle(e.cursorOverStyle)),cR(e.cursorDowntyle)&&gR(e.cursorDowntyle)&&(e.cursorDowntyle=this.getCursorStyle(e.cursorDowntyle)),cR(e.cursorOptions)&&(cR(e.cursorOptions.overStyle)&&gR(e.cursorOptions.overStyle)&&(e.cursorOptions.overStyle=this.getCursorStyle(e.cursorOptions.overStyle)),cR(e.cursorOptions.downStyle)&&gR(e.cursorOptions.downStyle)&&(e.cursorOptions.downStyle=this.getCursorStyle(e.cursorOptions.downStyle)))),t.prototype.processConfig.call(this,e),this.processDelayedMap()},e.prototype.getCursorStyle=function(t){switch(t){case"grab":return LV.grab;case"grabbing":return LV.grabbing;case"pointer":return LV.pointer;case"horizontalResize":return LV.horizontalResize;case"verticalResize":return LV.verticalResize;default:return LV.default}},e.prototype.configOrder=function(e,n){return e==n?0:"tooltipColorSource"==e?1:"tooltipColorSource"==n?-1:t.prototype.configOrder.call(this,e,n)},Object.defineProperty(e.prototype,"isHidden",{get:function(){return this._isHidden?this._isHidden:!!this._parent&&this._parent.isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOnInit",{get:function(){return this.getPropertyValue("showOnInit")},set:function(t){t=uR(t),this.setShowOnInit(t)},enumerable:!0,configurable:!0}),e.prototype.setShowOnInit=function(t){this.setPropertyValue("showOnInit",t)&&(this.isTemplate||(!t||this.inited||this.hidden?this._showOnInitDisposer&&this._showOnInitDisposer.dispose():(this._showOnInitDisposer=new dM([QM.events.once("enterframe",this.hideInitially,this),this.events.once("beforevalidated",this.hideInitially,this,!1),this.events.on("inited",this.appear,this,!1)]),this._disposers.push(this._showOnInitDisposer))))},e.prototype.hideInitially=function(){this.isDisposed()||(this.appeared=!1,this.inited||this.hide(0))},e.prototype.appear=function(){var t=this;if(this.appeared=!1,this.hidden||this.isHidden||this.hide(0),this.hidden)this.appeared=!0,this.dispatch("appeared");else{var e=this.show();e&&!e.isFinished()?this.addDisposer(e.events.on("animationended",(function(){t.appeared=!0,t.dispatch("appeared")}))):(this.appeared=!0,this.dispatch("appeared"))}},Object.defineProperty(e.prototype,"hidden",{get:function(){return this.getPropertyValue("hidden")},set:function(t){t=uR(t),this.setPropertyValue("hidden",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this._bbox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plugins",{get:function(){var t=this;return this._plugins||(this._plugins=new eN,this._disposers.push(this._plugins.events.on("inserted",(function(e){e.newValue.target=t,e.newValue.init()}))),this._disposers.push(new JM(this._plugins))),this._plugins},enumerable:!0,configurable:!0}),e.prototype._systemUpdate=function(t){this.validate()},e.prototype._systemCheckIfValidate=function(){return!0},e.prototype._systemValidatePositions=function(){this.validatePosition()},e.prototype._systemValidateLayouts=function(){},e}(xN);QM.registeredClasses.Sprite=oL;var sL=function(t){function e(){var e=t.call(this)||this;return e.className="Rectangle",e.element=e.paper.add("rect"),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this._positionPrecision;this.pixelPerfect&&(e=0);var n=CR(this.innerWidth,e),i=CR(this.innerHeight,e);this.element.attr({width:n,height:i})},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),e}(oL);QM.registeredClasses.Rectangle=sL;var aL=function(t){function e(){var e=t.call(this)||this;return e._childrenByLayout=[],e._childrenDisposers=new YM,e.hasFocused=!1,e.setStateOnSprites=[],e.layoutInvalid=!1,e._absoluteWidth=0,e._absoluteHeight=0,e._shouldBeReady=[],e._tapToActivate=!1,e.tapTimeout=3e3,e.className="Container",e._element=e.paper.addGroup("g"),e.group.add(e.element),e.setPropertyValue("pixelPerfect",!1),e.setPropertyValue("layout","absolute"),e.setPropertyValue("fixedWidthGrid",!1),e.setPropertyValue("verticalCenter","none"),e.setPropertyValue("horizontalCenter","none"),e._positionPrecision=4,e._disposers.push(new GM(e._childrenDisposers)),e.children.events.on("inserted",e.handleChildAdded,e),e.children.events.on("removed",e.handleChildRemoved,e),e.applyTheme(),e}return Qj(e,t),e.prototype.handleChildAdded=function(t){this.processChild(t.newValue)},e.prototype.processChild=function(t){try{this._childrenDisposers.insertKey(t.uid,new dM([t.events.on("transformed",this.handleChildTransform,this),t.events.on("zIndexChanged",this.sortAndAdd,this)]))}catch(e){}this.element&&this.element.add(t.group),t.parent=this,t.paper=this.paper,this.dispatchImmediately("childadded",{type:"childadded",newValue:t}),this.invalidate()},e.prototype.sortAndAdd=function(){this.sortChildren(),this.addChildren()},e.prototype.handleChildRemoved=function(t){var e=t.oldValue;this._childrenDisposers.removeKey(e.uid),this.element&&this.element.removeElement(e.group),e.isMeasured&&this.invalidateLayout(),this.dispatchImmediately("childremoved",{type:"childremoved",oldValue:e})},e.prototype.handleChildTransform=function(t){t.target.isMeasured&&this.invalidateLayout()},e.prototype.invalidateLayout=function(){this.layoutInvalid||this.disabled||this.isTemplate||"none"==this.layout||this.__disabled||(this.layoutInvalid=!0,QM.addToInvalidLayouts(this),uL.requestFrame())},e.prototype.invalidate=function(){t.prototype.invalidate.call(this),this.invalidateLayout()},e.prototype.deepInvalidate=function(){t.prototype.invalidate.call(this),tM(this._childrenByLayout,(function(t){t instanceof e?t.deepInvalidate():t.invalidate()})),this.invalidateLayout()},Object.defineProperty(e.prototype,"children",{get:function(){return this._children||(this._children=new eN),this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(t){this.setPropertyValue("minWidth",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(t){this.setPropertyValue("minHeight",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),e.prototype.removeElement=function(){},e.prototype.sortChildren=function(){var t=this;if(this._childrenByLayout=[],"none"!=this.layout&&"absolute"!=this.layout&&this.layout){var e=[],n=[];VM(this.children.iterator(),(function(i){"horizontal"==t.layout||"grid"==t.layout?yR(i.percentWidth)?n.push(i):e.push(i):"vertical"==t.layout&&yR(i.percentHeight)?n.push(i):e.push(i)})),this._childrenByLayout=e.concat(n)}else this._childrenByLayout=this.children.values;this.calculateRelativeSize()},e.prototype.calculateRelativeSize=function(){var t=this,e=0,n=0;tM(this._childrenByLayout,(function(t){t.isMeasured&&(yR(t.percentWidth)&&(e+=t.percentWidth),yR(t.percentHeight)&&(n+=t.percentHeight))})),tM(this._childrenByLayout,(function(i){i.isMeasured&&("horizontal"==t.layout&&(yR(i.percentWidth)&&(i.relativeWidth=i.percentWidth/e),yR(i.percentHeight)&&(i.relativeHeight=i.percentHeight/100)),"vertical"==t.layout&&(yR(i.percentHeight)&&(i.relativeHeight=i.percentHeight/n),yR(i.percentWidth)&&(i.relativeWidth=i.percentWidth/100)),"grid"==t.layout&&(yR(i.percentHeight)&&(i.relativeHeight=i.percentHeight/100),yR(i.percentWidth)&&(i.relativeWidth=i.percentWidth/100))),"absolute"!=t.layout&&i.isMeasured||(yR(i.percentWidth)&&(i.relativeWidth=i.percentWidth/100),yR(i.percentHeight)&&(i.relativeHeight=i.percentHeight/100))}))},e.prototype.addChildren=function(){if(this.element){var t=sM(this.children.values),e=t.map((function(t,e){return{idx:e,data:t}}));e.sort((function(t,e){var n=t.data.zIndex||0,i=e.data.zIndex||0;return n<i?-1:n>i?1:t.idx-e.idx})),t=e.map((function(t){return t.data}));var n=this.element,i=!0;if(n.node&&n.node.childNodes)for(var r=0,o=n.node.childNodes.length;r<o;r++)if(n.node.childNodes[r]!=t[r].group.node){i=!1;break}i||(tM(t,(function(t){t.group&&n.add(t.group)})),this._background&&this.group.addToBack(this._background.group),this.invalidateLayout())}},e.prototype.createChild=function(t){var e=new t;return e.parent=this,e},e.prototype.removeChildren=function(){for(;this.children.length>0;){var t=this.children.getIndex(0);t.parent=void 0,this.children.removeValue(t)}},e.prototype.disposeChildren=function(){for(;this.children.length>0;){var t=this.children.getIndex(0);t.dispose(),this.children.removeValue(t)}},Object.defineProperty(e.prototype,"background",{get:function(){return this._background||(this._background=this.createBackground(),this.processBackground()),this._background},set:function(t){this._background&&this.background!=t&&this.removeDispose(this._background),t&&(this._background=t,this._disposers.push(t),this.processBackground())},enumerable:!0,configurable:!0}),e.prototype.handleGlobalScale=function(){t.prototype.handleGlobalScale.call(this),this.children.each((function(t){t.handleGlobalScale()}))},e.prototype.createBackground=function(){return new sL},e.prototype.processBackground=function(){var t=this._background;t&&(t.isMeasured=!1,this._background.fill=(new rV).getFor("background"),t.parent=this,t.isMeasured=!1,this.children.removeValue(t),this._disposers.push(t),this.group.addToBack(this._background.group))},e.prototype.validateLayout=function(){var t=this;QM.removeFromInvalidLayouts(this),this.layoutInvalid=!1,this._availableWidth=this.innerWidth,this._availableHeight=this.innerHeight;var e=0,n=0,i=!0;this.children&&(this.sortChildren(),tM(this._childrenByLayout,(function(r){var o,s;if(yR(r.relativeWidth)?(o=CR(t._availableWidth*r.relativeWidth,2),"horizontal"==t.layout&&(o-=r.pixelMarginRight+r.pixelMarginLeft)):"horizontal"==t.layout&&r.invalid&&r.validate(),yR(r.relativeHeight)?(s=CR(t._availableHeight*r.relativeHeight,2),"vertical"==t.layout&&(s-=r.pixelMarginTop+r.pixelMarginBottom)):"vertical"==t.layout&&r.invalid&&r.validate(),0==r.invalid){if(yR(r.relativeWidth)&&(r.maxWidth=o),yR(r.relativeHeight)&&(r.maxHeight=s),r.isMeasured){"horizontal"==t.layout&&(yR(r.percentWidth)||r.measuredWidth>0&&(t._availableWidth-=r.measuredWidth+r.pixelMarginLeft+r.pixelMarginRight)),"vertical"==t.layout&&(yR(r.percentHeight)||r.measuredHeight>0&&(t._availableHeight-=r.measuredHeight+r.pixelMarginTop+r.pixelMarginBottom));var a=r.measuredWidth,u=r.measuredHeight;"none"!=r.align&&(a+=r.pixelMarginLeft+r.pixelMarginRight),"none"!=r.valign&&(u+=r.pixelMarginTop+r.pixelMarginBottom),e=Math.max(e,a),n=Math.max(n,u)}}else r.isMeasured&&(yR(r.relativeWidth)&&r.maxWidth!=o&&(r.maxWidth=o,i=!1),yR(r.relativeHeight)&&r.maxHeight!=s&&(r.maxHeight=s,i=!1))}))),this._absoluteWidth=e,this._absoluteHeight=n,i&&this.arrange()},e.prototype.arrange=function(){var t,e,n,i,r,o,s,a,u,l,h,c=this,p=this.children,d=0,f=0,g=kR(this.innerWidth,this._absoluteWidth),y=kR(this.innerHeight,this._absoluteHeight),m=this.pixelPaddingLeft,v=this.pixelPaddingRight,b=this.pixelPaddingTop,_=this.pixelPaddingBottom,w=0,x=0,P=0,C=0,I=[],O=[],S=this.maxWidth,T=this.maxHeight,E=this.minWidth,k=this.minHeight,A=sM(p.values);if(this.reverseOrder&&A.reverse(),"grid"==this.layout){o=S,r=1;for(var D=0,j=A.length;D<j;D++)if((M=A[D]).isMeasured&&!M.disabled&&!M.__disabled){var R=M.measuredWidth;R<o&&(o=R),R>r&&(r=R)}o=OR(o,1,S),r=OR(r,1,S),s=this.fixedWidthGrid?S/r:S/o,s=kR(1,Math.floor(s)),s=AR(this.maxColumns,s),I=this.getColumnWidth(A,s,r)}for(D=0,j=A.length;D<j;D++){var M;if(!(M=A[D]).isMeasured||M.disabled||M.__disabled)M.validatePosition();else{var N=void 0,F=void 0,V=M.pixelMarginLeft,L=M.pixelMarginRight,U=M.pixelMarginTop,B=M.pixelMarginBottom,H=M.measuredWidth,W=M.measuredHeight,z=void 0,q=void 0,G=void 0,Y=void 0;switch(this.layout){case"none":break;case"absolute":switch(M.align){case"left":N=V-M.maxLeft;break;case"center":N=(g-H)/2-M.maxLeft;break;case"right":N=g-L-M.maxRight;break;default:M.x instanceof iR||(N=M.pixelX)}switch(M.valign){case"top":F=U-M.maxTop;break;case"middle":F=(y-W)/2-M.maxTop;break;case"bottom":F=y-B-M.maxBottom;break;default:M.y instanceof iR||(F=M.pixelY)}break;case"vertical":switch(M.align){case"left":N=V-M.maxLeft;break;case"center":N=(g-H)/2-M.maxLeft;break;case"right":N=g-L-M.maxRight;break;default:N=M.pixelX}x=(F=x+U-M.maxTop)+M.maxBottom+B;break;case"horizontal":switch(M.valign){case"top":F=U-M.maxTop;break;case"middle":F=(y-W)/2-M.maxTop;break;case"bottom":F=y-B-M.maxBottom;break;default:F=M.pixelY}w=(N=w+V-M.maxLeft)+M.maxRight+L;break;case"grid":switch(N=w+V-M.maxLeft,M.valign){case"top":F=x+U-M.maxTop;break;case"middle":F=x+(y-W)/2-M.maxTop;break;case"bottom":F=x+y-B-M.maxBottom;break;default:F=x-M.maxTop}w+=I[C],O[P]=kR(O[P],W);var K=I[++C];if(yR(K)||(K=r),w>AR(this.innerWidth,S)-K+1&&C<s){s=C,w=0,x=0,P=0,C=0,I=this.getColumnWidth(A,s,r),O=[],D=-1;continue}C>=s&&(C=0,x+=O[P],P++,w=0)}"none"!==this.layout&&(M.moveTo({x:N,y:F}),z=N+M.maxLeft-V,G=F+M.maxTop-U,Y=F+M.maxBottom+B,((q=N+M.maxRight+L)>e||!yR(e))&&(e=q),(z<t||!yR(t))&&(t=z),(G<n||!yR(n))&&(n=G),(Y>i||!yR(i))&&(i=Y),(q>u||!yR(u))&&(u=q),(z<a||!yR(a))&&(a=z),(G<l||!yR(l))&&(l=G),(Y>h||!yR(h))&&(h=h))}}if("none"==this.layout){var X=this.bbox;t=X.x,e=X.x+X.width,n=X.y,i=X.y+X.height}yR(t)||(t=0,a=0),yR(e)||(u=e=this._availableWidth),yR(n)||(n=0,l=0),yR(i)||(h=i=this._availableHeight),yR(l)||(l=0),yR(h)||(h=l),yR(a)||(a=0),yR(u)||(u=a),d=e-t,f=i-n,yR(this.relativeWidth)&&(t=0,e=d=S-m-v),yR(this.relativeHeight)&&(n=0,i=f=T-b-_),yR(this._pixelWidth)&&(t=0,d=this._pixelWidth-m-v),yR(E)&&d<E&&(t=0,d=this.minWidth-m-v),yR(this._pixelHeight)&&(n=0,f=this._pixelHeight-b-_),yR(k)&&f<k&&(n=0,f=k-b-_);var Q=u-a,$=h-l;if("none"!=this.layout&&(this.contentAlign||this.contentValign)&&p.length>0){var Z,J,tt=d,et=f;tt<Q&&(tt=Q),et<$&&(et=$),"center"==this.contentAlign&&(Z=(tt-Q)/2),"right"==this.contentAlign&&(Z=tt-Q),"middle"==this.contentValign&&(J=(et-$)/2),"bottom"==this.contentValign&&(J=et-$),yR(Z)&&VM(p.iterator(),(function(t){var e=t.maxLeft,n=Z;"horizontal"==c.layout&&(t.x=t.pixelX+n),"grid"==c.layout&&(t.x=t.pixelX+n),"vertical"==c.layout&&(n+=t.pixelMarginLeft,"none"==t.align&&(t.x=n-e)),"absolute"==c.layout&&(n+=t.pixelMarginLeft,"none"==t.align&&(t.x=n-e))})),yR(J)&&VM(p.iterator(),(function(t){var e=t.maxTop,n=J;"horizontal"==c.layout&&(n+=t.pixelMarginTop,"none"==t.valign&&(t.y=n-e)),"grid"==c.layout&&(t.y=(n+=t.pixelMarginTop)-e),"vertical"==c.layout&&(t.y=t.pixelY+n),"absolute"==c.layout&&(n+=t.pixelMarginTop,"none"==t.valign&&(t.y=n-e))}))}var nt=this.bbox;d=kR(d,E),f=kR(f,k),this.contentWidth=d,this.contentHeight=f,d=AR(d,S),f=AR(f,T),this._bbox={x:t,y:n,width:d,height:f};var it=this.maxLeft,rt=this.maxTop,ot=this.maxBottom,st=this.maxRight;if(this.measure(),(it!=this.maxLeft||st!=this.maxRight||rt!=this.maxTop||ot!=this.maxBottom)&&this.events.isEnabled("transformed")){var at={type:"transformed",target:this};nt&&(at.dummyData=nt.width+" "+d+"  "+nt.height+" "+f),this.events.dispatchImmediately("transformed",at)}this.dispatchImmediately("layoutvalidated")},e.prototype.updateCenter=function(){t.prototype.updateCenter.call(this),this.updateBackground()},e.prototype.updateBackground=function(){var t=this._background;t&&(t.x=this.maxLeft,t.y=this.maxTop,t.width=this.maxRight-this.maxLeft,t.height=this.maxBottom-this.maxTop)},e.prototype.getColumnWidth=function(t,e,n){var i=this,r=[],o=0;return tM(t,(function(t){!t.isMeasured||t.disabled||t.__disabled||(r[o]=i.fixedWidthGrid?n:kR(r[o],t.measuredWidth+t.pixelMarginRight+t.pixelMarginLeft),++o==e&&(o=0))})),r},Object.defineProperty(e.prototype,"layout",{get:function(){return this.getPropertyValue("layout")},set:function(t){this.setPropertyValue("layout",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentValign",{get:function(){return this.getPropertyValue("contentValign")},set:function(t){this.setPropertyValue("contentValign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentAlign",{get:function(){return this.getPropertyValue("contentAlign")},set:function(t){this.setPropertyValue("contentAlign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedWidthGrid",{get:function(){return this.getPropertyValue("fixedWidthGrid")},set:function(t){this.setPropertyValue("fixedWidthGrid",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxColumns",{get:function(){return this.getPropertyValue("maxColumns")},set:function(t){this.setPropertyValue("maxColumns",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverseOrder",{get:function(){return this.getPropertyValue("reverseOrder")},set:function(t){this.setPropertyValue("reverseOrder",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setStateOnChildren",{get:function(){return this.getPropertyValue("setStateOnChildren")},set:function(t){this.setPropertyValue("setStateOnChildren",t,!0)},enumerable:!0,configurable:!0}),e.prototype.fitsToBounds=function(t){var e=t.x,n=t.y;return e>=-.5&&e<=this.pixelWidth+.5&&n>=-.5&&n<=this.pixelHeight+.5},e.prototype.copyFrom=function(e){var n=this;t.prototype.copyFrom.call(this,e),this.layout=e.layout,this.setStateOnChildren=e.setStateOnChildren,e._background&&(this.background=e._background.clone(),this.background.copyFrom(e._background)),VM(e.children.iterator(),(function(t){t.shouldClone&&(t.clone().parent=n)}))},Object.defineProperty(e.prototype,"preloader",{get:function(){return this._preloader||(this.parent?this.parent.preloader:void 0)},set:function(t){this._preloader&&this.removeDispose(this._preloader),this._preloader=t,t&&(t.parent=this.tooltipContainer,this._disposers.push(t))},enumerable:!0,configurable:!0}),e.prototype.setPaper=function(e){var n=this,i=t.prototype.setPaper.call(this,e);return i&&(this._background&&(this._background.paper=e,this._background.topParent=this.topParent),this.children.each((function(t){t.setPaper(e),t.topParent=n.topParent}))),i},e.prototype.removeFromInvalids=function(){t.prototype.removeFromInvalids.call(this),QM.removeFromInvalidLayouts(this)},e.prototype.setDataItem=function(e){this._dataItem!=e&&(VM(this.children.iterator(),(function(t){t.dataItem=e})),this._background&&(this._background.dataItem=e)),t.prototype.setDataItem.call(this,e)},e.prototype.measureElement=function(){this.disabled||this.isTemplate||"none"==this.layout||this.__disabled||this.validateLayout()},Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this.getPropertyValue("fontFamily")},set:function(t){this.setPropertyValue("fontFamily",t,!0)&&(this.setSVGAttribute({"font-family":t}),this.invalidateLabels())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this.getPropertyValue("fontSize")},set:function(t){this.setPropertyValue("fontSize",t,!0)&&(this.setSVGAttribute({"font-size":t}),this.invalidateLabels())},enumerable:!0,configurable:!0}),e.prototype.invalidateLabels=function(){this.children.each((function(t){t.hardInvalidate?(t.hardInvalidate(),t.events.once("validated",t.handleValidate,t,!1)):t instanceof e&&t.invalidateLabels()}))},Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this.getPropertyValue("fontWeight")},set:function(t){this.setPropertyValue("fontWeight",t),this.setSVGAttribute({"font-weight":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textDecoration",{get:function(){return this.getPropertyValue("textDecoration")},set:function(t){this.setPropertyValue("textDecoration",t),this.setSVGAttribute({"text-decoration":t})},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._background&&this._background.dispose(),this._shouldBeReady=[],this.disposeChildren(),t.prototype.dispose.call(this)},e.prototype.setState=function(e,n,i){var r=e;return e instanceof SF&&(r=e.name),this.setStateOnChildren&&VM(this.children.iterator(),(function(t){t.setState(r,n,i),"active"!=r&&(t.isActive=!1)})),this._background&&this._background.setState(r),this.setStateOnSprites.length&&tM(this.setStateOnSprites,(function(t){t.setState(r,n,i)})),t.prototype.setState.call(this,e,n,i)},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),this._background&&(this._background.isActive=e)},e.prototype.dispatchReady=function(){var e=this;if(!this.isReady()&&!this.isDisposed()){var n=!0;FM(this.children.iterator(),(function(t){return!!(t.__disabled||t.disabled||t.isReady())||(n=!1,!1)})),eM(this._shouldBeReady,(function(t){return!!(t.__disabled||t.disabled||t.isReady())||(n=!1,!1)})),n?t.prototype.dispatchReady.call(this):QM.events.once("exitframe",(function(){e.dispatchReady(),uL.requestFrame()}),void 0,!1)}},e.prototype._systemUpdate=function(e){this.children.each((function(t){t.invalid&&(t._systemCheckIfValidate()?t.dataItem&&t.dataItem.component&&t.dataItem.component.dataInvalid?e.push(t):t.validate():e.push(t))})),t.prototype._systemUpdate.call(this,e)},e.prototype._systemValidatePositions=function(){this.children.each((function(t){t.positionInvalid&&t.validatePosition()})),t.prototype._systemValidatePositions.call(this)},e.prototype._systemValidateLayouts=function(){this.layoutInvalid&&!this.isDisposed()&&this.validateLayout()},Object.defineProperty(e.prototype,"tapToActivate",{get:function(){return this._tapToActivate},set:function(t){this._tapToActivate!=t&&this.setTapToActivate(t)},enumerable:!0,configurable:!0}),e.prototype.setTapToActivate=function(t){var e=this;this._tapToActivate=t,this.interactions.isTouchProtected=t,t&&this.interactions.setEventDisposer("container-tapToActivate",t,(function(){return new dM([e.events.on("hit",e.handleTapToActivate,e,!1),e.events.on("down",e.initTapTimeout,e,!1),e.events.on("track",e.initTapTimeout,e,!1),xV().body.events.on("down",(function(t){xV().isLocalElement(t.pointer,e.paper.svg,e.uid)||e.handleTapToActivateDeactivation()}),e,!1)])})),xV()},e.prototype.handleTapToActivate=function(){this.interactions.isTouchProtected=!1,this.initTapTimeout()},e.prototype.handleTapToActivateDeactivation=function(){this.interactions.isTouchProtected=!0},e.prototype.initTapTimeout=function(){var t=this;this._tapToActivateTimeout&&this._tapToActivateTimeout.dispose(),this.tapToActivate&&!this.interactions.isTouchProtected&&this.tapTimeout&&(this._tapToActivateTimeout=this.setTimeout((function(){t.handleTapToActivateDeactivation()}),this.tapTimeout))},e.prototype.moveHtmlContainer=function(t){var e=HF(t);if(e){this.htmlContainer=e;var n=this.svgContainer;n.htmlElement=e,n.htmlElement.appendChild(n.SVGContainer),n.initSensor(),n.measure()}else gR(t)&&""!=t&&uL.log("html container '"+t+"' not found")},e.prototype.hasLicense=function(){if(kF.commercialLicense)return!0;for(var t=0;t<kF.licenses.length;t++)if(kF.licenses[t].match(/^CH.{5,}/i))return!0;return!1},e}(oL);QM.registeredClasses.Container=aL;var uL=new(function(){function t(){this._isPaused=!1,this.animations=[],this.uid=QM.getUniqueId(),this.dummyCounter=0,this._frameRequested=!1,this.updateStepDuration=45,this.time=Date.now()}return t.prototype.reportTime=function(t,e){e&&(this.time=Date.now())},t.prototype.update=function(){var t=this;if(!this._isPaused){this._frameRequested=!1;var e=Date.now();for(var n in QM.dispatchImmediately("enterframe"),QM.invalidDatas)if(TM(QM.invalidDatas,n)){for(var i=QM.invalidDatas[n];i.length>0;){var r=(o=i[0]).dataProvider;if(o.isDisposed())nM(i,o);else if(r&&r.dataInvalid)try{if(r.validateData(),r.dataValidationProgress<1)break}catch(l){nM(i,r),r.raiseCriticalError(l)}else try{if(o.validateData(),o.dataValidationProgress<1)break}catch(l){nM(i,o),o.raiseCriticalError(l)}}if(Date.now()-e>this.updateStepDuration)break}for(;QM.invalidRawDatas.length>0;)if((o=QM.invalidRawDatas[0]).isDisposed())nM(QM.invalidRawDatas,o);else try{o.validateRawData()}catch(l){nM(QM.invalidRawDatas,o),o.raiseCriticalError(l)}for(;QM.invalidDataItems.length>0;){if(r=(o=QM.invalidDataItems[0]).dataProvider,o.isDisposed()||o.dataInvalid||r&&r.dataInvalid);else try{o.validateDataItems()}catch(l){nM(QM.invalidDataItems,o),o.raiseCriticalError(l)}nM(QM.invalidDataItems,o)}for(;QM.invalidDataRange.length>0;){var o;if(r=(o=QM.invalidDataRange[0]).dataProvider,o.isDisposed()||o.dataInvalid||r&&r.dataInvalid);else try{o.validateDataRange(),o.skipRangeEvent||o.dispatchImmediately("datarangechanged"),o.skipRangeEvent=!1}catch(l){nM(QM.invalidDataRange,o),o.raiseCriticalError(l)}nM(QM.invalidDataRange,o)}var s=[];kM(QM.invalidLayouts,(function(e){t.validateLayouts(e)})),kM(QM.invalidPositions,(function(e){t.validatePositions(e)}));var a=!1;if(e=Date.now(),kM(QM.invalidSprites,(function(n,i){for(var r=0;i.length>0;){if(t.validateLayouts(n),t.validatePositions(n),5==++r){if(Date.now()-e>t.updateStepDuration)break;r=0}var o=i[i.length-1];if(o&&!o.isDisposed()){if(o._systemCheckIfValidate())if(t.checkIfValidate2(o))try{o._systemUpdate(s)}catch(l){o.invalid=!1,nM(i,o),o.raiseCriticalError(l)}else s.push(o);else s.push(o);o.invalid=!1}nM(i,o)}QM.invalidSprites[n]=QM.invalidSprites[n].concat(s)})),kM(QM.invalidSprites,(function(t,e){e.length>0&&(a=!0)})),kM(QM.invalidDatas,(function(t,e){e.length>0&&(a=!0)})),tM(sM(this.animations),(function(t){t.update()})),kM(QM.invalidLayouts,(function(e){t.validateLayouts(e)})),kM(QM.invalidPositions,(function(e){t.validatePositions(e)})),function(){for(var t=Date.now(),e=_M.length,n=0;n<e;++n)_M.shift()(t)}(),kM(QM.invalidLayouts,(function(e){t.validateLayouts(e)})),kM(QM.invalidPositions,(function(e){t.validatePositions(e)})),QM.dispatchImmediately("exitframe"),(a||this.animations.length>0||[].length>0)&&this.requestFrame(),this.updateStepDuration<200){var u=!0;kM(QM.invalidDatas,(function(t,e){e.length>0&&(u=!1)})),kM(QM.invalidSprites,(function(t,e){e.length>0&&(u=!1)})),u&&(this.updateStepDuration=200)}}},t.prototype.checkIfValidate2=function(t){return!(t.dataItem&&t.dataItem.component&&t.dataItem.component.dataInvalid&&!t.dataItem.component.isTemplate)},t.prototype.requestFrame=function(){var t=this;this._frameRequested||(wM((function(){t.update()})),this._frameRequested=!0)},t.prototype.softInvalidate=function(t){var e=this;t.children.each((function(t){t instanceof aL&&e.softInvalidate(t),t.measureFailed&&($M(t,"Label")?t.hardInvalidate():t.invalidate(),t.measureFailed=!1)}))},t.prototype.validatePositions=function(t){for(var e=QM.invalidPositions[t];e.length>0;){var n=e[e.length-1];if(n.isDisposed())nM(e,n);else try{n._systemValidatePositions()}catch(i){n.positionInvalid=!1,nM(e,n),n.raiseCriticalError(i)}}},t.prototype.validateLayouts=function(t){for(var e=QM.invalidLayouts[t];e.length>0;){var n=e[e.length-1];if(n.isDisposed())nM(e,n);else try{n.children.each((function(t){t._systemValidateLayouts()})),n.validateLayout()}catch(i){n.layoutInvalid=!1,nM(e,n),n.raiseCriticalError(i)}}},t.prototype.log=function(t){!function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];kF.verbose&&console&&console.log.apply(console,nR(t))}(t)},Object.defineProperty(t.prototype,"isPaused",{get:function(){return this._isPaused},set:function(t){this._isPaused=t,t||(this._frameRequested=!1,this.requestFrame())},enumerable:!0,configurable:!0}),t.VERSION="4.10.8",t}()),lL=function(){function t(){}return t.prototype.parse=function(t){return[]},Object.defineProperty(t.prototype,"parsableNumbers",{get:function(){return this.options.numberFields&&this.options.numberFields.length>0},enumerable:!0,configurable:!0}),t.prototype.maybeToNumber=function(t,e){return-1!==this.options.numberFields.indexOf(t)?YN(e):e},Object.defineProperty(t.prototype,"parsableDates",{get:function(){return this.options.dateFields&&this.options.dateFields.length>0},enumerable:!0,configurable:!0}),t.prototype.maybeToDate=function(t,e){return-1!==this.options.dateFields.indexOf(t)?this.options.dateFormatter.parse(e,this.dateFormat):e},t.prototype.maybeToEmpty=function(t){return cR(t)&&""!=t||!cR(this.options.emptyAs)?t:this.options.emptyAs},Object.defineProperty(t.prototype,"dateFormatter",{get:function(){return this.options.dateFormatter||(this.options.dateFormatter=new qV,this.options.dateFormat&&(this.options.dateFormat=this.options.dateFormat)),this.options.dateFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFormat",{get:function(){return this.options.dateFormat||this.dateFormatter.inputDateFormat},enumerable:!0,configurable:!0}),t}(),hL=[",",";","\t"],cL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentType="text/csv",e.options={delimiter:"",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1},e}return Qj(e,t),e.isCSV=function(t){return!!e.getDelimiterFromData(t)},e.getDelimiterFromData=function(t){var e,n=t.split("\n"),i=n.length;return tM(hL,(function(t){for(var r=0,o=0,s=0;s<i;++s){if(!((r=n[s].split(t).length)>1)){o=0;break}if(0===o)o=r;else if(r!=o){o=0;break}}o&&(e=t)})),e},e.prototype.parse=function(t){this.options.delimiter||(this.options.delimiter=e.getDelimiterFromData(t));var n,i,r,o=this.CSVToArray(t,this.options.delimiter),s=cR(this.options.emptyAs),a=this.parsableNumbers,u=this.parsableDates,l=[],h=[];for(i=0;i<this.options.skipRows;i++)o.shift();if(this.options.useColumnNames){h=o.shift();for(var c=0;c<h.length;c++)""===(n=cR(h[c])?h[c].replace(/^\s+|\s+$/gm,""):"")&&(n="col"+c),h[c]=n}for(;r=this.options.reverse?o.pop():o.shift();)if(!this.options.skipEmpty||1!==r.length||""!==r[0]){var p={};for(i=0;i<r.length;i++)p[n=void 0===h[i]?"col"+i:h[i]]=""===r[i]?this.options.emptyAs:r[i],s&&(p[n]=this.maybeToEmpty(p[n])),a&&(p[n]=this.maybeToNumber(n,p[n])),u&&(p[n]=this.maybeToDate(n,p[n]));l.push(p)}return l},e.prototype.CSVToArray=function(t,e){e=e||",";for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),i=[[]],r=null;r=n.exec(t);){var o,s=r[1];s.length&&s!==e&&i.push([]),o=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],i[i.length-1].push(o)}return i},e}(lL),pL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentType="application/json",e.options={},e}return Qj(e,t),e.isJSON=function(t){try{return JSON.parse(t),!0}catch(e){return!1}},e.prototype.parse=function(t){var e,n=this;try{cR(JSON)&&(e=JSON.parse(t))}catch(l){return}var i=cR(this.options.emptyAs),r=this.parsableNumbers,o=this.parsableDates;if(Array.isArray(e)&&(r||o||i))for(var s=function(t,s){var a=e[t];kM(a,(function(t,e){i&&(a[t]=n.maybeToEmpty(a[t])),r&&(a[t]=n.maybeToNumber(t,a[t])),o&&(a[t]=n.maybeToDate(t,a[t]))}))},a=0,u=e.length;a<u;a++)s(a);return e},e}(lL),dL=new(function(){function t(){this.adapter=new cN(this)}return t.prototype.load=function(t){var e=JR(Array.isArray(t)?t:[t],(function(t){return t.dispatchImmediately("started"),t.dispatchImmediately("loadstarted"),$V(t.url,t,t.requestOptions)}));Promise.all(e).then((function(t){tM(t,(function(t){var e=t.target;e.dispatchImmediately("loadended"),t.error?e.events.isEnabled("error")&&e.events.dispatchImmediately("error",{type:"error",code:t.xhr.status,message:e.language.translate("Unable to load file: %1",null,e.url),target:e}):e.processData(t.response,t.type),e.dispatchImmediately("ended")}))})).catch((function(t){t.target&&(t.target.dispatchImmediately("loadended"),t.target.events.isEnabled("error")&&t.target.events.dispatchImmediately("error",{type:"error",code:t.xhr.status,message:t.target.language.translate("Unable to load file: %1",null,t.target.url),target:t.target}),t.target.dispatchImmediately("ended"))}))},t.prototype.getParserByType=function(t){return this.adapter.apply("getParserByType",{parser:null,type:t}).parser||("csv"==t||"text/csv"==t||"application/vnd.ms-excel"==t?new cL:"json"==t||"application/json"==t?new pL:void 0)},t.prototype.getParserByData=function(t,e){var n=this.adapter.apply("getParserByData",{parser:null,data:t,type:e}).parser;if(!n){if(n=this.getParserByType(e))return n;if(pL.isJSON(t))return this.getParserByType("json");if(cL.isCSV(t))return this.getParserByType("csv")}return n},t}()),fL=function(t){function e(e,n){var i=t.call(this)||this;return i.adapter=new cN(i),i._requestOptions={},i._incremental=!1,i._incrementalParams={},i._keepCount=!1,i._updateCurrentData=!1,i.showPreloader=!0,i.className="DataSource",e&&(i.url=e),n&&(i.parser="string"==typeof n?dL.getParserByType(n):n),i}return Qj(e,t),e.prototype.processData=function(t,e){if(this.dispatchImmediately("parsestarted"),this.parser||(this.parser=dL.getParserByData(t,e),this.parser)){if(this.parser.options=this.adapter.apply("parserOptions",this.parser.options),this.parser.options.dateFields=this.adapter.apply("dateFields",this.parser.options.dateFields||[]),this.parser.options.numberFields=this.adapter.apply("numberFields",this.parser.options.numberFields||[]),this.parser.options.dateFields&&!this.parser.options.dateFormatter&&(this.parser.options.dateFormatter=this.dateFormatter),this.data=this.adapter.apply("parsedData",this.parser.parse(this.adapter.apply("unparsedData",t))),!cR(this.data)&&this.events.isEnabled("parseerror")){var n={type:"parseerror",message:this.language.translate("Error parsing file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",n)}this.dispatchImmediately("parseended"),cR(this.data)&&this.dispatchImmediately("done",{data:this.data}),this.lastLoad=new Date}else{if(this.events.isEnabled("parseerror")){var i={type:"parseerror",message:this.language.translate("No parser available for file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",i)}this.dispatchImmediately("parseended")}},Object.defineProperty(e.prototype,"url",{get:function(){var t=this.disableCache?this.timestampUrl(this._url):this._url;return this.incremental&&this.component.data.length&&(t=this.addUrlParams(t,this.incrementalParams)),this.adapter.apply("url",t)},set:function(t){this._url=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestOptions",{get:function(){return this.adapter.apply("requestOptions",this._requestOptions)},set:function(t){this._requestOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._parser||(this._parser=new pL),this.adapter.apply("parser",this._parser)},set:function(t){this._parser=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reloadFrequency",{get:function(){return this.adapter.apply("reloadTimeout",this._reloadFrequency)},set:function(t){var e=this;this._reloadFrequency!=t&&(this._reloadFrequency=t,t?cR(this._reloadDisposer)||(this._reloadDisposer=this.events.on("ended",(function(t){e._reloadTimeout=setTimeout((function(){e.load()}),e.reloadFrequency)}))):cR(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incremental",{get:function(){return this.adapter.apply("incremental",this._incremental)},set:function(t){this._incremental=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incrementalParams",{get:function(){return this.adapter.apply("incrementalParams",this._incrementalParams)},set:function(t){this._incrementalParams=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepCount",{get:function(){return this.adapter.apply("keepCount",this._keepCount)},set:function(t){this._keepCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateCurrentData",{get:function(){return this.adapter.apply("updateCurrentData",this._updateCurrentData)},set:function(t){this._updateCurrentData=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this._language?this._language:this.component?(this._language=this.component.language,this._language):(this.language=new BV,this.language)},set:function(t){this._language=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.component?(this._dateFormatter=this.component.dateFormatter,this._dateFormatter):(this.dateFormatter=new qV,this.dateFormatter)},set:function(t){this._dateFormatter=t},enumerable:!0,configurable:!0}),e.prototype.timestampUrl=function(t){var e={};return e[(new Date).getTime().toString()]="",this.addUrlParams(t,e)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._reloadTimeout&&clearTimeout(this._reloadTimeout),cR(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0)},e.prototype.load=function(){this.url&&(this._reloadTimeout&&clearTimeout(this._reloadTimeout),dL.load(this))},e.prototype.addUrlParams=function(t,e){var n=t.match(/\?/)?"&":"?",i=[];return kM(e,(function(t,e){i.push(""!=e?t+"="+encodeURIComponent(e):t)})),i.length?t+n+i.join("&"):t},e.prototype.processConfig=function(e){QM.registeredClasses.json=pL,QM.registeredClasses.JSONParser=pL,QM.registeredClasses.csv=cL,QM.registeredClasses.CSVParser=cL,t.prototype.processConfig.call(this,e)},e}(xN),gL=function(t){function e(){var e=t.call(this)||this;return e._rules=new eN,e._appliedRules={},e._appliedTargets=[],e._useDefault=!0,e.adapter=new cN(e),e._enabled=!1,e._responsiveDisposers=[],e._noStates=[],e.className="Responsive",e.rules.events.on("inserted",(function(){e.checkRules()}),!0),e.rules.events.on("removed",(function(){e.checkRules()}),!0),e._disposers.push(e.rules.events),e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"component",{get:function(){return this._component},set:function(t){var e=this;t!=this._component&&(this.disposeResponsiveHandlers(),this._component=t,this._responsiveDisposers.push(pR(this.component).events.on("sizechanged",(function(){e.checkRules()}),this)),this._responsiveDisposers.push(pR(this.component).events.on("datavalidated",(function(){e._component.isReady()&&e.checkRules(!0)}),this)),this.enabled=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.adapter.apply("enabled",this._enabled)},set:function(t){this._enabled!=t&&(this._enabled=t,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useDefault",{get:function(){return this.adapter.apply("useDefault",this._useDefault)},set:function(t){this._useDefault!=t&&(this._useDefault=t,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rules",{get:function(){return this.adapter.apply("rules",this._rules)},set:function(t){this._rules=t,this._enabled=!0,this.applyRules()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultRules",{get:function(){return this.adapter.apply("defaultRules",yL)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allRules",{get:function(){var t=new eN;return this.useDefault&&t.copyFrom(this.defaultRules),t.copyFrom(this.rules),this.adapter.apply("allRules",t)},enumerable:!0,configurable:!0}),e.prototype.isApplied=function(t){var e=this._appliedRules[t];return!!cR(e)&&e},e.prototype.checkRules=function(t){var e=this;void 0===t&&(t=!1);var n=this.allRules;if(n&&0!=n.length){var i=!1,r=pR(this.component);if(VM(n.iterator(),(function(t){t.id||(t.id=QM.getUniqueId());var n=t.relevant(r);(n&&!e.isApplied(t.id)||!n&&e.isApplied(t.id))&&(i=!0),e._appliedRules[t.id]=n})),t&&(i=!0),i){if(!this.component.isReady())return r.hidden=!0,void r.events.once("ready",(function(t){t.target.show(0),e.applyRules()}));this.dispatchImmediately("ruleschanged"),this.applyRules()}}},e.prototype.applyRules=function(t){var e,n,i,r,o=this,s=cR(t)?t:pR(this.component),a=!1;if(this.enabled){var u=!1;VM(this.allRules.iterator(),(function(t){var e=o.getState(t,s);e&&(a||(-1!==$R(o._appliedTargets,s.uid)&&s.setState(o.getDefaultState(s),0),a=!0),o.isApplied(pR(t.id))&&(e.transitionDuration=0,o.setTargetState(s,e),o.dispatchImmediately("ruleapplied",{rule:t}),u=!0))})),u?(-1!==(r=(e=this._appliedTargets).indexOf(n=s.uid))&&e.splice(r,1),yR(i)?e.splice(i,0,n):e.push(n)):nM(this._appliedTargets,s.uid)}s.children&&VM(s.children.iterator(),(function(t){o.applyRules(t)}))},e.prototype.getState=function(t,e){var n="responsive-"+t.id,i=e.uid+"_"+n;if(-1===$R(this._noStates,i)){if(e.states.hasKey(n))return e.states.getKey(n);var r=t.state(e,n);return r||this._noStates.push(i),r}},e.prototype.getDefaultState=function(t){return t.states.hasKey("responsive-default")?t.states.getKey("responsive-default"):t.states.create("responsive-default")},e.prototype.setTargetState=function(t,e){var n=this,i=this.getDefaultState(t);kM(e.properties,(function(e,r){cR(i.properties[e])||(i.properties[e]=n.getValue(t,e))})),t.setState(e)},e.prototype.getValue=function(t,e){var n=t.getPropertyValue(e);return!cR(n)&&cR(t[e])&&(n=t[e]),n},e.prototype.dispose=function(){this.disposeResponsiveHandlers(),t.prototype.dispose.call(this)},e.prototype.disposeResponsiveHandlers=function(){for(var t=this._responsiveDisposers.pop();t;)t.dispose(),t=this._responsiveDisposers.pop()},e}(xN),yL=new eN;yL.events.on("inserted",(function(t){t.newValue.id=QM.getUniqueId()}));var mL=function(){function t(){}return t.widthXXS=function(e){return e.pixelWidth<=t.XXS},t.widthXS=function(e){return e.pixelWidth<=t.XS},t.widthS=function(e){return e.pixelWidth<=t.S},t.widthM=function(e){return e.pixelWidth<=t.M},t.widthL=function(e){return e.pixelWidth<=t.L},t.widthXL=function(e){return e.pixelWidth<=t.XL},t.widthXXL=function(e){return e.pixelWidth<=t.XXL},t.heightXXS=function(e){return e.pixelHeight<=t.XXS},t.heightXS=function(e){return e.pixelHeight<=t.XS},t.heightS=function(e){return e.pixelHeight<=t.S},t.heightM=function(e){return e.pixelHeight<=t.M},t.heightL=function(e){return e.pixelHeight<=t.L},t.heightXL=function(e){return e.pixelHeight<=t.XL},t.heightXXL=function(e){return e.pixelHeight<=t.XXL},t.isXXS=function(e){return e.pixelWidth<=t.XXS&&e.pixelHeight<=t.XXS},t.isXS=function(e){return e.pixelWidth<=t.XS&&e.pixelHeight<=t.XS},t.isS=function(e){return e.pixelWidth<=t.S&&e.pixelHeight<=t.S},t.isM=function(e){return e.pixelWidth<=t.M&&e.pixelHeight<=t.M},t.isL=function(e){return e.pixelWidth<=t.L&&e.pixelHeight<=t.L},t.isXL=function(e){return e.pixelWidth<=t.XL&&e.pixelHeight<=t.XL},t.isXXL=function(e){return e.pixelWidth<=t.XXL&&e.pixelHeight<=t.XXL},t.maybeXXS=function(e){return e.pixelWidth<=t.XXS||e.pixelHeight<=t.XXS},t.maybeXS=function(e){return e.pixelWidth<=t.XS||e.pixelHeight<=t.XS},t.maybeS=function(e){return e.pixelWidth<=t.S||e.pixelHeight<=t.S},t.maybeM=function(e){return e.pixelWidth<=t.M||e.pixelHeight<=t.M},t.maybeL=function(e){return e.pixelWidth<=t.L||e.pixelHeight<=t.L},t.maybeXL=function(e){return e.pixelWidth<=t.XL||e.pixelHeight<=t.XL},t.maybeXXL=function(e){return e.pixelWidth<=t.XXL||e.pixelHeight<=t.XXL},t.XXS=100,t.XS=200,t.S=300,t.M=400,t.L=600,t.XL=800,t.XXL=1e3,t}(),vL=function(t){function e(){var e=t.call(this)||this;return e._disabled=!1,e.hasProperties=!1,e.values={},e.categories={},e.dates={},e.locations={},e.workingLocations={},e.properties={},e.sprites=[],e.isTemplate=!1,e._index=null,e._visible=!0,e._hidden=!1,e._ignoreMinMax=!1,e.hasChildren={},e.isHiding=!1,e._valueAnimations={},e._locationAnimations={},e.className="DataItem",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new cN(this)),this._adapterO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.component&&null!=this._index?this._index:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new NF(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return!this._hidden&&this._visible},set:function(t){t&&(this.hidden=!1),this._visible!=t&&this.setVisibility(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return this._hidden},set:function(t){this._hidden!=t&&(this._hidden=t,t?this.setVisibility(!1):this.setVisibility(!0,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,tM(this.sprites,(function(e){e.__disabled=t}))},enumerable:!0,configurable:!0}),e.prototype.setVisibility=function(t,e){tM(this.sprites,(function(e){e.visible=t?e.defaultState.properties.visible:!!e.hiddenState&&e.hiddenState.properties.visible})),this._visible=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("visibilitychanged")&&this.events.dispatchImmediately("visibilitychanged",{type:"visibilitychanged",target:this,visible:t})},e.prototype.show=function(t,e,n){var i,r=this;if(!this.hidden)return this.setVisibility(!0,!0),this.isHiding=!1,this._hideDisposer&&this.removeDispose(this._hideDisposer),n&&tM(n,(function(n){i=r.setWorkingValue(n,r.values[n].value,t,e)})),tM(this.sprites,(function(n){var i=n.show(t);null==i||i.isFinished()||(r._disposers.push(i),null!=e&&e>0&&i.delay(e))})),i},e.prototype.dispose=function(){t.prototype.dispose.call(this),tM(this.sprites,(function(t){t.dispose()})),this.sprites=[]},e.prototype.hide=function(t,e,n,i){var r=this;if(this.isHiding=!0,tM(this.sprites,(function(n){var i=n.hide(t);null==i||i.isFinished()||(r._disposers.push(i),null!=e&&e>0&&i.delay(e))})),yR(n)&&i){var o;if(tM(i,(function(i){var s=r.setWorkingValue(i,n,t,e);s&&(o=s)})),o&&!o.isFinished())return this._hideDisposer=o.events.on("animationended",(function(){r.setVisibility(!1,!0),r.isHiding=!1})),this._disposers.push(this._hideDisposer),o;this.isHiding=!1,this.setVisibility(!1,!0)}else this.isHiding=!1,this.setVisibility(!1)},e.prototype.getDuration=function(t){if(!yR(t)){var e=this.component;e&&(t=e.interpolationDuration)}if(null!=t)return this._adapterO?this._adapterO.apply("duration",t):t},e.prototype.getValue=function(t,e){if(t&&this.component){e||(e=this.component.dataFields[t+"Show"])||(e="value");var n=this.values[t][e];return this._adapterO&&this._adapterO.isEnabled("value")?this._adapterO.apply("value",{value:n,field:t}).value:n}},e.prototype.getWorkingValue=function(t){if(t&&this.component){var e=this.component.dataFields[t+"Show"];return e||(e="workingValue"),this._adapterO?this._adapterO.apply("workingValue",{workingValue:this.values[t][e],field:t}).workingValue:this.values[t][e]}},e.prototype.getActualWorkingValue=function(t){return this.values[t].workingValue},e.prototype.setValue=function(t,e,n,i){var r=this.values[t].value,o=this.getDuration(n);r!==(e=lR(e))&&(this.values[t].value=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("valuechanged")&&this.events.dispatchImmediately("valuechanged",{type:"valuechanged",target:this,property:t}),this.component&&this.component.handleDataItemValueChange(this,t)),this.setWorkingValue(t,e,o,i)},e.prototype.setCalculatedValue=function(t,e,n){this.values[t][n]!==e&&yR(e)&&(this.values[t][n]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("calculatedvaluechanged")&&this.events.dispatchImmediately("calculatedvaluechanged",{type:"calculatedvaluechanged",target:this,property:t}),this.component&&this.component.handleDataItemCalculatedValueChange(this,t))},e.prototype.setWorkingValue=function(t,e,n,i){if(yR(this.values[t].value)){var r=this.getDuration(n),o=this.values[t].workingValue;if(null!=r&&r>0&&yR(o)&&this.component){if(o!=e){var s=this.animate({childObject:this.values[t],property:"workingValue",from:o,to:e,dummyData:t},r,this.component.interpolationEasing);return null!=i&&s.delay(i),s.events.on("animationstarted",this.handleInterpolationProgress,this),s.events.on("animationprogress",this.handleInterpolationProgress,this),s.events.on("animationended",this.handleInterpolationProgress,this),this._valueAnimations[t]=s,s}(a=this._valueAnimations[t])&&a.stop(),this.values[t].workingValue=e}else{var a;(a=this._valueAnimations[t])&&a.stop(),this.values[t].workingValue=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")&&this.events.dispatchImmediately("workingvaluechanged",{type:"workingvaluechanged",target:this,property:t}),this.component&&this.component.handleDataItemWorkingValueChange(this,t)}}},e.prototype.setLocation=function(t,e,n,i){this.locations[t]!==e&&(this.locations[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("locationchanged")&&this.events.dispatchImmediately("locationchanged",{type:"locationchanged",target:this,property:t}),this.component&&this.component.handleDataItemValueChange(this,t),this.setWorkingLocation(t,e,n,i))},e.prototype.setWorkingLocation=function(t,e,n,i){var r=this.getDuration(n),o=this.workingLocations[t];if(null!=r&&r>0&&yR(o)&&this.component){if(o!=e){var s=this.animate({childObject:this.workingLocations,property:t,from:o,to:e,dummyData:t},r,this.component.interpolationEasing);return null!=i&&s.delay(i),s.events.on("animationstarted",this.handleInterpolationProgress,this),s.events.on("animationprogress",this.handleInterpolationProgress,this),s.events.on("animationended",this.handleInterpolationProgress,this),this._locationAnimations[t]=s,s}(a=this._locationAnimations[t])&&a.stop(),this.workingLocations[t]=e}else{var a;(a=this._locationAnimations[t])&&a.stop(),this.workingLocations[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workinglocationchanged")&&this.events.dispatchImmediately("workinglocationchanged",{type:"workinglocationchanged",target:this,property:t}),this.component&&this.component.handleDataItemWorkingLocationChange(this,t)}},e.prototype.setDate=function(t,e,n){!fR(e)&&this.component&&(e=this.component.dateFormatter.parse(e)),this.dates[t]!==e&&(this.dates[t]=e,this.setValue(t,e.getTime(),n))},e.prototype.getDate=function(t){return this._adapterO?this._adapterO.apply("date",{date:this.dates[t],field:t}).date:this.dates[t]},e.prototype.setProperty=function(t,e){this.properties[t]!==e&&(this.hasProperties=!0,this.properties[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")&&this.events.dispatchImmediately("propertychanged",{type:"propertychanged",target:this,property:t,value:e}),this.component&&this.component.handleDataItemPropertyChange(this,t))},e.prototype.setCategory=function(t,e){gR(e)||(e=aR(e)),this.categories[t]!==e&&(this.categories[t]=e)},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e.dataContext&&(this.dataContext=function(t,e){return kM(t,(function(t,n){e[t]=n})),e}(e.dataContext,{})),EN(e.locations,this.locations),e._adapterO&&this.adapter.copyFrom(e._adapterO),this.component=e.component},Object.defineProperty(e.prototype,"opacity",{set:function(t){tM(this.sprites,(function(e){e.opacity=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(t){this._ignoreMinMax=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")&&this.events.dispatchImmediately("propertychanged",{type:"propertychanged",target:this,property:"ignoreMinMax",value:t}),this.component&&this.component.handleDataItemPropertyChange(this,"ignoreMinMax")},enumerable:!0,configurable:!0}),e.prototype.animate=function(t,e,n){return new FF(this,t,e,n).start()},e.prototype.handleInterpolationProgress=function(t){var e=t.target.animationOptions[0];e&&(this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")&&this.events.dispatchImmediately("workingvaluechanged",{type:"workingvaluechanged",target:this,property:e.dummyData}),this.component&&this.component.handleDataItemWorkingValueChange(this,e.dummyData))},e.prototype.hasValue=function(t){for(var e=0,n=t.length;e<n;e++){var i=this.values[t[e]];if(!i||!cR(i.value))return!1}return!0},Object.defineProperty(e.prototype,"depth",{get:function(){return this.parent?this.parent.depth+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataContext",{get:function(){return this._dataContext},set:function(t){this._dataContext=t},enumerable:!0,configurable:!0}),e.prototype.addSprite=function(t){t.dataItem&&t.dataItem!=this&&nM(t.dataItem.sprites,t),this.visible||t.hide(0),this.isHiding&&t.hide(),this.sprites.push(t),t.dataItem=this},e}(xN),bL=function(t){function e(){var e=t.call(this)||this;return e.dataFields={},e._dataSources={},e._parseDataFrom=0,e._dataDisposers=[],e._currentDataSetId="",e._start=0,e._end=1,e.skipRangeEvent=!1,e.rangeChangeDuration=0,e.rangeChangeEasing=xF,e.parsingStepDuration=50,e.dataInvalid=!1,e.rawDataInvalid=!1,e.dataRangeInvalid=!1,e.dataItemsInvalid=!1,e.interpolationDuration=0,e.interpolationEasing=xF,e.sequencedInterpolation=!0,e.sequencedInterpolationDelay=0,e.dataValidationProgress=0,e._addAllDataItems=!0,e._usesData=!0,e.className="Component",e.minZoomCount=1,e.maxZoomCount=0,e._dataItems=new oN(e.createDataItem()),e._dataItems.events.on("inserted",e.handleDataItemAdded,e,!1),e._dataItems.events.on("removed",e.handleDataItemRemoved,e,!1),e._disposers.push(new JM(e._dataItems)),e._disposers.push(e._dataItems.template),e.invalidateData(),e.dataUsers.events.on("inserted",e.handleDataUserAdded,e,!1),e._disposers.push(new dM(e._dataDisposers)),e._start=0,e._end=1,e.maxZoomDeclination=1,e.applyTheme(),e}return Qj(e,t),e.prototype.createDataItem=function(){return new vL},e.prototype.handleDataUserAdded=function(t){t.newValue.dataProvider=this},e.prototype.handleDataItemValueChange=function(t,e){this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.handleDataItemWorkingValueChange=function(t,e){},e.prototype.handleDataItemWorkingLocationChange=function(t,e){},e.prototype.handleDataItemCalculatedValueChange=function(t,e){},e.prototype.handleDataItemPropertyChange=function(t,e){},e.prototype.processDataItem=function(t,e){var n=this;if(t){e||(e={}),t.dataContext=e;var i=!1;kM(this.dataFields,(function(r,o){var s=r,a=e[o];if(n._adapterO&&n._adapterO.isEnabled("dataContextValue")&&(a=n._adapterO.apply("dataContextValue",{field:s,value:a,dataItem:t}).value),cR(a))if(i=!0,t.hasChildren[s]){var u=n.createDataItem();u.copyFrom(n.mainDataSet.template);var l=new oN(u);l.events.on("inserted",n.handleDataItemAdded,n,!1),l.events.on("removed",n.handleDataItemRemoved,n,!1),n._dataDisposers.push(new JM(l));for(var h=a.length,c=0;c<h;c++){var p=a[c],d=l.create();d.parent=t,n.processDataItem(d,p)}t[s]=l}else t[s]=a})),kM(this.propertyFields,(function(n,r){var o=n,s=e[r];cR(s)&&(i=!0,t.setProperty(o,s))})),this._addAllDataItems||i||this.mainDataSet.remove(t)}},e.prototype.updateDataItem=function(t){var e=this;if(t){var n=t.dataContext;kM(this.dataFields,(function(i,r){var o=i,s=n[r];e._adapterO&&(s=e._adapterO.apply("dataContextValue",{field:o,value:s,dataItem:t}).value),cR(s)&&(t.hasChildren[o]?t[o].each((function(t){e.updateDataItem(t)})):t[o]=s)})),kM(this.propertyFields,(function(e,i){var r=e,o=n[i];cR(o)&&t.setProperty(r,o)}))}},e.prototype.validateDataElements=function(){for(var t=this.endIndex,e=this.startIndex;e<t;e++){var n=this.dataItems.getIndex(e);n&&this.validateDataElement(n)}},e.prototype.validate=function(){this.validateDataElements(),t.prototype.validate.call(this)},e.prototype.validateDataElement=function(t){},e.prototype.addData=function(t,e,n){var i=this;if(!this.dataInvalid&&this.inited&&(this._parseDataFrom=this.data.length),n||(t instanceof Array?tM(t,(function(t){i.data.push(t)})):this.data.push(t)),this.inited)this.removeData(e,n);else if(yR(e))for(;e>0;)this.data.shift(),e--;this.invalidateData()},e.prototype.removeData=function(t,e){if(yR(t)&&t>0){for(;t>0;){var n=this.mainDataSet.getIndex(0);n&&this.mainDataSet.remove(n),this.dataUsers.each((function(t){if(!t.data||0==t.data.length){var e=t.mainDataSet.getIndex(0);e&&t.mainDataSet.remove(e)}})),e||this.data.shift(),this._parseDataFrom>0&&this._parseDataFrom--,t--}this.invalidateDataItems()}},e.prototype.invalidateData=function(){this.disabled||this.isTemplate||(QM.addToInvalidComponents(this),uL.requestFrame(),this.dataInvalid=!0,VM(this.dataUsers.iterator(),(function(t){t.invalidateDataItems()})))},e.prototype.invalidateDataUsers=function(){VM(this.dataUsers.iterator(),(function(t){t.invalidate()}))},e.prototype.invalidateDataItems=function(){this.disabled||this.isTemplate||(iM(QM.invalidDataItems,this),uL.requestFrame(),this.dataItemsInvalid=!0,VM(this.dataUsers.iterator(),(function(t){t.invalidateDataItems()})))},e.prototype.invalidateDataRange=function(){this.disabled||this.isTemplate||(this.dataRangeInvalid=!0,iM(QM.invalidDataRange,this),uL.requestFrame())},e.prototype.validateDataRange=function(){nM(QM.invalidDataRange,this),this.dataRangeInvalid=!1,this.startIndex==this._prevStartIndex&&this.endIndex==this._prevEndIndex||(this.rangeChangeUpdate(),this.appendDataItems(),this.invalidate(),this.dispatchImmediately("datarangechanged"))},e.prototype.sliceData=function(){this._workingStartIndex=this.startIndex,this._workingEndIndex=this.endIndex},e.prototype.rangeChangeUpdate=function(){this.sliceData(),this._prevStartIndex=this.startIndex,this._prevEndIndex=this.endIndex},e.prototype.appendDataItems=function(){for(var t=this.endIndex,e=this.startIndex;e<t;e++)(n=this.dataItems.getIndex(e))&&(n.__disabled=!1);for(e=0;e<this.startIndex;e++)(n=this.dataItems.getIndex(e))&&(n.__disabled=!0);for(e=this.endIndex;e<this.dataItems.length;e++){var n;(n=this.dataItems.getIndex(e))&&(n.__disabled=!0)}},e.prototype.invalidateRawData=function(){this.disabled||this.isTemplate||(iM(QM.invalidRawDatas,this),uL.requestFrame(),this.rawDataInvalid=!0,VM(this.dataUsers.iterator(),(function(t){t.invalidateRawData()})))},e.prototype.validateRawData=function(){var t=this;nM(QM.invalidRawDatas,this),VM(this.mainDataSet.iterator(),(function(e){e&&t.updateDataItem(e)}))},e.prototype.dispose=function(){var e=this;this.mainDataSet.template.clones.clear(),kM(this._dataSources,(function(t,n){e.removeDispose(n)})),t.prototype.dispose.call(this)},e.prototype.disposeData=function(){this.mainDataSet.template.clones.clear(),tM(this._dataDisposers,(function(t){t.dispose()})),VM(this.dataUsers.iterator(),(function(t){t.disposeData()})),this._dataDisposers.length=0,this._startIndex=void 0,this._endIndex=void 0,this.mainDataSet.clear(),this.mainDataSet.template.clones.clear(),this._dataSets&&this._dataSets.clear()},e.prototype.getDataItem=function(t){return this.mainDataSet.create()},e.prototype.validateData=function(){if(this.dispatchImmediately("beforedatavalidated"),this.dataInvalid=!1,QM.removeFromInvalidComponents(this),!this.__disabled){if(this.dataValidationProgress=0,this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.dataFields.data&&this.dataItem&&(this._data=this.dataItem.dataContext[this.dataFields.data]),0===this._parseDataFrom&&this.data.length>0&&this.disposeData(),this.data.length>0){var t=this.preloader;VM(this.dataUsers.iterator(),(function(t){t._startIndex=void 0,t._endIndex=void 0}));for(var e=0,n=Date.now(),i=this._parseDataFrom,r=this.data.length,o=function(){var r=s.data[i];if(s._usesData){var o=s.getDataItem(r);s.processDataItem(o,r)}if(s.dataUsers.each((function(t){if(0==t.data.length){var e=t.getDataItem(r);t.processDataItem(e,r)}})),100==++e&&(e=0,Date.now()-n>s.parsingStepDuration&&i<s.data.length-10))return s._parseDataFrom=i+1,t&&(i/s.data.length>.5&&!t.visible||(t.progress=i/s.data.length)),s.dataValidationProgress=i/s.data.length,i=s.data.length,s.invalidateData(),{value:void 0}},s=this;i<r;i++){var a=o();if("object"==typeof a)return a.value}t&&(t.progress=1),this.dataUsers.each((function(t){t.hidden&&t.hide(0)}))}this.dataValidationProgress=1,this._parseDataFrom=0,this.invalidateDataItems(),this._internalDefaultsApplied||this.applyInternalDefaults(),this.dispatch("datavalidated")}},e.prototype.validateDataItems=function(){nM(QM.invalidDataItems,this),this.dataItemsInvalid=!1,this.invalidateDataRange(),this.invalidate(),this.dispatch("dataitemsvalidated")},Object.defineProperty(e.prototype,"data",{get:function(){return this._data||(this._data=[]),this._adapterO?this._adapterO.apply("data",this._data):this._data},set:function(t){this.setData(t)},enumerable:!0,configurable:!0}),e.prototype.setData=function(t){this._parseDataFrom=0,this.disposeData(),this._data=t,t&&t.length>0?this.invalidateData():(this.dispatchImmediately("beforedatavalidated"),this.dispatch("datavalidated"))},e.prototype.getDataSource=function(t){var e=this;return cR(this._dataSources[t])||(this._dataSources[t]=new fL,this._dataSources[t].component=this,this.setDataSourceEvents(this._dataSources[t],t),this._dataSources[t].adapter.add("dateFields",(function(t){return e.dataSourceDateFields(t)})),this._dataSources[t].adapter.add("numberFields",(function(t){return e.dataSourceNumberFields(t)})),this.events.on("inited",(function(){e.loadData(t)}),this,!1)),this._dataSources[t]},Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSources.data||this.getDataSource("data"),this._dataSources.data},set:function(t){var e=this;this._dataSources.data&&this.removeDispose(this._dataSources.data),this._dataSources.data=t,this._dataSources.data.component=this,this.events.on("inited",(function(){e.loadData("data")}),this,!1),this.setDataSourceEvents(t,"data")},enumerable:!0,configurable:!0}),e.prototype.loadData=function(t){this._dataSources[t].load()},e.prototype.dataSourceDateFields=function(t){return t},e.prototype.dataSourceNumberFields=function(t){return t},e.prototype.populateDataSourceFields=function(t,e,n){return tM(n,(function(n){e[n]&&-1===$R(t,e[n])&&t.push(e[n])})),t},e.prototype.setDataSourceEvents=function(t,e){var n=this;t.events.on("started",(function(t){var e=n.preloader;e&&(e.progress=0)}),void 0,!1),t.events.on("loadstarted",(function(t){var e=n.preloader;e&&(e.progress=.25)}),void 0,!1),t.events.on("loadended",(function(t){var e=n.preloader;e&&(e.progress=.5)}),void 0,!1),t.events.on("parseended",(function(t){var e=n.preloader;e&&(e.progress=.75)}),void 0,!1),t.events.on("ended",(function(t){var e=n.preloader;e&&(e.progress=1)}),void 0,!1),t.events.on("error",(function(t){var e=n.preloader;e&&(e.progress=1),n.openModal(t.message)}),void 0,!1),e&&t.events.on("done",(function(i){var r=n.preloader;r&&(r.progress=1),"data"!=e||vR(i.data)||(i.data=[i.data]),t.incremental&&"data"==e&&n.data.length?n.addData(i.data,t.keepCount?i.data.length:0):t.updateCurrentData&&"data"==e&&n.data.length?(tM(n.data,(function(t,e){cR(i.data[e])&&kM(t,(function(n,r){cR(i.data[e][n])&&(t[n]=i.data[e][n])}))})),n.invalidateRawData()):n[e]=i.data}))},Object.defineProperty(e.prototype,"responsive",{get:function(){return this._responsive||(this._responsive=new gL,this._responsive.component=this),this._responsive},set:function(t){this._responsive=t,this._responsive.component=this},enumerable:!0,configurable:!0}),e.prototype.zoom=function(t,e,n,i){var r=this;void 0===e&&(e=!1),void 0===n&&(n=!1);var o=t.start,s=t.end,a=t.priority;if(t.start==t.end&&(t.start=t.start-.5/this.maxZoomFactor,t.end=t.end+.5/this.maxZoomFactor),"end"==a&&1==s&&0!=o&&o<this.start&&(a="start"),"start"==a&&0==o&&s>this.end&&(a="end"),yR(i)||(i=this.maxZoomDeclination),!yR(o)||!yR(s))return{start:this.start,end:this.end};if(this._finalStart!=o||this._finalEnd!=s){var u=this.maxZoomFactor/this.minZoomCount,l=this.maxZoomFactor/this.maxZoomCount;if("start"==a?(this.maxZoomCount>0&&1/(s-o)<l&&(s=o+1/l),1/(s-o)>u&&(s=o+1/u),s>1&&s-o<1/u&&(o=s-1/u)):(this.maxZoomCount>0&&1/(s-o)<l&&(o=s-1/l),1/(s-o)>u&&(o=s-1/u),o<0&&s-o<1/u&&(s=o+1/u)),o<-i&&(o=-i),1/(s-o)>u&&(s=o+1/u),s>1+i&&(s=1+i),1/(s-o)>u&&(o=s-1/u),this._finalEnd=s,this._finalStart=o,this.skipRangeEvent=e,this.dispatchImmediately("rangechangestarted"),this.rangeChangeDuration>0&&!n){var h=this.rangeChangeAnimation;if(h&&h.progress<1){var c=h.animationOptions;if(c.length>1){if(c[0].to==o&&c[1].to==s)return{start:o,end:s};h.isDisposed()||h.stop()}}this.rangeChangeAnimation&&this.rangeChangeAnimation.kill(),h=this.animate([{property:"start",to:o},{property:"end",to:s}],this.rangeChangeDuration,this.rangeChangeEasing),this.rangeChangeAnimation=h,h&&!h.isFinished()?h.events.on("animationended",(function(){r.dispatchImmediately("rangechangeended")})):this.dispatchImmediately("rangechangeended")}else this.start=o,this.end=s,this.dispatch("rangechangeended")}return{start:o,end:s}},e.prototype.zoomToIndexes=function(t,e,n,i){yR(t)&&yR(e)&&this.zoom({start:t/this.dataItems.length,end:e/this.dataItems.length},n,i)},Object.defineProperty(e.prototype,"zoomFactor",{get:function(){return OR(1/(this.end-this.start),1,this.maxZoomFactor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomFactor",{get:function(){return this.getPropertyValue("maxZoomFactor")},set:function(t){this.setPropertyValue("maxZoomFactor",t)&&(1==t&&(this.maxZoomDeclination=0),this.invalidateDataRange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomDeclination",{get:function(){return this.getPropertyValue("maxZoomDeclination")},set:function(t){this.setPropertyValue("maxZoomDeclination",t)&&this.invalidateDataRange()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return yR(this._startIndex)||(this._startIndex=0),this._startIndex},set:function(t){this._startIndex=OR(Math.round(t),0,this.dataItems.length),this.start=this.indexToPosition(this._startIndex)},enumerable:!0,configurable:!0}),e.prototype.indexToPosition=function(t){return t/this.dataItems.length},Object.defineProperty(e.prototype,"endIndex",{get:function(){var t=this.dataItems.length;return(!yR(this._endIndex)||this._endIndex>t)&&(this._endIndex=t),this._endIndex},set:function(t){this._endIndex=OR(Math.round(t),0,this.dataItems.length),this.end=this.indexToPosition(this._endIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._adapterO?this._adapterO.apply("start",this._start):this._start},set:function(t){if(this._start!=t){this._start=t;var e=Math.max(0,Math.floor(this.dataItems.length*t)||0);this._startIndex=Math.min(e,this.dataItems.length),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("startchanged"),this.dispatch("startendchanged")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._adapterO?this._adapterO.apply("end",this._end):this._end},set:function(t){this._end!=t&&(this._end=t,this._endIndex=Math.min(this.dataItems.length,Math.ceil(this.dataItems.length*t)||0),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("endchanged"),this.dispatch("startendchanged"))},enumerable:!0,configurable:!0}),e.prototype.removeFromInvalids=function(){t.prototype.removeFromInvalids.call(this),QM.removeFromInvalidComponents(this),nM(QM.invalidDataItems,this),nM(QM.invalidDataRange,this),nM(QM.invalidRawDatas,this)},Object.defineProperty(e.prototype,"dataItems",{get:function(){if(""!=this._currentDataSetId){var t=this.dataSets.getKey(this._currentDataSetId);if(t)return t}return this._dataItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSets",{get:function(){return this._dataSets||(this._dataSets=new YM),this._dataSets},enumerable:!0,configurable:!0}),e.prototype.setDataSet=function(t){if(this._currentDataSetId!=t){if(this.dataSets.getKey(t))return this.dataItems.each((function(t){t.__disabled=!0})),this._currentDataSetId=t,this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each((function(t){t.__disabled=!1})),!0;if(""!=this._currentDataSetId)return this.dataItems.each((function(t){t.__disabled=!0})),this._currentDataSetId="",this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each((function(t){t.__disabled=!1})),!0}return!1},Object.defineProperty(e.prototype,"currentDataSetId",{get:function(){return this._currentDataSetId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainDataSet",{get:function(){return this._dataItems},enumerable:!0,configurable:!0}),e.prototype._updateDataItemIndexes=function(t){for(var e=this.mainDataSet.values,n=e.length,i=t;i<n;++i)e[i]._index=i},e.prototype.handleDataItemAdded=function(t){t.newValue.component=this,this._updateDataItemIndexes(t.index),this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.handleDataItemRemoved=function(t){this._updateDataItemIndexes(t.index),this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.bindDataField=function(t,e){this.dataFields[t]=e,this.invalidateDataRange()},e.prototype.invalidateProcessedData=function(){this.resetProcessedRange(),this.invalidateDataRange()},e.prototype.resetProcessedRange=function(){this._prevEndIndex=null,this._prevStartIndex=null},Object.defineProperty(e.prototype,"dataUsers",{get:function(){var t=this;return this._dataUsers||(this._dataUsers=new eN,this._disposers.push(new pM((function(){VM(t._dataUsers.iterator(),(function(t){t.dispose()}))})))),this._dataUsers},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.dataFields=EN(this.dataFields,{}),e},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.data=e.data,this.sequencedInterpolation=e.sequencedInterpolation,this.sequencedInterpolationDelay=e.sequencedInterpolationDelay,this.interpolationDuration=e.interpolationDuration,this.interpolationEasing=e.interpolationEasing},e.prototype.reinit=function(){this._inited=!1,this.deepInvalidate()},e.prototype.getExporting=function(){var e=t.prototype.getExporting.call(this);return e.adapter.has("data",this._exportData,-1,this)||(e.adapter.add("data",this._exportData,-1,this),this.events.on("datavalidated",(function(t){e.handleDataUpdated()}))),e},e.prototype._exportData=function(t){return t.data=this.data,t},e.prototype.setDisabled=function(e){var n=t.prototype.setDisabled.call(this,e);return n&&this.invalidateData(),n},e.prototype.setShowOnInit=function(e){e!=this.getPropertyValue("showOnInit")&&(!e||this.inited||this.hidden?this._showOnInitDisposer2&&this.removeDispose(this._showOnInitDisposer2):(this._showOnInitDisposer2=this.events.once("dataitemsvalidated",this.hideInitially,this,!1),this._disposers.push(this._showOnInitDisposer2))),t.prototype.setShowOnInit.call(this,e)},e.prototype.setBaseId=function(e){e!=this._baseId&&this.dataInvalid&&(this.dataInvalid=!1,QM.removeFromInvalidComponents(this),this._baseId=e,this.invalidateData()),t.prototype.setBaseId.call(this,e)},Object.defineProperty(e.prototype,"minZoomCount",{get:function(){return this.getPropertyValue("minZoomCount")},set:function(t){this.setPropertyValue("minZoomCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomCount",{get:function(){return this.getPropertyValue("maxZoomCount")},set:function(t){this.setPropertyValue("maxZoomCount",t)},enumerable:!0,configurable:!0}),e.prototype._systemCheckIfValidate=function(){return!(this.dataInvalid||this.dataProvider&&this.dataProvider.dataInvalid)},e.prototype.asFunction=function(e){return"interpolationEasing"==e||"rangeChangeEasing"==e||t.prototype.asIs.call(this,e)},e}(aL);QM.registeredClasses.Component=bL;var _L=function(t){function e(){var e=t.call(this)||this;return e.isOversized=!1,e.className="Label",e.fill=(new rV).getFor("text"),e.wrap=!1,e.truncate=!1,e.fullWords=!0,e.ellipsis="\u2026",e.textAlign="start",e.textValign="top",e.layout="absolute",e.baseLineRatio=-.27,e._positionPrecision=1,e.events.on("maxsizechanged",(function(){e.inited&&e.handleMaxSize()}),e,!1),e.events.once("validated",e.handleValidate,e,!1),e.applyTheme(),e}return Qj(e,t),e.prototype.afterDraw=function(){t.prototype.afterDraw.call(this),this.validatePosition()},e.prototype.setPaper=function(e){var n=t.prototype.setPaper.call(this,e);return n&&this.hardInvalidate(),n},e.prototype.handleValidate=function(){!this.currentText&&!this.text||0!=this.bbox.width&&0!=this.bbox.height||QM.events.once("exitframe",this.hardInvalidate,this)},e.prototype.handleMaxSize=function(){this.bbox.width>this.availableWidth||this.bbox.width<this.availableWidth&&(this.isOversized||this.truncate)||this.bbox.height>this.availableHeight||this.bbox.height<this.availableHeight&&this.isOversized?this.invalidate():this.alignSVGText()},e.prototype.arrange=function(){},e.prototype.updateCurrentText=function(){var t,e;DN(this.html)&&this.paper.supportsForeignObject()?(t="html",e=this.html):(t="svg",e=this.text),mR(e)&&(e=e.toString()),cR(e)&&""!==e&&(e=this.populateString(e,this.dataItem)),"html"==t?this._adapterO&&(e=this._adapterO.apply("htmlOutput",e)):this._adapterO&&(e=this._adapterO.apply("textOutput",e));var n=e!=this.currentText||t!=this._currentFormat;return this.currentText=e,this._currentFormat=t,n},e.prototype.hardInvalidate=function(){this._prevStatus="",this.invalidate()},e.prototype.getLineBBox=function(t){var e=t&&t.element,n=e&&e.node;n&&n.parentNode&&(t.bbox=e.getBBox())},e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.bbox.width,n=this.bbox.height,i=this.topParent;if(!i||i.maxWidth&&i.maxHeight){var r=kR(this.availableWidth-this.pixelPaddingLeft-this.pixelPaddingRight,0),o=kR(this.availableHeight-this.pixelPaddingTop-this.pixelPaddingBottom,0),s=o+","+r+this.wrap+this.truncate+this.fullWords+this.rtl+this.ellipsis;if(this.updateCurrentText()||!this.inited||this._prevStatus!=s){this._measuredWidth=0,this._measuredHeight=0,this.isOversized=!1;var a=this._currentFormat,u=this.currentText;if(cR(u)&&""!=u){var l=u.split("\n");this._prevStatus=s,this.textAlign=this.textAlign;var h=this.group.getAttr("display");if("none"==h&&this.group.removeAttr("display"),this.textPathElement&&this.textPathElement.removeChildren(),"svg"===a){this.element.removeAttr("display");var c=this.element;this.resetBBox();for(var p=0,d="",f=0;f<l.length;f++){var g=l[f];if(""!=g){var y=WV().chunk(g,null,this.ignoreFormatting),m=0,v=!0,b=!1,_=this.getLineInfo(f);_?(_.text="",_.element.textContent=""):(_={text:"",element:this.getSVGLineElement("",0),complex:!1},c.add(_.element)),_.element.removeAttr("display"),_.element.removeChildren(),this.textPathElement&&_.element.add(this.textPathElement);for(var w=0;w<y.length;w++){w&&(_.complex=!0);var x=y[w];if("format"===x.type)d=x.text;else{if(b)continue;_.text=x.text,_.style=WV().translateStyleShortcuts(d);var P=this.getSvgElement(_.text,_.style);if(this.textPathElement?this.textPathElement.add(P):_.element.add(P),this.getLineBBox(_),_.bbox.width=Math.ceil(_.bbox.width),m<_.bbox.height&&(m=_.bbox.height),(this.wrap||this.truncate)&&_.bbox.width>r){this.isOversized=!0;var C=_.element.textContent,I=_.bbox.width/C.length,O=AR(Math.ceil((_.bbox.width-r)/I),C.length);if(this.truncate){var S=!1,T=_.element.node;if(T&&T.childNodes)for(var E=_.element.node.childNodes.length-1;E>=0;E--){var k=_.element.node.childNodes[E];if(S&&_.bbox.width<=r&&(k.textContent+=" "+this.ellipsis,_.bbox=_.element.getBBox(),_.bbox.width=Math.floor(_.bbox.width),_.bbox.width<=r))break;S=!1;var A=k.textContent;for(C=_.element.textContent,O=AR(Math.ceil((_.bbox.width-r)/I),C.length);_.bbox.width>r&&O<=C.length&&O>0;)(R=kR(C.length-O-this.ellipsis.length,1))<=1&&(O=0,E>0&&(S=!0,_.element.node.removeChild(k))),(A=LN(A,R,this.ellipsis,this.fullWords,this.rtl)).length>R&&this.fullWords&&(A=LN(A,R,this.ellipsis,!1,this.rtl)),k.textContent=A,_.bbox=_.element.getBBox(),_.bbox.width=Math.floor(_.bbox.width),O=Math.ceil(1.1*O);b=!0}}else if(_.element.node){for(var D=_.element.node.lastChild,j=void 0;_.bbox.width>r&&O<=C.length&&O>0;){var R=kR(x.text.length-O,1);v?j=VN(x.text,R,!0,this.rtl):((j=VN(x.text,R,!0,this.rtl))[0].length>R||1===R)&&(_.element.node.removeChild(D),O=0),O>0&&(D.textContent=WV().cleanUp(UN(j.shift()))),_.bbox=_.element.getBBox(),_.bbox.width=Math.floor(_.bbox.width),O=Math.ceil(1.1*O)}if(j.length>0){var M="";cR(j)&&(M+=this.rtl?j.join("")+d:d+j.join("").replace(/([\[\]]{1})/g,"$1$1"));for(var N=w+1;N<y.length;N++)M+="value"==y[N].type?y[N].text.replace(/([\[\]]{1})/g,"$1$1"):y[N].text;l.splice(f+1,0,M)}b=!0}}this.bbox.width<_.bbox.width&&(this.bbox.width=_.bbox.width),this.bbox.height=p+m,_.element.attr(this.textPathElement?{dy:-this.paddingBottom.toString()}:{x:"0",y:p+m,dy:CR(this.baseLineRatio*m,3).toString()}),v=!1}}var F=_.element.node;F&&(D=F.lastChild)&&(D.textContent=D.textContent.replace(this.rtl?/^[\s\uFEFF\xA0]+/g:/[\s\uFEFF\xA0]+$/g,"")),p+=m,this.addLineInfo(_,f)}else{var V=this.getSVGLineElement("",0);V.add(this.getSvgElement(".",WV().translateStyleShortcuts(d))),c.add(V);var L=Math.ceil(V.getBBox().height);L>0&&(p+=L),c.removeElement(V);var U=this.getLineInfo(f);U&&(U.text="",U.element.textContent="")}}this.maybeHideOversized(),this.measureFailed=!1,0!=this.bbox.width&&0!=this.bbox.height||(this.measureFailed=!0),this._measuredWidth=CR(kR(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight)),this._measuredHeight=CR(kR(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom)),this.alignSVGText(),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,n==this._measuredHeight&&e==this._measuredWidth||this.dispatch("transformed"),this.hideUnused(l.length)}else{this.element.removeAttr("display"),this.resetBBox(),(c=this.element).removeChildren();var B=this.paper.foreignObject();c.add(B),this.maxWidth&&B.attr({width:this.maxWidth}),this.maxHeight&&B.attr({height:this.maxHeight});var H=this.getHTMLLineElement(u);B.node.appendChild(H),H.style.display="inline-block";var W=H.clientWidth,z=H.clientHeight;H.style.display="block",this._bbox={x:0,y:0,width:W,height:z},B.attr({width:W,height:z}),this.maybeHideOversized(),this._measuredWidth=kR(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight),this._measuredHeight=kR(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,this.truncate&&(H.style.overflow="hidden"),(W>r||z>o)&&(this.isOversized=!0)}this.setStyles(),this.updateCenter(),this.updateBackground(),"none"==h&&this.group.attr({display:"none"}),this.pathElement&&this.paper.appendDef(this.pathElement)}else this.element.attr({display:"none"})}}else i.events.once("maxsizechanged",this.hardInvalidate,this,!1)},e.prototype.maybeHideOversized=function(){this.hideOversized&&(this.availableWidth<this.bbox.width||this.availableHeight<this.bbox.height?(this.element.attr({display:"none"}),this.isOversized=!0):(this.element.removeAttr("display"),this.isOversized=!1))},e.prototype.alignSVGText=function(){var t=this.element,e=t.node.children||t.node.childNodes;if(e&&(!e||0!=e.length)){var n=this._measuredWidth,i=this._measuredHeight;this.rtl?t.attr({direction:"rtl"}):t.removeAttr("direction");for(var r=e.length-1;r>=0;r--){var o=e[r];if(o.setAttribute("text-anchor",this.textAlign),this.textPathElement)o.removeAttribute("x"),o.removeAttribute("y");else{switch(this.textAlign){case"middle":o.setAttribute("x",(n/2).toString()+"px");break;case"end":this.rtl||o.setAttribute("x",n.toString());break;default:this.rtl?o.setAttribute("x",n.toString()):o.removeAttribute("text-anchor")}var s=lR(o.getAttribute("y"));switch(this.textValign){case"middle":o.setAttribute("y",((s||0)+(i-this.bbox.height)/2).toString());break;case"bottom":o.setAttribute("y",((s||0)+i-this.bbox.height).toString());break;default:o.setAttribute("y",(s||0).toString())}}}}},e.prototype.getSVGLineElement=function(t,e){var n=this.paper.addGroup("text");return n.textContent=t,n.attr({x:"0"}),cR(e)&&n.attr({y:e.toString()}),(this.truncate||this.wrap)&&n.attr({overflow:"hidden"}),n},Object.defineProperty(e.prototype,"rtl",{get:function(){return cR(this._rtl)?this._rtl:!!this._topParent&&this._topParent.rtl},set:function(t){t=uR(t),this._rtl=t,this.element&&this.alignSVGText()},enumerable:!0,configurable:!0}),e.prototype.resetBBox=function(){this._bbox={x:0,y:0,width:0,height:0}},e.prototype.getHTMLLineElement=function(t){var e=document.createElement("div");switch(e.innerHTML=t,this.textAlign){case"middle":e.style.textAlign="center";break;case"end":e.style.textAlign="right"}return this.wrap?e.style.wordWrap="break-word":e.style.whiteSpace="nowrap",this.rtl&&(e.style.direction="rtl"),cR(this.fill)&&(e.style.color=this.fill.toString()),e},e.prototype.setStyles=function(){var t=this.element;!this.selectable||this.draggable||this.resizable||this.swipeable?t.addStyle({webkitUserSelect:"none",msUserSelect:"none"}):this.selectable&&(t.removeStyle("webkitUserSelect"),t.removeStyle("msUserSelect"))},e.prototype.hideUnused=function(t){this.initLineCache();var e=this.getCache("lineInfo");if(e.length>=t)for(var n=t;n<e.length;n++){var i=e[n];i&&i.element&&i.element.attr({display:"none"})}},Object.defineProperty(e.prototype,"text",{get:function(){return this.getPropertyValue("text")},set:function(t){this.setPropertyValue("text",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(t){this.setPropertyValue("path",t,!0)&&(this.pathElement&&this.pathElement.dispose(),this.textPathElement&&this.textPathElement.dispose(),this.pathElement=this.paper.add("path"),this.pathElement.attr({d:t}),this.pathElement.attr({id:"text-path-"+this.uid}),this._disposers.push(this.pathElement),this.textPathElement=this.paper.addGroup("textPath"),this.textPathElement.attrNS(UF,"xlink:href","#text-path-"+this.uid),this.textPathElement.attr({path:t}),this._disposers.push(this.textPathElement),this.hardInvalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationOnPath",{get:function(){return this.getPropertyValue("locationOnPath")},set:function(t){this.setPropertyValue("locationOnPath",t),this.textPathElement&&this.textPathElement.attr({startOffset:100*t+"%"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseLineRatio",{get:function(){return this.getPropertyValue("baseLineRatio")},set:function(t){this.setPropertyValue("baseLineRatio",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrap",{get:function(){return this.getPropertyValue("wrap")},set:function(t){this.resetBBox(),this.setPropertyValue("wrap",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"truncate",{get:function(){return this.getPropertyValue("truncate")},set:function(t){this.resetBBox(),this.setPropertyValue("truncate",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullWords",{get:function(){return this.getPropertyValue("fullWords")},set:function(t){this.setPropertyValue("fullWords",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipsis",{get:function(){return this.getPropertyValue("ellipsis")},set:function(t){this.setPropertyValue("ellipsis",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this.getPropertyValue("selectable")},set:function(t){this.setPropertyValue("selectable",t,!0),this.setStyles()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this.getPropertyValue("textAlign")},set:function(t){this.setPropertyValue("textAlign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textValign",{get:function(){return this.getPropertyValue("textValign")},set:function(t){this.setPropertyValue("textValign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.getPropertyValue("html")},set:function(t){this.setPropertyValue("html",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideOversized",{get:function(){return this.getPropertyValue("hideOversized")},set:function(t){this.setPropertyValue("hideOversized",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreFormatting",{get:function(){return this.getPropertyValue("ignoreFormatting")},set:function(t){this.setPropertyValue("ignoreFormatting",t,!0)},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){},e.prototype.getLineInfo=function(t){this.initLineCache();var e=this.getCache("lineInfo");return e.length>t?e[t]:void 0},e.prototype.addLineInfo=function(t,e){this.initLineCache(),this.getCache("lineInfo")[e]=t},e.prototype.initLineCache=function(){cR(this.getCache("lineInfo"))||this.setCache("lineInfo",[],0)},e.prototype.setDataItem=function(e){this._sourceDataItemEvents&&this._sourceDataItemEvents.dispose(),e&&(this._sourceDataItemEvents=new dM([e.events.on("valuechanged",this.invalidate,this,!1),e.events.on("workingvaluechanged",this.invalidate,this,!1),e.events.on("calculatedvaluechanged",this.invalidate,this,!1),e.events.on("propertychanged",this.invalidate,this,!1)])),t.prototype.setDataItem.call(this,e)},Object.defineProperty(e.prototype,"availableWidth",{get:function(){return cR(this.maxWidth)?this.maxWidth:this.pixelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availableHeight",{get:function(){return cR(this.maxHeight)?this.maxHeight:this.pixelHeight},enumerable:!0,configurable:!0}),e.prototype.getSvgElement=function(t,e){var n=this.paper.add("tspan");return n.textContent=t,e&&n.node.setAttribute("style",e),n},e.prototype.deepInvalidate=function(){t.prototype.deepInvalidate.call(this),this.hardInvalidate()},Object.defineProperty(e.prototype,"readerTitle",{get:function(){var t=this.getPropertyValue("readerTitle");return t?this.dataItem&&(t=this.populateString(t)):t=this.populateString(qN(DN(this.html)?this.html:this.text)),t},set:function(t){t=hR(t),this.setPropertyValue("readerTitle",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),e}(aL);QM.registeredClasses.Label=_L,yL.push({relevant:mL.heightXS,state:function(t,e){if(t instanceof _L&&t.parent&&t.parent.isBaseSprite){var n=t.states.create(e);return n.properties.disabled=!0,n}return null}});var wL=function(t){function e(){var e=t.call(this)||this;return e.className="RoundedRectangle",e.element=e.paper.add("path"),e.cornerRadius(3,3,3,3),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.innerWidth,n=this.innerHeight;if(yR(e)&&yR(n)){var i=AR(e,n)/2,r=jN(this.cornerRadiusTopLeft,i),o=jN(this.cornerRadiusTopRight,i),s=jN(this.cornerRadiusBottomRight,i),a=jN(this.cornerRadiusBottomLeft,i),u=AR(Math.abs(e/2),Math.abs(n/2)),l=OR(r,0,u),h=OR(o,0,u),c=OR(s,0,u),p=OR(a,0,u);this.path="M"+l+",0 L"+(e-h)+",0 a"+h+","+h+" 0 0 1 "+h+","+h+" L"+e+","+(n-c)+" a"+c+","+c+" 0 0 1 -"+c+","+c+" L"+p+","+n+" a"+p+","+p+" 0 0 1 -"+p+",-"+p+" L0,"+l+" a"+l+","+l+" 0 0 1 "+l+",-"+l+" Z"}},e.prototype.cornerRadius=function(t,e,n,i){this.cornerRadiusTopLeft=t,this.cornerRadiusTopRight=e,this.cornerRadiusBottomLeft=n,this.cornerRadiusBottomRight=i},Object.defineProperty(e.prototype,"cornerRadiusTopLeft",{get:function(){return this.getPropertyValue("cornerRadiusTopLeft")},set:function(t){this.setPercentProperty("cornerRadiusTopLeft",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadiusTopRight",{get:function(){return this.getPropertyValue("cornerRadiusTopRight")},set:function(t){this.setPercentProperty("cornerRadiusTopRight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadiusBottomRight",{get:function(){return this.getPropertyValue("cornerRadiusBottomRight")},set:function(t){this.setPercentProperty("cornerRadiusBottomRight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadiusBottomLeft",{get:function(){return this.getPropertyValue("cornerRadiusBottomLeft")},set:function(t){this.setPercentProperty("cornerRadiusBottomLeft",t,!0)},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),e}(oL);QM.registeredClasses.RoundedRectangle=wL;var xL=function(t){function e(){var e=t.call(this)||this;e.className="Button",e.tooltipY=0,e.iconPosition="left",e.layout="horizontal",e.contentAlign="center",e.contentValign="middle",e.padding(8,16,8,16),e.setStateOnChildren=!0;var n=new rV,i=e.background;i.fill=n.getFor("secondaryButton"),i.stroke=n.getFor("secondaryButtonStroke"),i.fillOpacity=1,i.strokeOpacity=1,i.cornerRadius(3,3,3,3),e.label=new _L,e.label.fill=n.getFor("secondaryButtonText"),e.label.shouldClone=!1;var r=i.states.create("hover");r.properties.fillOpacity=1,r.properties.fill=n.getFor("secondaryButtonHover");var o=i.states.create("down");return o.transitionDuration=100,o.properties.fill=n.getFor("secondaryButtonDown"),o.properties.fillOpacity=1,e.role="button",e.focusable=!0,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){var e=this._icon;e&&(e.parent=void 0),t&&(this._icon=t,t.parent=this,t.interactionsEnabled=!1,t.shouldClone=!1,this.iconPosition=this.iconPosition,this._disposers.push(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconPosition",{get:function(){return this.getPropertyValue("iconPosition")},set:function(t){this.setPropertyValue("iconPosition",t),this.icon&&("left"==t?this.icon.toBack():this.icon.toFront())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label&&this.removeDispose(this._label),this._label=t,t&&(t.parent=this,t.interactionsEnabled=!1,this._disposers.push(this._label))},enumerable:!0,configurable:!0}),e.prototype.createBackground=function(){return new wL},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e.label&&this.label.copyFrom(e.label),e.icon&&(this.icon=e.icon.clone())},e}(aL);QM.registeredClasses.Button=xL;var PL=function(t){function e(){var e=t.call(this)||this;return e.className="Circle",e.element=e.paper.add("circle"),e.setPercentProperty("radius",rR(100)),e.setPropertyValue("horizontalCenter","middle"),e.setPropertyValue("verticalCenter","middle"),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.element.attr({r:this.pixelRadius})},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return jN(this.radius,AR(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){var t=this.pixelRadius;this._bbox={x:-t,y:-t,width:2*t,height:2*t}},e}(oL);QM.registeredClasses.Circle=PL;var CL=function(t){function e(){var e=t.call(this)||this;return e.className="Ellipse",e.element=e.paper.add("ellipse"),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.element.attr({rx:this.radius}),this.element.attr({ry:this.radiusY})},Object.defineProperty(e.prototype,"radiusY",{get:function(){return this.innerHeight/2},set:function(t){this.height=2*t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.innerWidth/2},set:function(t){this.width=2*t,this.invalidate()},enumerable:!0,configurable:!0}),e}(PL);QM.registeredClasses.Ellipse=CL;var IL=function(t){function e(){var e=t.call(this)||this;return e.className="Image",e.element=e.paper.add("image"),e.applyTheme(),e.width=50,e.height=50,e}return Qj(e,t),e.prototype.draw=function(){if(t.prototype.draw.call(this),this.href){var e=this.innerWidth,n=this.innerHeight;yR(this.widthRatio)&&(this.width=e=n*this.widthRatio),yR(this.heightRatio)&&(this.height=n=e*this.heightRatio),this.element.attr({width:e,height:n}),this.element.attrNS(UF,"xlink:href",this.href)}},Object.defineProperty(e.prototype,"href",{get:function(){return this.getPropertyValue("href")},set:function(t){this.setPropertyValue("href",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"widthRatio",{get:function(){return this.getPropertyValue("widthRatio")},set:function(t){this.setPropertyValue("widthRatio",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heightRatio",{get:function(){return this.getPropertyValue("heightRatio")},set:function(t){this.setPropertyValue("heightRatio",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bbox",{get:function(){return{x:0,y:0,width:this.pixelWidth,height:this.pixelHeight}},enumerable:!0,configurable:!0}),e}(oL);QM.registeredClasses.Image=IL;var OL=function(t){function e(){var e=t.call(this)||this;return e.className="Line",e.element=e.paper.add("line"),e.fill=bN(),e.x1=0,e.y1=0,e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.pixelPerfect=this.x1==this.x2||this.y1==this.y2,this.x1=this.x1,this.x2=this.x2,this.y1=this.y1,this.y2=this.y2},Object.defineProperty(e.prototype,"x1",{get:function(){return this.getPropertyValue("x1")},set:function(t){yR(t)||(t=0);var e=0;this.pixelPerfect&&this.stroke instanceof NV&&(e=1e-5),this.setPropertyValue("x1",t,!0),this.element.attr({x1:t+e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){var t=this.getPropertyValue("x2");return yR(t)||(t=this.pixelWidth),t},set:function(t){yR(t)||(t=0),this.setPropertyValue("x2",t,!0),this.element.attr({x2:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.getPropertyValue("y1")},set:function(t){yR(t)||(t=0);var e=0;this.pixelPerfect&&this.stroke instanceof NV&&(e=1e-5),this.setPropertyValue("y1",t,!0),this.element.attr({y1:t+e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){var t=this.getPropertyValue("y2");return yR(t)||(t=this.pixelHeight),t},set:function(t){yR(t)||(t=0),this.setPropertyValue("y2",t,!0),this.element.attr({y2:t})},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t){var e={x:this.x1,y:this.y1},n={x:this.x2,y:this.y2},i=FR(e,n,t),r=VR(e,n);return{x:i.x,y:i.y,angle:r}},e}(oL);QM.registeredClasses.Line=OL;var SL=function(t){function e(){var e=t.call(this)||this;return e.className="PointedRectangle",e.element=e.paper.add("path"),e.cornerRadius=6,e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.cornerRadius,n=this.innerWidth,i=this.innerHeight;if(n>0&&i>0){var r,o,s,a,u,l,h=this.pointerX,c=this.pointerY,p=this.pointerBaseWidth/2,d=AR(n/2,i/2),f=OR(e,0,d),g=OR(e,0,d),y=OR(e,0,d),m=OR(e,0,d),v=(h-0)*(i-0)-(c-0)*(n-0),b=(h-0)*(0-i)-(c-i)*(n-0);s=v>0&&b>0?"M"+f+",0 L"+((r=OR(h,f+p,n-p-g))-p)+",0 L"+h+","+(c=OR(c,-1/0,0))+" L"+(r+p)+",0 L"+(n-g)+",0":"M"+f+",0 L"+(n-g)+",0",u=v<0&&b<0?" L"+(n-y)+","+i+" L"+((r=OR(h,m+p,n-p-y))+p)+","+i+" L"+h+","+(c=OR(c,i,1/0))+" L"+(r-p)+","+i+" L"+m+","+i:" L"+m+","+i,l=v<0&&b>0?" L0,"+(i-m)+" L0,"+((o=OR(c,f+p,i-m-p))+p)+" L"+(h=OR(h,-1/0,0))+","+c+" L0,"+(o-p)+" L0,"+f:" L0,"+f,a=v>0&&b<0?" L"+n+","+g+" L"+n+","+((o=OR(c,g+p,i-p-y))-p)+" L"+(h=OR(h,n,1/0))+","+c+" L"+n+","+(o+p)+" L"+n+","+(i-y):" L"+n+","+(i-y),this.path=s+" a"+g+","+g+" 0 0 1 "+g+","+g+a+" a"+y+","+y+" 0 0 1 -"+y+","+y+u+" a"+m+","+m+" 0 0 1 -"+m+",-"+m+l+" a"+f+","+f+" 0 0 1 "+f+",-"+f}},Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(t){this.setPropertyValue("cornerRadius",t,!0)},enumerable:!0,configurable:!0}),e}(function(t){function e(){var e=t.call(this)||this;return e.className="PointedShape",e.pointerBaseWidth=15,e.pointerLength=10,e.pointerY=0,e.pointerX=0,e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),yR(this.pointerX)||(this.pointerX=this.pixelWidth/2),yR(this.pointerY)||(this.pointerY=this.pixelHeight+10)},Object.defineProperty(e.prototype,"pointerBaseWidth",{get:function(){return this.getPropertyValue("pointerBaseWidth")},set:function(t){this.setPropertyValue("pointerBaseWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerLength",{get:function(){return this.getPropertyValue("pointerLength")},set:function(t){this.setPropertyValue("pointerLength",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerX",{get:function(){return this.getPropertyValue("pointerX")},set:function(t){this.setPropertyValue("pointerX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerY",{get:function(){return this.getPropertyValue("pointerY")},set:function(t){this.setPropertyValue("pointerY",t,!0)},enumerable:!0,configurable:!0}),e}(oL));function TL(t){var e=kL(t[0]),n={x:0,y:0},i=kF.minPolylineStep;yR(i)||(i=.5);for(var r=0,o=t.length;r<o;r++){var s=t[r];RR(s,n)>i&&(e+=kL(s),n=s)}return e}function EL(t){return" M"+CR(t.x,4)+","+CR(t.y,4)+" "}function kL(t){return" L"+CR(t.x,4)+","+CR(t.y,4)+" "}function AL(t,e){return" Q"+CR(e.x,4)+","+CR(e.y,4)+" "+CR(t.x,4)+","+CR(t.y,4)}function DL(t,e,n){return" C"+CR(e.x,4)+","+CR(e.y,4)+" "+CR(n.x,4)+","+CR(n.y,4)+" "+CR(t.x,4)+","+CR(t.y,4)}function jL(t,e,n,i){if(0==e)return"";yR(i)||(i=n);var r="",o=",",s=Math.ceil(Math.abs(e)/180),a=1;e<0&&(a=0);var u=0,l=0,h=-ER(t)*n,c=-SR(t)*i;if(e<.5&&n>3e3)return kL({x:f=CR(ER(d=t+e)*n,4),y:g=CR(SR(d)*i,4)});for(var p=0;p<s;p++){var d,f,g;r+=" a"+n+o+i+o+0+o+0+o+a+o+(f=CR(ER(d=t+e/s*(p+1))*n+h-u,4))+o+(g=CR(SR(d)*i+c-l,4)),u=f,l=g}return r}function RL(t,e,n,i,r,o,s){if(0==e)return"";if(yR(i)||(i=0),0==n&&i<=0)return"";if(n<i){var a=n;n=i,i=a,yR(r)&&(r=r/i*n)}360==(e=AR(e,360))&&(o=0,s=0);var u=t+e,l=SR(AR(e,45)/2),h=(r=yR(r)?r:n)/n*i,c=r/n*(o=o||0),p=r/n*(s=yR(s)?s:o);o=OR(o,0,(n-i)/2),c=OR(c,0,(r-h)/2),s=OR(s,0,(n-i)/2),p=OR(p,0,(r-h)/2),o=CR(OR(o,0,n*l),4),c=CR(OR(c,0,r*l),4),s=CR(OR(s,0,i*l),4),p=CR(OR(p,0,h*l),4);var d=Math.asin(o/n/2)*xR*2,f=Math.asin(c/r/2)*xR*2;i<s&&(i=s),h<p&&(h=p);var g=Math.asin(s/i/2)*xR*2,y=Math.asin(p/h/2)*xR*2;yR(g)||(g=0),yR(y)||(y=0);var m=t+e/2,v={x:CR(ER(m)*i,4),y:SR(m)*h},b={x:ER(t)*(i+s),y:SR(t)*(h+p)},_={x:ER(t)*(n-o),y:SR(t)*(r-c)},w={x:ER(u)*(n-o),y:SR(u)*(r-c)},x={x:ER(u)*(i+s),y:SR(u)*(h+p)},P={x:ER(t+d)*n,y:SR(t+f)*r},C={x:ER(u-g)*i,y:SR(u-y)*h};s+=s*SR(g/2),p+=p*SR(y/2),g>(u-t)/2&&(C=v);var I="";return 360==e?I=EL(_):(I=EL(b),I+=kL(_),I+=ML(P,o,c,!0)),I+=jL(t+d,e-2*d,n,r),yR(i)&&0!=i?(360==e&&0==o?I+=EL(x):(I+=ML(w,o,c,!0),I+=kL(x),I+=ML(C,s,p,!0)),I+=jL(u-g,-(e-2*g),i,h),(e<360||o>0)&&(I+=ML(b,s,p,!0)),I+=kL(b)):(I+=ML(w,o,c,!0),e<360&&(I+=kL(b))),I}function ML(t,e,n,i,r,o){if(0==e)return"";var s=",";return" A"+e+s+n+s+(o=o||0)+s+ +(r=Boolean(r))+s+ +(i=Boolean(i))+s+CR(t.x,4)+s+CR(t.y,4)}function NL(t,e,n,i){return yR(n)||(n=0),yR(i)||(i=0),EL({x:n,y:i})+kL({x:n+t,y:i})+kL({x:n+t,y:i+e})+kL({x:n,y:i+e})+" Z"}function FL(t,e){var n=",",i=" L";return e?"M"+t.x+n+t.y+i+t.x+n+(t.y+t.height)+i+(t.x+t.width)+n+(t.y+t.height)+i+(t.x+t.width)+n+t.y+i+t.x+n+t.y:"M"+t.x+n+t.y+i+(t.x+t.width)+n+t.y+i+(t.x+t.width)+n+(t.y+t.height)+i+t.x+n+(t.y+t.height)+i+t.x+n+t.y}var VL=function(t){function e(){var e=t.call(this)||this;return e._distance=0,e.className="Polyline",e.element=e.paper.add("path"),e.shapeRendering="auto",e.fill=bN(),e.strokeOpacity=1,e.applyTheme(),e}return Qj(e,t),e.prototype.makePath=function(){this._distance=0;var t=this.segments;if(t&&t.length>0){for(var e="",n=0,i=t.length;n<i;n++){var r=t[n];if(r.length>0){e+=EL(r[0]);for(var o=1;o<r.length;o++){var s=r[o];e+=kL(s),this._distance+=RR(r[o-1],s)}}}this.path=e}this._realSegments=t},Object.defineProperty(e.prototype,"segments",{get:function(){return this.getPropertyValue("segments")},set:function(t){this.setPropertyValue("segments",t),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t){var e=0;t<0&&(t=Math.abs(t),e=180);var n=this._realSegments;if(n){for(var i=this.distance,r=0,o=0,s=0,a=void 0,u=void 0,l=0;l<n.length;l++){var h=n[l];if(h.length>1){for(var c=1;c<h.length;c++)if(o=r/i,s=(r+=RR(a=h[c-1],u=h[c]))/i,o<=t&&s>t){l=n.length;break}}else 1==h.length&&(a=h[0],u=h[0],o=0,s=1)}if(a&&u){var p=FR(a,u,(t-o)/(s-o));return{x:p.x,y:p.y,angle:e+VR(a,u)}}}return{x:0,y:0,angle:0}},Object.defineProperty(e.prototype,"realSegments",{get:function(){return this._realSegments},enumerable:!0,configurable:!0}),e}(oL);QM.registeredClasses.Polyline=VL;var LL=function(t){function e(){var e=t.call(this)||this;return e.className="Polyarc",e.controlPointDistance=.5,e.controlPointPosition=.5,e.applyTheme(),e}return Qj(e,t),e.prototype.makePath=function(){this._distance=0;var t=this.segments;if(t&&t.length>0){var e="";this._realSegments=[];for(var n=0,i=t.length;n<i;n++){var r=t[n],o=[];if(this._realSegments.push(o),r.length>0){e+=EL(r[0]);for(var s=1;s<r.length;s++){var a=r[s-1],u=r[s],l=RR(u,a),h=l*this.controlPointDistance,c=this.controlPointPosition,p=-VR(a,u),d={x:a.x+(u.x-a.x)*c*.5-h*SR(p),y:a.y+(u.y-a.y)*c*.5-h*ER(p)},f={x:a.x+(u.x-a.x)*c*1.5-h*SR(p),y:a.y+(u.y-a.y)*c*1.5-h*ER(p)};e+=DL(u,d,f);var g=Math.ceil(l),y=a;if(g>0)for(var m=0;m<=g;m++){var v=HR(a,u,d,f,m/g);o.push(v),this._distance+=RR(y,v),y=v}else o.push(a)}}}this.path=e}},Object.defineProperty(e.prototype,"controlPointPosition",{get:function(){return this.getPropertyValue("controlPointPosition")},set:function(t){this.setPropertyValue("controlPointPosition",t),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(t){this.setPropertyValue("controlPointDistance",t),this.makePath()},enumerable:!0,configurable:!0}),e}(VL);QM.registeredClasses.Polyarc=LL;var UL=function(t){function e(e){var n=t.call(this)||this;return n._bboxes=[],n.morphDuration=800,n.morphEasing=xF,n.morphToSingle=!0,n.scaleRatio=1,n.className="Morpher",n.morphable=e,n.applyTheme(),n}return Qj(e,t),e.prototype.morphToPolygon=function(t,e,n){var i=this.morphable.currentPoints;if(i&&t){this.sortPoints(i),this.sortPoints(t),this._morphFromPointsReal=[],this._morphToPointsReal=[],cR(e)||(e=this.morphDuration),cR(n)||(n=this.morphEasing),this._morphFromPointsReal=this.normalizePoints(t,i),this._morphToPointsReal=this.normalizePoints(i,t),this.morphable.currentPoints=this._morphFromPointsReal;var r=new FF(this,{property:"morphProgress",from:0,to:1},e,n);return this._disposers.push(r),r.start(),r}},e.prototype.normalizePoints=function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n][0],o=t[n][1],s=pR(LR(r)),a=s.x+s.width,u=s.y+s.height;if(e[n]||(e[n]=[]),r&&!e[n][0]&&(e[n][0]=[{x:a,y:u},{x:a,y:u}]),e[n][0]){e[n][0]=this.addPoints(e[n][0],r.length);for(var l=1/0,h=0,c=0;c<e[n][0].length;c++){var p=RR(e[n][0][c],r[0]);p<l&&(h=c,l=p)}var d=e[n][0].slice(0,h),f=e[n][0].slice(h);e[n][0]=f.concat(d)}o&&(e[n][1]||(e[n][1]=[{x:a,y:u},{x:a,y:u}]),e[n][1]=this.addPoints(e[n][1],o.length))}return e},e.prototype.sortPoints=function(t){t.sort((function(t,e){var n=pR(LR(t[0])),i=pR(LR(e[0]));return n.width*n.height>i.width*i.height?-1:1}));for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n][0];r&&e.push(pR(LR(r)))}return UR(e)},e.prototype.morphToCircle=function(t,e,n){var i=this.morphable.points,r=this.sortPoints(i);this._morphFromPointsReal=[],this._morphToPointsReal=[],cR(e)||(e=this.morphDuration),cR(n)||(n=this.morphEasing);for(var o=0,s=i.length;o<s;o++){var a=i[o][0],u=i[o][1];if(this._morphFromPointsReal[o]=[],this._morphToPointsReal[o]=[],a){var l=a,h=a,c=pR(LR(h));this.morphToSingle&&(c=pR(r));var p=c.x+c.width/2,d=c.y+c.height/2,f=t;yR(f)||(f=Math.min(c.width/2,c.height/2)),l=[];var g=VR({x:p,y:d},a[0]),y=100;a.length>y&&(y=a.length);for(var m=360/((y=(h=this.addPoints(a,y)).length)-1),v=0;v<y;v++){var b=m*v+g,_={x:p+f*ER(b),y:d+f*SR(b)};l[v]=_}if(u&&u.length>0)for(var w=0,x=u.length;w<x;w++)l.push({x:p,y:d});this._morphFromPointsReal[o][0]=h,this._morphToPointsReal[o][0]=l}}this.morphable.currentPoints=this._morphFromPointsReal;var P=new FF(this,{property:"morphProgress",from:0,to:1},e,n);return this._disposers.push(P),P.start(),P},e.prototype.addPoints=function(t,e){for(var n=Math.round(e/t.length),i=[],r=0,o=t.length;r<o;r++){var s,a=t[r];s=r==t.length-1?t[0]:t[r+1],i.push(a);for(var u=1;u<n;u++){var l=u/n;i.push({x:a.x+(s.x-a.x)*l,y:a.y+(s.y-a.y)*l})}i.length+t.length-r==e&&(n=0)}if(i.length<e&&t.length>0){var h=t[t.length-1];for(u=i.length;u<e;u++)i.push({x:h.x,y:h.y})}return i},e.prototype.morphToRectangle=function(t,e,n,i){var r=this.morphable.points;this.sortPoints(r),this._morphFromPointsReal=[],this._morphToPointsReal=[],cR(n)||(n=this.morphDuration),cR(i)||(i=this.morphEasing);for(var o=0,s=r.length;o<s;o++){var a=r[o][0],u=r[o][1];if(this._morphFromPointsReal[o]=[],this._morphToPointsReal[o]=[],a){var l=a,h=a,c=this._bboxes[o],p=c.x,d=c.y,f=t,g=e;if(yR(f)||(f=c.width),yR(g)||(g=c.height),l=this.addPoints(l=[{x:p,y:d},{x:p+f,y:d},{x:p+f,y:d+g},{x:p,y:d+g}],a.length),a.length<4)for(var y=a.length;y<4;y++)l.push({x:a[y].x,y:a[y].y});if(u&&u.length>0)for(var m=c.x+c.width/2,v=c.y+c.height/2,b=0,_=u.length;b<_;b++)l.push({x:m,y:v});this._morphFromPointsReal[o][0]=h,this._morphToPointsReal[o][0]=l}}this.morphable.currentPoints=this._morphFromPointsReal;var w=new FF(this,{property:"morphProgress",from:0,to:1},n,i);return this._disposers.push(w),w.start(),w},Object.defineProperty(e.prototype,"morphProgress",{get:function(){return this._morphProgress},set:function(t){this._morphProgress=t;var e=[];if(null!=t){var n=this._morphFromPointsReal,i=this._morphToPointsReal;if(null!=n&&null!=i)for(var r=0,o=n.length;r<o;r++){var s=[];e.push(s);var a=n[r][0],u=n[r][1],l=i[r][0],h=i[r][1];if(a&&a.length>0&&l&&l.length>0){for(var c=[],p=0,d=a.length;p<d;p++)c.push({x:(m=a[p]).x+((v=l[p]).x*this.scaleRatio-m.x)*t,y:m.y+(v.y*this.scaleRatio-m.y)*t});s[0]=c}if(u&&u.length>0&&h&&h.length>0){for(var f=[],g=0,y=u.length;g<y;g++){var m,v;f.push({x:(m=u[g]).x+((v=h[g]).x*this.scaleRatio-m.x)*t,y:m.y+(v.y*this.scaleRatio-m.y)*t})}s[1]=f}}}this.morphable.currentPoints=e},enumerable:!0,configurable:!0}),e.prototype.morphBack=function(t,e){this._morphToPointsReal=this._morphFromPointsReal,this._morphFromPointsReal=this.morphable.currentPoints,cR(t)||(t=this.morphDuration),cR(e)||(e=this.morphEasing);var n=new FF(this,{property:"morphProgress",from:0,to:1},t,e);return this._disposers.push(n),n.start(),n},Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new NF(this._animations))),this._animations},enumerable:!0,configurable:!0}),e}(wN),BL=function(t){function e(){var e=t.call(this)||this;return e.className="Polygon",e.element=e.paper.add("path"),e.shapeRendering="auto",e._currentPoints=[],e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"points",{get:function(){var t=this.getPropertyValue("points"),e=this.path;if(e&&(!t||0==t.length)){for(var n=e.slice(1,e.length-1).split("ZM"),i=0;i<n.length;i++){var r=n[i];if(r.length>0){var o=r.split("M"),s=o[0],a=o[1];if(s&&s.length>0){var u=s.split("L");if(u.length>0){var l=[],h=[l];t.push(h);for(var c=0;c<u.length;c++){var p=u[c].split(",");l.push({x:+p[0],y:+p[1]})}if(a&&a.length>0){var d=a.split("L");if(d.length>0){var f=[];for(h.push(f),c=d.length-1;c>=0;c--)p=d[c].split(","),f.push({x:+p[0],y:+p[1]})}}}}}}this.setPropertyValue("points",t),this._currentPoints=t}return t},set:function(t){this.setPropertyValue("points",t,!0),this._currentPoints=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentPoints",{get:function(){return this._currentPoints&&0!=this._currentPoints.length||!this.path||(this._currentPoints=this.points),this._currentPoints},set:function(t){this._currentPoints!=t&&(this._currentPoints=t,this.draw())},enumerable:!0,configurable:!0}),e.prototype.draw=function(){var e,n,i,r,o="",s=this._currentPoints;if(s.length>0){for(var a=0,u=s.length;a<u;a++){var l=s[a][0],h=s[a][1];if(l&&l.length>0){o+=EL(p=l[0]);for(var c=0;c<l.length;c++)o+=kL(p=l[c]),(!yR(n)||n<p.x)&&(n=p.x),(!yR(e)||e>p.x)&&(e=p.x),(!yR(i)||i>p.y)&&(i=p.y),(!yR(r)||r<p.y)&&(r=p.y)}if(h&&h.length>0){var p;o+=EL(p=h[0]);for(var d=0,f=h.length;d<f;d++)o+=kL(p=h[d])}}o&&(o+=" Z"),this.bbox.x=e,this.bbox.y=i,this.bbox.width=n-e,this.bbox.height=r-i,t.prototype.setPath.call(this,o)}},e.prototype.setPath=function(e){return!!t.prototype.setPath.call(this,e)&&(this.points=[],this._bbox=this.group.getBBox(),!0)},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"centerPoint",{get:function(){return{x:this.bbox.x+this.bbox.width/2,y:this.bbox.y+this.bbox.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"morpher",{get:function(){return this._morpher||(this._morpher=new UL(this),this._disposers.push(this._morpher)),this._morpher},enumerable:!0,configurable:!0}),e}(oL);QM.registeredClasses.Polygon=BL;var HL=function(t){function e(){var e=t.call(this)||this;return e.className="Polyspline",e.tensionX=.5,e.tensionY=.5,e.applyTheme(),e}return Qj(e,t),e.prototype.makePath=function(){this._distance=0;var t=this.segments,e=this.tensionX,n=this.tensionY;if(this.allPoints=[],t&&t.length>0){var i="";this._realSegments=[];for(var r=0,o=t.length;r<o;r++){var s=t[r],a=[];if(this._realSegments.push(a),s.length>0){var u=s[0],l=s[s.length-1],h=!1;CR(u.x,3)==CR(l.x)&&CR(u.y)==CR(l.y)&&(h=!0),i+=EL(s[0]);for(var c=0;c<s.length-1;c++){var p=s[c-1],d=s[c],f=s[c+1],g=s[c+2];0===c?p=s[c]:c==s.length-2&&(g=s[c+1]),g||(g=f),0===c?p=h?s[s.length-2]:s[r]:c==s.length-2&&(g=h?s[1]:s[c+1]);var y=WR(p,d,f,0,e,n),m=zR(0,d,f,g,e,n);i+=DL(f,y,m);var v=1.2*Math.ceil(MR(d,f,y,m,20)),b=d;if(v>0)for(var _=0;_<=v;_++){var w=HR(d,f,y,m,_/v);if(w.x!=b.x||w.y!=b.y){a.push(w);var x=CR(VR(b,w),5);this._distance+=RR(b,w),this.allPoints[Math.floor(this._distance)]={x:w.x,y:w.y,angle:x},b=w}}else a.push(p)}}var P=this.allPoints;if(P.length>1)for(var C=0;C<P.length;C++)if(!P[C])if(C>1)P[C]=P[C-1];else for(var I=1;I<P.length;I++)if(P[I]){P[C]=P[I];break}}this.path=i}},e.prototype.getClosestPointIndex=function(t){var e,n=this.allPoints,i=1/0;if(n.length>1)for(var r=1;r<n.length;r++){var o=RR(t,n[r]);o<i&&(e=r,i=o)}return e},Object.defineProperty(e.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(t){this.setPropertyValue("tensionX",t),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(t){this.setPropertyValue("tensionY",t,!0),this.makePath()},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){var n=0,i=this.allPoints,r=i.length;if(yR(t)||(t=0),r>1){if(e&&r>3){var o,s,a,u;if(t<0)return t<-.01&&(t=-.01),{x:a=(o=i[0]).x-(o.x-(s=i[1]).x)*r*t,y:u=o.y-(o.y-s.y)*r*t,angle:VR(o,s)};if(t>1)return t>1.01&&(t=1.01),{x:a=(o=i[i.length-2]).x+(o.x-(s=i[i.length-3]).x)*r*(t-1),y:u=o.y+(o.y-s.y)*r*(t-1),angle:VR(o,{x:a,y:u})};if(1==t){var l=i[i.length-1];return{x:l.x,y:l.y,angle:l.angle}}}else t<0&&(t=Math.abs(t),n=180),t>=1&&(t=.9999999999999);var h;return{x:(h=i[Math.floor(t*r)]).x,y:h.y,angle:h.angle+n}}return 1==r?{x:(h=i[0]).x,y:h.y,angle:h.angle}:{x:0,y:0,angle:0}},e}(VL);QM.registeredClasses.Polyspline=HL;var WL=function(t){function e(){var e=t.call(this)||this;return e.className="Slice",e.setPropertyValue("cornerRadius",0),e.setPropertyValue("startAngle",0),e.setPercentProperty("innerRadius",0),e.setPercentProperty("radius",0),e.setPropertyValue("arc",0),e.setPropertyValue("shiftRadius",0),e.strokeOpacity=1,e.setPropertyValue("layout","none"),e.slice=e.createChild(oL),e.slice.isMeasured=!1,e._disposers.push(e.slice),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.radiusY;this.radius>0&&0==e&&(e=.01),this.slice.path=RL(this.startAngle,this.arc,this.radius,this.pixelInnerRadius,e,this.cornerRadius,this.innerCornerRadius),this.slice.invalidate(),this.shiftRadius=this.shiftRadius,this.realFill instanceof FV&&this.updateGradient(this.realFill),this.realStroke instanceof FV&&this.updateGradient(this.realStroke)},e.prototype.updateGradient=function(t){t.element.attr({gradientUnits:"userSpaceOnUse"}),t.element.attr({r:this.radius}),t.cx=0,t.cy=0,t.element.attr({radius:this.radius})},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?UR([KR(this.startAngle,this.startAngle+this.arc,this.pixelInnerRadius),KR(this.startAngle,this.startAngle+this.arc,this.radius)]):{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",GR(t),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(t){yR(t)||(t=0),this.setPropertyValue("arc",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){var t=this.getPropertyValue("radius");return yR(t)||(t=0),t},set:function(t){this.setPropertyValue("radius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radiusY",{get:function(){var t=this.getPropertyValue("radiusY");return yR(t)||(t=this.radius),t},set:function(t){this.setPropertyValue("radiusY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return jN(this.innerRadius,this.radius)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(t){this.setPropertyValue("cornerRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerCornerRadius",{get:function(){return this.getPropertyValue("innerCornerRadius")},set:function(t){this.setPropertyValue("innerCornerRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shiftRadius",{get:function(){return this.getPropertyValue("shiftRadius")},set:function(t){this.setPropertyValue("shiftRadius",t),this.dx=t*this.radius*this.ix,this.dy=t*this.radiusY*this.iy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ix",{get:function(){return ER(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iy",{get:function(){return SR(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleAngle",{get:function(){return this.startAngle+this.arc/2},enumerable:!0,configurable:!0}),e.prototype.getTooltipX=function(){var t=this.getPropertyValue("tooltipX");if(yR(t))return t;var e=.5;t instanceof iR&&(e=t.value);var n=jN(this.innerRadius,this.radius);return this.ix*(n+(this.radius-n)*e)},e.prototype.getTooltipY=function(){var t=this.getPropertyValue("tooltipY");if(yR(t))return t;var e=.5;t instanceof iR&&(e=t.value);var n=jN(this.innerRadius,this.radius);return this.iy*(n+(this.radius-n)*e)+this.slice.dy},e}(aL);QM.registeredClasses.Slice=WL;var zL=function(t){function e(){var e=t.call(this)||this;e.className="Preloader",e.width=rR(100),e.height=rR(100);var n=new rV,i=e.createChild(aL);i.shouldClone=!1;var r=i.createChild(WL);r.shouldClone=!1,r.radius=53,r.arc=360,r.fill=n.getFor("fill"),r.fillOpacity=.8,r.innerRadius=42,r.isMeasured=!1,e.backgroundSlice=r;var o=i.createChild(WL);o.shouldClone=!1,o.radius=50,o.innerRadius=45,o.fill=n.getFor("alternativeBackground"),o.fillOpacity=.2,o.isMeasured=!1,e.progressSlice=o;var s=i.createChild(_L);return s.shouldClone=!1,s.horizontalCenter="middle",s.verticalCenter="middle",s.isMeasured=!1,s.fill=n.getFor("text"),s.align="center",s.valign="middle",s.textAlign="middle",s.fillOpacity=.4,e.label=s,e.background.opacity=1,e.background.fill=n.getFor("background"),e.contentAlign="center",e.contentValign="middle",e.delay=300,e.states.create("hidden").properties.opacity=0,e.visible=!1,e.hide(0),e.__disabled=!0,e._disposers.push(e.backgroundSlice),e._disposers.push(e.progressSlice),e._disposers.push(e.label),e._disposers.push(i),e}return Qj(e,t),Object.defineProperty(e.prototype,"progress",{get:function(){return this.getPropertyValue("progress")},set:function(t){var e=this;this.__disabled=!1,this.validateLayout(),this.setPropertyValue("progress",t),this.progressSlice.arc=360*t,this.label&&(this.label.text=Math.round(100*t)+"%"),t>=1?(this._started&&(this._started=void 0),QM.events.once("enterframe",(function(){var t=e.hide();t&&!t.isFinished()?t.events.once("animationended",(function(){e.__disabled=!0})):e.__disabled=!0})),this.interactionsEnabled=!1,this.setPropertyValue("progress",0)):t>0&&(this.delay?this._started?this._started+this.delay<=(new Date).getTime()&&(this.__disabled=!1,this.show(),this.interactionsEnabled=!0):this._started=(new Date).getTime():(this.__disabled=!1,this.show(),this.interactionsEnabled=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this.getPropertyValue("delay")},set:function(t){this.setPropertyValue("delay",t)},enumerable:!0,configurable:!0}),e}(aL);QM.registeredClasses.Preloader=zL;var qL=function(t){function e(){var e=t.call(this)||this;e.className="ResizeButton",e.orientation="horizontal",e.layout="absolute",e.horizontalCenter="middle",e.verticalCenter="middle",e.draggable=!0,e.padding(8,8,8,8),e.background.cornerRadius(20,20,20,20);var n=new oL;n.element=e.paper.add("path");var i=EL({x:-2,y:-6});return i+=kL({x:-2,y:6}),i+=EL({x:2,y:-6}),i+=kL({x:2,y:6}),n.path=i,n.pixelPerfect=!0,n.padding(0,4,0,4),n.stroke=(new rV).getFor("alternativeText"),n.strokeOpacity=.7,e.icon=n,e.label.dispose(),e.label=void 0,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"orientation",{set:function(t){var e=this.icon;e&&(e.rotation="horizontal"==t?0:-90)},enumerable:!0,configurable:!0}),e}(xL);QM.registeredClasses.ResizeButton=qL;var GL=function(t){function e(){var e=t.call(this)||this;e.className="CloseButton",e.padding(8,8,8,8),e.showSystemTooltip=!0,e.width=30,e.height=30;var n=new rV;e.cursorOverStyle=LV.pointer;var i=e.background;i.cornerRadius(20,20,20,20);var r=n.getFor("background");i.fill=r,i.stroke=n.getFor("primaryButton"),i.strokeOpacity=1,i.strokeWidth=1;var o=n.getFor("primaryButtonActive"),s=i.states.getKey("hover");s.properties.strokeWidth=3,s.properties.fill=r;var a=i.states.getKey("down");a.properties.stroke=o,a.properties.fill=r;var u=new oL;return u.element=e.paper.add("path"),u.stroke=i.stroke,e.icon=u,e.applyTheme(),e}return Qj(e,t),e.prototype.validate=function(){t.prototype.validate.call(this);var e=this.pixelWidth/3,n=this.pixelHeight/3,i=EL({x:-e/2,y:-n/2});i+=kL({x:e/2,y:n/2}),i+=EL({x:e/2,y:-n/2}),i+=kL({x:-e/2,y:n/2}),this.icon.path=i,this.invalidateLayout()},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Close"))},e}(xL);QM.registeredClasses.CloseButton=GL;var YL=function(t){function e(){var e=t.call(this)||this;e.className="SwitchButton",e.tooltipY=0,e.layout="horizontal",e.contentAlign="center",e.contentValign="middle",e.padding(8,16,8,16),e.setStateOnChildren=!0,e.states.create("active");var n=new rV,i=new _L;i.fillOpacity=.3,i.states.create("active").properties.fillOpacity=1,i.isActive=!0,e.leftLabel=i;var r=new xL,o=new PL;r.contentValign="none",r.padding(0,0,0,0),o.radius=10,r.icon=o,r.icon.valign="middle",r.label=void 0;var s=rR(100);r.background.cornerRadius(s,s,s,s),r.width=3.5*o.radius,r.height=2.1*o.radius,r.marginLeft=8,r.marginRight=8,r.togglable=!0,o.dx=.7*-o.radius,o.fill=n.getFor("primaryButton"),o.states.create("hover").properties.fill=n.getFor("primaryButtonHover");var a=o.states.create("active");a.properties.fill=n.getFor("primaryButtonActive"),a.properties.dx=.7*o.radius,e.switchButton=r,e.events.on("toggled",(function(){e.leftLabel.isActive=!e.isActive,e.rightLabel.isActive=e.isActive}));var u=new _L;return u.fillOpacity=.3,u.states.create("active").properties.fillOpacity=1,e.rightLabel=u,e.role="button",e.focusable=!0,u.valign="middle",i.valign="middle",r.valign="middle",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"leftLabel",{get:function(){return this._leftLabel},set:function(t){this._leftLabel&&this.removeDispose(this._leftLabel),this._leftLabel=t,t&&(t.parent=this,t.interactionsEnabled=!1,t.shouldClone=!1,this._disposers.push(this._leftLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightLabel",{get:function(){return this._rightLabel},set:function(t){this._rightLabel&&this.removeDispose(this._rightLabel),this._rightLabel=t,t&&(t.parent=this,t.interactionsEnabled=!1,t.shouldClone=!1,this._disposers.push(this._rightLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"switch",{get:function(){return this._switchButton},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"switchButton",{set:function(t){this._switchButton&&this.removeDispose(this._switchButton),this._switchButton=t,t&&(t.parent=this,t.shouldClone=!1,this._disposers.push(this._switchButton))},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e.leftLabel&&this.leftLabel.copyFrom(e.leftLabel),e.rightLabel&&this.rightLabel.copyFrom(e.rightLabel),e.switchButton&&this.switchButton.copyFrom(e.switchButton)},e}(aL);QM.registeredClasses.SwitchButton=YL;var KL=function(t){function e(){var e=t.call(this)||this;e._previousStart=0,e._previousEnd=1,e._prevStart=0,e._prevEnd=1,e._isBusy=!1,e._skipRangeEvents=!1,e.updateWhileMoving=!0,e.className="Scrollbar",e.minHeight=12,e.minWidth=12,e.animationDuration=0,e.animationEasing=xF,e.margin(10,10,10,10);var n=new rV,i=e.background;return i.cornerRadius(10,10,10,10),i.fill=n.getFor("fill"),i.fillOpacity=.5,e.showSystemTooltip=!0,e.startGrip=new qL,e.endGrip=new qL,e.events.on("transformed",e.updateThumb,e,!1),e.start=0,e.end=1,e.role="scrollbar",e.thumb.role="slider",e.thumb.readerLive="polite",e.startGrip.role="slider",e.endGrip.role="slider",e.events.once("inited",(function(){e._previousStart=void 0,e.dispatchRangeChange()}),void 0,!1),e.hideGrips=!1,e.orientation="horizontal",e.setSVGAttribute({"aria-valuemin":"0"}),e.setSVGAttribute({"aria-valuemax":"100"}),e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),"horizontal"===this.orientation?(cR(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB to select grip buttons or left and right arrows to change selection")),cR(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use left and right arrows to move selection")),cR(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use left and right arrows to move left selection")),cR(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use left and right arrows to move right selection")),this.readerOrientation="horizontal"):(cR(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB select grip buttons or up and down arrows to change selection")),cR(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use up and down arrows to move selection")),cR(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use up and down arrows to move upper selection")),cR(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use up and down arrows to move lower selection")),this.readerOrientation="vertical"),this.readerControls=this.baseSprite.uidAttr()},e.prototype.validateLayout=function(){this.updateSize(),t.prototype.validateLayout.call(this),this.updateExtremes()},e.prototype.processBackground=function(){t.prototype.processBackground.call(this);var e=this.background;e.clickable=!0,e.events.on("hit",this.handleBgHit,this,void 0)},e.prototype.handleBgHit=function(t){this.makeBusy();var e=t.spritePoint;e=iF(e,this.background,this);var n=this.thumb;if("horizontal"==this.orientation){var i=e.x-n.pixelWidth/2;i=OR(i,0,this.innerWidth-n.pixelWidth),this._thumbAnimation=n.animate({property:"x",to:i},this.animationDuration,this.animationEasing)}else{var r=e.y-n.pixelHeight/2;r=OR(r,0,this.innerHeight-n.pixelHeight),this._thumbAnimation=n.animate({property:"y",to:r},this.animationDuration,this.animationEasing)}this.animationDuration>0?this._thumbAnimation.events.on("animationended",this.makeUnbusy,this,!1):(this._thumb.validate(),this.makeUnbusy())},e.prototype.makeBusy=function(){this._isBusy=!0,this._skipRangeEvents=!1,this._unbusyTimeout&&this.removeDispose(this._unbusyTimeout),this._unbusyTimeout=void 0,this.stopAnimations()},e.prototype.stopAnimations=function(){this._thumbAnimation&&this._thumbAnimation.stop(!0),this._zoomAnimation&&this._zoomAnimation.stop(!0)},e.prototype.makeUnbusy=function(){this._unbusyTimeout=this.setTimeout(this.makeUnbusyReal.bind(this),1.1*this.animationDuration)},e.prototype.makeUnbusyReal=function(){this._usingGrip=void 0,this._isBusy=!1,this.updateWhileMoving||this.dispatchRangeChange()},e.prototype.dispatchRangeChange=function(){this._previousEnd==this.end&&this._previousStart==this.start||(this._previousStart=this.start,this._previousEnd=this.end,this.dispatch("rangechanged"))},e.prototype.updateThumb=function(){if(this.parent){var t=this.thumb,e=this.start,n=this.end,i=this.startGrip,r=this.endGrip;if("horizontal"==this.orientation){var o=this.innerWidth;t.width=o*(n-e),t.maxX=o-t.pixelWidth,t.x=e*o,i.moveTo({x:t.pixelX,y:0},void 0,void 0,!0),r.moveTo({x:t.pixelX+t.pixelWidth,y:0},void 0,void 0,!0),i.readerTitle=this.language.translate("From %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*e)+"%",position:e}).value),i.readerValueNow=""+Math.round(100*e),i.readerValueText=i.readerTitle,r.readerTitle=this.language.translate("To %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*n)+"%",position:n}).value),r.readerValueNow=""+Math.round(100*n),r.readerValueText=r.readerTitle}else{var s=this.innerHeight;t.height=s*(n-e),t.maxY=s-t.pixelHeight,t.y=(1-n)*s,i.moveTo({x:0,y:t.pixelY+t.pixelHeight},void 0,void 0,!0),r.moveTo({x:0,y:t.pixelY},void 0,void 0,!0),i.readerTitle=this.language.translate("To %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*(1-e))+"%",position:1-e}).value),i.readerValueNow=""+Math.round(100*e),i.readerValueText=i.readerTitle,r.readerTitle=this.language.translate("From %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*(1-n))+"%",position:1-n}).value),r.readerValueNow=""+Math.round(100*n),r.readerValueText=r.readerTitle}t.readerTitle=this.language.translate("From %1 to %2",void 0,this.adapter.apply("positionValue",{value:Math.round(100*e)+"%",position:e}).value,this.adapter.apply("positionValue",{value:Math.round(100*n)+"%",position:n}).value),t.readerValueNow=""+Math.round(100*e),t.readerValueText=t.readerTitle,this.readerValueNow=""+Math.round(100*e),this.readerValueText=t.readerTitle,!this._skipRangeEvents&&this.updateWhileMoving&&this.dispatchRangeChange()}},e.prototype.updateExtremes=function(){var t=0,e=0,n=0,i=0;"horizontal"==this.orientation?(n=this.innerWidth,e=i=this.innerHeight/2):(i=this.innerHeight,t=n=this.innerWidth/2);var r=this.startGrip;r.minX=t,r.maxX=n,r.minY=e,r.maxY=i;var o=this.endGrip;o.minX=t,o.maxX=n,o.minY=e,o.maxY=i;var s=this.thumb;s.minX=t,s.maxX=n,s.minY=e,s.maxY=i},e.prototype.updateSize=function(){var t=this.orientation,e=this.startGrip;e&&(e.orientation=t),this.endGrip&&(this.endGrip.orientation=t);var n=this.thumb;n&&("horizontal"==t?(yR(this._pixelWidth)||this.width instanceof iR||(this.width=rR(100)),cR(this.percentHeight)&&(this.height=this.minHeight),n.height=this.innerHeight,n.verticalCenter="middle",n.horizontalCenter="left"):(yR(this._pixelHeight)||this.height instanceof iR||(this.height=rR(100)),cR(this.percentWidth)&&(this.width=this.minWidth),n.width=this.innerWidth,n.verticalCenter="top",n.horizontalCenter="middle"))},Object.defineProperty(e.prototype,"isBusy",{get:function(){return this._isBusy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return Math.min(this.getPosition(this._start),this.getPosition(this._end))},set:function(t){this._isBusy||(this.__start=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__start",{get:function(){return this._start},set:function(t){this._start=this.getPosition(t),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return Math.max(this.getPosition(this._start),this.getPosition(this._end))},set:function(t){this._isBusy||(this.__end=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__end",{get:function(){return this._end},set:function(t){this._end=this.getPosition(t),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return{start:this.start,end:this.end,priority:this._usingGrip}},enumerable:!0,configurable:!0}),e.prototype.skipRangeEvents=function(){this._isBusy||(this._skipRangeEvents=!0)},e.prototype.fixRange=function(t){t.start==CR(this._start,2)&&t.end==CR(this._end,2)||(this._start=t.start,this._end=t.end,this._skipRangeEvents=!0,this.updateThumb(),this._skipRangeEvents=!1,this.thumb.validate(),this.thumb.background.validate())},e.prototype.getPosition=function(t){return OR(CR(t,4),0,1)},Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t)&&("horizontal"===t?(this.startGrip.cursorOverStyle=LV.horizontalResize,this.endGrip.cursorOverStyle=LV.horizontalResize):(this.startGrip.cursorOverStyle=LV.verticalResize,this.endGrip.cursorOverStyle=LV.verticalResize),this.updateByOrientation(),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.updateByOrientation=function(){},Object.defineProperty(e.prototype,"startGrip",{get:function(){return this._startGrip},set:function(t){this._startGrip&&this.removeDispose(this._startGrip),this._startGrip=t,this.processGrip(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endGrip",{get:function(){return this._endGrip},set:function(t){this._endGrip&&this.removeDispose(this._endGrip),this._endGrip=t,this.processGrip(t)},enumerable:!0,configurable:!0}),e.prototype.processGrip=function(t){t.parent=this,t.isMeasured=!1,t.focusable=!0,t.shouldClone=!1,t.zIndex=100,t.events.on("drag",this.handleGripDrag,this,!1),t.events.on("dragstop",this.makeUnbusy,this,!1),t.events.on("down",this.makeBusy,this,!1),this._disposers.push(t)},e.prototype.handleGripDrag=function(t){this.makeBusy(),this._usingGrip=t.target===this._startGrip?"start":"end","horizontal"==this.orientation?(this._start=this.startGrip.pixelX/this.innerWidth,this._end=this.endGrip.pixelX/this.innerWidth):(this._start=1-this.startGrip.pixelY/this.innerHeight,this._end=1-this.endGrip.pixelY/this.innerHeight),this.updateThumb()},Object.defineProperty(e.prototype,"thumb",{get:function(){if(!this._thumb){var t=new xL;t.background.cornerRadius(10,10,10,10),t.padding(0,0,0,0),this.thumb=t}return this._thumb},set:function(t){var e=this;t&&(this._thumb&&this.removeDispose(this._thumb),this._thumb=t,t.parent=this,t.isMeasured=!1,t.inert=!0,t.draggable=!0,t.clickable=!0,t.hoverable=!0,t.focusable=!0,t.shouldClone=!1,t.zIndex=0,t.cursorOverStyle=LV.grab,t.cursorDownStyle=LV.grabbing,t.events.on("dragstart",this.makeBusy,this,!1),t.events.on("dragstop",this.makeUnbusy,this,!1),t.events.on("positionchanged",this.handleThumbPosition,this,!1),t.events.on("sizechanged",this.handleThumbPosition,this,!1),t.events.on("doublehit",this.handleDoubleClick,this,!1),this._disposers.push(xV().body.events.on("keyup",(function(t){hV.isKey(t.event,["space","enter"])&&e.thumb.isFocused&&(t.event.preventDefault(),e.handleDoubleClick())}))),this._disposers.push(this._thumb))},enumerable:!0,configurable:!0}),e.prototype.handleDoubleClick=function(){this.makeBusy();var t=0,e=1;0!=this.start||1!=this.end?(this._prevStart=this.start,this._prevEnd=this.end):(t=this._prevStart,e=this._prevEnd);var n=this.animate([{property:"__start",to:t},{property:"__end",to:e}],this.animationDuration,this.animationEasing);n&&!n.isFinished()?(n.events.on("animationended",this.makeUnbusy,this,!1),this._zoomAnimation=n):this.makeUnbusy()},e.prototype.handleThumbPosition=function(){var t=this.thumb;if("horizontal"==this.orientation){var e=this.innerWidth,n=t.innerWidth,i=t.pixelX;this._start=i/e,this._end=(i+n)/e,this.updateThumb()}else{var r=this.innerHeight,o=t.pixelY;this._start=1-(o+t.innerHeight)/r,this._end=1-o/r,this.updateThumb()}},e.prototype.createBackground=function(){return new wL},Object.defineProperty(e.prototype,"hideGrips",{get:function(){return this._hideGrips},set:function(t){var e=this;this._hideGrips=t,this._overDisposer&&this.removeDispose(this._overDisposer),this._outDisposer&&this.removeDispose(this._outDisposer),t?(this._overDisposer=this.events.on("over",(function(){e.startGrip.show(),e.endGrip.show()}),void 0,!1),this._outDisposer=this.events.on("out",(function(){e.startGrip.hide(),e.endGrip.hide()}),void 0,!1),this.startGrip.hide(),this.endGrip.hide()):(this.startGrip.show(),this.endGrip.show())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(t){this.setPropertyValue("animationDuration",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(t){this.setPropertyValue("animationEasing",t)},enumerable:!0,configurable:!0}),e.prototype.asFunction=function(e){return"animationEasing"==e||t.prototype.asIs.call(this,e)},e}(aL);QM.registeredClasses.Scrollbar=KL;var XL=function(t){function e(){var e=t.call(this)||this;return e.className="Slider",e.thumb.opacity=0,e.thumb.interactionsEnabled=!1,e.endGrip.opacity=0,e.endGrip.interactionsEnabled=!1,e.startGrip.events.on("drag",(function(){e.endGrip.x=e.startGrip.x,e.endGrip.y=e.startGrip.y})),e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"__end",{get:function(){return this._start},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._start},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._start},set:function(t){this._isBusy||(this.__start=t)},enumerable:!0,configurable:!0}),e}(KL);QM.registeredClasses.Slider=XL;var QL=function(t){function e(){var e=t.call(this)||this;e.className="TextLink",e.selectable=!0;var n=new rV;return e.fill=n.getFor("primaryButton").brighten(.3),e.states.create("hover").properties.fill=n.getFor("primaryButtonHover").brighten(.3),e.states.create("down").properties.fill=n.getFor("primaryButtonDown").brighten(.3),e.cursorOverStyle=LV.pointer,e.applyTheme(),e}return Qj(e,t),e}(_L);QM.registeredClasses.TextLink=QL;var $L=function(t){function e(){var e=t.call(this)||this;return e.properties={},e.isTemplate=!1,e._scale=1,e._nonScaling=!0,e.className="Filter",e.filterPrimitives=new eN,e.properties.filterUnits="objectBoundingBox",e.filterPrimitives.events.on("inserted",(function(t){e._disposers.push(t.newValue)})),e.width=120,e.height=120,e.applyTheme(),e}return Qj(e,t),e.prototype.appendPrimitives=function(t){VM(this.filterPrimitives.iterator(),(function(e){t.add(e)}))},e.prototype.animate=function(t,e,n){return new FF(this,t,e,n).start()},Object.defineProperty(e.prototype,"width",{get:function(){return this.properties.width},set:function(t){this.properties.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.properties.height},set:function(t){this.properties.height=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){var n=this;t.prototype.copyFrom.call(this,e),kM(e.properties,(function(t,e){n[t]=e}))},Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:RV()},set:function(t){this._paper!=t&&(this._paper=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new NF(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this.updateScale()},enumerable:!0,configurable:!0}),e.prototype.updateScale=function(){},Object.defineProperty(e.prototype,"filterUnits",{get:function(){return this.properties.filterUnits},set:function(t){this.properties.filterUnits=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonScaling",{get:function(){return this._nonScaling},set:function(t){this._nonScaling=t,t||(this._scale=1),this.updateScale()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sprite",{set:function(t){this.setSprite(t)},enumerable:!0,configurable:!0}),e.prototype.setSprite=function(t){this._sprite&&this._sprite!=t&&this._sprite.filters.removeValue(this),this._sprite=t},e}(wN),ZL=function(t){function e(){var e=t.call(this)||this;return e.className="DropShadowFilter",e.color=bN("#000"),e.feGaussianBlur=e.paper.add("feGaussianBlur"),e.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),e.filterPrimitives.push(e.feGaussianBlur),e.feOffset=e.paper.add("feOffset"),e.feOffset.attr({result:"offsetBlur"}),e.filterPrimitives.push(e.feOffset),e.feFlood=e.paper.add("feFlood"),e.feFlood.attr({"flood-color":e.color}),e.filterPrimitives.push(e.feFlood),e.feComposite=e.paper.add("feComposite"),e.feComposite.attr({in2:"offsetBlur",operator:"in"}),e.filterPrimitives.push(e.feComposite),e.feMerge=e.paper.addGroup("feMerge"),e.feMerge.add(e.paper.add("feMergeNode")),e.feMerge.add(e.paper.add("feMergeNode").attr({in:"SourceGraphic"})),e.filterPrimitives.push(e.feMerge),e.width=200,e.height=200,e.blur=1.5,e.dx=3,e.dy=3,e.opacity=.5,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.properties.color=t,this.feFlood&&this.feFlood.attr({"flood-color":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(t){this.properties.opacity=t,this.feFlood.attr({"flood-opacity":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx",{get:function(){return this.properties.dx},set:function(t){this.properties.dx=t,this.feOffset.attr({dx:t/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy",{get:function(){return this.properties.dy},set:function(t){this.properties.dy=t,this.feOffset.attr({dy:t/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this.properties.blur},set:function(t){this.properties.blur=t,this.feGaussianBlur.attr({stdDeviation:t/this.scale})},enumerable:!0,configurable:!0}),e.prototype.updateScale=function(){this.dx=this.dx,this.dy=this.dy,this.blur=this.blur},e}($L);QM.registeredClasses.DropShadowFilter=ZL;var JL=function(t){function e(){var e=t.call(this)||this;e._boundingRect={x:-4e4,y:-4e4,width:8e4,height:8e4},e._pointTo={x:0,y:0},e.fitPointerToBounds=!1,e._verticalOrientation="up",e.fixDoc=!0,e.className="Tooltip",e.isMeasured=!1,e.getFillFromObject=!0,e.margin(5,5,5,5),e.defaultState.transitionDuration=1,e.hiddenState.transitionDuration=1;var n=e.background;n.interactionsEnabled=!1,n.fillOpacity=.9,n.strokeWidth=1,n.strokeOpacity=1,n.stroke=bN("#ffffff"),n.cornerRadius=3,n.pointerLength=6,n.pointerBaseWidth=10;var i=new ZL;i.dy=1,i.dx=1,i.opacity=.5,n.filters.push(i),e.autoTextColor=!0;var r=e.createChild(_L);return r.shouldClone=!1,e.label=r,r.padding(7,12,4,12),r.interactionsEnabled=!1,r.horizontalCenter="middle",r.fill=bN("#ffffff"),e._disposers.push(r),e.label.events.on("sizechanged",e.drawBackground,e),e.label.zIndex=1,e.pointerOrientation="vertical",e.animationDuration=0,e.animationEasing=xF,e.setPropertyValue("showInViewport",!1),e.role="tooltip",e.visible=!1,e.opacity=0,e.x=0,e.y=0,e.events.on("visibilitychanged",e.handleVisibility,e),e.applyTheme(),e}return Qj(e,t),e.prototype.handleVisibility=function(){this.visible&&this.label.invalidate()},Object.defineProperty(e.prototype,"getStrokeFromObject",{get:function(){return this.getPropertyValue("getStrokeFromObject")},set:function(t){this.setPropertyValue("getStrokeFromObject",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoTextColor",{get:function(){return this.getPropertyValue("autoTextColor")},set:function(t){this.setPropertyValue("autoTextColor",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepTargetHover",{get:function(){return this.getPropertyValue("keepTargetHover")},set:function(t){var e=this;this.setPropertyValue("keepTargetHover",t,!0)&&t&&(this.hoverable=!0,this.background.interactionsEnabled=!0,this._disposers.push(this.events.on("over",(function(t){e.targetSprite&&e.targetSprite.hoverable&&(e.targetSprite.isHover=!0)}))),this._disposers.push(this.events.on("out",(function(t){e.targetSprite&&e.targetSprite.hoverable&&(e.targetSprite.isHover=!1)}))))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showInViewport",{get:function(){return this.getPropertyValue("showInViewport")},set:function(t){this.setPropertyValue("showInViewport",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getFillFromObject",{get:function(){return this.getPropertyValue("getFillFromObject")},set:function(t){this.setPropertyValue("getFillFromObject",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createBackground=function(){return new SL},Object.defineProperty(e.prototype,"pointerOrientation",{get:function(){return this.getPropertyValue("pointerOrientation")},set:function(t){this.setPropertyValue("pointerOrientation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(t){this.setPropertyValue("animationDuration",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(t){this.setPropertyValue("animationEasing",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.label.html},set:function(t){this.label.html!=t&&(this.label.html=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.label.text},set:function(t){this.label.text!=t&&(this.label.text=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.label;e.invalid&&e.validate();var n,i,r=this._pointTo.x,o=this._pointTo.y,s=this._boundingRect,a=e.measuredWidth,u=e.measuredHeight,l=this.background.pointerLength;if(this.ignoreBounds&&(s=void 0),s&&this.fixDoc&&a>s.width){uF({x:s.x,y:s.y},this.parent);var h=uF({x:s.x+s.width,y:s.y+s.height},this.parent),c=document.body.offsetWidth;document,h.x>c/2?s.x=s.width-a:s.width=s.x+a}var p=this.pointerOrientation;"horizontal"==p||"left"==p||"right"==p?(i=-u/2,n="horizontal"==p?s&&r>s.x+s.width/2?-a/2-l:a/2+l:"left"==p?a/2+l:-a/2-l):(s&&(n=OR(0,s.x-r+a/2,s.x-r+s.width-a/2)),"vertical"==p?s&&o>s.y+u+l?(i=-u-l,this._verticalOrientation="up"):(i=l,this._verticalOrientation="down"):"down"==p?(i=-u-l,this._verticalOrientation="up"):(i=l,this._verticalOrientation="down")),s&&(i=OR(i,s.y-o,s.y+s.height-u-o)),e.x=n,e.y=i,this.drawBackground()},e.prototype.updateBackground=function(){this.group.addToBack(this.background.group)},e.prototype.drawBackground=function(){var t=this.label,e=this.background,n=t.measuredWidth,i=this._boundingRect,r=n,o=t.measuredHeight,s=t.pixelY,a=i.x-this._pointTo.x,u=a+i.width,l=i.y-this._pointTo.y,h=l+i.height;e.x=t.pixelX-n/2,e.y=s,e.width=r,e.height=o,this.fitPointerToBounds?(e.pointerX=OR(-e.x,a-e.x,u-e.x),e.pointerY=OR(-e.y,l-e.y,h-e.y)):(e.pointerX=-e.x,e.pointerY=-e.y),e.validate()},e.prototype.delayedPointTo=function(t,e){var n=this;this._pointToDisposer&&this._pointToDisposer.dispose(),this._pointToDisposer=QM.events.once("exitframe",(function(){n.pointTo(t,e)})),this.addDisposer(this._pointToDisposer)},e.prototype.pointTo=function(t,e){this._pointTo.x==t.x&&this._pointTo.y==t.y||(this._pointTo=t,this.invalidate(),!this.visible||e?(this.moveTo(this._pointTo),this._animation&&this._animation.kill()):0==this.pixelX&&0==this.pixelY?this.moveTo(this._pointTo):(this._animation&&this._animation.kill(),this._animation=new FF(this,[{property:"x",to:t.x,from:this.pixelX},{property:"y",to:t.y,from:this.pixelY}],this.animationDuration,this.animationEasing).start()))},e.prototype.setBounds=function(t){var e=this._boundingRect;e.x==t.x&&e.y==t.y&&e.width==t.width&&e.height==t.height||(this._boundingRect=t,this.invalidate())},Object.defineProperty(e.prototype,"boundingContainer",{set:function(t){this._boundingContainer=t,t.events.on("sizechanged",this.updateBounds,this),t.events.on("positionchanged",this.updateBounds,this)},enumerable:!0,configurable:!0}),e.prototype.updateBounds=function(){var t=this._boundingContainer,e=rF({x:t.pixelX,y:t.pixelY,width:t.maxWidth,height:t.maxHeight},t);this.setBounds(e)},Object.defineProperty(e.prototype,"ignoreBounds",{get:function(){return this.getPropertyValue("ignoreBounds")},set:function(t){this.setPropertyValue("ignoreBounds",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalOrientation",{get:function(){return this._verticalOrientation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.label.copyFrom(e.label),e._boundingRect&&(this._boundingRect=e._boundingRect)},e.prototype.asFunction=function(e){return"animationEasing"==e||t.prototype.asIs.call(this,e)},e}(aL);QM.registeredClasses.Tooltip=JL;var tU=function(t){function e(){var e=t.call(this)||this;return e.className="Trapezoid",e.element=e.paper.add("path"),e.topSide=rR(100),e.bottomSide=rR(100),e.leftSide=rR(100),e.rightSide=rR(100),e.isMeasured=!1,e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.pixelWidth,n=this.pixelHeight,i=jN(this.topSide,e),r=jN(this.bottomSide,e),o=jN(this.leftSide,n),s=jN(this.rightSide,n),a=(e-i)/2,u=(n-o)/2,l=e-(e-i)/2,h=(n-s)/2,c=e-(e-r)/2,p=n-(n-s)/2,d=(e-r)/2,f=n-(n-o)/2,g="",y="",m="",v="";if(cR(this.horizontalNeck)){var b=this.horizontalNeck.value;g=kL({x:e*b,y:Math.max(u,h)}),m=kL({x:e*b,y:Math.min(p,f)})}if(cR(this.verticalNeck)){var _=this.verticalNeck.value;y=kL({x:Math.min(l,c),y:n*_}),v=kL({x:Math.max(a,d),y:n*_})}var w=EL({x:a,y:u})+g+kL({x:l,y:h})+y+kL({x:c,y:p})+m+kL({x:d,y:f})+v;this.path=w},Object.defineProperty(e.prototype,"topSide",{get:function(){return this.getPropertyValue("topSide")},set:function(t){this.setPercentProperty("topSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomSide",{get:function(){return this.getPropertyValue("bottomSide")},set:function(t){this.setPercentProperty("bottomSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftSide",{get:function(){return this.getPropertyValue("leftSide")},set:function(t){this.setPercentProperty("leftSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightSide",{get:function(){return this.getPropertyValue("rightSide")},set:function(t){this.setPercentProperty("rightSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalNeck",{get:function(){return this.getPropertyValue("horizontalNeck")},set:function(t){this.setPropertyValue("horizontalNeck",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalNeck",{get:function(){return this.getPropertyValue("verticalNeck")},set:function(t){this.setPropertyValue("verticalNeck",t,!0)},enumerable:!0,configurable:!0}),e}(oL);QM.registeredClasses.Trapezoid=tU;var eU=function(t){function e(){var e=t.call(this)||this;return e.className="Triangle",e.element=e.paper.add("path"),e.direction="top",e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e,n=this.pixelWidth,i=this.pixelHeight;switch(this.direction){case"right":e=EL({x:0,y:0})+kL({x:n,y:i/2})+kL({x:0,y:i})+" Z";break;case"left":e=EL({x:n,y:0})+kL({x:0,y:i/2})+kL({x:n,y:i})+" Z";break;case"bottom":e=EL({x:0,y:0})+kL({x:n,y:0})+kL({x:n/2,y:i})+" Z";break;case"top":e=EL({x:n/2,y:0})+kL({x:n,y:i})+kL({x:0,y:i})+" Z"}this.path=e},Object.defineProperty(e.prototype,"direction",{get:function(){return this.getPropertyValue("direction")},set:function(t){this.setPropertyValue("direction",t,!0)},enumerable:!0,configurable:!0}),e}(oL);QM.registeredClasses.Triangle=eU;var nU=function(){function t(t,e){this._tensionX=t,this._tensionY=e}return t.prototype.smooth=function(t){for(var e=t.length-1;e>0;e--){var n=t[e],i=t[e-1];Math.abs(n.x-i.x)<.1&&Math.abs(n.y-i.y)<.1&&t.splice(e-1,1)}var r=this._tensionX,o=this._tensionY;if(t.length<3||r>=1&&o>=1)return TL(t);var s=t[0],a=t[t.length-1],u=!1;CR(s.x,3)==CR(a.x)&&CR(s.y)==CR(a.y)&&(u=!0);for(var l="",h=(e=0,t.length-1);e<h;e++){n=t[e-1];var c=t[e+1],p=t[e+2];0===e?n=u?t[t.length-2]:t[e]:e==t.length-2&&(p=u?t[1]:t[e+1]),l+=DL(c,WR(n,i=t[e],c,0,r,o),zR(0,i,c,p,r,o))}return l},t}();function iU(t,e,n,i,r,o){var s=t.x,a=t.y,u=e.x,l=e.y,h=RR(t,e);o&&(n=h/Math.round(h/n));var c=QM.getCache(NN(["wavedLine",t.x,e.x,t.y,e.y,n,i]));if(!c){if(h>0){var p=Math.atan2(l-a,u-s),d=Math.cos(p),f=Math.sin(p),g=n*d,y=n*f;if(n<=1||i<=1)c=kL(e);else{var m=Math.round(2*h/n),v=[],b=1;u<s&&(b*=-1),l<a&&(b*=-1);for(var _=0;_<=m;_++)v.push({x:s+_*g/2+(b*=-1)*i/2*f,y:a+_*y/2-b*i/2*d});c=new nU(r,r).smooth(v)}}else c="";QM.setCache(NN(["wavedLine",t.x,e.x,t.y,e.y,n,i]),c)}return c}var rU=function(){function t(t,e){this._reversed=t,this._closed=e.closed}return t.prototype._curve=function(t,e,n,i,r,o){var s=(e-t)/3;return this._reversed?DL({x:i,y:e},{x:n+s*r,y:t+s},{x:i-s*o,y:e-s}):DL({x:e,y:i},{x:t+s,y:n+s*r},{x:e-s,y:i-s*o})},t.prototype.smooth=function(t){var e=this,n=NaN,i=NaN,r=NaN,o=NaN,s=NaN,a=0,u="";switch(tM(t,(function(t){var l=t.x,h=t.y;if(e._reversed){var c=l;l=h,h=c}var p=NaN;if(l!==i||h!==o){switch(a){case 0:a=1,u+=kL(e._reversed?{x:h,y:l}:{x:l,y:h});break;case 1:a=2;break;case 2:a=3,u+=e._curve(n,i,r,o,sU(n,i,r,o,p=aU(n,i,r,o,l,h)),p);break;default:u+=e._curve(n,i,r,o,s,p=aU(n,i,r,o,l,h))}n=i,i=l,r=o,o=h,s=p}})),a){case 2:u+=kL(this._reversed?{x:o,y:i}:{x:i,y:o});break;case 3:u+=this._curve(n,i,r,o,s,sU(n,i,r,o,s))}return this._closed&&(u+=" Z"),u},t}();function oU(t){return t<0?-1:1}function sU(t,e,n,i,r){var o=e-t;return o?(3*(i-n)/o-r)/2:r}function aU(t,e,n,i,r,o){var s=e-t,a=r-e,u=(i-n)/(s||a<0&&-0),l=(o-i)/(a||s<0&&-0),h=(u*a+l*s)/(s+a);return(oU(u)+oU(l))*Math.min(Math.abs(u),Math.abs(l),.5*Math.abs(h))||0}var uU=function(t){function e(e){return t.call(this,!1,e)||this}return Qj(e,t),e}(rU),lU=function(t){function e(e){return t.call(this,!0,e)||this}return Qj(e,t),e}(rU),hU=function(t){function e(){var e=t.call(this)||this;return e.className="WavedCircle",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.fill=void 0,e.fillOpacity=0,e.tension=.8,e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){var t="",e=this.pixelRadius;e>0&&(t=EL((n=this.getPoints(e))[0])+new nU(this.tension,this.tension).smooth(n));var n,i=this.pixelInnerRadius;i>0&&((n=this.getPoints(i)).reverse(),t+=EL(n[0])+new nU(this.tension,this.tension).smooth(n)),this.path=t},e.prototype.getPoints=function(t){for(var e=t*Math.PI*2,n=this.waveHeight/2,i=e/Math.round(e/this.waveLength),r=i/2,o=[],s=e/i,a=0;a<=s;a++){var u=a*i/e*360,l=(a*i+r)/e*360;o.push({x:(t-n)*ER(u),y:(t-n)*SR(u)}),o.push({x:(t+n)*ER(l),y:(t+n)*SR(l)})}return o.pop(),o},Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return jN(this.innerRadius,AR(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(t){this.setPropertyValue("waveLength",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(t){this.setPropertyValue("waveHeight",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t),this.invalidate()},enumerable:!0,configurable:!0}),e}(PL);QM.registeredClasses.WavedCircle=hU;var cU=function(t){function e(){var e=t.call(this)||this;return e.className="WavedLine",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.tension=.8,e.pixelPerfect=!1,e.fill=bN(),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){var t={x:this.x1,y:this.y1},e={x:this.x2,y:this.y2};this.path=EL(t)+iU(t,e,this.waveLength,this.waveHeight,this.tension,!0)},Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(t){this.setPropertyValue("waveLength",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(t){this.setPropertyValue("waveHeight",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t),this.invalidate()},enumerable:!0,configurable:!0}),e}(OL),pU=function(t){function e(){var e=t.call(this)||this;return e.className="WavedRectangle",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.tension=.8,e.setPropertyValue("wavedLeft",!0),e.setPropertyValue("wavedRight",!0),e.setPropertyValue("wavedTop",!0),e.setPropertyValue("wavedBottom",!0),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.pixelWidth,n=this.pixelHeight;if(e>0&&n>0){var i={x:0,y:0},r={x:e,y:0},o={x:e,y:n},s={x:0,y:n},a=Math.min(e,this.waveLength),u=Math.min(n,this.waveHeight),l=Math.min(n,this.waveLength),h=Math.min(e,this.waveHeight),c="",p="",d="",f="";this.wavedTop&&(c=iU(i,r,a,u,this.tension,!0)),this.wavedRight&&(p=iU(r,o,l,h,this.tension,!0)),this.wavedBottom&&(d=iU(o,s,a,u,this.tension,!0)),this.wavedLeft&&(f=iU(s,i,l,h,this.tension,!0)),this.path=EL(i)+c+kL(r)+p+kL(o)+d+kL(s)+f+"z"}},Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(t){this.setPropertyValue("waveLength",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(t){this.setPropertyValue("waveHeight",t),this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.setWavedSides=function(t,e,n,i){this.wavedTop=t,this.wavedRight=e,this.wavedBottom=n,this.wavedLeft=i},Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedRight",{get:function(){return this.getPropertyValue("wavedRight")},set:function(t){this.setPropertyValue("wavedRight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedLeft",{get:function(){return this.getPropertyValue("wavedLeft")},set:function(t){this.setPropertyValue("wavedLeft",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedTop",{get:function(){return this.getPropertyValue("wavedTop")},set:function(t){this.setPropertyValue("wavedTop",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedBottom",{get:function(){return this.getPropertyValue("wavedBottom")},set:function(t){this.setPropertyValue("wavedBottom",t,!0)},enumerable:!0,configurable:!0}),e}(sL),dU=function(t){function e(){var e=t.call(this)||this;e.className="ZoomOutButton",e.padding(9,9,9,9),e.showSystemTooltip=!0;var n=new rV,i=e.background;i.cornerRadius(20,20,20,20),i.fill=n.getFor("primaryButton"),i.stroke=n.getFor("primaryButtonStroke"),i.strokeOpacity=0,i.states.getKey("hover").properties.fill=n.getFor("primaryButtonHover"),i.states.getKey("down").properties.fill=n.getFor("primaryButtonActive");var r=new oL;r.element=e.paper.add("path");var o=EL({x:0,y:0});return o+=kL({x:11,y:0}),r.path=o,r.pixelPerfect=!0,r.padding(8,3,8,3),r.stroke=n.getFor("primaryButtonText"),e.icon=r,e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Zoom Out"))},e}(xL);QM.registeredClasses.ZoomOutButton=dU;var fU=function(t){function e(){var e=t.call(this)||this;e.className="PlayButton",e.padding(12,12,12,12),e.showSystemTooltip=!0;var n=new rV,i=e.background;i.cornerRadius(25,25,25,25),i.fill=n.getFor("primaryButton"),i.stroke=n.getFor("primaryButtonStroke"),i.strokeOpacity=0,i.states.getKey("hover").properties.fill=n.getFor("primaryButtonHover"),i.states.getKey("down").properties.fill=n.getFor("primaryButtonActive");var r=new eU;r.direction="right",r.width=9,r.height=11,r.marginLeft=1,r.marginRight=1,r.horizontalCenter="middle",r.verticalCenter="middle",r.stroke=n.getFor("primaryButtonText"),r.fill=r.stroke,e.icon=r;var o=new wL;o.width=11,o.height=11,o.horizontalCenter="middle",o.verticalCenter="middle",o.cornerRadius(0,0,0,0),o.stroke=n.getFor("primaryButtonText"),o.fill=r.stroke,e.togglable=!0;var s=e.states.create("active");return s.transitionDuration=0,s.properties.icon=o,e.defaultState.transitionDuration=0,e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Play"))},e}(xL);QM.registeredClasses.PlayButton=fU;var gU=function(t){function e(){var e=t.call(this)||this;return e.className="ColorModifier",e.applyTheme(),e}return Qj(e,t),e.prototype.modify=function(t){return t},e}(wN);QM.registeredClasses.ColorModifier=gU;var yU=function(t){function e(){var e=t.call(this)||this;return e.lightnesses=[],e.brightnesses=[],e.opacities=[],e.offsets=[],e.className="GradientModifier",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"lightnesses",{get:function(){return this._lightnesses},set:function(t){this._lightnesses=t,this._brightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"brightnesses",{get:function(){return this._brightnesses},set:function(t){this._brightnesses=t,this._lightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacities",{get:function(){return this._opacities},set:function(t){this._opacities=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return this._offsets},set:function(t){this._offsets=t},enumerable:!0,configurable:!0}),e.prototype.modify=function(t){this.gradient.clear();var e=0;this.opacities&&(e=kR(e,this.opacities.length)),this.lightnesses&&(e=kR(e,this.lightnesses.length)),this.brightnesses&&(e=kR(e,this.brightnesses.length));for(var n,i,r=1,o=0;o<e;o++){var s=t;this.opacities&&yR(this.opacities[o])&&(r=this.opacities[o]),this.lightnesses&&yR(this.lightnesses[o])&&(n=this.lightnesses[o],i=void 0),this.brightnesses&&yR(this.brightnesses[o])&&(i=this.brightnesses[o],n=void 0),yR(i)?s=t.brighten(this.brightnesses[o]):yR(n)&&(s=t.lighten(this.lightnesses[o])),this.gradient.addColor(s,r,this.offsets[o])}return this.gradient},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this._offsets=e.offsets,this._brightnesses=e.brightnesses,this._lightnesses=e.lightnesses,this._opacities=e.opacities},e}(gU);QM.registeredClasses.GradientModifier=yU;var mU=function(t){function e(){var e=t.call(this)||this;return e.className="LinearGradientModifier",e.gradient=new NV,e.applyTheme(),e}return Qj(e,t),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.gradient=e.gradient.clone()},e}(yU);QM.registeredClasses.LinearGradientModifier=mU;var vU=function(t){function e(){var e=t.call(this)||this;return e.className="Cone",e.angle=30,e.radius=rR(100),e.topRadius=rR(100),e.top=e.createChild(CL),e.top.shouldClone=!1,e.bottom=e.createChild(CL),e.bottom.shouldClone=!1,e.body=e.createChild(oL),e.body.shouldClone=!1,e.body.setElement(e.paper.add("path")),e.layout="none",e.bodyFillModifier=new mU,e.bodyFillModifier.lightnesses=[0,-.25,0],e.body.fillModifier=e.bodyFillModifier,e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),jM(this,this.top,rL),jM(this,this.bottom,rL),jM(this,this.body,rL);var e,n,i,r=this.innerWidth,o=this.innerHeight,s=this.bottom,a=this.top,u=this.angle;"horizontal"==this.orientation?(e=o/2,s.y=o/2,a.y=o/2,a.x=r,n=(90-u)/90,i=0,this.bodyFillModifier.gradient.rotation=90):(n=0,i=(90-u)/90,e=r/2,s.y=o,s.x=r/2,a.x=r/2,this.bodyFillModifier.gradient.rotation=0);var l,h=this.radius.value*e,c=this.topRadius.value*e;s.radius=h-h*n,s.radiusY=h-h*i,a.radius=c-c*n,a.radiusY=c-c*i,l="horizontal"==this.orientation?EL({x:0,y:o/2-s.radiusY})+jL(-90,-180,s.radius,s.radiusY)+kL({x:r,y:o/2+a.radiusY})+jL(90,180,a.radius,a.radiusY)+" Z":EL({x:r/2-a.radius,y:0})+jL(180,-180,a.radius,a.radiusY)+kL({x:r/2+s.radius,y:o})+jL(0,180,s.radius,s.radiusY)+" Z",this.body.path=l},Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPropertyValue("radius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRadius",{get:function(){return this.getPropertyValue("topRadius")},set:function(t){this.setPropertyValue("topRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),e}(aL),bU=function(t){function e(){var e=t.call(this)||this;return e.className="LightenFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"matrix"}),e.filterPrimitives.push(e.feColorMatrix),e.lightness=0,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"lightness",{get:function(){return this.properties.lightness},set:function(t){this.properties.lightness=t;var e=t+1;this.feColorMatrix.attr({values:e+" 0 0 0 0 0 "+e+" 0 0 0 0 0 "+e+" 0 0 0 0 0 1 0"})},enumerable:!0,configurable:!0}),e}($L);QM.registeredClasses.LightenFilter=bU;var _U=function(t){function e(){var e=t.call(this)||this;e.angle=30,e.depth=30,e.className="Rectangle3D",e.layout="none";var n=e.createChild(oL);n.shouldClone=!1,n.setElement(e.paper.add("path")),n.isMeasured=!1,e.sideBack=n,e._disposers.push(e.sideBack);var i=e.createChild(oL);i.shouldClone=!1,i.setElement(e.paper.add("path")),i.isMeasured=!1,e.sideBottom=i,e._disposers.push(e.sideBottom);var r=e.createChild(oL);r.shouldClone=!1,r.setElement(e.paper.add("path")),r.isMeasured=!1,e.sideLeft=r,e._disposers.push(e.sideLeft);var o=e.createChild(oL);o.shouldClone=!1,o.setElement(e.paper.add("path")),o.isMeasured=!1,e.sideRight=o,e._disposers.push(e.sideRight);var s=e.createChild(oL);s.shouldClone=!1,s.setElement(e.paper.add("path")),s.isMeasured=!1,e.sideTop=s,e._disposers.push(e.sideTop);var a=e.createChild(oL);return a.shouldClone=!1,a.setElement(e.paper.add("path")),a.isMeasured=!1,e.sideFront=a,e._disposers.push(e.sideFront),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.innerWidth,n=this.innerHeight,i=this.depth,r=this.angle,o=SR(r),s=ER(r),a={x:0,y:0},u={x:e,y:0},l={x:e,y:n},h={x:0,y:n},c={x:i*s,y:-i*o},p={x:i*s+e,y:-i*o},d={x:i*s+e,y:-i*o+n},f={x:i*s,y:-i*o+n};this.sideFront.path=EL(a)+kL(u)+kL(l)+kL(h)+" Z",this.sideBack.path=EL(c)+kL(p)+kL(d)+kL(f)+" Z",this.sideLeft.path=EL(a)+kL(c)+kL(f)+kL(h)+" Z",this.sideRight.path=EL(u)+kL(p)+kL(d)+kL(l)+" Z",this.sideBottom.path=EL(h)+kL(f)+kL(d)+kL(l)+" Z",this.sideTop.path=EL(a)+kL(c)+kL(p)+kL(u)+" Z"},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setFill=function(e){var n;if(t.prototype.setFill.call(this,e),mR(e)&&!("r"in e)||(e=_N(e)),e instanceof vN)n=e.hex;else if(e instanceof NV||e instanceof FV)n=e.stops.getIndex(0).color.hex;else{var i=new bU;i.lightness=-.2,this.sideBack.filters.push(i);var r=i.clone();r.lightness=-.4,this.sideLeft.filters.push(r);var o=i.clone();o.lightness=-.2,this.sideRight.filters.push(o);var s=i.clone();s.lightness=-.1,this.sideTop.filters.push(s);var a=i.clone();a.lightness=-.5,this.sideBottom.filters.push(a)}n&&(this.sideBack.fill=bN(n).lighten(-.2),this.sideLeft.fill=bN(n).lighten(-.4),this.sideRight.fill=bN(n).lighten(-.2),this.sideTop.fill=bN(n).lighten(-.1),this.sideBottom.fill=bN(n).lighten(-.5))},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.sideBack.copyFrom(e.sideBack),this.sideLeft.copyFrom(e.sideLeft),this.sideRight.copyFrom(e.sideRight),this.sideTop.copyFrom(e.sideTop),this.sideBottom.copyFrom(e.sideBottom)},e}(aL),wU=function(t){function e(){var e=t.call(this)||this;e.className="Slice3D",e.layout="none";var n=e.createChild(oL);e.edge=n,n.shouldClone=!1,n.isMeasured=!1,n.toBack(),e.angle=30,e.depth=20;var i=e.createChild(oL);e.sideA=i,i.shouldClone=!1,i.isMeasured=!1;var r=e.createChild(oL);return e.sideB=r,r.shouldClone=!1,r.isMeasured=!1,e.applyTheme(),e}return Qj(e,t),e.prototype.setFill=function(e){var n;if(t.prototype.setFill.call(this,e),e instanceof vN)n=e.hex;else if(e instanceof NV||e instanceof FV)n=e.stops.getIndex(0).color.hex;else{var i=new bU;i.lightness=-.25,this.edge.filters.push(i),this.sideA.filters.push(i.clone()),this.sideB.filters.push(i.clone())}if(n){var r=bN(n).lighten(-.25);this.edge.fill=r,this.sideA.fill=r,this.sideB.fill=r,this.edge.stroke=r,this.sideA.stroke=r,this.sideB.stroke=r}},e.prototype.draw=function(){if(this.cornerRadius=0,this.innerCornerRadius=0,t.prototype.draw.call(this),0!==this.arc&&this.radius>0&&this.depth>0){this.sideB.show(0),this.sideA.show(0),this.edge.show(0);for(var e=this.startAngle,n=this.arc,i=this.pixelInnerRadius||0,r=this.radiusY||0,o=this.radius,s=e+n,a=r/o*i,u={x:ER(e)*i,y:SR(e)*a},l={x:ER(e)*o,y:SR(e)*r},h={x:ER(s)*o,y:SR(s)*r},c={x:ER(s)*i,y:SR(s)*a},p=this.depth,d={x:u.x,y:u.y-p},f={x:l.x,y:l.y-p},g={x:h.x,y:h.y-p},y={x:c.x,y:c.y-p},m="",v=Math.ceil(n/5),b=n/v,_=e,w=f,x=0;x<v;x++)if((_+=b)>0&&_<180){m+=EL(w);var P={x:ER(_)*o,y:SR(_)*r-p};m+=kL({x:w.x,y:w.y+p}),m+=ML({x:P.x,y:P.y+p},o,r,!0),m+=kL(P),m+=ML(w,o,r),m+="z",w=P}else m+=EL(w),m+=ML(P={x:ER(_)*o,y:SR(_)*r-p},o,r,!0),m+=kL({x:P.x,y:P.y+p}),m+=ML({x:w.x,y:w.y+p},o,r),m+=kL(w),m+="z",w=P;for(w=d,_=e,x=0;x<v;x++)(_+=b)>0&&_<180?(m+=EL(w),P={x:ER(_)*i,y:SR(_)*a-p},m+=kL({x:w.x,y:w.y+p}),m+=ML({x:P.x,y:P.y+p},i,a,!0),m+=kL(P),m+=ML(w,i,a),m+="z",w=P):(m+=EL(w),m+=ML(P={x:ER(_)*i,y:SR(_)*a-p},i,a,!0),m+=kL({x:P.x,y:P.y+p}),m+=ML({x:w.x,y:w.y+p},i,a),m+=kL(w),m+="z",w=P);this.edge.path=m,this.sideA.path=EL(u)+kL(l)+kL(f)+kL(d)+" Z",this.sideB.path=EL(h)+kL(c)+kL(y)+kL(g)+" Z",this.startAngle<90?this.sideA.toBack():this.sideA.toFront(),this.startAngle+this.arc>90?this.sideB.toBack():this.sideB.toFront(),this.slice.dy=-p}else this.sideA.hide(0),this.sideB.hide(0),this.edge.hide(0)},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){var t=this.getPropertyValue("angle");return yR(t)||(t=0),t},set:function(t){this.setPropertyValue("angle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radiusY",{get:function(){var t=this.getPropertyValue("radiusY");return yR(t)||(t=this.radius-this.radius*this.angle/90),t},set:function(t){this.setPropertyValue("radiusY",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.edge.copyFrom(e.edge),this.sideA.copyFrom(e.sideA),this.sideB.copyFrom(e.sideB)},e}(WL),xU=function(t){function e(){var e=t.call(this)||this;return e.className="RadialGradientModifier",e.gradient=new FV,e.applyTheme(),e}return Qj(e,t),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.gradient=e.gradient.clone()},e}(yU);QM.registeredClasses.RadialGradientModifier=xU;var PU=function(t){function e(){var e=t.call(this)||this;return e.properties.gap=0,e._line=e.paper.add("path"),e.addElement(e._line),e}return Qj(e,t),e.prototype.draw=function(){if(t.prototype.draw.call(this),Math.round(this.rotation/90)!=this.rotation/90&&(this.properties.shapeRendering="auto"),this._line){var e=this.width,n=this.height,i="";if(this.gap)for(var r=this.gap+this.strokeWidth,o=this.height/r,s=-o/2;s<1.5*o;s++)Math.round(this.rotation/90)!=this.rotation/90?(i+=EL({x:-e,y:(s+.5)*r})+kL({x:2*e,y:(s+.5)*r}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):i+=EL({x:-e,y:s*r})+kL({x:2*e,y:s*r});else Math.round(this.rotation/90)!=this.rotation/90?(i=EL({x:-e,y:n/2})+kL({x:2*e,y:n/2}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):i=EL({x:0,y:0})+kL({x:e,y:0});this._line.attr({d:i})}},Object.defineProperty(e.prototype,"gap",{get:function(){return this.properties.gap},set:function(t){this.properties.gap=t,this.draw()},enumerable:!0,configurable:!0}),e}(MV);QM.registeredClasses.LinePattern=PU;var CU=function(t){function e(){var e=t.call(this)||this;return e.properties.radius=2,e._circle=e.paper.add("circle"),e.addElement(e._circle),e.shapeRendering="auto",e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this._circle&&this._circle.attr({r:this.radius,cx:this.width/2,cy:this.height/2})},Object.defineProperty(e.prototype,"radius",{get:function(){return this.properties.radius},set:function(t){this.properties.radius=t,this.draw()},enumerable:!0,configurable:!0}),e}(MV);QM.registeredClasses.CirclePattern=CU;var IU=function(t){function e(){var e=t.call(this)||this;return e.rectHeight=1,e.rectWidth=1,e._rect=e.paper.add("rect"),e.addElement(e._rect),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2,this._rect&&this._rect.attr({width:this.rectWidth,height:this.rectHeight,x:(this.width-this.rectWidth)/2,y:(this.height-this.rectHeight)/2})},Object.defineProperty(e.prototype,"rectWidth",{get:function(){return this.properties.rectWidth},set:function(t){this.properties.rectWidth=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rectHeight",{get:function(){return this.properties.rectHeight},set:function(t){this.properties.rectHeight=t,this.draw()},enumerable:!0,configurable:!0}),e}(MV);QM.registeredClasses.RectPattern=IU;var OU=function(t){function e(){var e=t.call(this)||this;return e.className="ColorizeFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"matrix"}),e.filterPrimitives.push(e.feColorMatrix),e.intensity=1,e.applyTheme(),e}return Qj(e,t),e.prototype.applyFilter=function(){var t,e,n,i=this.intensity,r=1-i,o=this.color;o&&o.rgb?(t=o.rgb.r/255*i,e=o.rgb.g/255*i,n=o.rgb.b/255*i):(t=0,e=0,n=0),this.feColorMatrix.attr({values:r+" 0 0 0 "+t+" 0 "+r+" 0 0 "+e+" 0 0 "+r+" 0 "+n+" 0 0 0 1 0"})},Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.properties.color=t,this.applyFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intensity",{get:function(){return this.properties.intensity},set:function(t){this.properties.intensity=t,this.applyFilter()},enumerable:!0,configurable:!0}),e}($L);QM.registeredClasses.ColorizeFilter=OU;var SU=function(t){function e(){var e=t.call(this)||this;return e.className="DesaturateFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"saturate"}),e.filterPrimitives.push(e.feColorMatrix),e.width=120,e.height=120,e.saturation=0,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"saturation",{get:function(){return this.properties.saturation},set:function(t){this.properties.saturation=t,this.feColorMatrix.attr({values:t.toString()})},enumerable:!0,configurable:!0}),e}($L);QM.registeredClasses.DesaturateFilter=SU;var TU=function(t){function e(){var e=t.call(this)||this;return e.className="BlurFilter",e.feGaussianBlur=e.paper.add("feGaussianBlur"),e.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),e.filterPrimitives.push(e.feGaussianBlur),e.width=200,e.height=200,e.blur=1.5,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"blur",{get:function(){return this.properties.blur},set:function(t){this.properties.blur=t,this.feGaussianBlur.attr({stdDeviation:t/this.scale})},enumerable:!0,configurable:!0}),e}($L);QM.registeredClasses.BlurFilter=TU;var EU=function(t){function e(){var e=t.call(this)||this;return e.className="FocusFilter",e.feFlood=e.paper.add("feFlood"),e.feFlood.attr({"flood-color":(new rV).getFor("primaryButtonHover"),result:"base"}),e.filterPrimitives.push(e.feFlood),e.feMorphology=e.paper.add("feMorphology"),e.feMorphology.attr({result:"bigger",in:"SourceGraphic",operator:"dilate",radius:"2"}),e.filterPrimitives.push(e.feMorphology),e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({result:"mask",in:"bigger",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}),e.filterPrimitives.push(e.feColorMatrix),e.feComposite=e.paper.add("feComposite"),e.feComposite.attr({result:"drop",in:"base",in2:"mask",operator:"in"}),e.filterPrimitives.push(e.feComposite),e.feBlend=e.paper.add("feBlend"),e.feBlend.attr({in:"SourceGraphic",in2:"drop",mode:"normal"}),e.filterPrimitives.push(e.feBlend),e.width=130,e.height=130,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(t){this.properties.stroke=t,this.feFlood.attr({"flood-color":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(t){this.properties.strokeWidth=t,this.feMorphology.attr({radius:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(t){this.properties.opacity=t,this.feColorMatrix.attr({values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+t+" 0"})},enumerable:!0,configurable:!0}),e.prototype.setSprite=function(e){this._sprite&&this._sprite!=e&&this._sprite.group.removeStyle("outline"),e.group.addStyle({outline:"none"}),t.prototype.setSprite.call(this,e)},e}($L),kU=function(t){function e(){var e=t.call(this)||this;return e._list=[],e._currentStep=0,e._startIndex=0,e._currentPass=0,e.baseColor=new vN({r:103,g:183,b:220}),e.stepOptions={},e.passOptions={brighten:-.2},e.step=1,e.minColors=20,e.minLightness=.2,e.maxLightness=.9,e.shuffle=!1,e.wrap=!0,e.reuse=!1,e.saturation=1,e.className="ColorSet",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"list",{get:function(){return this._list||this.generate(this.minColors),this._list},set:function(t){this._list=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.getReusableColor=function(t){if(0==this._list.length)return this.generate(1),this.list[0];var e=t-Math.floor(t/this._list.length)*this.list.length;return this.list[e]},e.prototype.next=function(){var t;return this.list.length<=this._currentStep?this.reuse?t=this.getReusableColor(this._currentStep):(this.generate(kR(this.minColors,this._currentStep+1)),t=this.list[this._currentStep]):t=this.list[this._currentStep],this._currentStep+=this.step,t.saturate(this.saturation)},e.prototype.getIndex=function(t){var e;return this.list.length<=t?this.reuse?e=this.getReusableColor(t):(this.generate(this.minColors),e=this.getIndex(t)):e=this.list[t],e.saturate(this.saturation)},e.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(e.prototype,"currentStep",{get:function(){return this._currentStep},set:function(t){this._currentStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},set:function(t){this._startIndex=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.generate=function(t){var e=mN(pR(this.currentColor.rgb)),n=cR(this.stepOptions.hue)?this.stepOptions.hue:1/t,i={brighten:0,lighten:0,hue:e.h,lightness:e.l,saturation:e.s},r=[],o=0==this.list.length?0:1;if(this.reuse)for(var s=o;s<=t;s++)r.push(mN(pR(this._list[s].rgb)).h);else for(s=o;s<=t;s++){var a=e.h+n*s;this.wrap&&a>1&&(a-=1),r.push(a)}for(this.shuffle&&r.sort((function(t,e){return Math.random()-.5})),s=0;s<t;s++){this.reuse?e=mN(pR(this._list[s].rgb)):e.h=r.shift(),this.applyStepOptions(e,i,s,this._currentPass);var u=bN(yN(e)),l=(this.stepOptions.brighten||0)*s+(this.passOptions.brighten||0)*this._currentPass;0!=l&&(l=this.wrap?tF(l,this.minLightness,this.maxLightness):JN(l,this.minLightness,this.maxLightness),u=u.brighten(l));var h=(this.stepOptions.lighten||0)*s+(this.passOptions.lighten||0)*this._currentPass;0!=h&&(h=this.wrap?tF(h,this.minLightness,this.maxLightness):JN(h,this.minLightness,this.maxLightness),u=u.lighten(h)),this._list.push(u)}this._currentPass++},Object.defineProperty(e.prototype,"currentColor",{get:function(){return 0==this._list.length?this.baseColor.saturate(this.saturation):this._list[this._list.length-1].saturate(this.saturation)},enumerable:!0,configurable:!0}),e.prototype.applyStepOptions=function(t,e,n,i){t.l=e.lightness+(this.stepOptions.lightness||0)*n+(this.passOptions.lightness||0)*i,this.wrap?(t.l>1?t.l=t.l-Math.floor(t.l):t.l<0&&(t.l=-(t.l-Math.floor(t.l))),t.l=tF(t.l,this.minLightness,this.maxLightness)):(t.l>1?t.l=1:t.l<0&&(t.l=0),t.l=JN(t.l,this.minLightness,this.maxLightness))},e.prototype.processConfig=function(e){if(e&&cR(e.list)&&vR(e.list))for(var n=0,i=e.list.length;n<i;n++)e.list[n]instanceof vN||(e.list[n]=bN(e.list[n]));t.prototype.processConfig.call(this,e)},e}(wN);QM.registeredClasses.ColorSet=kU;var AU=function(t){function e(){var e=t.call(this)||this;e._list=[],e._currentStep=0,e._startIndex=0,e._currentPass=0,e.baseColor=new vN({r:103,g:183,b:220}),e.className="PatternSet";var n=new rV;return e.list=[e.getLinePattern(1e3,45,1,6),e.getRectPattern(10,0,4),e.getLinePattern(1e3,-45,1,6),e.getCirclePattern(11,2,!0),e.getLinePattern(6,90,1),e.getRectPattern(12,45,6,!0),e.getLinePattern(6,0,1),e.getRectPattern(7,0,4),e.getLinePattern(1e3,45,2,3,"4,2"),e.getCirclePattern(9,3,!1),e.getLinePattern(1e3,-45,2,3,"4,2"),e.getRectPattern(10,45,Math.sqrt(50)),e.getLinePattern(1e3,-45,2,1),e.getRectPattern(10,0,9),e.getLinePattern(1e3,45,2,1),e.getLinePattern(1e3,0,3,1),e.getRectPattern(10,45,10),e.getLinePattern(1e3,90,3,1)],e.baseColor=n.getFor("stroke"),e.applyTheme(),e}return Qj(e,t),e.prototype.getLinePattern=function(t,e,n,i,r){var o=new PU;return o.width=t,o.height=t,o.stroke=this.baseColor,o.gap=i,o.strokeDasharray=r,o.strokeWidth=n,o.rotation=e,o},e.prototype.getRectPattern=function(t,e,n,i){var r=new IU;return r.width=t,r.height=t,r.rectWidth=n,r.rectHeight=n,i?(r.stroke=this.baseColor,r.strokeWidth=1,r.fillOpacity=0):(r.fill=this.baseColor,r.strokeWidth=0),0!=e&&(r.shapeRendering="auto"),r.rotation=e,r},e.prototype.getCirclePattern=function(t,e,n){var i=new CU;return i.width=t,i.height=t,i.shapeRendering="auto",i.radius=e,n?(i.stroke=this.baseColor,i.strokeWidth=1,i.fillOpacity=0):(i.fill=this.baseColor,i.strokeWidth=0),i},Object.defineProperty(e.prototype,"list",{get:function(){return this._list},set:function(t){this._list=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.next=function(){var t=this.getIndex(this.currentStep);return this._currentStep++,t},e.prototype.getIndex=function(t){for(;this.list.length<=t;)this.generatePatterns();return this.list[t].clone()},e.prototype.generatePatterns=function(){var t=this.list.length/(this._currentPass+1);this._currentPass++;for(var e=0;e<t;e++)this.list.push(this.list[e].clone())},e.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(e.prototype,"currentStep",{get:function(){return this._currentStep},set:function(t){this._currentStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},set:function(t){this._startIndex=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){t.prototype.processConfig.call(this,e)},e}(wN);QM.registeredClasses.PatternSet=AU,function(){function t(){this._disposed=!1,this._disposers=[]}t.prototype.init=function(){},t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._disposers;for(this._disposers=null;0!==t.length;)t.shift().dispose()}}}();var DU=function(t){function e(){var e=t.call(this)||this;e.className="AmChartsLogo",e.valign="bottom",e.opacity=.3,e.defaultState.properties.opacity=.4,e.url="https://www.amcharts.com/",e.urlTarget="_blank",e.showSystemTooltip=!0,e.readerTitle="Chart created using amCharts library",e.width=66,e.height=21,e.background.opacity=0;var n=bN("#474758");"#ffffff"==(new rV).getFor("background").alternative.hex&&(n=bN("#ffffff"));var i=new NV;i.addColor(n),i.addColor(n,1,.75),i.addColor(bN("#3cabff"),1,.755),i.rotation=-10;var r=i,o=e.createChild(HL);o.shouldClone=!1,o.isMeasured=!1,o.segments=[[{x:15,y:15},{x:27,y:15},{x:36,y:6},{x:40.5,y:10.5},{x:45,y:6},{x:54,y:15},{x:60,y:15}]],o.strokeWidth=6*.3,o.tensionX=.8,o.tensionY=1,o.stroke=bN("#3cabff");var s=e.createChild(HL);s.shouldClone=!1,s.isMeasured=!1,s.segments=[[{x:6,y:15},{x:15,y:15},{x:27,y:12*.3},{x:39.9,y:15},{x:51,y:15},{x:60,y:15}]],s.strokeWidth=6*.3,s.tensionX=.75,s.tensionY=1,s.stroke=r,e._disposers.push(s);var a=new SU;e.filters.push(a);var u=new SU;u.saturation=1;var l=e.states.create("hover");return l.properties.opacity=1,l.filters.push(u),e.applyTheme(),e}return Qj(e,t),e}(aL);function jU(t){-1==QM.queue.indexOf(t)&&(t.__disabled=!0,t.tooltipContainer.__disabled=!0,t.events.disableType("appeared"),0==QM.queue.length&&(QM.events.once("exitframe",(function(){NU(t)})),uL.requestFrame()),t.addDisposer(new pM((function(){RU(t)}))),QM.queue.push(t))}function RU(t){var e=QM.queue.indexOf(t);if(e>=0){QM.queue.splice(QM.queue.indexOf(t),1);var n=QM.queue[e];n&&NU(n)}}function MU(t){t.__disabled&&eV(t.htmlContainer,kF.viewportTarget)&&(t.vpDisposer&&t.vpDisposer.dispose(),jU(t))}function NU(t){t.__disabled=!1,t.tooltipContainer.__disabled=!1,t.events.enableType("appeared"),t.dispatch("removedfromqueue"),t.showOnInit&&t.events.on("appeared",(function(){RU(t)})),t.vpDisposer&&t.vpDisposer.dispose(),t instanceof aL&&t.invalidateLabels(),t.tooltipContainer&&t.tooltipContainer.invalidateLayout(),t instanceof bL?(t.invalidateData(),t.reinit(),t.events.once("datavalidated",(function(){t.showOnInit?t.appear():RU(t)}))):(t.reinit(),t.events.once("inited",(function(){RU(t)})),t.showOnInit&&t.appear())}function FU(t,e){var n;gR(e)&&(cR(QM.registeredClasses[e])?e=QM.registeredClasses[e]:(e=QM.registeredClasses.Container,n=new Error("Class ["+e+"] is not loaded.")));var i=function(t,e){var n=HF(t),i=!1;if(n||((n=document.createElement("div")).style.width="200px",n.style.height="200px",n.style.visibility="hidden",n.style.position="absolute",document.body.appendChild(n),i=!0),n){n.innerHTML="";var r=new AV(n),o=new DV(r.SVGContainer,"svg-"+(kV.length-1)),s=new aL;s.htmlContainer=n,s.svgContainer=r,s.width=rR(100),s.height=rR(100),s.background.fillOpacity=0,s.paper=o,o.append(s.group),i&&function(t){if("loading"!==document.readyState)t();else{var e=function(){"loading"!==document.readyState&&(document.removeEventListener("readystatechange",e),t())};document.addEventListener("readystatechange",e)}}((function(){s.moveHtmlContainer(t)})),s.relativeWidth=1,s.relativeHeight=1,r.container=s;var a=s.createChild(e);a.topParent=s;var u=a.uid;QM.invalidSprites[u]=[],QM.invalidDatas[u]=[],QM.invalidPositions[u]=[],QM.invalidLayouts[u]=[],s.baseId=u,a.isBaseSprite=!0,a.focusFilter=new EU,QM.baseSprites.push(a),QM.baseSpritesByUid[u]=a,a.maskRectangle={x:0,y:0,width:Math.max(r.width||0,0),height:Math.max(r.height||0,0)},s.events.on("maxsizechanged",(function(t){0!=t.previousWidth&&0!=t.previousHeight||s.deepInvalidate(),a.maskRectangle&&(a.maskRectangle={x:0,y:0,width:Math.max(r.width||0,0),height:Math.max(r.height||0,0)})}));var l=null,h=function(){a.isDisposed()?l=null:null==QF(a.dom)?(kF.autoDispose?(s.htmlContainer=void 0,r.htmlElement=void 0,a.dispose()):IV("Chart was not disposed",a.uid),l=null):l=window.setTimeout(h,1e3)};h(),a.addDisposer(new pM((function(){null!==l&&clearTimeout(l),nM(QM.baseSprites,a),QM.baseSpritesByUid[a.uid]=void 0}))),a.addDisposer(s);var c=s.createChild(aL);c.topParent=s,c.width=rR(100),c.height=rR(100),c.isMeasured=!1,s.tooltipContainer=c,a.tooltip=new JL,a.tooltip.hide(0),a.tooltip.setBounds({x:0,y:0,width:c.maxWidth,height:c.maxHeight}),c.events.on("maxsizechanged",(function(){pR(a.tooltip).setBounds({x:0,y:0,width:c.maxWidth,height:c.maxHeight})}),void 0,!1);var p=new zL;if(p.events.on("inited",(function(){p.__disabled=!0}),void 0,!1),s.preloader=p,a instanceof aL&&!a.hasLicense()){var d=c.createChild(DU);c.events.on("maxsizechanged",(function(t){c.maxWidth<=100||c.maxHeight<=50?d.hide():(d.isHidden||d.isHiding)&&d.show()}),void 0,!1),a.logo=d,d.align="left",d.valign="bottom"}if(s.isStandaloneInstance=!0,kF.onlyShowOnViewport)if(eV(n,kF.viewportTarget))kF.queue&&jU(a);else{a.__disabled=!0,a.tooltipContainer.__disabled=!0;var f=[BF(window,"DOMContentLoaded",(function(){MU(a)})),BF(window,"load",(function(){MU(a)})),BF(window,"resize",(function(){MU(a)})),BF(window,"scroll",(function(){MU(a)}))];if(kF.viewportTarget)for(var g=vR(kF.viewportTarget)?kF.viewportTarget:kF.viewportTarget?[kF.viewportTarget]:[],y=0;y<g.length;y++){var m=g[y];f.push(BF(m,"resize",(function(){MU(a)}))),f.push(BF(m,"scroll",(function(){MU(a)})))}var v=new dM(f);a.addDisposer(v),a.vpDisposer=v}else kF.queue&&jU(a);return a}throw uL.log("html container not found"),new Error("html container not found")}(t,e);return n&&i.raiseCriticalError(n),i}function VU(t){-1===QM.themes.indexOf(t)&&QM.themes.push(t)}var LU=function(t){function e(){var e=t.call(this)||this;e.className="Grip";var n=new rV;e.layout="absolute",e.padding(10,10,10,10),e.margin(3,3,3,3),e.background.fillOpacity=.3,e.background.cornerRadius(10,10,10,10);var i=new oL;i.element=e.paper.add("path");var r=EL({x:-6,y:0});return r+=kL({x:6,y:0}),r+=EL({x:-8,y:-6}),r+=kL({x:0,y:-12}),r+=kL({x:8,y:-6}),r+=EL({x:-8,y:6}),r+=kL({x:0,y:12}),r+=kL({x:8,y:6}),i.path=r,i.strokeWidth=2,i.fillOpacity=0,i.pixelPerfect=!0,i.padding(0,4,0,4),i.stroke=n.getFor("text"),i.strokeOpacity=.7,i.align="center",i.valign="middle",e.icon=i,e.label.dispose(),e.label=void 0,e.position="right",e.autoHideDelay=3e3,e.events.on("shown",(function(t){e._autoHideTimeout&&e._autoHideTimeout.dispose(),e.autoHideDelay&&(e._autoHideTimeout=e.setTimeout((function(){e.hide()}),e.autoHideDelay))})),e.events.on("down",(function(t){e._autoHideTimeout&&e._autoHideTimeout.dispose()})),e.events.on("out",(function(t){e.autoHideDelay&&(e._autoHideTimeout=e.setTimeout((function(){e.hide()}),e.autoHideDelay))})),e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(t){if(this.setPropertyValue("position",t))switch(t){case"left":this.align="left",this.valign="middle",this.horizontalCenter="left",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=rR(30);break;case"right":this.align="right",this.valign="middle",this.horizontalCenter="right",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=rR(30);break;case"top":this.align="center",this.valign="top",this.horizontalCenter="middle",this.verticalCenter="top",this.icon.rotation=90,this.width=rR(30),this.height=void 0;break;case"bottom":this.align="center",this.valign="bottom",this.horizontalCenter="middle",this.verticalCenter="bottom",this.icon.rotation=90,this.width=rR(30),this.height=void 0;break;default:this.align="center",this.valign="middle",this.horizontalCenter="middle",this.verticalCenter="middle",this.icon.rotation=90,this.width=rR(30),this.height=void 0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoHideDelay",{get:function(){return this.getPropertyValue("autoHideDelay")},set:function(t){this.setPropertyValue("autoHideDelay",t)},enumerable:!0,configurable:!0}),e}(xL);QM.registeredClasses.Grip=LU;var UU=function(t){function e(){var e=t.call(this)||this;return e.className="ChartDataItem",e.applyTheme(),e}return Qj(e,t),e}(vL),BU=function(t){function e(){var n=t.call(this)||this;if(n._legend=new fM,n.constructor===e)throw new Error("'Chart' cannot be instantiated directly. Please use a specific chart type.");n.className="Chart";var i=new _L;n.titles=new nN(i),n._disposers.push(new JM(n.titles)),n._disposers.push(i),n.width=rR(100),n.height=rR(100),n.layout="vertical";var r=n.createChild(aL);r.shouldClone=!1,r.layout="vertical",r.width=rR(100),r.height=rR(100),n.chartAndLegendContainer=r;var o=r.createChild(aL);return o.shouldClone=!1,o.width=rR(100),o.height=rR(100),n.chartContainer=o,n.showOnInit=!0,n._disposers.push(n._legend),n.titles.events.on("inserted",(function(t){n.processTitle(t),n.updateReaderTitleReferences()}),n,!1),n.titles.events.on("removed",(function(t){n.updateReaderTitleReferences()}),n,!1),n.role="region",n.defaultState.transitionDuration=1,n.applyTheme(),n}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Chart"))},e.prototype.draw=function(){this.fixLayout(),t.prototype.draw.call(this)},e.prototype.fixLayout=function(){var t=this.legend;if(t){var e=this.chartAndLegendContainer,n=this.chartContainer;switch(n.x=void 0,n.y=void 0,t.x=void 0,t.y=void 0,t.position){case"left":e.layout="horizontal",t.toBack();break;case"right":e.layout="horizontal",t.toFront();break;case"top":e.layout="vertical",t.toBack();break;case"bottom":e.layout="vertical",t.toFront()}}},e.prototype.feedLegend=function(){},e.prototype.processTitle=function(t){var e=t.newValue;return e.parent=this,e.toBack(),e.shouldClone=!1,e.align="center",e.uidAttr(),e},e.prototype.updateReaderTitleReferences=function(){if(this.titles.length){var t=[];VM(this.titles.iterator(),(function(e){t.push(e.uid)})),this.setSVGAttribute({"aria-labelledby":t.join(" ")})}else this.removeSVGAttribute("aria-labelledby")},Object.defineProperty(e.prototype,"legend",{get:function(){return this._legend.get()},set:function(t){this.setLegend(t)},enumerable:!0,configurable:!0}),e.prototype.setLegend=function(t){var e=this;this._legend.get()!==t&&(t?(t.parent=this.chartAndLegendContainer,this._legend.set(t,t.events.on("propertychanged",(function(t){"position"==t.property&&e.fixLayout()}),void 0,!1)),t.addDisposer(new pM((function(){e.legend=void 0})))):this._legend.reset(),this.feedLegend())},e.prototype.dispose=function(){this.legend&&this.legend.dispose(),t.prototype.dispose.call(this)},e.prototype.processConfig=function(e){e&&cR(e.legend)&&!cR(e.legend.type)&&(e.legend.type="Legend"),t.prototype.processConfig.call(this,e)},e.prototype.copyFrom=function(e){this.titles.copyFrom(e.titles),this.chartContainer.copyFrom(e.chartContainer),e.legend&&(this.legend=e.legend.clone(),this.legend.removeChildren()),t.prototype.copyFrom.call(this,e)},Object.defineProperty(e.prototype,"dragGrip",{get:function(){var t=this;if(!this._dragGrip){var e=this.tooltipContainer.createChild(LU);e.align="right",e.valign="middle",e.hide(0),e.events.on("down",(function(e){e.touch&&(t.interactionsEnabled=!1)})),e.events.on("up",(function(e){t.interactionsEnabled=!0})),this.events.on("down",(function(t){t.touch&&e.show()})),this._dragGrip=e}return this._dragGrip},set:function(t){this._dragGrip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusable",{get:function(){return this.parent.focusable},set:function(t){this.parent.focusable=t},enumerable:!0,configurable:!0}),e}(bL);QM.registeredClasses.Chart=BU,yL.push({relevant:mL.widthXS,state:function(t,e){if(t instanceof BU){var n=t.states.create(e);return t.pixelPaddingLeft>10&&(n.properties.paddingLeft=10),t.pixelPaddingRight>10&&(n.properties.paddingRight=10),n}return null}}),yL.push({relevant:mL.heightXS,state:function(t,e){if(t instanceof BU){var n=t.states.create(e);return t.pixelPaddingTop>10&&(n.properties.paddingTop=10),t.pixelPaddingBottom>10&&(n.properties.paddingBottom=10),n}return null}}),yL.push({relevant:mL.widthXXS,state:function(t,e){if(t instanceof BU){var n=t.states.create(e);return n.properties.paddingLeft=0,n.properties.paddingRight=0,n}return null}}),yL.push({relevant:mL.heightXXS,state:function(t,e){if(t instanceof BU){var n=t.states.create(e);return n.properties.paddingTop=0,n.properties.paddingBottom=0,n}return null}});var HU=function(t){function e(){var e=t.call(this)||this;return e.className="Bullet",e.isMeasured=!1,e.tooltipX=0,e.tooltipY=0,e.layout="none",e.applyOnClones=!0,e.copyToLegendMarker=!0,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(t){if(this.setPropertyValue("locationX",t)){var e=this.dataItem;e&&e.component&&e.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(t){if(this.setPropertyValue("locationY",t)){var e=this.dataItem;e&&e.component&&e.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xField",{get:function(){return this.getPropertyValue("xField")},set:function(t){this.setPropertyValue("xField",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yField",{get:function(){return this.getPropertyValue("yField")},set:function(t){this.setPropertyValue("yField",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDynamic",{get:function(){return this.getPropertyValue("isDynamic")},set:function(t){this.setPropertyValue("isDynamic",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyToLegendMarker",{get:function(){return this.getPropertyValue("copyToLegendMarker")},set:function(t){this.setPropertyValue("copyToLegendMarker",t)},enumerable:!0,configurable:!0}),e}(aL);QM.registeredClasses.Bullet=HU,yL.push({relevant:mL.isXS,state:function(t,e){if(t instanceof HU){var n=t.states.create(e);return n.properties.disabled=!0,n}return null}});var WU=function(t){function e(){var e=t.call(this)||this;return e.childrenCreated=!1,e.className="LegendDataItem",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"label",{get:function(){var t=this;if(!this._label){var e=this.component.labels.create();this._label=e,this.addSprite(e),this._disposers.push(e),e.parent=this.itemContainer,this._disposers.push(new pM((function(){cR(t.component)&&t.component.labels.removeValue(e)})))}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.setProperty("color",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueLabel",{get:function(){var t=this;if(!this._valueLabel){var e=this.component.valueLabels.create();this._valueLabel=e,this.addSprite(e),this._disposers.push(e),e.parent=this.itemContainer,this._disposers.push(new pM((function(){cR(t.component)&&t.component.valueLabels.removeValue(e)})))}return this._valueLabel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemContainer",{get:function(){var t=this;if(!this._itemContainer){var e=this.component,n=e.itemContainers.create();n.parent=e,this._itemContainer=n,this.addSprite(n),this._disposers.push(n),n.togglable&&n.events.on("toggled",(function(t){e.toggleDataItem(t.target.dataItem)}),void 0,!1),n.focusable&&(n.events.on("hit",(function(t){e.focusedItem=void 0}),void 0,!1),n.events.on("focus",(function(t){e.focusedItem=t.target.dataItem}),void 0,!1),n.events.on("blur",(function(t){e.focusedItem=void 0}),void 0,!1)),this._disposers.push(new pM((function(){cR(t.component)&&t.component.itemContainers.removeValue(n)}))),this.dataContext.uidAttr&&(n.readerControls=this.dataContext.uidAttr(),n.readerLabelledBy=this.dataContext.uidAttr());var i=this.dataContext;if((i instanceof vL||i instanceof oL)&&!i.isDisposed()){var r=function(t){n.readerChecked=t.visible,n.events.disableType("toggled"),n.isActive=!t.visible,n.events.enableType("toggled")};i.addDisposer(new pM((function(){t.component&&t.component.dataItems.remove(t)}))),i instanceof oL?(n.addDisposer(i.events.on("visibilitychanged",r,void 0,!1)),n.addDisposer(i.events.on("hidden",(function(t){n.readerChecked=!1,n.events.disableType("toggled"),n.isActive=!0,n.events.enableType("toggled")}),void 0,!1)),n.addDisposer(i.events.on("shown",(function(t){n.readerChecked=!0,n.events.disableType("toggled"),n.isActive=!1,n.events.enableType("toggled")}),void 0,!1))):n.addDisposer(i.events.on("visibilitychanged",r,void 0,!1))}}return this._itemContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marker",{get:function(){var t=this;if(!this._marker){var e=this.component.markers.create();this._marker=e,e.parent=this.itemContainer,this.addSprite(e),this._disposers.push(e),this._disposers.push(new pM((function(){cR(t.component)&&t.component.markers.removeValue(e)})))}return this._marker},enumerable:!0,configurable:!0}),e}(vL),zU=function(){this.createMarker=!0},qU=function(t){function e(){var e=t.call(this)||this;e.className="Legend",e.layout="grid",e.setPropertyValue("useDefaultMarker",!1),e.setPropertyValue("scrollable",!1),e.setPropertyValue("contentAlign","center");var n=new aL;n.applyOnClones=!0,n.padding(8,0,8,0),n.margin(0,10,0,10),n.layout="horizontal",n.clickable=!0,n.focusable=!0,n.role="switch",n.togglable=!0,n.cursorOverStyle=LV.pointer,n.background.fillOpacity=0,e.itemContainers=new nN(n),e._disposers.push(new JM(e.itemContainers)),e._disposers.push(e.itemContainers.template),e._disposers.push(xV().body.events.on("keyup",(function(t){if(hV.isKey(t.event,"enter")&&e.focusedItem){var n=e.focusedItem,i=n.itemContainer;i.togglable?e.toggleDataItem(n):i.clickable&&i.events.isEnabled("hit")&&(i.dispatchImmediately("hit",{event:t}),e.focusedItem=n)}}),e));var i=new rV,r=new aL;r.width=23,r.height=23,r.interactionsEnabled=!1,r.applyOnClones=!0,r.setStateOnChildren=!0,r.background.fillOpacity=0,r.background.strokeOpacity=0,r.propertyFields.fill="fill",r.valign="middle";var o=i.getFor("disabledBackground");r.events.on("childadded",(function(t){var e=t.newValue.states.create("active");e.properties.stroke=o,e.properties.fill=o})),e.markers=new nN(r),e._disposers.push(new JM(e.markers)),e._disposers.push(e.markers.template);var s=r.createChild(wL);s.width=rR(100),s.height=rR(100),s.applyOnClones=!0,s.propertyFields.fill="fill",s.strokeOpacity=0;var a=new _L;a.text="{name}",a.margin(0,5,0,5),a.valign="middle",a.applyOnClones=!0,a.states.create("active").properties.fill=i.getFor("disabledBackground"),e.labels=new nN(a),e._disposers.push(new JM(e.labels)),e._disposers.push(e.labels.template),a.interactionsEnabled=!1,a.truncate=!0,a.fullWords=!1;var u=new _L;return u.margin(0,5,0,0),u.valign="middle",u.width=50,u.align="right",u.textAlign="end",u.applyOnClones=!0,u.states.create("active").properties.fill=i.getFor("disabledBackground"),u.interactionsEnabled=!1,e.valueLabels=new nN(u),e._disposers.push(new JM(e.valueLabels)),e._disposers.push(e.valueLabels.template),e.position="bottom",n.states.create("active"),n.setStateOnChildren=!0,e.role="group",e.events.on("layoutvalidated",e.handleScrollbar,e,!1),e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Legend"))},e.prototype.createDataItem=function(){return new WU},e.prototype.validateDataElements=function(){this.scrollbar&&(this.scrollbar.start=0,this.scrollbar.end=1),t.prototype.validateDataElements.call(this)},e.prototype.validateDataElement=function(e){t.prototype.validateDataElement.call(this,e);var n=e.itemContainer,i=e.marker,r=e.valueLabel;n.readerChecked=e.dataContext.visible,e.dataContext.legendDataItem=e;var o=e.label.maxWidth;e.label.width=void 0,o>0&&(e.label.maxWidth=o),"right"==r.align&&(r.width=void 0);var s=e.dataContext.legendSettings,a=e.dataContext;!a.createLegendMarker||this.useDefaultMarker&&a instanceof oL?this.markers.template.propertyFields.fill=void 0:e.childrenCreated||(a.createLegendMarker(i),e.childrenCreated=!0),a.updateLegendValue&&a.updateLegendValue(),a.component&&a.component.updateLegendValue&&a.component.updateLegendValue(a),r.invalid&&r.validate(),r.__disabled=""==r.text||null==r.text,!s||null==s.itemValueText&&null==s.valueText||(r.__disabled=!1);var u=e.dataContext.visible;void 0===u&&(u=!0),u=uR(u),e.dataContext.visible=u,n.events.disableType("toggled"),n.isActive=!u,n.setState(n.isActive?"active":"default",0),n.events.enableType("toggled")},e.prototype.afterDraw=function(){var e=this,n=this.getPropertyValue("maxWidth"),i=0;this.labels.each((function(t){t.invalid&&t.validate(),t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight>i&&(i=t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight)}));var r=0;this.valueLabels.each((function(t){t.invalid&&t.validate(),t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight>r&&(r=t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight)}));var o=0;this.markers.each((function(t){t.invalid&&t.validate(),t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight>o&&(o=t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight)}));var s,a=this.itemContainers.template,u=a.pixelMarginRight+a.pixelMarginLeft,l=i+r+o;yR(n)?((n-=u)>l&&(n=l),s=n-o-r):s=i,this.labels.each((function(t){("right"==e.valueLabels.template.align||t.measuredWidth>s)&&(t.width=Math.min(t.maxWidth,s-t.pixelMarginLeft-t.pixelMarginRight))})),"right"==this.valueLabels.template.align&&this.valueLabels.each((function(t){t.width=r-t.pixelMarginRight-t.pixelMarginLeft})),t.prototype.afterDraw.call(this)},e.prototype.handleScrollbar=function(){var t=this.scrollbar;this.scrollable&&t&&(t.height=this.measuredHeight,t.x=this.measuredWidth-t.pixelWidth-t.pixelMarginLeft,this.contentHeight>this.measuredHeight?(t.visible=!0,t.thumb.height=t.height*this.measuredHeight/this.contentHeight,this.paddingRight=t.pixelWidth+t.pixelMarginLeft+ +t.pixelMarginRight):t.visible=!1,this.updateMasks())},Object.defineProperty(e.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(t){this.setPropertyValue("position",t)&&("left"==t||"right"==t?(this.margin(10,5,10,10),this.valign="middle",this.contentAlign="none",this.valueLabels.template.align="right",yR(this.maxColumns)||(this.maxColumns=1),this.width=void 0,this.maxWidth=220):(this.maxColumns=void 0,this.width=rR(100),this.valueLabels.template.align="left"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useDefaultMarker",{get:function(){return this.getPropertyValue("useDefaultMarker")},set:function(t){this.setPropertyValue("useDefaultMarker",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollable",{get:function(){return this.getPropertyValue("scrollable")},set:function(t){if(this.setPropertyValue("scrollable",t,!0))if(t){var e=this.createChild(KL);this.scrollbar=e,e.isMeasured=!1,e.orientation="vertical",e.endGrip.__disabled=!0,e.startGrip.__disabled=!0,e.visible=!1,e.marginLeft=5,this._mouseWheelDisposer=this.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer),this._disposers.push(e.events.on("rangechanged",this.updateMasks,this,!1))}else this._mouseWheelDisposer&&(this._mouseWheelDisposer.dispose(),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=void 0))},enumerable:!0,configurable:!0}),e.prototype.handleWheel=function(t){var e=t.shift.y,n=this.scrollbar;if(n){var i=e/1e3*this.measuredHeight/this.contentHeight,r=n.end-n.start;e>0?(n.start=kR(0,n.start-i),n.end=n.start+r):(n.end=AR(1,n.end-i),n.start=n.end-r)}},e.prototype.updateMasks=function(){var t=this;this.scrollbar&&this.itemContainers.each((function(e){e.dy=-t.scrollbar.thumb.pixelY*t.contentHeight/t.measuredHeight,e.maskRectangle={x:0,y:-e.dy,width:t.measuredWidth,height:t.measuredHeight}}))},e.prototype.toggleDataItem=function(t){var e=t.dataContext;!e.visible||e.isHiding||e instanceof oL&&e.isHidden?(t.color=t.colorOrig,t.itemContainer.isActive=!1,!0===e.hidden&&(e.hidden=!1),e.show?e.show():e.visible=!0,this.svgContainer.readerAlert(this.language.translate("%1 shown",this.language.locale,t.label.readerTitle))):(t.itemContainer.isActive=!0,e.hide?e.hide():e.visible=!1,this.svgContainer.readerAlert(this.language.translate("%1 hidden",this.language.locale,t.label.readerTitle)),t.color=(new rV).getFor("disabledBackground"))},Object.defineProperty(e.prototype,"preloader",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.handleDataItemPropertyChange=function(t,e){t.valueLabel.invalidate(),t.label.invalidate()},e}(bL);QM.registeredClasses.Legend=qU,yL.push({relevant:mL.widthXS,state:function(t,e){if(t instanceof qU&&("left"==t.position||"right"==t.position)){var n=t.states.create(e);return n.properties.position="bottom",n}return null}}),yL.push({relevant:mL.heightXS,state:function(t,e){if(t instanceof qU&&("top"==t.position||"bottom"==t.position)){var n=t.states.create(e);return n.properties.position="right",n}return null}}),yL.push({relevant:mL.isXS,state:function(t,e){if(t instanceof qU){var n=t.states.create(e);return n.properties.disabled=!0,n}return null}});var GU=function(t){function e(){var e=t.call(this)||this;return e.className="SeriesDataItem",e.values.value={},e.values.value={},e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new YM,this._disposers.push(new GM(this._bullets))),this._bullets},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.bullets.clear(),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),e}(vL),YU=function(t){function e(){var n=t.call(this)||this;if(n._ignoreMinMax=!1,n._showBullets=!0,n.legendSettings=new zU,n._tmin=new YM,n._tmax=new YM,n._smin=new YM,n._smax=new YM,n.dataItemsByAxis=new YM,n.skipFocusThreshold=20,n._itemReaderTextChanged=!1,n.calculatePercent=!1,n.usePercentHack=!0,n.autoDispose=!0,n.simplifiedProcessing=!1,n.constructor===e)throw new Error("'Series' cannot be instantiated directly. Please use a specific series type.");n.className="Series",n.isMeasured=!1,n.layout="none",n.shouldClone=!1,n.setPropertyValue("hidden",!1),n.axisRanges=new eN,n.axisRanges.events.on("inserted",n.processAxisRange,n,!1),n.minBulletDistance=0,n.mainContainer=n.createChild(aL),n.mainContainer.shouldClone=!1,n.mainContainer.mask=n.createChild(oL),n._disposers.push(n.mainContainer);var i=n.mainContainer.createChild(aL);return n._shouldBeReady.push(i),i.shouldClone=!1,i.layout="none",i.virtualParent=n,n._disposers.push(i),n.bulletsContainer=i,n.tooltip=new JL,n.tooltip.virtualParent=n,n._disposers.push(n.tooltip),n.hiddenState.transitionEasing=wF,n.dataItem=n.createDataItem(),n._disposers.push(n.dataItem),n.dataItem.component=n,n.role="group",n.applyTheme(),n}return Qj(e,t),e.prototype.applyTheme=function(){t.prototype.applyTheme.call(this),kF.autoSetClassName&&this.bulletsContainer&&(this.bulletsContainer.className=this.className+"-bullets",this.bulletsContainer.setClassName())},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Series"))},e.prototype.createDataItem=function(){return new GU},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(t){},e.prototype.processBullet=function(t){var e=this,n=t.newValue;n.isTemplate=!0,this.events.once("datavalidated",(function(t){e.itemsFocusable()&&(n.focusable=!0)}))},e.prototype.removeBullet=function(t){var e=t.oldValue;this.dataItems.each((function(t){var n=t.bullets.getKey(e.uid);n&&n.dispose()})),this.invalidate()},e.prototype.validateDataItems=function(){t.prototype.validateDataItems.call(this),this.processValues(!1)},e.prototype.getFirstValue=function(t,e){for(var n=e;n>=0;n--){var i=this.dataItems.getIndex(n).getActualWorkingValue(t);if(yR(i))return i}return null},e.prototype.getAbsoluteFirstValue=function(t){for(var e=0;e<this.dataItems.length;e++){var n=this.dataItems.getIndex(e).values[t].value;if(yR(n))return n}return null},e.prototype.rangeChangeUpdate=function(){t.prototype.rangeChangeUpdate.call(this),this.processValues(!0)},e.prototype.processValues=function(t){var e=this;if(!this.simplifiedProcessing){var n=this.dataItems,i={},r={},o={},s={},a={},u={},l={},h={},c={},p={},d=kR(0,this.startIndex);d=AR(d,this.dataItems.length);var f=AR(this.endIndex,this.dataItems.length);if(yR(d)||(d=0),yR(f)||(f=this.dataItems.length),d>0){var g=n.getIndex(d-1);kM(g.values,(function(t,e){var n=g.getActualWorkingValue(t);yR(n)&&(h[t]=n)}))}for(var y=function(t){var f=n.getIndex(t);kM(f.values,(function(t,n){var g=f.getActualWorkingValue(t);if(yR(g)){yR(i[t])||(i[t]=0),i[t]++,yR(r[t])||(r[t]=0),r[t]+=g,yR(o[t])||(o[t]=0),o[t]+=Math.abs(g),yR(u[t])||(u[t]=g),l[t]=g,yR(s[t])?s[t]>g&&(s[t]=g):s[t]=g,yR(a[t])?a[t]<g&&(a[t]=g):a[t]=g,yR(c[t])||(c[t]=e.getFirstValue(t,d)),yR(p[t])||(p[t]=e.getAbsoluteFirstValue(t)),f.setCalculatedValue(t,g-c[t],"change"),f.setCalculatedValue(t,(g-c[t])/c[t]*100,"changePercent"),f.setCalculatedValue(t,g-p[t],"startChange"),f.setCalculatedValue(t,(g-p[t])/p[t]*100,"startChangePercent");var y=h[t];yR(y)||(y=g),f.setCalculatedValue(t,g-y,"previousChange"),f.setCalculatedValue(t,(g-y)/y*100,"previousChangePercent"),h[t]=g}}))},m=d;m<f;m++)y(m);if(this.calculatePercent){var v=function(t){var i=n.getIndex(t);kM(i.values,(function(t){var n=o[t],r=i.getActualWorkingValue(t);yR(r)&&(n>0?(e.usePercentHack&&r==n&&(n=i.values[t].value),i.setCalculatedValue(t,r/n*100,"percent")):i.setCalculatedValue(t,0,"percent"))}))};for(m=d;m<f;m++)v(m)}if(d>0){var b=n.getIndex(d-1);kM(b.values,(function(t){var e=b.values[t].value;b.setCalculatedValue(t,e-u[t],"change"),b.setCalculatedValue(t,(e-u[t])/u[t]*100,"changePercent")}))}var _=this.dataItem;kM(_.values,(function(t){_.setCalculatedValue(t,r[t],"sum"),_.setCalculatedValue(t,o[t],"absoluteSum"),_.setCalculatedValue(t,r[t]/i[t],"average"),_.setCalculatedValue(t,u[t],"open"),_.setCalculatedValue(t,l[t],"close"),_.setCalculatedValue(t,s[t],"low"),_.setCalculatedValue(t,a[t],"high"),_.setCalculatedValue(t,i[t],"count")}))}},e.prototype.validate=function(){fF()&&this.filters.clear(),VM(this.axisRanges.iterator(),(function(t){t.validate()})),t.prototype.validate.call(this);var e=this.bulletsContainer;if(e.fill=this.fill,e.stroke=this.stroke,e.x=this.pixelX,e.y=this.pixelY,this.bulletsContainer.children.length>0)if(this._showBullets){for(var n=0;n<this.startIndex;n++)(i=this.dataItems.getIndex(n))&&i.bullets.each((function(t,e){e.__disabled=!0}));for(n=this.dataItems.length-1;n>this.endIndex;n--){var i;(i=this.dataItems.getIndex(n))&&i.bullets.each((function(t,e){e.__disabled=!0}))}}else this.bulletsContainer.children.each((function(t){t.__disabled=!0}));this.updateTooltipBounds()},e.prototype.updateTooltipBounds=function(){this.topParent&&this.tooltip.setBounds({x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight})},e.prototype.shouldCreateBullet=function(t,e){return!0},e.prototype.validateDataElement=function(e){var n=this;t.prototype.validateDataElement.call(this,e),this._showBullets?(this.isHidden||(this.bulletsContainer.visible=!0),this.bullets.each((function(t){var i=e.bullets.getKey(t.uid);if(n.shouldCreateBullet(e,t)){if(!i){var r=t.propertyFields.disabled,o=e.dataContext;r&&o&&!1===o[r]?(t.applyOnClones=!1,t.disabled=!1,i=t.clone(),t.disabled=!0,t.applyOnClones=!0):i=t.clone(),i.shouldClone=!1,e.addSprite(i),n.visible&&!n.isHiding||i.hide(0)}var s=i.dataItem;if(s!=e){s&&s.bullets.setKey(t.uid,void 0);var a=n.itemReaderText;i instanceof HU&&(a||(a="{"+i.xField+"}: {"+i.yField+"}"),i.isDynamic&&(e.events.on("workingvaluechanged",i.deepInvalidate,i,!1),n.dataItem.events.on("workingvaluechanged",i.deepInvalidate,i,!1)),i.deepInvalidate()),i.focusable&&(i.events.on("focus",(function(t){i.readerTitle=n.populateString(a,i.dataItem)}),void 0,!1),i.events.on("blur",(function(t){i.readerTitle=""}),void 0,!1)),i.hoverable&&(i.events.on("over",(function(t){i.readerTitle=n.populateString(a,i.dataItem)}),void 0,!1),i.events.on("out",(function(t){i.readerTitle=""}),void 0,!1))}i.parent=n.bulletsContainer,e.bullets.setKey(t.uid,i),i.maxWidth=e.itemWidth,i.maxHeight=e.itemHeight,i.__disabled=!1,n.positionBullet(i)}else i&&(i.__disabled=!0)}))):this.bulletsContainer.visible=!1},e.prototype.handleDataItemWorkingValueChange=function(t,e){this.dataRangeInvalid||this.invalidateProcessedData()},Object.defineProperty(e.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(t){this._ignoreMinMax=t,this.invalidateDataItems()},enumerable:!0,configurable:!0}),e.prototype.createMask=function(){},e.prototype.processAxisRange=function(t){this.rangesContainer||(this.rangesContainer=this.createChild(aL),this.rangesContainer.shouldClone=!1,this.rangesContainer.isMeasured=!1);var e=t.newValue;e&&(e.contents.parent=this.rangesContainer,e.isRange=!0,e.events.on("valuechanged",this.invalidateDataItems,this,!1))},e.prototype.getAxisField=function(t){},e.prototype.showTooltipAtPosition=function(t,e){},Object.defineProperty(e.prototype,"minBulletDistance",{get:function(){return this.getPropertyValue("minBulletDistance")},set:function(t){this.setPropertyValue("minBulletDistance",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new nN(new HU),this._bullets.template.virtualParent=this,this._bullets.events.on("inserted",this.processBullet,this,!1),this._bullets.events.on("removed",this.removeBullet,this,!1),this._disposers.push(new JM(this._bullets)),this._disposers.push(this._bullets.template)),this._bullets},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){},Object.defineProperty(e.prototype,"hiddenInLegend",{get:function(){return this.getPropertyValue("hiddenInLegend")},set:function(t){this.setPropertyValue("hiddenInLegend",t)&&this.chart&&this.chart.feedLegend()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(t){this.setPropertyValue("name",t);var e=this.legendDataItem;e&&(e.component.invalidate(),e.component.invalidateRawData()),this.readerTitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemReaderText",{get:function(){var t=this._itemReaderText;return t||(this.tooltipText?t=qN(this.tooltipText):this.tooltipHTML&&(t=qN(this.tooltipHTML))),this._adapterO?this._adapterO.apply("itemReaderText",t):t},set:function(t){this._itemReaderText=t,this._itemReaderTextChanged=!0},enumerable:!0,configurable:!0}),e.prototype.itemsFocusable=function(){return!(this.dataItems.length>=this.skipFocusThreshold)},Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),e.prototype.updateLegendValue=function(t,e){if(this.legendDataItem){var n=this.legendSettings,i=this.legendDataItem,r=i.label,o=i.valueLabel;t||e?(o&&(n.itemValueText&&(o.text=n.itemValueText),o.dataItem=t),r&&(n.itemLabelText&&(r.text=n.itemLabelText),r.dataItem=t)):(r&&((n.labelText||null!=n.itemLabelText)&&(r.text=n.labelText),r.dataItem=this.dataItem),o&&((n.valueText||null!=n.itemValueText)&&(o.text=n.valueText),o.dataItem=this.dataItem))}},e.prototype.copyFrom=function(e){this.bullets.copyFrom(e.bullets),this.bulletsContainer.copyFrom(e.bulletsContainer),this.calculatePercent=e.calculatePercent,this.usePercentHack=e.usePercentHack,this.simplifiedProcessing=e.simplifiedProcessing,t.prototype.copyFrom.call(this,e)},e.prototype.raiseCriticalError=function(t){this._chart&&this._chart.modal&&(this._chart.modal.content=this._chart.adapter.apply("criticalError",t).message,this._chart.modal.closable=!1,kF.suppressErrors||this._chart.modal.open(),this._chart.disabled=!0),kF.verbose&&console.log(t)},e.prototype.applyFilters=function(){var e=this;t.prototype.applyFilters.call(this),this.bulletsContainer.filters.clear(),VM(this.filters.iterator(),(function(t){e.bulletsContainer.filters.push(t.clone())}))},Object.defineProperty(e.prototype,"heatRules",{get:function(){var t=this;return this._heatRules||(this._heatRules=new eN,this._heatRules.events.on("inserted",(function(e){var n=e.newValue,i=n.target;if(i){var r=n.dataField;cR(r)||(r="value");var o=t.dataItem,s=n.property,a=lR(n.minValue),u=lR(n.maxValue);yR(a)||yR(u)||t.dataItem.events.on("calculatedvaluechanged",(function(e){e.property==r&&VM(t.dataItems.iterator(),(function(t){var e=!1;tM(t.sprites,(function(t){t.clonedFrom==i&&(t[s]=t[s],e=!0)})),e||tM(t.sprites,(function(t){t instanceof aL&&VM(t.children.iterator(),(function(t){t.className==i.className?t[s]=t[s]:t instanceof aL&&t.deepInvalidate()}))}))}))})),t.dataItems.template.events.on("workingvaluechanged",(function(t){if(t.property==r){var e=t.target,n=!1;tM(e.sprites,(function(t){t.clonedFrom==i&&(t[s]=t[s],n=!0)})),n||tM(e.sprites,(function(t){t instanceof aL&&VM(t.children.iterator(),(function(t){t.className==i.className?t[s]=t[s]:t instanceof aL&&t.deepInvalidate()}))}))}})),i.adapter.add(s,(function(t,e,i){var s=lR(n.minValue),a=lR(n.maxValue),u=n.min,l=n.max;if(e instanceof oL){var h=e.propertyFields[i];if(h&&e.dataItem){var c=e.dataItem.dataContext;if(c&&cR(c[h]))return t}}var p=e.dataItem;if(yR(s)||(s=o.values[r].low),yR(a)||(a=o.values[r].high),p&&p.values[r]){var d=p.getActualWorkingValue(r);if(cR(u)&&cR(l)&&yR(s)&&yR(a)&&yR(d)){var f=void 0;if(f=n.logarithmic?(Math.log(d)*Math.LOG10E-Math.log(s)*Math.LOG10E)/(Math.log(a)*Math.LOG10E-Math.log(s)*Math.LOG10E):(d-s)/(a-s),!yR(d)||yR(f)&&Math.abs(f)!=1/0||(f=.5),yR(u))return u+(l-u)*f;if(u instanceof vN)return new vN(fN(u.rgb,l.rgb,f))}}return t}))}}))),this._heatRules},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){var n;if(e){if(cR(e.bullets)&&vR(e.bullets))for(var i=0,r=e.bullets.length;i<r;i++){var o=e.bullets[i];cR(o.type)||(o.type="Bullet")}cR(e.heatRules)&&vR(e.heatRules)&&(n=e.heatRules,delete e.heatRules)}if(t.prototype.processConfig.call(this,e),n){for(i=0,r=n.length;i<r;i++){var s=n[i],a=this;if(cR(s.target)&&gR(s.target))if(this.map.hasKey(s.target))a=this.map.getKey(s.target);else for(var u=s.target.split("."),l=0;l<u.length;l++)if(a instanceof eN){var h=a.getIndex(lR(u[l]));a=h||a[u[l]]}else{var c=u[l].match(/^(.*)\[([0-9]+)\]/);a=c?a[c[1]]instanceof eN?a[c[1]].getIndex(lR(c[2])):a[c[1]][lR(c[2])]:a[u[l]]}s.target=a,cR(s.min)&&(s.min=this.maybeColorOrPercent(s.min)),cR(s.max)&&(s.max=this.maybeColorOrPercent(s.max))}t.prototype.processConfig.call(this,{heatRules:n})}},e.prototype.configOrder=function(e,n){return e==n?0:"heatRules"==e?1:"heatRules"==n?-1:t.prototype.configOrder.call(this,e,n)},e.prototype.setVisibility=function(e){t.prototype.setVisibility.call(this,e),this.bulletsContainer.visible=e},e}(bL);QM.registeredClasses.Series=YU,QM.registeredClasses.SeriesDataItem=GU;var KU=function(t){function e(){var e=t.call(this)||this;return e.className="SerialChartDataItem",e.applyTheme(),e}return Qj(e,t),e}(UU),XU=function(t){function e(){var e=t.call(this)||this;e.className="SerialChart",e.colors=new kU,e._usesData=!1;var n=e.chartContainer.createChild(aL);n.shouldClone=!1,n.width=rR(100),n.height=rR(100),n.isMeasured=!1,n.layout="none",n.zIndex=2,e.seriesContainer=n;var i=e.chartContainer.createChild(aL);return i.shouldClone=!1,i.width=rR(100),i.height=rR(100),i.isMeasured=!1,i.zIndex=3,i.layout="none",e.bulletsContainer=i,e.applyTheme(),e}return Qj(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.colors&&this.colors.dispose(),this.patterns&&this.patterns.dispose()},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Serial chart"))},Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new nN(this.createSeries()),this._series.events.on("inserted",this.handleSeriesAdded,this,!1),this._series.events.on("removed",this.handleSeriesRemoved,this,!1),this._disposers.push(new JM(this._series,!1)),this._disposers.push(this._series.template)),this._series},enumerable:!0,configurable:!0}),e.prototype.handleSeriesRemoved=function(t){var e=t.oldValue;this.dataUsers.removeValue(e),this.dataUsers.each((function(t){t.invalidateDataItems()})),e.autoDispose?e.dispose():(e.parent=void 0,e.bulletsContainer.parent=void 0);var n=this.legend;if(n){for(var i=this.legend.dataItems,r=i.length-1;r>=0;r--){var o=i.getIndex(r);o&&o.dataContext==e&&n.dataItems.remove(o)}for(r=n.data.length-1;r>=0;r--){var s=n.data[r];s&&s==e&&nM(n.data,s)}}},e.prototype.handleSeriesAdded=function(t){var e=this,n=t.newValue;n.isDisposed()||(n.chart=this,n.parent=this.seriesContainer,n.bulletsContainer.parent=this.bulletsContainer,this._dataUsers.moveValue(n),n.addDisposer(new pM((function(){e.dataUsers.removeValue(n)}))),this.handleSeriesAdded2(n),n.hiddenInLegend||this.legend&&this.legend.addData(n))},e.prototype.handleSeriesAdded2=function(t){var e=this;this.dataInvalid||this._disposers.push(QM.events.once("exitframe",(function(){t.data&&0!=t.data.length||(t.data=e.data,t.showOnInit&&(t.reinit(),t.setPropertyValue("showOnInit",!1),t.showOnInit=!0),t.events.once("datavalidated",(function(){t.data==e.data&&(t._data=[])})))})))},e.prototype.feedLegend=function(){var t=this.legend;if(t){var e=[];VM(this.series.iterator(),(function(t){t.hiddenInLegend||e.push(t)})),t.dataFields.name="name",t.data=e}},e.prototype.createSeries=function(){return new YU},Object.defineProperty(e.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(t){this.setPropertyValue("colors",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(t){this.setPropertyValue("patterns",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.series.copyFrom(e.series)},e.prototype.appear=function(){t.prototype.appear.call(this),this.series.each((function(t){t.showOnInit&&t.inited&&t.appear()}))},e}(BU);QM.registeredClasses.SerialChart=XU;var QU=function(t){function e(){var e=t.call(this)||this;e._axis=new fM,e.dataItems=new eN,e.className="AxisBreak",e.breakSize=.01,e.marginLeft=-5,e.marginRight=-5,e.marginTop=-5,e.marginBottom=-5;var n=new rV,i=new cU;i.fill=n.getFor("background"),i.stroke=bN(),i.fillOpacity=.9,i.zIndex=0,e._fillShape=i;var r=new cU;r.fill=bN(),r.stroke=n.getFor("grid"),r.strokeOpacity=.3,r.zIndex=1,e._startLine=r;var o=new cU;return o.fill=bN(),o.stroke=bN("#000000"),o.strokeOpacity=.3,o.zIndex=2,e._endLine=o,e._disposers.push(e._axis),e.applyTheme(),e}return Qj(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._fillShape&&this._fillShape.dispose(),this._startLine&&this._startLine.dispose(),this._endLine&&this._endLine.dispose()},Object.defineProperty(e.prototype,"startLine",{get:function(){return this._startLine},set:function(t){this._startLine&&this._startLine.dispose(),this._startLine=t,this.addBreakSprite(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLine",{get:function(){return this._endLine},set:function(t){this._endLine&&this._endLine.dispose(),this._endLine=t,this.addBreakSprite(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillShape",{get:function(){return this._fillShape},set:function(t){this._fillShape&&this._fillShape.dispose(),this._fillShape=t,this.addBreakSprite(t)},enumerable:!0,configurable:!0}),e.prototype.addBreakSprite=function(t){t.parent=this,t.isMeasured=!1,this._disposers.push(t)},Object.defineProperty(e.prototype,"axis",{get:function(){return this._axis.get()},set:function(t){if(this._axis.get()!==t){this._axis.set(t,t.renderer.gridContainer.events.on("transformed",this.invalidate,this,!1)),t.renderer.createBreakSprites(this);var e=t.axisBreaks.template;this.startLine.copyFrom(e.startLine),this.endLine.copyFrom(e.endLine),this.fillShape.copyFrom(e.fillShape)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"breakSize",{get:function(){return this.getPropertyValue("breakSize")},set:function(t){this.setPropertyValue("breakSize",t)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPoint",{get:function(){var t=this.axis.renderer;if(t)return t.positionToPoint(this.startPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPoint",{get:function(){var t=this.axis.renderer;if(t)return t.positionToPoint(this.endPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPosition",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.draw=function(){t.prototype.draw.call(this),this.axis&&this.axis.renderer.updateBreakElement(this)},Object.defineProperty(e.prototype,"startValue",{get:function(){return this.getPropertyValue("startValue")},set:function(t){this.setPropertyValue("startValue",t)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){return this.getPropertyValue("endValue")},set:function(t){this.setPropertyValue("endValue",t)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),e}(aL);QM.registeredClasses.AxisBreak=QU;var $U,ZU=function(t){function e(){var e=t.call(this)||this;return e.className="AxisDataItem",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"grid",{get:function(){if(!this._grid){var t=this.component;if(t){var e,n=void 0;if(this.isRange){if((n=t.axisRanges.template.grid).disabled)return;e=n.clone()}else{if((n=t.renderer.grid.template).disabled)return;e=t.renderer.grid.create(),this._disposers.push(new pM((function(){t.renderer.grid.removeValue(e)})))}this.grid=e,e.shouldClone=!1,this._disposers.push(e),e.axis=this.component}}return this._grid},set:function(t){this._grid&&this._grid!=t&&(nM(this.sprites,this._grid),this._grid.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(nM(t.dataItem.sprites,t),t.dataItem.grid=void 0),this.addSprite(t)),this._grid=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tick",{get:function(){if(!this._tick){var t=this.component;if(t){var e,n=void 0;if(this.isRange){if((n=t.axisRanges.template.tick).disabled)return;e=n.clone()}else{if((n=t.renderer.ticks.template).disabled)return;e=t.renderer.ticks.create(),this._disposers.push(new pM((function(){t.renderer.ticks.removeValue(e)})))}this.tick=e,e.axis=this.component,e.shouldClone=!1,this._disposers.push(e)}}return this._tick},set:function(t){this._tick&&this._tick!=t&&(nM(this.sprites,this._tick),this._tick.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(nM(t.dataItem.sprites,t),t.dataItem.tick=void 0),this.addSprite(t)),this._tick=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){if(!this._label){var t=this.component;if(t){var e,n=void 0;if(this.isRange){if((n=t.axisRanges.template.label).disabled)return;e=n.clone()}else{if((n=t.renderer.labels.template).disabled)return;e=t.renderer.labels.create(),this._disposers.push(new pM((function(){t.renderer.labels.removeValue(e)})))}this._disposers.push(e),this.label=e,e.shouldClone=!1,e.axis=this.component,e.virtualParent=t}}return this._label},set:function(t){this._label&&this._label!=t&&(nM(this.sprites,this._label),this._label.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(nM(t.dataItem.sprites,t),t.dataItem.label=void 0),this.addSprite(t)),this._label=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisFill",{get:function(){if(!this._axisFill){var t=this.component;if(t){var e,n=void 0;if(this.isRange){if(n=t.axisRanges.template.axisFill,!this.isTemplate&&n.disabled)return;e=n.clone()}else{if((n=t.renderer.axisFills.template).disabled)return;e=t.renderer.axisFills.create(),this._disposers.push(new pM((function(){t.renderer.axisFills.removeValue(e)})))}this.axisFill=e,e.shouldClone=!1,this._disposers.push(e)}}return this._axisFill},set:function(t){this._axisFill&&this._axisFill!=t&&(nM(this.sprites,this._axisFill),this._axisFill.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(nM(t.dataItem.sprites,t),t.dataItem.axisFill=void 0),t.axis=this.component,this.addSprite(t)),this._axisFill=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this._label&&(this._label.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contents",{get:function(){if(!this._contents){var t=new aL;this.addSprite(t),t.isMeasured=!1,this._contents=t;var e=this.component;if(e){var n=e.renderer.createFill(this.component);n.disabled=!1,n.axis=e,this.addSprite(n),this._mask=n,t.mask=n}}return this._contents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisBreak",{get:function(){return this._axisBreak},set:function(t){this._axisBreak&&this._axisBreak.dataItems.removeValue(this),t&&t.dataItems.push(this),this._axisBreak=t},enumerable:!0,configurable:!0}),e.prototype.validate=function(){this.component&&this.component.validateDataElement(this)},e.prototype.appendChildren=function(){this.component&&this.component.appendDataItem(this)},e.prototype.hasProperty=function(e){return"component"==e||t.prototype.hasProperty.call(this,e)},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.text=e.text,e.bullet&&(this.bullet=e.bullet.clone()),this.minPosition=e.minPosition,this.maxPosition=e.maxPosition},e.prototype.setVisibility=function(e,n){t.prototype.setVisibility.call(this,e,n),this._contents&&(this._contents.visible=e)},Object.defineProperty(e.prototype,"bullet",{get:function(){return this._bullet},set:function(t){this._bullet&&this._bullet!=t&&(nM(this.sprites,this._bullet),this._bullet.dataItem=void 0),this._bullet=t,t&&this.addSprite(t)},enumerable:!0,configurable:!0}),e}(vL);!function(t){t[t.Start=0]="Start",t[t.Middle=.5]="Middle",t[t.End=1]="End"}($U||($U={}));var JU=function(t){function e(){var n=t.call(this)||this;if(n._gridCount=10,n._series=new eN,n.autoDispose=!0,n._axisItemCount=0,n.constructor===e)throw new Error("'Axis' cannot be instantiated directly. Please use a specific axis type.");n.hideTooltipWhileZooming=!0,n.minWidth=1e-4,n.minHeight=1e-4,n.className="Axis",n.shouldClone=!1,n.setPropertyValue("cursorTooltipEnabled",!0),n.toggleZoomOutButton=!0,n.zoomable=!0;var i=new rV;n.title=new _L,n.title.shouldClone=!1,n._disposers.push(n.title),n.setPropertyValue("startLocation",0),n.setPropertyValue("endLocation",1),n._dataItemsIterator=new WM(n.dataItems,(function(){return n.dataItems.create()})),n._dataItemsIterator.createNewItems=!0;var r=new JL;n._disposers.push(r),r.label.padding(5,10,5,10),r.background.pointerLength=5,r.fitPointerToBounds=!0,r.background.filters.clear(),r.virtualParent=n;var o=r.background;return o.cornerRadius=0,o.fill=i.getFor("alternativeBackground"),o.stroke=o.fill,o.strokeWidth=1,o.fillOpacity=1,r.label.fill=i.getFor("alternativeText"),n.tooltip=r,n.readerHidden=!0,n.events.on("rangechangestarted",(function(){n.series.each((function(t){t.hideTooltipWhileZooming&&(t.tooltip.hide(),t.tooltip.preventShow=!0)})),n.hideTooltipWhileZooming&&(n.tooltip.hide(),n.tooltip.preventShow=!0)}),void 0,!1),n.events.on("rangechangeended",(function(){n.series.each((function(t){t.hideTooltipWhileZooming&&(t.tooltip.hide(),t.tooltip.preventShow=!1)})),n.hideTooltipWhileZooming&&(n.tooltip.hide(),n.tooltip.preventShow=!1)}),void 0,!1),n.applyTheme(),n}return Qj(e,t),e.prototype.fillRule=function(t,e){yR(e)||(e=t.index),e/2==Math.round(e/2)?(t.axisFill.__disabled=!0,t.axisFill.opacity=0):(t.axisFill.opacity=1,t.axisFill.__disabled=!1)},e.prototype.createDataItem=function(){return new ZU},e.prototype.invalidateLayout=function(){t.prototype.invalidateLayout.call(this),VM(this.series.iterator(),(function(t){t.invalidateLayout()}))},e.prototype.invalidateSeries=function(){VM(this.series.iterator(),(function(t){t.invalidate()}))},e.prototype.validateDataElements=function(){this._axisItemCount=0,this.ghostLabel&&(this.renderer.updateLabelElement(this.ghostLabel,this.start,this.end),this.ghostLabel.validate())},e.prototype.updateGridCount=function(){if(this.renderer){var t=this.axisLength/this.renderer.minGridDistance;t!=this._gridCount&&(this._gridCount=t,this.clearCache())}},e.prototype.validateLayout=function(){this.axisFullLength=this.axisLength/(this.end-this.start),t.prototype.validateLayout.call(this),this.updateGridCount();var e=this.renderer;e&&(e.updateAxisLine(),e.updateTooltip(),e.updateBaseGridElement()),this._prevLength!=this.axisLength&&(this.dispatchImmediately("lengthchanged"),this._prevLength=this.axisLength)},e.prototype.initRenderer=function(){},e.prototype.appendDataItem=function(t){var e=this.renderer,n=t.tick;n&&(n.parent=n.above?e.bulletsContainer:e.gridContainer),t.label&&(t.label.parent=e);var i=t.axisFill;i&&(i.parent=i.above?e.bulletsContainer:e.gridContainer);var r=t.grid;r&&(r.parent=r.above?e.bulletsContainer:e.gridContainer),t.bullet&&(t.bullet.parent=e.bulletsContainer)},e.prototype.validate=function(){t.prototype.validate.call(this),this.validateLayout(),this.renderer.updateGridContainer()},e.prototype.validateAxisRanges=function(){var t=this;VM(this.axisRanges.iterator(),(function(e){t.appendDataItem(e),t.validateDataElement(e),e.grid&&e.grid.validate(),e.tick&&e.tick.validate(),e.axisFill&&e.axisFill.validate(),e.label&&e.label.validate()}))},e.prototype.validateBreaks=function(){this._axisBreaks&&VM(this._axisBreaks.iterator(),(function(t){t.invalidate()}))},e.prototype.processBreak=function(t){var e=t.newValue;e.parent=this.renderer.breakContainer,e.axis=this},e.prototype.registerSeries=function(t){var e=this;return this.series.moveValue(t),new dM([new pM((function(){e.series.removeValue(t)})),this.events.on("lengthchanged",t.invalidate,t,!1),this.events.on("lengthchanged",t.createMask,t,!1),this.events.on("startchanged",t.invalidate,t,!1),this.events.on("endchanged",t.invalidate,t,!1)])},Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},set:function(t){if(t!=this._renderer){this._renderer=t,t.chart=this.chart,t.axis=this,t.parent=this,this.title.parent=this,this.initRenderer(),this._disposers.push(t.gridContainer.events.on("maxsizechanged",this.invalidate,this,!1));var e=this.renderer.labels.create();this._disposers.push(e),e.dataItem=this.dataItems.template.clone(),e.text="L",e.parent=this.renderer,e.shouldClone=!1,e.fillOpacity=0,e.opacity=0,e.strokeOpacity=0,e.interactionsEnabled=!1,e.validate(),this.ghostLabel=e,this.events.on("beforedatavalidated",(function(){e.text="L"}),void 0,!1)}},enumerable:!0,configurable:!0}),e.prototype.positionToAngle=function(t){return this.renderer.positionToAngle(t)},e.prototype.pointToPosition=function(t){return this.renderer.pointToPosition(t)},e.prototype.positionToCoordinate=function(t){return this.renderer.positionToCoordinate(t)},e.prototype.getAnyRangePath=function(t,e){return this.renderer.getPositionRangePath(t,e)},e.prototype.anyToPosition=function(t){return 0},e.prototype.anyToPoint=function(t){return{x:0,y:0,angle:0}},e.prototype.getPositionRangePath=function(t,e){return this.renderer?this.renderer.getPositionRangePath(t,e):""},Object.defineProperty(e.prototype,"axisLength",{get:function(){return this.renderer?this.renderer.axisLength:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(t){this.setPropertyValue("cursorTooltipEnabled",t)&&(t&&this.renderer?this.renderer.updateTooltip():this.tooltip&&this.tooltip.hide(0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggleZoomOutButton",{get:function(){return this.getPropertyValue("toggleZoomOutButton")},set:function(t){this.setPropertyValue("toggleZoomOutButton",t)},enumerable:!0,configurable:!0}),e.prototype.hideTooltip=function(e){t.prototype.hideTooltip.call(this,e),this._tooltipPosition=void 0},e.prototype.showTooltipAtPosition=function(t,e){var n=this._tooltip;if(!n||this.dataItems.length<=0)this._tooltipPosition=void 0;else{if(e||(t=this.toAxisPosition(t)),!yR(t)||t<this.start||t>this.end)return n.hide(0),void(this._tooltipPosition=void 0);var i=this.renderer;n.parent||(n.parent=this.tooltipContainer);var r=i.tooltipLocation,o=this.getCellStartPosition(t),s=this.getCellEndPosition(t);if("fixed"==this.tooltipPosition&&(t=o+(s-o)*r),t=OR(t,this.start,this.end),this._tooltipPosition!=t){this._tooltipPosition=t;var a=i.tooltipLocation2,u=i.positionToPoint(o,a),l=i.positionToPoint(s,a);this.currentItemStartPoint=u,this.currentItemEndPoint=l,i.fullWidthTooltip&&(n.width=l.x-u.x,n.height=l.y-u.y);var h=nF(i.positionToPoint(t,a),this.renderer.line);n.text=this.getTooltipText(t),n.text&&(n.delayedPointTo(h),n.show())}this.cursorTooltipEnabled&&!this.tooltip.disabled||n.hide(0)}},e.prototype.toAxisPosition=function(t){if(null!=(t=this.renderer.toAxisPosition(t)))return t*=this.end-this.start,this.renderer.inversed?this.end-t:this.start+t},e.prototype.toGlobalPosition=function(t){return this.renderer.inversed?t=this.end-t:t-=this.start,t/(this.end-this.start)},e.prototype.getTooltipText=function(t){},e.prototype.updateTooltip=function(t,e){var n=this._tooltip;n&&(n.fixDoc=!1,n.pointerOrientation=t,n.setBounds(rF(e,this.renderer.line)))},e.prototype.roundPosition=function(t,e,n){return t},e.prototype.getCellStartPosition=function(t){return t},e.prototype.getCellEndPosition=function(t){return t},Object.defineProperty(e.prototype,"axisRanges",{get:function(){if(!this._axisRanges){var t=this.createDataItem();t.isRange=!0,t.axisFill=this.renderer.axisFills.template.clone(),t.grid=this.renderer.grid.template.clone(),t.tick=this.renderer.ticks.template.clone(),t.label=this.renderer.labels.template.clone(),t.isTemplate=!0,t.component=this,t.axisFill.disabled=!1,t.tick.disabled=!1,t.grid.disabled=!1,t.label.disabled=!1,this._axisRanges=new nN(t),this._axisRanges.events.on("inserted",this.processAxisRange,this,!1),this._disposers.push(new JM(this._axisRanges)),this._disposers.push(this._axisRanges.template)}return this._axisRanges},enumerable:!0,configurable:!0}),e.prototype.processAxisRange=function(t){var e=t.newValue;e.component=this,e.isRange=!0},Object.defineProperty(e.prototype,"axisBreaks",{get:function(){return this._axisBreaks||(this._axisBreaks=new sN(this.createAxisBreak(),(function(t,e){return aN(t.adjustedStartValue,e.adjustedStartValue)})),this._axisBreaks.events.on("inserted",this.processBreak,this,!1),this._disposers.push(new JM(this._axisBreaks)),this._disposers.push(this._axisBreaks.template)),this._axisBreaks},enumerable:!0,configurable:!0}),e.prototype.createAxisBreak=function(){return new QU},Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new eN),this._series},enumerable:!0,configurable:!0}),e.prototype.processSeriesDataItems=function(){},e.prototype.processSeriesDataItem=function(t,e){},e.prototype.postProcessSeriesDataItems=function(t){},e.prototype.postProcessSeriesDataItem=function(t){},e.prototype.updateAxisBySeries=function(){},e.prototype.hideUnusedDataItems=function(){var t=this,e=this._dataItemsIterator;e.createNewItems=!1,VM(e.iterator(),(function(e){t.validateDataElement(e),e.__disabled=!0})),e.clear(),e.createNewItems=!0},e.prototype.getSeriesDataItem=function(t,e,n){},e.prototype.getAngle=function(t,e,n,i,r){},e.prototype.getX=function(t,e,n,i,r){},e.prototype.getPositionX=function(t,e,n,i,r){},e.prototype.getY=function(t,e,n,i,r){},e.prototype.getPositionY=function(t,e,n,i,r){},Object.defineProperty(e.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),e.prototype.dataChangeUpdate=function(){},e.prototype.seriesDataChangeUpdate=function(t){},e.prototype.adjustDifference=function(t,e){var n=e-t;if(yR(n))return this._axisBreaks&&FM(this._axisBreaks.iterator(),(function(i){var r,o,s,a,u,l,h,c,p=i.adjustedStartValue,d=i.adjustedEndValue;if(yR(p)&&yR(d)){if(p>e)return!1;if(d>=t&&yR(p)&&yR(d)){var f=i.breakSize,g=(o={start:t,end:e},s=pR((r={start:p,end:d}).start),a=pR(o.start),u=pR(r.end),l=pR(o.end),h=Math.max(s,a),(c=Math.min(u,l))<h?void 0:{start:h,end:c});g&&(n-=(g.end-g.start)*(1-f))}return!0}})),n},e.prototype.isInBreak=function(t){if(this._axisBreaks)return e=this._axisBreaks.iterator(),n=function(e){return t>=e.adjustedStartValue&&t<=e.adjustedEndValue},e((function(t){return!n(t)||(i=t,!1)})),i;var e,n,i},e.prototype.fixAxisBreaks=function(){var t=this;if(this._axisBreaks){var e=this._axisBreaks;if(e.length>0){tM(NM(e.iterator()),(function(e){var n=AR(e.startValue,e.endValue),i=kR(e.startValue,e.endValue);e.adjustedStartValue=n,e.adjustedEndValue=i,t._axisBreaks.update(e)}));var n=e.first,i=Math.min(n.startValue,n.endValue);VM(e.iterator(),(function(t){var e=t.adjustedStartValue,n=t.adjustedEndValue;e<i&&(e=i,n<i&&(n=i)),t.adjustedStartValue=e,t.adjustedEndValue=n}))}}},Object.defineProperty(e.prototype,"startIndex",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endIndex",{get:function(){return this.dataItems.length},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.getPositionLabel=function(t){return Math.round(100*t)+"%x"},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),e.prototype.createSeriesRange=function(t){var e=this.axisRanges.create();return e.component=this,e.axisFill=this.renderer.axisFills.template.clone(),e.axisFill.disabled=!1,e.axisFill.fillOpacity=0,e.grid=this.renderer.grid.template.clone(),e.grid.disabled=!0,e.tick=this.renderer.ticks.template.clone(),e.tick.disabled=!0,e.label=this.renderer.labels.template.clone(),e.label.disabled=!0,e.addDisposer(new pM((function(){t.axisRanges.removeValue(e)}))),t.axisRanges.push(e),e},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.renderer?this.renderer.copyFrom(e.renderer):e.renderer&&(this.renderer=e.renderer.clone(),this._disposers.push(this.renderer)),e.title&&(this.title?this.title.copyFrom(e.title):(this.title=e.title.clone(),this.title.parent=this),this._disposers.push(this.title))},e.prototype.resetIterators=function(){this._dataItemsIterator.reset()},e.prototype.processConfig=function(e){if(e&&cR(e.axisRanges)&&vR(e.axisRanges))for(var n=0,i=e.axisRanges.length;n<i;n++){var r=e.axisRanges[n];cR(r.series)&&gR(r.series)&&this.map.hasKey(r.series)&&(e.axisRanges[n]=this.createSeriesRange(this.map.getKey(r.series)),delete r.series,e.axisRanges[n].config=r)}t.prototype.processConfig.call(this,e)},e.prototype.configOrder=function(e,n){return e==n?0:"title"==e?1:"title"==n||"component"==e?-1:"component"==n?1:t.prototype.configOrder.call(this,e,n)},Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var n=t.prototype.setDisabled.call(this,e);return this.renderer&&(this.renderer.gridContainer.disabled=e),n},Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this._title!=t&&this._title.dispose(),t&&(this._title=t,t.parent=this,t.shouldClone=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(t){this.setPropertyValue("hideTooltipWhileZooming",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomable",{get:function(){return this.getPropertyValue("zoomable")},set:function(t){this.setPropertyValue("zoomable",t)},enumerable:!0,configurable:!0}),e}(bL);QM.registeredClasses.Axis=JU,QM.registeredClasses.AxisDataItem=ZU,yL.push({relevant:mL.maybeXS,state:function(t,e){if(t instanceof JU&&t.tooltip){var n=t.states.create(e);return n.properties.cursorTooltipEnabled=!1,n}return null}});var tB=function(t){function e(){var e=t.call(this)||this;e.className="AxisLine",e.element=e.paper.add("path");var n=new rV;return e.stroke=n.getFor("grid"),e.strokeOpacity=.15,e.pixelPerfect=!0,e.fill=bN(),e.applyTheme(),e.interactionsEnabled=!1,e}return Qj(e,t),e}(oL);QM.registeredClasses.AxisLine=tB;var eB=function(t){function e(e){var n=t.call(this)||this;n.axis=e,n.element=n.paper.add("path"),n.className="AxisFill",n.isMeasured=!1,n.location=0,n.above=!1;var i=new rV;return n.fill=i.getFor("alternativeBackground"),n.fillOpacity=0,n.applyTheme(),n}return Qj(e,t),e.prototype.setDisabled=function(e){var n=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),n},e.prototype.draw=function(){t.prototype.draw.call(this),this.__disabled||this.disabled||this.axis&&yR(this.startPosition)&&yR(this.endPosition)&&(this.fillPath=this.axis.getPositionRangePath(this.startPosition,this.endPosition),this.path=this.fillPath,this.isMeasured&&this.measure())},Object.defineProperty(e.prototype,"startPosition",{get:function(){return this.getPropertyValue("startPosition")},set:function(t){this.setPropertyValue("startPosition",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){return this.getPropertyValue("endPosition")},set:function(t){this.setPropertyValue("endPosition",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setPath=function(t){return!!this.setPropertyValue("path",t)&&(this.element.attr({d:t}),!0)},Object.defineProperty(e.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(t){this.setPropertyValue("above",t,!0)},enumerable:!0,configurable:!0}),e}(oL);QM.registeredClasses.AxisFill=eB;var nB=function(t){function e(){var e=t.call(this)||this;e.className="Grid",e.element=e.paper.add("path"),e.location=.5,e.isMeasured=!1,e.above=!1;var n=new rV;return e.stroke=n.getFor("grid"),e.pixelPerfect=!0,e.strokeOpacity=.15,e.fill=bN(),e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(t){this.setPropertyValue("above",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var n=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),n},e}(oL);QM.registeredClasses.Grid=nB,yL.push({relevant:mL.maybeXS,state:function(t,e){if(t instanceof nB){var n=t.states.create(e);return n.properties.disabled=!0,n}return null}});var iB=function(t){function e(){var e=t.call(this)||this;return e.className="AxisLabel",e.isMeasured=!1,e.padding(10,10,10,10),e.location=.5,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(t){this.setPropertyValue("inside",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var n=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),n},e}(_L);QM.registeredClasses.AxisLabel=iB;var rB=function(t){function e(){var e=t.call(this)||this;e.className="Tick";var n=new rV;return e.fillOpacity=0,e.length=6,e.strokeOpacity=.2,e.stroke=n.getFor("grid"),e.isMeasured=!1,e.nonScalingStroke=!0,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this.disabled?0:this.getPropertyValue("length")},set:function(t){this.setPropertyValue("length",t,!0)},enumerable:!0,configurable:!0}),e}(oL);QM.registeredClasses.Tick=rB;var oB=function(t){function e(){var e=t.call(this)||this;return e.className="AxisTick",e.element=e.paper.add("path"),e.location=.5,e.above=!1,e.isMeasured=!1,e.pixelPerfect=!0,e.strokeOpacity=0,e.length=5,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(t){this.setPropertyValue("inside",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(t){this.setPropertyValue("above",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var n=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),n},e}(rB);QM.registeredClasses.AxisTick=oB;var sB=function(t){function e(){var e=t.call(this)||this;e._chart=new fM,e.className="AxisRenderer",e.minGridDistance=50,e.inside=!1,e.inversed=!1,e.tooltipLocation=.5,e.fullWidthTooltip=!1,e.cellStartLocation=0,e.cellEndLocation=1,e.minLabelPosition=0,e.maxLabelPosition=1,e.shouldClone=!1;var n=e.createChild(aL);n.shouldClone=!1,n.layout="none",n.virtualParent=e,n.width=rR(100),n.height=rR(100),e.gridContainer=n,n.events.on("maxsizechanged",(function(){e.inited&&e.invalidateAxisItems()}),e,!1);var i=e.createChild(aL);i.shouldClone=!1,i.isMeasured=!1,i.layout="none",i.width=rR(100),i.height=rR(100),e.breakContainer=i;var r=e.createChild(aL);r.shouldClone=!1,r.isMeasured=!1,r.layout="none",r.width=rR(100),r.height=rR(100),e.bulletsContainer=r,e.line=e.createChild(tB),e.line.shouldClone=!1,e.line.strokeOpacity=0;var o=e.createChild(nB);o.shouldClone=!1,e.baseGrid=o;var s=e._disposers;return s.push(o),s.push(e.line),s.push(n),s.push(i),s.push(r),s.push(e._chart),e.ticks.template.disabled=!0,e.axisFills.template.disabled=!0,e.axisFills.template.interactionsEnabled=!1,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"axis",{get:function(){return this._axis},set:function(t){this.setAxis(t)},enumerable:!0,configurable:!0}),e.prototype.setAxis=function(t){this._axis=t,this.baseGrid.parent=t,this.line.parent=t,this.gridContainer.bind("opacity",t)},e.prototype.processRenderer=function(){this.events.on("sizechanged",this.updateTooltip,this,!1),this.events.on("positionchanged",this.updateTooltip,this,!1),this.labels.template.inside=this.inside,this.ticks.template.inside=this.inside},e.prototype.updateTooltip=function(){},Object.defineProperty(e.prototype,"axisLength",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.positionItem=function(t,e){t&&t.moveTo(e)},e.prototype.positionToPoint=function(t,e){return{x:0,y:0}},e.prototype.positionToAngle=function(t){return 0},e.prototype.positionToCoordinate=function(t){var e=this.axis,n=e.axisFullLength;return e.renderer.inversed?(e.end-t)*n:(t-e.start)*n},e.prototype.updateGridContainer=function(){},e.prototype.getHeight=function(){var t=this.gridContainer;return t.parent?t.parent.pixelHeight:this.gridContainer.pixelHeight||0},e.prototype.getWidth=function(){var t=this.gridContainer;return t.parent?t.parent.pixelWidth:this.gridContainer.pixelWidth||0},e.prototype.coordinateToPosition=function(t,e){var n=this.axis,i=n.axisFullLength;return CR(n.renderer.inversed?n.end-t/i:t/i+n.start,5)},e.prototype.pointToPosition=function(t){return 0},e.prototype.getPositionRangePath=function(t,e){return""},e.prototype.invalidateAxisItems=function(){var t=this.axis;t&&t.invalidateDataItems()},e.prototype.updateGridElement=function(t,e,n){},e.prototype.updateTickElement=function(t,e,n){},e.prototype.updateBullet=function(t,e,n){},e.prototype.updateLabelElement=function(t,e,n,i){},e.prototype.updateFillElement=function(t,e,n){t.startPosition=e,t.endPosition=n},e.prototype.updateAxisLine=function(){},e.prototype.updateBaseGridElement=function(){},e.prototype.updateBreakElement=function(t){this.positionItem(t.startLine,t.startPoint),this.toggleVisibility(t.startLine,t.startPosition,0,1),this.positionItem(t.endLine,t.endPoint),this.toggleVisibility(t.endLine,t.endPosition,0,1)},Object.defineProperty(e.prototype,"minGridDistance",{get:function(){return this.getPropertyValue("minGridDistance")},set:function(t){this.setPropertyValue("minGridDistance",t)&&this.axis&&this.axis.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.set(t,null)},enumerable:!0,configurable:!0}),e.prototype.toggleVisibility=function(t,e,n,i){var r=this.axis,o=t.dataItem;o&&o instanceof ZU&&(yR(o.minPosition)&&(n=o.minPosition),yR(o.maxPosition)&&(i=o.maxPosition)),t.disabled||(t.__disabled=e<r.start+(r.end-r.start)*(n-1e-4)||e>r.start+(r.end-r.start)*(i+1e-4))},e.prototype.createBreakSprites=function(t){},Object.defineProperty(e.prototype,"axisFills",{get:function(){if(!this._axisFills){var t=this.createFill(this.axis);this._axisFills=new nN(t),t.applyOnClones=!0,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new JM(this._axisFills)),this._disposers.push(this._axisFills.template)}return this._axisFills},enumerable:!0,configurable:!0}),e.prototype.createFill=function(t){return new eB(t)},Object.defineProperty(e.prototype,"grid",{get:function(){if(!this._grid){var t=this.createGrid();this._grid=new nN(t),t.applyOnClones=!0,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new JM(this._grid)),this._disposers.push(this._grid.template)}return this._grid},enumerable:!0,configurable:!0}),e.prototype.createGrid=function(){return new nB},Object.defineProperty(e.prototype,"ticks",{get:function(){if(!this._ticks){var t=this.createTick();t.applyOnClones=!0,t.isMeasured=!1,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._ticks=new nN(t),this._disposers.push(new JM(this._ticks)),this._disposers.push(this._ticks.template)}return this._ticks},enumerable:!0,configurable:!0}),e.prototype.createTick=function(){return new oB},Object.defineProperty(e.prototype,"labels",{get:function(){if(!this._labels){var t=this.createLabel();this._labels=new nN(t),t.applyOnClones=!0,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new JM(this._labels)),this._disposers.push(this._labels.template)}return this._labels},enumerable:!0,configurable:!0}),e.prototype.createLabel=function(){return new iB},Object.defineProperty(e.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(t){this.setPropertyValue("inside",t)&&this.axis&&this.axis.invalidate(),t?(this.width=0,this.height=0):(this.width=void 0,this.height=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opposite",{get:function(){return this.getPropertyValue("opposite")},set:function(t){this.setPropertyValue("opposite",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullWidthTooltip",{get:function(){return this.getPropertyValue("fullWidthTooltip")},set:function(t){this.setPropertyValue("fullWidthTooltip",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(t){this.setPropertyValue("tooltipLocation",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipLocation2",{get:function(){return this.getPropertyValue("tooltipLocation2")},set:function(t){this.setPropertyValue("tooltipLocation2",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellStartLocation",{get:function(){return this.getPropertyValue("cellStartLocation")},set:function(t){this.setPropertyValue("cellStartLocation",t)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellEndLocation",{get:function(){return this.getPropertyValue("cellEndLocation")},set:function(t){this.setPropertyValue("cellEndLocation",t)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inversed",{get:function(){return this.getPropertyValue("inversed")},set:function(t){this.setPropertyValue("inversed",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minLabelPosition",{get:function(){return this.getPropertyValue("minLabelPosition")},set:function(t){this.setPropertyValue("minLabelPosition",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLabelPosition",{get:function(){return this.getPropertyValue("maxLabelPosition")},set:function(t){this.setPropertyValue("maxLabelPosition",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.grid.template.copyFrom(e.grid.template),this.ticks.template.copyFrom(e.ticks.template),this.labels.template.copyFrom(e.labels.template),this.axisFills.template.copyFrom(e.axisFills.template),this.line.copyFrom(e.line),this.baseGrid.copyFrom(e.baseGrid)},e.prototype.toAxisPosition=function(t){return t},e.prototype.setVisibility=function(e){t.prototype.setVisibility.call(this,e),this.bulletsContainer.visible=e},e}(aL);QM.registeredClasses.AxisRenderer=sB;var aB=function(t){function e(){var e=t.call(this)||this;return e.className="AxisBullet",e.location=.5,e.isMeasured=!1,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var n=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),n},e}(aL);QM.registeredClasses.AxisBullet=aB;var uB=function(t){function e(){var e=t.call(this)||this;return e.className="AxisRendererY",e.minGridDistance=40,e.opposite=!1,e.height=rR(100),e.labels.template.verticalCenter="middle",e.applyTheme(),e}return Qj(e,t),e.prototype.setAxis=function(e){t.prototype.setAxis.call(this,e),e.layout="horizontal"},e.prototype.updateGridContainer=function(){var t=this.axis;if(t){var e=this.gridContainer;e.y=t.pixelY,e.height=t.axisLength}},e.prototype.toAxisPosition=function(t){var e=this.axis;if(e){var n=1-t,i=e.relativePositionSprite,r=e.pixelY;if(i?r=iF({x:0,y:this.pixelY},this.parent,i).y:i=e.parent,i)return 1-(n-r/i.innerHeight)/(e.axisLength/i.innerHeight)}return t},e.prototype.processRenderer=function(){t.prototype.processRenderer.call(this);var e=this.axis;if(e){var n=e.title;n.valign="middle",e.height instanceof iR||(e.height=rR(100)),this.opposite?(n.rotation=90,this.line.toBack(),n.toFront()):(n.rotation=-90,n.toBack(),this.line.toFront())}},e.prototype.updateTooltip=function(){if(this.axis){var t=2e3,e=0,n=t;this.opposite?this.inside&&(e=-2e3,n=t):this.inside||(e=-2e3,n=t),this.axis.updateTooltip("horizontal",{x:e,y:0,width:n,height:this.axisLength})}},Object.defineProperty(e.prototype,"axisLength",{get:function(){var t=this.axis;return t.measuredHeight-t.pixelPaddingTop-t.pixelPaddingBottom||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){return{x:0,y:this.positionToCoordinate(t)}},e.prototype.pointToPosition=function(t){return this.coordinateToPosition(t.y,t.x)},e.prototype.coordinateToPosition=function(t,e){var n=this.axis,i=n.axisFullLength;return CR(n.renderer.inversed?1-n.start-t/i:t/i+(1-n.end),5)},e.prototype.getPositionRangePath=function(t,e){var n=OR(this.positionToCoordinate(t),0,this.axisLength),i=OR(this.positionToCoordinate(e),0,this.axisLength),r=Math.abs(i-n),o=this.getWidth();return FL({x:0,y:Math.min(n,i),width:o,height:r},!0)},e.prototype.updateGridElement=function(t,e,n){var i=this.positionToPoint(e+=(n-e)*t.location);t.path=EL({x:0,y:0})+kL({x:this.getWidth(),y:0}),this.positionItem(t,i),this.toggleVisibility(t,e,0,1)},e.prototype.updateTickElement=function(t,e,n){var i=this.positionToPoint(e+=(n-e)*t.location),r=t.length;i.x=iF({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,r*=this.opposite?t.inside?-1:1:t.inside?1:-1,t.path=EL({x:0,y:0})+kL({x:r,y:0}),this.positionItem(t,i),this.toggleVisibility(t,e,0,1)},e.prototype.updateAxisLine=function(){this.line.path=EL({x:0,y:0})+kL({x:0,y:this.axisLength})},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.axis,n=this.getWidth(),i=e.basePoint.y,r=this.baseGrid;if(i<-.2||i>this.axisLength+.2)r.hide(0);else{var o=iF({x:0,y:0},this.gridContainer,r.parent).x;r.path=EL({x:0,y:0})+kL({x:n,y:0}),r.moveTo({x:o,y:i}),r.show(0)}},e.prototype.updateLabelElement=function(t,e,n,i){cR(i)||(i=t.location),e+=(n-e)*i,t.isMeasured=!t.inside;var r,o=this.positionToPoint(e),s=0,a=this.gridContainer.maxWidth;this.opposite?(t.inside?(r="right","left"==t.align&&(s=-a,r="left"),"center"==t.align&&(s=-a/2,r="middle")):r="left",o.x=0+s):(t.inside?(r="left","right"==t.align&&(s=a,r="right"),"center"==t.align&&(s=a/2,r="middle")):r="right",o.x=this.measuredWidth+s),0==t.rotation&&(t.horizontalCenter=r),this.positionItem(t,o),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.updateBreakElement=function(e){t.prototype.updateBreakElement.call(this,e);var n=e.startLine,i=e.endLine,r=e.fillShape,o=e.startPoint,s=e.endPoint,a=e.pixelMarginLeft,u=this.getWidth()-e.pixelMarginLeft-e.pixelMarginRight;o.y=OR(o.y,-1,this.axisLength+1),s.y=OR(s.y,-1,this.axisLength+1),e.fillShape.__disabled=o.y==s.y&&(o.y<0||o.y>this.axisLength);var l=Math.abs(u-a);n.x=a,n.height=0,n.width=l,i.x=a,i.height=0,i.width=l,r.width=l,r.height=Math.abs(s.y-o.y),r.x=a,r.y=s.y},e.prototype.createBreakSprites=function(t){t.startLine=new cU,t.endLine=new cU;var e=new pU;e.setWavedSides(!0,!1,!0,!1),t.fillShape=e},e.prototype.positionToCoordinate=function(t){var e=this.axis,n=e.axisFullLength;return e.renderer.inversed?(t-e.start)*n:(e.end-t)*n},e.prototype.updateBullet=function(t,e,n){var i=.5;t instanceof aB&&(i=t.location);var r=this.positionToPoint(e+=(n-e)*i);r.x=iF({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e}(sB);QM.registeredClasses.AxisRendererY=uB,yL.push({relevant:mL.widthS,state:function(t,e){if(t instanceof uB){var n=t.states.create(e);return n.properties.inside=!0,n.properties.maxLabelPosition=.9,n.properties.minLabelPosition=.1,n}return null}}),yL.push({relevant:mL.widthXS,state:function(t,e){if(t instanceof uB){var n=t.states.create(e);return n.properties.disabled=!0,n}return null}});var lB=function(t){function e(){var e=t.call(this)||this;return e.className="ValueAxisBreak",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedStartValue)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedEndValue)},enumerable:!0,configurable:!0}),e}(QU);QM.registeredClasses.ValueAxisBreak=lB;var hB=function(t){function e(){var e=t.call(this)||this;return e.className="ValueAxisDataItem",e.values.value={},e.values.endValue={},e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){return this.values.endValue.value},set:function(t){this.setValue("endValue",t)},enumerable:!0,configurable:!0}),e}(ZU),cB=function(t){function e(){var e=t.call(this)||this;return e._stepDecimalPlaces=0,e._prevStepDecimalPlaces=0,e._adjustLabelPrecision=!0,e._baseValue=0,e._adjustedStart=0,e._adjustedEnd=1,e._extremesChanged=!1,e._deltaMinMax=1,e._dsc=!1,e.calculateTotals=!1,e.className="ValueAxis",e.axisFieldName="value",e.setPropertyValue("maxZoomFactor",1e3),e.setPropertyValue("extraMin",0),e.setPropertyValue("extraMax",0),e.setPropertyValue("strictMinMax",!1),e.setPropertyValue("maxPrecision",Number.MAX_VALUE),e.setPropertyValue("adjustLabelPrecision",!0),e.setPropertyValue("extraTooltipPrecision",0),e.keepSelection=!1,e.includeRangesInMinMax=!1,e.applyTheme(),e}return Qj(e,t),e.prototype.fillRule=function(t){var e=t.value,n=t.component;t.axisFill.disabled||(t.axisFill.__disabled=CR(e/n.step/2,5)==Math.round(e/n.step/2))},e.prototype.createDataItem=function(){return new hB},e.prototype.createAxisBreak=function(){return new lB},e.prototype.dataChangeUpdate=function(){this.clearCache(),this.keepSelection?(0!=this._start&&this.dispatchImmediately("startchanged"),1!=this._end&&this.dispatchImmediately("endchanged"),0==this._start&&1==this._end||this.dispatchImmediately("startendchanged")):0==this._start&&1==this._end||(this._start=0,this._end=1,this.dispatchImmediately("startendchanged")),this._maxZoomed=this._maxDefined,this._minZoomed=this._minDefined,this._maxAdjusted=this._maxDefined,this._minAdjusted=this._minDefined},e.prototype.processSeriesDataItems=function(){if(this.calculateTotals){var t=this.series.getIndex(0),e=t.startIndex;if(t.dataItems.length>0){e>0&&e--;var n=t.endIndex;n<t.dataItems.length&&n++;for(var i=function(t){var e={},n={};r.series.each((function(i){if(!i.excludeFromTotal){var r=i.dataItems.getIndex(t);r&&kM(r.values,(function(t){var i=r.values[t].workingValue;yR(i)&&(yR(e[t])?e[t]+=Math.abs(i):e[t]=Math.abs(i),yR(n[t])?n[t]+=i:n[t]=i)}))}})),r.series.each((function(i){if(!i.excludeFromTotal){var r=i.dataItems.getIndex(t);r&&kM(r.values,(function(t){var i=r.values[t].workingValue;yR(i)&&(r.setCalculatedValue(t,e[t],"total"),r.setCalculatedValue(t,100*i/e[t],"totalPercent"),r.setCalculatedValue(t,n[t],"sum"))}))}}))},r=this,o=e;o<n;++o)i(o)}}},e.prototype.validate=function(){this.axisLength<=0||(t.prototype.validate.call(this),this.getMinMax(),this.fixAxisBreaks(),this.calculateZoom(),this.validateAxisElements(),this.validateAxisRanges(),this.validateBreaks(),this.hideUnusedDataItems(),this.renderer.invalidateLayout())},e.prototype.calculateZoom=function(){if(yR(this.min)&&yR(this.max)){var t=this.positionToValue(this.start),e=this.positionToValue(this.end),n=this.adjustDifference(t,e),i=this.adjustMinMax(t,e,n,this._gridCount,!0),r=(a=(""+i.step).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0;this._stepDecimalPlaces=r,t=CR(t,r),e=CR(e,r);var o=(i=this.adjustMinMax(t,e,n,this._gridCount,!0)).step;if(this.syncWithAxis){var s=this.getCache(t+"-"+e);yR(s)&&(o=s)}else t=i.min,e=i.max;(this._minZoomed!=t||this._maxZoomed!=e||this._step!=o||this._dsc)&&(this._dsc=!1,this._minZoomed=t,this._maxZoomed=e,this._step=o,this.dispatchImmediately("selectionextremeschanged"))}var a},e.prototype.fixSmallStep=function(t){return 1+t==1?this.fixSmallStep(t*=2):t},e.prototype.validateAxisElements=function(){var t=this;if(yR(this.max)&&yR(this.min)){var e=this.minZoomed-2*this._step;this.logarithmic?Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E>1?e=Math.pow(10,Math.log(this.min)*Math.LOG10E):0==(e=Math.floor(this.minZoomed/this._step)*this._step)&&(e=this.minZoomed):e=Math.floor(e/this._step)*this._step;var n=this._maxZoomed+this._step;this.resetIterators();var i=this._dataItemsIterator;this._step=this.fixSmallStep(this._step);var r=0,o=this._prevStepDecimalPlaces!=this._stepDecimalPlaces;for(this._prevStepDecimalPlaces=this._stepDecimalPlaces;e<=n;){if(!this.isInBreak(e)){var s=i.find((function(t){return t.value===e}));s.__disabled&&(s.__disabled=!1),this.appendDataItem(s),s.axisBreak=void 0,(s.value!=e||o)&&(s.value=e,s.text=this.formatLabel(e),s.label&&s.label.invalid&&s.label.validate(),s.value>=this.min&&s.value<=this.max&&s.label&&("Y"==this.axisLetter&&s.label.measuredWidth>this.ghostLabel.measuredWidth||"X"==this.axisLetter&&s.label.measuredHeight>this.ghostLabel.measuredHeight)&&(this.ghostLabel.text=s.label.currentText,this.ghostLabel.validate())),this.validateDataElement(s)}r++,this.logarithmic&&Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E>1?e=Math.pow(10,Math.log(this.min)*Math.LOG10E+r):e+=this._step;var a=Math.pow(10,Math.floor(Math.log(Math.abs(this._step))*Math.LOG10E));if(a<1){var u=Math.round(Math.abs(Math.log(Math.abs(a))*Math.LOG10E))+2;e=CR(e,u)}}var l=this._axisBreaks;if(l){var h=this.renderer;VM(l.iterator(),(function(e){if(e.breakSize>0&&RR(e.startPoint,e.endPoint)>h.minGridDistance)for(var n=e.adjustedMin;n<=e.adjustedMax;){if(n>=e.adjustedStartValue&&n<=e.adjustedEndValue){var r=i.find((function(t){return t.value===n}));r.__disabled&&(r.__disabled=!1),t.appendDataItem(r),r.axisBreak=e,r.value!=n&&(r.value=n,r.text=t.formatLabel(n),r.label&&r.label.invalid&&r.label.validate()),t.validateDataElement(r)}n+=e.adjustedStep}}))}}},e.prototype.validateDataElement=function(e){t.prototype.validateDataElement.call(this,e),e.itemIndex=this._axisItemCount,this._axisItemCount++;var n=this.renderer,i=e.value,r=e.endValue,o=this.valueToPosition(i);e.position=o;var s=o,a=this.valueToPosition(i+this._step);yR(r)&&(a=s=this.valueToPosition(r)),e.point=n.positionToPoint(o);var u=e.tick;u&&!u.disabled&&n.updateTickElement(u,o,s);var l=e.grid;l&&!l.disabled&&n.updateGridElement(l,o,s);var h=e.label;h&&!h.disabled&&n.updateLabelElement(h,o,s);var c=e.axisFill;c&&!c.disabled&&(n.updateFillElement(c,o,a),e.isRange||this.fillRule(e)),e.bullet&&n.updateBullet(e.bullet,o,s);var p=e.mask;p&&n.updateFillElement(p,o,a)},e.prototype.formatLabel=function(t){return this.adjustLabelPrecision&&0!=t?this.numberFormatter.format(t,void 0,this._stepDecimalPlaces):this.numberFormatter.format(t)},Object.defineProperty(e.prototype,"basePoint",{get:function(){var t=this.valueToPosition(this.baseValue);return this.renderer.positionToPoint(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseValue",{get:function(){var t=this._baseValue;return this.logarithmic&&(t=this.min),this._adapterO?this._adapterO.apply("baseValue",t):t},set:function(t){this._baseValue=t,this.invalidateLayout(),this.invalidateSeries()},enumerable:!0,configurable:!0}),e.prototype.anyToPosition=function(t){return this.valueToPosition(t)},e.prototype.valueToPoint=function(t){var e=this.valueToPosition(t),n=this.renderer.positionToPoint(e),i=this.renderer.positionToAngle(e);return{x:n.x,y:n.y,angle:i}},e.prototype.anyToPoint=function(t){return this.valueToPoint(t)},e.prototype.valueToPosition=function(t){if(yR(t)){var e=this.min,n=this.max;if(yR(e)&&yR(n)){var i=this._difference,r=this._axisBreaks;r&&r.length>0&&FM(r.iterator(),(function(i){var r=i.adjustedStartValue,o=i.adjustedEndValue;if(yR(r)&&yR(o)){if(t<r)return!1;if(DR({start:r,end:o},{start:e,end:n})){r=Math.max(r,e),o=Math.min(o,n);var s=i.breakSize;t>o?e+=(o-r)*(1-s):t<r||(t=r+(t-r)*s)}}return!0}));var o=void 0;if(this.logarithmic){var s=this.treatZeroAs;yR(s)&&t<=s&&(t=s),o=(Math.log(t)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)/(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)}else o=(t-e)/i;return o}}return 0},e.prototype.invalidateLabels=function(){t.prototype.invalidateLabels.call(this),this.dataItems&&(this.dataItems.each((function(t){t.value=void 0})),this.invalidate())},e.prototype.positionToValue=function(t){var e=this.min,n=this.max;if(yR(e)&&yR(n)){var i=n-e,r=null,o=this._axisBreaks;return o&&o.length>0&&FM(o.iterator(),(function(o){var s=o.startPosition,a=o.endPosition,u=o.adjustedStartValue,l=o.adjustedEndValue;if(yR(u)&&yR(l)){if(u>n)return!1;if(DR({start:u,end:l},{start:e,end:n})){u=kR(u,e),l=AR(l,n);var h=o.breakSize;if(i-=(l-u)*(1-h),t>a)e+=(l-u)*(1-h);else if(!(t<s))return r=u+(t-s)/(a-s)*(l-u),!1}return!0}})),yR(r)||(r=this.logarithmic?Math.pow(Math.E,(t*(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)+Math.log(this.min)*Math.LOG10E)/Math.LOG10E):t*i+e),r}},e.prototype.xToValue=function(t){return this.positionToValue(this.pointToPosition({x:t,y:0}))},e.prototype.yToValue=function(t){return this.positionToValue(this.pointToPosition({x:0,y:t}))},e.prototype.pointToPosition=function(t){return this.renderer instanceof uB?1-this.renderer.pointToPosition(t):this.renderer.pointToPosition(t)},e.prototype.animateMinMax=function(t,e){return this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:t},{property:"_maxAdjusted",from:this._maxAdjusted,to:e}],this.rangeChangeDuration,this.rangeChangeEasing)},e.prototype.getMinMax=function(){var t=this;this.updateGridCount();var e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;if(yR(this._minDefined)&&yR(this._maxDefined)||(this.series.each((function(i){if(!i.ignoreMinMax){var r=i.min(t);yR(r)&&r<e&&(e=r);var o=i.max(t);yR(o)&&o>n&&(n=o)}})),this.includeRangesInMinMax&&this.axisRanges.each((function(t){if(!t.ignoreMinMax){var i=AR(t.value,t.endValue),r=kR(t.value,t.endValue);(i<e||!yR(e))&&(e=i),(r>n||!yR(n))&&(n=r)}}))),this.logarithmic){var i=this.treatZeroAs;yR(i)&&e<=0&&(e=i),e<=0&&this.raiseCriticalError(new Error("Logarithmic value axis can not have values <= 0."),!0)}if(0==e&&0==n&&(n=.9,e=-.9),yR(this._minDefined)&&(e=this._minDefined),yR(this._maxDefined)&&(n=this._maxDefined),this._adapterO&&(e=this._adapterO.apply("min",e)),this._adapterO&&(n=this._adapterO.apply("max",n)),yR(e)&&yR(n)){this._minReal=e,this._maxReal=n,e==Number.POSITIVE_INFINITY&&(e=void 0),n==Number.NEGATIVE_INFINITY&&(n=void 0);var r=this.adjustDifference(e,n);if(e=this.fixMin(e),(n=this.fixMax(n))-e<=1/Math.pow(10,15)){if(n-e!=0)this._deltaMinMax=(n-e)/2;else{var o=Math.log(Math.abs(n))*Math.LOG10E,s=Math.pow(10,Math.floor(o));this._deltaMinMax=s/=10}e-=this._deltaMinMax,n+=this._deltaMinMax}n+=(n-(e-=(n-e)*this.extraMin))*this.extraMax;var a=this.strictMinMax;yR(this._maxDefined)&&(a=!0);var u=this.adjustMinMax(e,n,r,this._gridCount,a);if(r=(n=u.max)-(e=u.min),u=this.adjustMinMax(e,n,n-e,this._gridCount,!0),e=u.min,n=u.max,this.strictMinMax&&(e=yR(this._minDefined)?this._minDefined:this._minReal,(n=yR(this._maxDefined)?this._maxDefined:this._maxReal)-e<=1e-8&&(e-=this._deltaMinMax,n+=this._deltaMinMax),n+=(n-(e-=(n-e)*this.extraMin))*this.extraMax),this._adapterO&&(e=this._adapterO.apply("min",e)),this._adapterO&&(n=this._adapterO.apply("max",n)),this._step=u.step,(this._minAdjusted!=e||this._maxAdjusted!=n)&&yR(e)&&yR(n)){var l=this._minMaxAnimation;if(this._extremesChanged&&yR(this._minAdjusted)&&yR(this._maxAdjusted)&&this.inited){if(l&&!l.isFinished()&&this._finalMax==n&&this._finalMin==e)return;this._finalMin=e,this._finalMax=n,(l=this.animateMinMax(e,n))&&!l.isFinished()?(l.events.on("animationprogress",this.validateDataItems,this),l.events.on("animationended",(function(){t.series.each((function(t){t.validate()})),t.validateDataItems(),t.handleSelectionExtremesChange()})),this._minMaxAnimation=l):this.series.each((function(t){t.validate()})),this.validateDataItems(),this.dispatchImmediately("extremeschanged"),this.handleSelectionExtremesChange()}else{if(l&&!l.isFinished()&&this._finalMax==n&&this._finalMin==e)return;this._minAdjusted=e,this._maxAdjusted=n,this._finalMin=e,this._finalMax=n,this.invalidateDataItems(),this.dispatchImmediately("extremeschanged")}}this._extremesChanged=!1,this._difference=this.adjustDifference(e,n)}},e.prototype.fixMin=function(t){return t},e.prototype.fixMax=function(t){return t},e.prototype.adjustMinMax=function(t,e,n,i,r){i<=1&&(i=1),i=Math.round(i);var o=t,s=e;0===n&&(n=Math.abs(e));var a=Math.log(Math.abs(n))*Math.LOG10E,u=Math.pow(10,Math.floor(a)),l=u/=10;r&&(l=0),this.logarithmic?(t<=0&&(t=this.baseValue),t==1/0&&(t=1),e==-1/0&&(e=10),t=Math.pow(10,Math.floor(Math.log(Math.abs(t))*Math.LOG10E)),e=Math.pow(10,Math.ceil(Math.log(Math.abs(e))*Math.LOG10E)),this.strictMinMax&&(this._minDefined>0&&(t=this._minDefined),this._maxDefined>0&&(e=this._maxDefined))):(r?(t=Math.floor(t/u)*u,e=Math.ceil(e/u)*u):(t=Math.ceil(t/u)*u-l,e=Math.floor(e/u)*u+l),t<0&&o>=0&&(t=0),e>0&&s<=0&&(e=0)),a=Math.log(Math.abs(n))*Math.LOG10E,u=Math.pow(10,Math.floor(a)),u/=10;var h=Math.ceil(n/i/u)*u,c=Math.pow(10,Math.floor(Math.log(Math.abs(h))*Math.LOG10E)),p=Math.ceil(h/c);p>5?p=10:p<=5&&p>2&&(p=5),h=Math.ceil(h/(c*p))*c*p,this.maxPrecision<Number.MAX_VALUE&&h!=IR(h,this.maxPrecision)&&(h=IR(h,this.maxPrecision));var d=0;if(c<1&&(h=CR(h,d=Math.round(Math.abs(Math.log(Math.abs(c))*Math.LOG10E))+1)),!this.logarithmic){var f=Math.floor(t/h);t=CR(h*f,d);var g=void 0;(g=r?Math.floor(e/h):Math.ceil(e/h))==f&&g++,(e=CR(h*g,d))<s&&(e+=h),t>o&&(t-=h)}return{min:t,max:e,step:h}},Object.defineProperty(e.prototype,"min",{get:function(){var t=this._minAdjusted;return yR(t)||(t=this._minDefined),t},set:function(t){this._minDefined!=t&&(this._minDefined=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minDefined",{get:function(){return this._minDefined},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDefined",{get:function(){return this._maxDefined},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraMin",{get:function(){return this.getPropertyValue("extraMin")},set:function(t){this.setPropertyValue("extraMin",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraMax",{get:function(){return this.getPropertyValue("extraMax")},set:function(t){this.setPropertyValue("extraMax",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){var t=this._maxAdjusted;return yR(t)||(t=this._maxDefined),t},set:function(t){this._maxDefined!=t&&(this._maxDefined=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustLabelPrecision",{get:function(){return this.getPropertyValue("adjustLabelPrecision")},set:function(t){this.setPropertyValue("adjustLabelPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.registerSeries=function(e){return new dM([t.prototype.registerSeries.call(this,e),e.events.on("extremeschanged",this.handleExtremesChange,this,!1),e.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1),this.events.on("extremeschanged",e.invalidate,e,!1)])},e.prototype.handleSelectionExtremesChange=function(){var t,e,n=this,i=!0;if(VM(this.series.iterator(),(function(r){if(!r.ignoreMinMax&&!r.isHidden){r.visible&&!r.isHiding&&(i=!1);var o=r.selectionMin(n),s=r.selectionMax(n);yR(o)&&(!yR(t)||o<t)&&(t=o),yR(s)&&(!yR(e)||s>e)&&(e=s)}})),this.includeRangesInMinMax&&this.axisRanges.each((function(n){if(!n.ignoreMinMax){var i=AR(n.value,n.endValue),r=kR(n.value,n.endValue);i<e&&(t=i),r>e&&(e=r)}})),yR(this._minDefined)?t=this.strictMinMax?this._minDefined:this.min:this.strictMinMax&&(t=this._minReal),yR(this._maxDefined)?e=this.strictMinMax?this._maxDefined:this.max:this.strictMinMax&&(e=this._maxReal),t==e){var r=this.adjustMinMax(t-=this._deltaMinMax,e+=this._deltaMinMax,0,this._gridCount,this.strictMinMax);t=r.min,e=r.max}var o=this.adjustDifference(t,e),s=this.adjustMinMax(t,e,o,this._gridCount);t=s.min,e=s.max,e+=(e-(t-=(e-t)*this.extraMin))*this.extraMax,t=OR(t,this.min,this.max),e=OR(e,this.min,this.max),o=this.adjustDifference(t,e),s=this.adjustMinMax(t,e,o,this._gridCount,!0),t=s.min,e=s.max,this.strictMinMax&&(t=kR(t,this._minDefined),e=AR(e,this._maxDefined));var a=s.step;this.syncWithAxis&&(s=this.syncAxes(t,e,a),t=s.min,e=s.max,this.invalidate()),a=s.step,this._difference=this.adjustDifference(this.min,this.max);var u=this.valueToPosition(t),l=this.valueToPosition(e);i&&!this.syncWithAxis&&(u=0,l=1);var h=0;this.syncWithAxis?(h=5,this.setCache(t+"-"+e,a)):(this._step==a&&this._minZoomed==t&&this._maxZoomed==e||(this._dsc=!0),this._step=a,this._minZoomed=t,this._maxZoomed=e),this.keepSelection||this.zoom({start:u,end:l},!1,!1,h)},Object.defineProperty(e.prototype,"strictMinMax",{get:function(){return this.getPropertyValue("strictMinMax")},set:function(t){this.setPropertyValue("strictMinMax",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logarithmic",{get:function(){return this.getPropertyValue("logarithmic")},set:function(t){this.setPropertyValue("logarithmic",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepSelection",{get:function(){return this.getPropertyValue("keepSelection")},set:function(t){this.setPropertyValue("keepSelection",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"includeRangesInMinMax",{get:function(){return this.getPropertyValue("includeRangesInMinMax")},set:function(t){this.setPropertyValue("includeRangesInMinMax",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPrecision",{get:function(){return this.getPropertyValue("maxPrecision")},set:function(t){this.setPropertyValue("maxPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraTooltipPrecision",{get:function(){return this.getPropertyValue("extraTooltipPrecision")},set:function(t){this.setPropertyValue("extraTooltipPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.handleExtremesChange=function(){var t=this;this._extremesChanged=!0,this.getMinMax(),this.ghostLabel&&this.dataItems.each((function(e){e.label&&e.label.pixelWidth>0&&(t.ghostLabel.text=e.label.currentText)}))},e.prototype.getX=function(t,e,n,i,r){return this.renderer.positionToPoint(this.getPositionX(t,e,n,i,r)).x},e.prototype.getPositionX=function(t,e,n,i,r){var o=t.getWorkingValue(e);cR(i)||(i="valueX");var s=t.getValue(i,"stack");yR(o)||(o=this.baseValue,this.logarithmic&&s>0&&(o=0));var a=this.valueToPosition(o+s);return r&&(a=OR(a,r.start,r.end)),a},e.prototype.getY=function(t,e,n,i,r){return this.renderer.positionToPoint(this.getPositionY(t,e,n,i,r)).y},e.prototype.getPositionY=function(t,e,n,i,r){var o=t.getWorkingValue(e);cR(i)||(i="valueY");var s=t.getValue(i,"stack");yR(o)||(o=this.baseValue,this.logarithmic&&s>0&&(o=0));var a=this.valueToPosition(o+s);return r&&(a=OR(a,r.start,r.end)),a},e.prototype.getAngle=function(t,e,n,i,r){var o=t.getWorkingValue(e),s=t.getValue(i,"stack");yR(o)||(o=this.baseValue);var a=this.valueToPosition(o+s);return r&&(a=OR(a,r.start,r.end)),this.positionToAngle(a)},e.prototype.getAnyRangePath=function(t,e,n){var i=this.valueToPosition(t),r=this.valueToPosition(e);return this.getPositionRangePath(i,r)},e.prototype.getTooltipText=function(t){var e=CR(this.positionToValue(t),this._stepDecimalPlaces+this.extraTooltipPrecision),n=this.tooltip.numberFormatter.format(e);return this._adapterO?this._adapterO.apply("getTooltipText",n):n},e.prototype.zoomToValues=function(t,e,n,i){this.zoom({start:(t-this.min)/(this.max-this.min),end:(e-this.min)/(this.max-this.min)},n,i)},Object.defineProperty(e.prototype,"minZoomed",{get:function(){return this.syncWithAxis?this._minZoomed:kR(this.min,this._minZoomed)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomed",{get:function(){return this.syncWithAxis?this._maxZoomed:AR(this.max,this._maxZoomed)},enumerable:!0,configurable:!0}),e.prototype.fixAxisBreaks=function(){var e=this;t.prototype.fixAxisBreaks.call(this);var n=this._axisBreaks;n&&n.length>0&&n.each((function(t){var n=t.adjustedStartValue,i=t.adjustedEndValue,r=i-n,o=Math.ceil(r*t.breakSize)*e._gridCount/(e.max-e.min),s=e.adjustMinMax(n,i,r,o,!0);t.adjustedStep=s.step,t.adjustedMin=s.min,t.adjustedMax=s.max})),this._difference=this.adjustDifference(this.min,this.max)},e.prototype.getPositionLabel=function(t){var e=this.positionToValue(t);return this.numberFormatter.format(e)},e.prototype.showTooltipAt=function(t){this.showTooltipAtPosition(this.valueToPosition(t))},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.min=e.min,this.max=e.max,this.calculateTotals=e.calculateTotals,this._baseValue=e.baseValue},Object.defineProperty(e.prototype,"syncWithAxis",{get:function(){return this.getPropertyValue("syncWithAxis")},set:function(t){var e=this;this.setPropertyValue("syncWithAxis",t,!0)&&t&&(this._disposers.push(t.events.on("extremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(t.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(t.events.on("startendchanged",this.handleSelectionExtremesChange,this,!1)),this.events.on("shown",this.handleSelectionExtremesChange,this,!1),this.events.on("maxsizechanged",(function(){e.clearCache(),e._disposers.push(QM.events.once("exitframe",(function(){e.handleSelectionExtremesChange()})))}),this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treatZeroAs",{get:function(){return this.getPropertyValue("treatZeroAs")},set:function(t){this.setPropertyValue("treatZeroAs",t,!0)},enumerable:!0,configurable:!0}),e.prototype.syncAxes=function(t,e,n){var i=this.syncWithAxis;if(i){yR(t)||(t=this.min),yR(e)||(e=this.max),yR(n)||(n=this._step);var r=Math.round((i.maxZoomed-i.minZoomed)/i.step),o=Math.round((e-t)/n);if(yR(r)&&yR(o))for(var s=!1,a=0,u=.01*(e-t),l=t,h=e,c=n;1!=s;)if(s=this.checkSync(l,h,c,r),++a>1e3&&(s=!0),s)t=l,e=h,n=c;else{a/3==Math.round(a/3)?(l=t-u*a,t>=0&&l<0&&(l=0)):(h=e+u*a)<=0&&h>0&&(h=0);var p=this.adjustMinMax(l,h,h-l,this._gridCount,!0);l=p.min,h=p.max,c=p.step}}return{min:t,max:e,step:n}},e.prototype.checkSync=function(t,e,n,i){for(var r=(e-t)/n,o=1;o<i;o++)if(CR(r/o,1)==i||r*o==i)return!0;return!1},e.prototype.processConfig=function(e){e&&cR(e.syncWithAxis)&&gR(e.syncWithAxis)&&(this.map.hasKey(e.syncWithAxis)?e.syncWithAxis=this.map.getKey(e.syncWithAxis):(this.processingErrors.push('[ValueAxis] No axis with id "'+e.syncWithAxis+'" found for `syncWithAxis`'),delete e.xAxis)),t.prototype.processConfig.call(this,e)},e}(JU);QM.registeredClasses.ValueAxis=cB,QM.registeredClasses.ValueAxisDataItem=hB;var pB=function(t){function e(){var e=t.call(this)||this;return e.className="DateAxisBreak",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"startDate",{get:function(){return this.getPropertyValue("startDate")},set:function(t){this.setPropertyValue("startDate",t)&&(this.startValue=t.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return this.getPropertyValue("endDate")},set:function(t){this.setPropertyValue("endDate",t)&&(this.endValue=t.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),e}(lB);QM.registeredClasses.DateAxisBreak=pB;var dB=function(t){function e(){var e=t.call(this)||this;return e.className="DateAxisDataItem",e.applyTheme(),e.values.date={},e.values.endDate={},e}return Qj(e,t),Object.defineProperty(e.prototype,"date",{get:function(){return this.dates.date},set:function(t){this.setDate("date",t),this.value=t.getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return this.dates.endDate},set:function(t){this.setDate("endDate",t),this.endValue=t.getTime()},enumerable:!0,configurable:!0}),e}(hB),fB=function(t){function e(){var e=t.call(this)||this;return e._gapBreaks=!1,e.gridIntervals=new eN,e.groupIntervals=new eN,e.dateFormats=new YM,e.periodChangeDateFormats=new YM,e._baseIntervalReal={timeUnit:"day",count:1},e._prevSeriesTime={},e._minDifference={},e._firstWeekDay=1,e.groupMin={},e.groupMax={},e.className="DateAxis",e.setPropertyValue("markUnitChange",!0),e.snapTooltip=!0,e.tooltipPosition="pointer",e.setPropertyValue("groupData",!1),e.groupCount=200,e.events.on("parentset",e.getDFFormatter,e,!1),e.gridIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}]),e.groupIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}]),e.axisFieldName="date",e.applyTheme(),e}return Qj(e,t),e.prototype.fillRule=function(t){var e=t.value,n=t.component,i=n._gridInterval,r=dV(i.timeUnit,i.count);t.axisFill.__disabled=Math.round((e-n.min)/r)/2==Math.round(Math.round((e-n.min)/r)/2)},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),this.dateFormats.hasKey("millisecond")||this.dateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.dateFormats.hasKey("second")||this.dateFormats.setKey("second",this.language.translate("_date_second")),this.dateFormats.hasKey("minute")||this.dateFormats.setKey("minute",this.language.translate("_date_minute")),this.dateFormats.hasKey("hour")||this.dateFormats.setKey("hour",this.language.translate("_date_hour")),this.dateFormats.hasKey("day")||this.dateFormats.setKey("day",this.language.translate("_date_day")),this.dateFormats.hasKey("week")||this.dateFormats.setKey("week",this.language.translate("_date_day")),this.dateFormats.hasKey("month")||this.dateFormats.setKey("month",this.language.translate("_date_month")),this.dateFormats.hasKey("year")||this.dateFormats.setKey("year",this.language.translate("_date_year")),this.periodChangeDateFormats.hasKey("millisecond")||this.periodChangeDateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.periodChangeDateFormats.hasKey("second")||this.periodChangeDateFormats.setKey("second",this.language.translate("_date_second")),this.periodChangeDateFormats.hasKey("minute")||this.periodChangeDateFormats.setKey("minute",this.language.translate("_date_minute")),this.periodChangeDateFormats.hasKey("hour")||this.periodChangeDateFormats.setKey("hour",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("day")||this.periodChangeDateFormats.setKey("day",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("week")||this.periodChangeDateFormats.setKey("week",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("month")||this.periodChangeDateFormats.setKey("month",this.language.translate("_date_month")+" "+this.language.translate("_date_year"))},e.prototype.createDataItem=function(){return new dB},e.prototype.createAxisBreak=function(){return new pB},e.prototype.validateDataItems=function(){var e=this.start,n=this.end,i=this.baseDuration,r=(this.max-this.min)/i;this._firstWeekDay=this.getFirstWeekDay(),this.getDFFormatter(),t.prototype.validateDataItems.call(this);var o=dV(this.mainBaseInterval.timeUnit,this.mainBaseInterval.count);this.maxZoomFactor=(this.max-this.min)/o,this._deltaMinMax=this.baseDuration/2,this.zoom({start:e+=(n-e)*(1-r/((this.max-this.min)/i)),end:n},!1,!0)},e.prototype.handleSelectionExtremesChange=function(){},e.prototype.calculateZoom=function(){var e=this;t.prototype.calculateZoom.call(this);var n=this.adjustDifference(this._minZoomed,this._maxZoomed),i=!1;if(this.groupData&&cR(n)){var r=this.mainBaseInterval,o=n+this.startLocation+(1-this.endLocation)*this.baseDuration,s=void 0;this.groupInterval?s=$j({},this.groupInterval):dV((s=this.chooseInterval(0,o,this.groupCount,this.groupIntervals)).timeUnit,s.count)<dV(r.timeUnit,r.count)&&(s=$j({},r)),this._groupInterval=s;var a=s.timeUnit+s.count;this._currentDataSetId!=a&&(this._currentDataSetId=a,this.dispatch("groupperiodchanged")),this.series.each((function(t){t.baseAxis==e&&t.setDataSet(e._currentDataSetId)&&(i=!0)}))}var u=this.chooseInterval(0,n,this._gridCount);dV(u.timeUnit,u.count)<this.baseDuration&&(u=$j({},this.baseInterval)),this._gridInterval=u,this._nextGridUnit=pV(u.timeUnit),this._intervalDuration=dV(u.timeUnit,u.count),this._gridDate=vV(new Date(this.minZoomed-dV(u.timeUnit,u.count)),u.timeUnit,u.count,this._firstWeekDay,this._df.utc,new Date(this.min)),VM(this.series.iterator(),(function(t){if(t.baseAxis==e){var n=t.getAxisField(e),r=vV(new Date(e._minZoomed+.05*e.baseDuration),e.baseInterval.timeUnit,e.baseInterval.count,e._firstWeekDay,e._df.utc).getTime(),o=r.toString(),s=t.dataItemsByAxis.getKey(e.uid).getKey(o+t.currentDataSetId),a=0;0!=e.start&&(a=s?(s=e.findFirst(s,r,n)).index:t.dataItems.findClosestIndex(e._minZoomed,(function(t){return t[n]}),"left"));var u=e.baseInterval,l=mV(vV(new Date(e._maxZoomed),u.timeUnit,u.count,e._firstWeekDay,e._df.utc),u.timeUnit,u.count,e._df.utc).getTime(),h=l.toString(),c=t.dataItemsByAxis.getKey(e.uid).getKey(h+t.currentDataSetId),p=t.dataItems.length;1!=e.end&&(c?p=c.index:(p=t.dataItems.findClosestIndex(l-=1,(function(t){return t[n]}),"right"),p++)),t.max(e)<r?(t.startIndex=t.dataItems.length,t.endIndex=t.dataItems.length):t.min(e)>l?(t.startIndex=0,t.endIndex=0):(t.startIndex=a,t.endIndex=p),!i&&t.dataRangeInvalid&&t.validateDataRange()}}))},e.prototype.findFirst=function(t,e,n){var i=t.index;if(i>0){var r=t.component.dataItems.getIndex(i-1),o=r[n];return!o||o.getTime()<e?t:this.findFirst(r,e,n)}return t},e.prototype.validateData=function(){t.prototype.validateData.call(this),yR(this.baseInterval.count)||(this.baseInterval.count=1)},Object.defineProperty(e.prototype,"minDifference",{get:function(){var t=this,e=Number.MAX_VALUE;return this.series.each((function(n){e>t._minDifference[n.uid]&&(e=t._minDifference[n.uid])})),e!=Number.MAX_VALUE&&0!=e||(e=dV("day")),e},enumerable:!0,configurable:!0}),e.prototype.seriesDataChangeUpdate=function(t){this._minDifference[t.uid]=Number.MAX_VALUE},e.prototype.postProcessSeriesDataItems=function(t){var e=this;t?this.seriesGroupUpdate(t):this.series.each((function(t){e.seriesGroupUpdate(t)})),this.addEmptyUnitsBreaks()},e.prototype.seriesGroupUpdate=function(t){var e=this;JSON.stringify(t._baseInterval[this.uid])!=JSON.stringify(this.mainBaseInterval)&&(t._baseInterval[this.uid]=this.mainBaseInterval,t.mainDataSet.each((function(t){e.postProcessSeriesDataItem(t)})),this.groupData&&this.groupSeriesData(t))},e.prototype.groupSeriesData=function(t){var e=this;if(t.baseAxis==this&&t.dataItems.length>0&&!t.dataGrouped){t.bulletsContainer.removeChildren();var n=[],i=this.mainBaseInterval,r=dV(i.timeUnit,i.count);this.groupIntervals.each((function(t){var i=dV(t.timeUnit,t.count);(i>r&&i<e.max-e.min||e.groupInterval)&&n.push(t)})),t._dataSets&&(t._dataSets.each((function(t,e){e.each((function(t){t.dispose()})),e.clear()})),t._dataSets.clear()),t.dataGrouped=!0,tM(n,(function(n){var i="date"+e.axisLetter,r=n.timeUnit+n.count,o=new oN(t.mainDataSet.template.clone());t.dataSets.setKey(r,o);var s,a,u=t.mainDataSet,l=Number.NEGATIVE_INFINITY,h=0,c=[];kM(t.dataFields,(function(t,e){var n=t;n!=i&&-1==n.indexOf("Show")&&c.push(n)})),u.each((function(r){var u=r.getDate(i);if(u){var p=u.getTime(),d=(a=vV(new Date(p),n.timeUnit,n.count,e._df.firstDayOfWeek,e._df.utc)).getTime();l<d?(s&&t._adapterO&&tM(c,(function(e){s.values[e].value=t._adapterO.apply("groupDataItem",{dataItem:s,interval:n,dataField:e,date:a,value:s.values[e].value}).value,s.values[e].workingValue=s.values[e].value})),(s=o.create()).dataContext={},s.setWorkingLocation("dateX",t.dataItems.template.locations.dateX,0),s.setWorkingLocation("openDateX",t.dataItems.template.locations.openDateX,0),s.setWorkingLocation("dateY",t.dataItems.template.locations.dateY,0),s.setWorkingLocation("openDateY",t.dataItems.template.locations.openDateY,0),s.component=t,s.setDate(i,a),s._index=h,h++,tM(c,(function(e){var i=r.values[e];if(i){var o=i.value;t._adapterO&&(o=t._adapterO.apply("groupValue",{dataItem:r,interval:n,dataField:e,date:a,value:o}).value);var u=s.values[e];yR(o)?(u.value=o,u.workingValue=o,u.open=o,u.close=o,u.low=o,u.high=o,u.sum=o,u.average=o,u.count=1):u.count=0}})),e.postProcessSeriesDataItem(s,n),kM(t.propertyFields,(function(t,e){var n=t,i=r.properties[t];cR(i)&&(s.hasProperties=!0,s.setProperty(n,i))})),s.groupDataItems=[r],l=d):s&&(tM(c,(function(e){var i=t.groupFields[e],o=r.values[e];if(o){var u=o.value;if(t._adapterO&&(u=t._adapterO.apply("groupValue",{dataItem:r,interval:n,dataField:e,date:a,value:u}).value),yR(u)){var l=s.values[e];yR(l.open)||(l.open=u),l.close=u,(l.low>u||!yR(l.low))&&(l.low=u),(l.high<u||!yR(l.high))&&(l.high=u),yR(l.sum)?l.sum+=u:l.sum=u,l.count++,l.average=l.sum/l.count,yR(l[i])&&(l.value=l[i],l.workingValue=l.value)}}})),EN(r.properties,s.properties),kM(t.propertyFields,(function(t,e){var n=t,i=r.properties[t];cR(i)&&(s.hasProperties=!0,s.setProperty(n,i))})),s.groupDataItems.push(r))}s&&EN(r.dataContext,s.dataContext)})),s&&t._adapterO&&tM(c,(function(e){s.values[e].value=t._adapterO.apply("groupDataItem",{dataItem:s,interval:n,dataField:e,date:a,value:s.values[e].value}).value,s.values[e].workingValue=s.values[e].value}))})),this.calculateZoom()}},e.prototype.getDFFormatter=function(){this._df=this.dateFormatter},e.prototype.postProcessSeriesDataItem=function(t,e){var n=this,i="";e?i=e.timeUnit+e.count:e=this.mainBaseInterval;var r=t.component.dataItemsByAxis.getKey(this.uid);kM(t.dates,(function(o){var s=t.getDate(o).getTime(),a=vV(new Date(s),e.timeUnit,e.count,n._firstWeekDay,n._df.utc).getTime(),u=mV(new Date(a),e.timeUnit,e.count,n._df.utc);t.setCalculatedValue(o,a,"open"),t.setCalculatedValue(o,u.getTime(),"close"),r.setKey(a+i,t)}))},e.prototype.addEmptyUnitsBreaks=function(){var t=this;if(this.skipEmptyPeriods&&yR(this.min)&&yR(this.max)){var e=this.baseInterval.timeUnit,n=this.baseInterval.count;this._axisBreaks&&this._axisBreaks.clear();for(var i=vV(new Date(this.min),e,n,this._firstWeekDay,this._df.utc),r=void 0,o=function(){mV(i,e,n,s._df.utc);var o=i.getTime(),a=o.toString();HM(s.series.iterator(),(function(e){return!!e.dataItemsByAxis.getKey(t.uid).getKey(a+e.currentDataSetId)}))?r&&(r.endDate=new Date(o-1),r=void 0):r||((r=s.axisBreaks.create()).startDate=new Date(o),s._gapBreaks=!0)},s=this;i.getTime()<this.max-this.baseDuration;)o()}},e.prototype.fixAxisBreaks=function(){var e=this;t.prototype.fixAxisBreaks.call(this);var n=this._axisBreaks;n&&n.length>0&&n.each((function(t){var n=Math.ceil(e._gridCount*(Math.min(e.end,t.endPosition)-Math.max(e.start,t.startPosition))/(e.end-e.start));t.gridInterval=e.chooseInterval(0,t.adjustedEndValue-t.adjustedStartValue,n);var i=vV(new Date(t.adjustedStartValue),t.gridInterval.timeUnit,t.gridInterval.count,e._firstWeekDay,e._df.utc);i.getTime()>t.startDate.getTime()&&mV(i,t.gridInterval.timeUnit,t.gridInterval.count,e._df.utc),t.gridDate=i}))},e.prototype.getFirstWeekDay=function(){return this._df?this._df.firstDayOfWeek:1},e.prototype.getGridDate=function(t,e){var n=this._gridInterval.timeUnit,i=this._gridInterval.count;vV(t,n,1,this._firstWeekDay,this._df.utc);var r=t.getTime(),o=gV(t),s=mV(o,n,e,this._df.utc).getTime(),a=this.isInBreak(s);a&&a.endDate&&(vV(o=new Date(a.endDate.getTime()),n,i,this._firstWeekDay,this._df.utc),o.getTime()<a.endDate.getTime()&&mV(o,n,i,this._df.utc),s=o.getTime());var u=this.adjustDifference(r,s);return Math.round(u/dV(n))<i?this.getGridDate(t,e+i):o},e.prototype.getBreaklessDate=function(t,e,n){var i=new Date(t.endValue);vV(i,e,n,this._firstWeekDay,this._df.utc),mV(i,e,n,this._df.utc);var r=i.getTime();return(t=this.isInBreak(r))?this.getBreaklessDate(t,e,n):i},e.prototype.validateAxisElements=function(){var t=this;if(yR(this.max)&&yR(this.min)){this.calculateZoom();var e=this._gridDate.getTime(),n=this._gridInterval.timeUnit,i=this._gridInterval.count,r=gV(this._gridDate),o=this._dataItemsIterator;this.resetIterators();for(var s=function(){var t=a.getGridDate(gV(r),i);e=t.getTime();var s=gV(t);s=mV(s,n,i,a._df.utc);var u=a.dateFormats.getKey(n);a.markUnitChange&&r&&yV(t,r,a._nextGridUnit,a._df.utc)&&"year"!==n&&(u=a.periodChangeDateFormats.getKey(n));var l=a._df.format(t,u),h=o.find((function(t){return t.text===l}));h.__disabled&&(h.__disabled=!1),a.appendDataItem(h),h.axisBreak=void 0,h.date=t,h.endDate=s,h.text=l,a.validateDataElement(h),r=t},a=this;e<=this._maxZoomed;)s();var u=this.renderer;this._axisBreaks&&VM(this._axisBreaks.iterator(),(function(e){if(e.breakSize>0){var n=e.gridInterval.timeUnit,i=e.gridInterval.count;if(RR(e.startPoint,e.endPoint)>4*u.minGridDistance)for(var r,s=e.gridDate.getTime(),a=0,l=function(){var u=gV(e.gridDate);if(s=mV(u,n,i*a,t._df.utc).getTime(),a++,s>e.adjustedStartValue&&s<e.adjustedEndValue){var l=gV(u);l=mV(l,n,i,t._df.utc);var h=t.dateFormats.getKey(n);t.markUnitChange&&r&&yV(u,r,t._nextGridUnit,t._df.utc)&&"year"!==n&&(h=t.periodChangeDateFormats.getKey(n));var c=t._df.format(u,h),p=o.find((function(t){return t.text===c}));p.__disabled&&(p.__disabled=!1),t.appendDataItem(p),p.axisBreak=e,e.dataItems.moveValue(p),p.date=u,p.endDate=l,p.text=c,r=u,t.validateDataElement(p)}};s<=e.adjustedMax;)l()}}))}},e.prototype.validateDataElement=function(t){if(t.itemIndex=this._axisItemCount,this._axisItemCount++,yR(this.max)&&yR(this.min)){var e=this.renderer,n=t.value,i=t.endValue;yR(i)||(i=n);var r=this.valueToPosition(n),o=this.valueToPosition(i),s=o;!t.isRange&&this._gridInterval.count>this.baseInterval.count&&(o=r+(o-r)/(this._gridInterval.count/this.baseInterval.count)),t.position=r;var a=t.tick;a&&!a.disabled&&e.updateTickElement(a,r,o);var u=t.grid;u&&!u.disabled&&e.updateGridElement(u,r,o);var l=t.axisFill;l&&!l.disabled&&(e.updateFillElement(l,r,s),t.isRange||this.fillRule(t));var h=t.mask;h&&e.updateFillElement(h,r,o),t.bullet&&e.updateBullet(t.bullet,r,o);var c=t.label;if(c&&!c.disabled){var p=c.location;0==p&&(p=1!=this._gridInterval.count||"week"==this._gridInterval.timeUnit||t.isRange?0:.5),e.updateLabelElement(c,r,o,p)}}},Object.defineProperty(e.prototype,"baseDuration",{get:function(){return dV(this.baseInterval.timeUnit,this.baseInterval.count)},enumerable:!0,configurable:!0}),e.prototype.adjustMinMax=function(t,e){return{min:t,max:e,step:this.baseDuration}},e.prototype.fixMin=function(t){var e=this.baseInterval,n=vV(new Date(t),e.timeUnit,e.count,this._firstWeekDay,this._df.utc).getTime();return n+(mV(new Date(n),e.timeUnit,e.count,this._df.utc).getTime()-n)*this.startLocation},e.prototype.fixMax=function(t){var e=this.baseInterval,n=vV(new Date(t),e.timeUnit,e.count,this._firstWeekDay,this._df.utc).getTime();return n+(mV(new Date(n),e.timeUnit,e.count,this._df.utc).getTime()-n)*this.endLocation},e.prototype.chooseInterval=function(t,e,n,i){i||(i=this.gridIntervals);var r=i.getIndex(t),o=dV(r.timeUnit,r.count),s=i.length-1;if(t>=s)return $j({},i.getIndex(s));var a=Math.ceil(e/o);return e<o&&t>0?$j({},i.getIndex(t-1)):a<=n?$j({},i.getIndex(t)):t+1<i.length?this.chooseInterval(t+1,e,n,i):$j({},i.getIndex(t))},e.prototype.formatLabel=function(t){return this._df.format(t)},e.prototype.dateToPosition=function(t){return this.valueToPosition(t.getTime())},e.prototype.anyToPosition=function(t){return t instanceof Date?this.dateToPosition(t):this.valueToPosition(t)},e.prototype.dateToPoint=function(t){var e=this.dateToPosition(t),n=this.renderer.positionToPoint(e),i=this.renderer.positionToAngle(e);return{x:n.x,y:n.y,angle:i}},e.prototype.anyToPoint=function(t){return t instanceof Date?this.dateToPoint(t):this.valueToPoint(t)},e.prototype.positionToDate=function(t){return new Date(this.positionToValue(t))},e.prototype.getPositionX=function(t,e,n,i,r){var o=this.getTimeByLocation(t,e,n);yR(o)||(o=this.baseValue);var s=this.valueToPosition(o);return r&&(s=OR(s,r.start,r.end)),s},e.prototype.getPositionY=function(t,e,n,i,r){var o=this.getTimeByLocation(t,e,n),s=t.getValue("valueX","stack");yR(o)||(o=this.baseValue);var a=this.valueToPosition(o+s);return r&&(a=OR(a,r.start,r.end)),a},e.prototype.getAngle=function(t,e,n,i,r){var o=this.getTimeByLocation(t,e,n),s=t.getValue(i,"stack");yR(o)||(o=this.baseValue);var a=this.valueToPosition(o+s);return r&&(a=OR(a,r.start,r.end)),this.positionToAngle(a)},e.prototype.getTimeByLocation=function(t,e,n){if(cR(e)){yR(n)||yR(n=t.workingLocations[e])||(n=0);var i=t.values[e].open,r=t.values[e].close,o=t.values[e].value-t.values[e].workingValue;return r-=o,yR(i-=o)&&yR(r)?i+(r-i)*n:void 0}},e.prototype.processSeriesDataItem=function(t,e){var n,i=t.component,r=t["date"+e];if(yR(this.timezoneOffset)?(r.setTime(r.getTime()+6e4*(r.getTimezoneOffset()-this.timezoneOffset)),t.setValue("date"+e,r.getTime(),0)):cR(this.timezone)&&(r=bV(r,this.timezone),t.setValue("date"+e,r.getTime(),0),t["date"+e]=r),r){n=r.getTime();var o,s=t["openDate"+e],a=this._prevSeriesTime[i.uid];if(s&&(o=s.getTime()),yR(o)){var u=Math.abs(n-o);this._minDifference[i.uid]>u&&(this._minDifference[i.uid]=u)}var l=n-a;l>0&&this._minDifference[i.uid]>l&&(this._minDifference[i.uid]=l),this._prevSeriesTime[i.uid]=n,i._baseInterval[this.uid]&&this.postProcessSeriesDataItem(t)}},e.prototype.updateAxisBySeries=function(){t.prototype.updateAxisBySeries.call(this);var e=this.chooseInterval(0,this.minDifference,1);this.minDifference>=dV("day",27)&&"week"==e.timeUnit&&(e.timeUnit="month",e.count=1),"month"==e.timeUnit&&(this.minDifference>=dV("day",58)&&1==e.count&&(e.count=2),this.minDifference>=dV("day",87)&&2==e.count&&(e.count=3),this.minDifference>=dV("day",174)&&5==e.count&&(e.count=6)),this.minDifference>=dV("hour",23)&&"hour"==e.timeUnit&&(e.timeUnit="day",e.count=1),this.minDifference>=dV("week",1)-dV("hour",1)&&"day"==e.timeUnit&&(e.timeUnit="week",e.count=1),this.minDifference>=dV("year",1)-dV("day",1.01)&&"month"==e.timeUnit&&(e.timeUnit="year",e.count=1),this._baseIntervalReal=e,this._mainBaseInterval=e},Object.defineProperty(e.prototype,"baseInterval",{get:function(){return this._groupInterval?this._groupInterval:this._baseInterval?this._baseInterval:this._baseIntervalReal},set:function(t){JSON.stringify(this._baseInterval)!=JSON.stringify(t)&&(this._baseInterval=t,this._mainBaseInterval=t,yR(t.count)||(t.count=1),this.invalidate(),this.postProcessSeriesDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainBaseInterval",{get:function(){return this._baseInterval?this._baseInterval:this._mainBaseInterval?this._mainBaseInterval:this._baseIntervalReal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipEmptyPeriods",{get:function(){return this.getPropertyValue("skipEmptyPeriods")},set:function(t){if(t){var e=this.axisBreaks.template;e.startLine.disabled=!0,e.endLine.disabled=!0,e.fillShape.disabled=!0,e.breakSize=0}else this._gapBreaks&&(this.axisBreaks.clear(),this._gapBreaks=!1);this.setPropertyValue("skipEmptyPeriods",t)&&(this.invalidate(),this.postProcessSeriesDataItems(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipDateFormat",{get:function(){return this.getPropertyValue("tooltipDateFormat")},set:function(t){this.setPropertyValue("tooltipDateFormat",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markUnitChange",{get:function(){return this.getPropertyValue("markUnitChange")},set:function(t){this.setPropertyValue("markUnitChange",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),e.prototype.getTooltipText=function(t){var e,n=this.positionToDate(t);if(n=vV(n,this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,new Date(this.min)),this.tooltipDate=n,cR(this.tooltipDateFormat))e=this._df.format(n,this.tooltipDateFormat);else{var i=this.dateFormats.getKey(this.baseInterval.timeUnit);e=i?this._df.format(n,i):this.getPositionLabel(t)}return this._adapterO?this._adapterO.apply("getTooltipText",e):e},e.prototype.roundPosition=function(t,e,n){var i=this.baseInterval,r=i.timeUnit,o=i.count,s=this.positionToDate(t);if(vV(s,r,o,this._firstWeekDay,this._df.utc),e>0&&mV(s,r,e*o,this._df.utc),n>0&&n<1&&s.setTime(s.getTime()+this.baseDuration*n),this.isInBreak(s.getTime()))for(;s.getTime()<this.max&&(mV(s,r,o,this._df.utc),this.isInBreak(s.getTime())););return this.dateToPosition(s)},e.prototype.getCellStartPosition=function(t){return this.roundPosition(t,0)},e.prototype.getCellEndPosition=function(t){return this.roundPosition(t,1)},e.prototype.getSeriesDataItem=function(t,e,n){var i=this.positionToValue(e),r=i-("Y"==this.axisLetter?t.dataItems.template.locations.dateY:t.dataItems.template.locations.dateX)*this.baseDuration,o=vV(new Date(i),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc),s=vV(new Date(i+this.baseDuration),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc);s.getTime()>o.getTime()&&Math.abs(s.getTime()-r)<Math.abs(r-o.getTime())&&(o=s);var a,u=t.dataItemsByAxis.getKey(this.uid).getKey(o.getTime()+t.currentDataSetId);return!u&&n&&(a="Y"==this.axisLetter?"dateY":"dateX",u=t.dataItems.getIndex(t.dataItems.findClosestIndex(o.getTime(),(function(t){return t[a]?t[a].getTime():-1/0}),"any"))),u},e.prototype.getPositionLabel=function(t){var e=this.positionToDate(t);return this._df.format(e,this.getCurrentLabelFormat())},e.prototype.getCurrentLabelFormat=function(){return this.dateFormats.getKey(this._gridInterval?this._gridInterval.timeUnit:"day")},e.prototype.initRenderer=function(){t.prototype.initRenderer.call(this);var e=this.renderer;e&&(e.ticks.template.location=0,e.grid.template.location=0,e.labels.template.location=0,e.baseGrid.disabled=!0)},Object.defineProperty(e.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),e.prototype.animateMinMax=function(t,e){var n=this,i=this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:t},{property:"_maxAdjusted",from:this._maxAdjusted,to:e}],this.rangeChangeDuration,this.rangeChangeEasing);return i.events.on("animationprogress",(function(){n.dispatch("extremeschanged")})),i},e.prototype.handleExtremesChange=function(){if(t.prototype.handleExtremesChange.call(this),this.groupData){var e=this.baseInterval.timeUnit+this.baseInterval.count;this.groupMin[e]=this._finalMin,this.groupMax[e]=this._finalMax}},e.prototype.zoomToDates=function(t,e,n,i,r){t=this._df.parse(t),e=this._df.parse(e),this.zoomToValues(t.getTime(),e.getTime(),n,i,r)},e.prototype.zoomToValues=function(t,e,n,i,r){var o=this;if(this.groupData){var s=this.adjustDifference(t,e),a=!1;e==this.max&&(a=!0);var u=!1;if(t==this.min&&(u=!0),cR(s)){var l=this.mainBaseInterval,h=this.chooseInterval(0,s,this.groupCount,this.groupIntervals);(h.timeUnit==l.timeUnit&&h.count<l.count||dV(h.timeUnit,1)<dV(l.timeUnit,1))&&(h=$j({},l));var c=h.timeUnit+h.count,p=this.groupMin[c],d=this.groupMax[c];yR(p)&&yR(d)||(p=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,this.series.each((function(t){var e=t.min(o),n=t.max(o);if(t._dataSets){var i=t._dataSets.getKey(h.timeUnit+h.count);if(i){var r=i.getIndex(0),s=i.getIndex(i.length-1);r&&(t.xAxis==o?e=r.dateX.getTime():t.yAxis==o&&(e=r.dateY.getTime())),s&&(t.xAxis==o?n=s.dateX.getTime():t.yAxis==o&&(n=s.dateY.getTime()))}}n=vV(mV(new Date(n),h.timeUnit,1,o._df.utc),h.timeUnit,1,o._df.firstDayOfWeek,o._df.utc).getTime(),e<p&&(p=e),n>d&&(d=n)})),this.groupMin[c]=p,this.groupMax[c]=d),t=OR(t,p,d),e=OR(e,p,d),r&&(a&&(t=OR(t=e-s,p,d)),u&&(e=OR(e=t+s,p,d))),this.zoom({start:(t-p)/(d-p),end:(e-p)/(d-p)},n,i)}}else this.zoom({start:(t-this.min)/(this.max-this.min),end:(e-this.min)/(this.max-this.min)},n,i)},e.prototype.asIs=function(e){return"baseInterval"==e||t.prototype.asIs.call(this,e)},e.prototype.copyFrom=function(e){var n=this;t.prototype.copyFrom.call(this,e),this.dateFormats=e.dateFormats,this.periodChangeDateFormats=e.periodChangeDateFormats,this.groupIntervals.clear(),e.groupIntervals.each((function(t){n.groupIntervals.push($j({},t))})),this.gridIntervals.clear(),e.gridIntervals.each((function(t){n.gridIntervals.push($j({},t))})),e._baseInterval&&(this.baseInterval=e._baseInterval)},e.prototype.showTooltipAtPosition=function(e,n){var i=this;if(n||(e=this.toAxisPosition(e)),this.snapTooltip){var r,o=this.positionToDate(e).getTime();if(this.series.each((function(t){if(t.baseAxis==i){var n=i.getSeriesDataItem(t,e,!0);if(n){var s=void 0;t.xAxis==i&&(s=n.dateX),t.yAxis==i&&(s=n.dateY),r?Math.abs(r.getTime()-o)>Math.abs(s.getTime()-o)&&(r=s):r=s}}})),r){var s=r.getTime();r=vV(new Date(s),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc),s=r.getTime();var a=this.renderer.tooltipLocation;0==a&&(a=1e-4),r=new Date(r.getTime()+this.baseDuration*a),e=this.dateToPosition(r),this.chart.cursor&&this.chart.cursor.snapToSeries||this.series.each((function(t){var e=t.dataItemsByAxis.getKey(i.uid).getKey(s+t.currentDataSetId),n=t.showTooltipAtDataItem(e);n?i.chart._seriesPoints.push({series:t,point:n}):(t.tooltipText||t.tooltipHTML)&&t.hideTooltip()}))}}t.prototype.showTooltipAtPosition.call(this,e,!0)},Object.defineProperty(e.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(t){this.setPropertyValue("snapTooltip",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupData",{get:function(){return this.getPropertyValue("groupData")},set:function(t){var e=this;this.setPropertyValue("groupData",t)&&(this.series.each((function(n){n.setDataSet(""),t&&!n.dataGrouped&&n.inited&&(n._baseInterval[e.uid]=e.mainBaseInterval,e.groupSeriesData(n))})),this._currentDataSetId="",this._groupInterval=void 0,this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupInterval",{get:function(){return this.getPropertyValue("groupInterval")},set:function(t){this.setPropertyValue("groupInterval",t)&&(this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupCount",{get:function(){return this.getPropertyValue("groupCount")},set:function(t){this.setPropertyValue("groupCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezoneOffset",{get:function(){return this.getPropertyValue("timezoneOffset")},set:function(t){this.setPropertyValue("timezoneOffset",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezone",{get:function(){return this.getPropertyValue("timezone")},set:function(t){this.setPropertyValue("timezone",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridInterval",{get:function(){return this._gridInterval},enumerable:!0,configurable:!0}),e.prototype.makeGap=function(t,e){var n=t.component;if(t&&e&&!n.connect&&yR(n.autoGapCount)&&n.baseAxis==this){var i=t.dates["date"+this.axisLetter],r=e.dates["date"+this.axisLetter];if(i&&r&&i.getTime()-r.getTime()>n.autoGapCount*this.baseDuration)return!0}return!1},Object.defineProperty(e.prototype,"baseValue",{get:function(){return this.min},enumerable:!0,configurable:!0}),e}(cB);QM.registeredClasses.DateAxis=fB,QM.registeredClasses.DateAxisDataItem=dB;var gB=function(t){function e(){var e=t.call(this)||this;return e.className="AxisRendererX",e.minGridDistance=120,e.opposite=!1,e.rotation=0,e.width=rR(100),e.labels.template.horizontalCenter="middle",e.applyTheme(),e}return Qj(e,t),e.prototype.setAxis=function(e){t.prototype.setAxis.call(this,e),e.layout="vertical"},e.prototype.updateGridContainer=function(){var t=this.axis;if(t){var e=this.gridContainer;e.x=t.pixelX,e.width=t.axisLength}},e.prototype.processRenderer=function(){t.prototype.processRenderer.call(this);var e=this.axis;if(e){e.width instanceof iR||(e.width=rR(100));var n=e.title;n.rotation=0,n.align="center",this.opposite?(this.line.toFront(),n.toBack()):(n.toFront(),this.toBack(),this.line.toBack())}},e.prototype.updateTooltip=function(){if(this.axis){var t=1e3,e=this.line.pixelY,n=t;this.opposite?this.inside||(e=-1e3,n=t):this.inside&&(e=-1e3,n=t),this.axis.updateTooltip("vertical",{x:this.line.pixelX,y:e,width:this.axisLength,height:n})}},e.prototype.updateLabelElement=function(t,e,n,i){cR(i)||(i=t.location);var r=this.positionToPoint(e+=(n-e)*i);t.isMeasured=!t.inside;var o,s=0,a=this.gridContainer.maxHeight;this.opposite?(t.inside?(o="top","bottom"==t.valign&&(s=a,o="bottom"),"middle"==t.valign&&(s=a/2,o="middle")):o="bottom",r.y=s):(t.inside?(o="bottom","top"==t.valign&&(s=-a,o="top"),"middle"==t.valign&&(s=-a/2,o="middle")):o="top",r.y+=s),0==t.rotation&&(t.verticalCenter=o),this.positionItem(t,r),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},Object.defineProperty(e.prototype,"axisLength",{get:function(){var t=this.axis;return t.measuredWidth-t.pixelPaddingRight-t.pixelPaddingLeft||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){return{x:this.positionToCoordinate(t),y:0}},e.prototype.pointToPosition=function(t){return this.coordinateToPosition(t.x,t.y)},e.prototype.getPositionRangePath=function(t,e){var n=OR(this.positionToCoordinate(t),0,this.axisLength),i=OR(this.positionToCoordinate(e),0,this.axisLength),r=Math.abs(i-n),o=this.getHeight();return FL({x:Math.min(n,i),y:0,width:r,height:o},!0)},e.prototype.updateBreakElement=function(e){t.prototype.updateBreakElement.call(this,e);var n=e.startLine,i=e.endLine,r=e.fillShape,o=e.startPoint,s=e.endPoint,a=e.pixelMarginLeft,u=this.getHeight()-e.pixelMarginTop-e.pixelMarginBottom;o.x=OR(o.x,-1,this.axisLength+1),s.x=OR(s.x,-1,this.axisLength+1),e.fillShape.__disabled=o.x==s.x&&(o.x<0||o.x>this.axisLength),n.y=a,n.width=0,n.height=u,i.y=a,i.width=0,i.height=u,r.height=u,r.width=Math.abs(s.x-o.x),r.y=a,r.x=o.x},e.prototype.updateGridElement=function(t,e,n){var i=this.positionToPoint(e+=(n-e)*t.location);t.path=EL({x:0,y:0})+kL({x:0,y:this.getHeight()}),this.positionItem(t,i),this.toggleVisibility(t,e,0,1)},e.prototype.updateTickElement=function(t,e,n){var i=this.positionToPoint(e+=(n-e)*t.location),r=t.length;i.y=iF({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,r*=this.opposite?t.inside?1:-1:t.inside?-1:1,t.path=EL({x:0,y:0})+kL({x:0,y:r}),this.positionItem(t,i),this.toggleVisibility(t,e,0,1)},e.prototype.updateAxisLine=function(){this.line.path=EL({x:0,y:0})+kL({x:this.axisLength,y:0})},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.axis,n=this.getHeight(),i=this.baseGrid,r=e.basePoint.x;if(r<-.2||r>this.axisLength+.2)i.hide(0);else{var o=iF({x:0,y:0},this.gridContainer,i.parent).y;i.path=EL({x:0,y:0})+kL({x:0,y:n}),i.moveTo({x:r,y:o}),i.show(0)}},e.prototype.createBreakSprites=function(t){t.startLine=new cU,t.endLine=new cU;var e=new pU;e.setWavedSides(!1,!0,!1,!0),t.fillShape=e},e.prototype.toAxisPosition=function(t){var e=t,n=this.axis;if(n){var i=n.relativePositionSprite,r=n.pixelX;if(i?r=iF({x:this.pixelX,y:0},this.parent,i).x:i=n.parent,i)return(e-r/i.innerWidth)/(n.axisLength/i.innerWidth)}return t},e.prototype.updateBullet=function(t,e,n){var i=.5;t instanceof aB&&(i=t.location);var r=this.positionToPoint(e+=(n-e)*i);r.y=iF({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e}(sB);QM.registeredClasses.AxisRendererX=gB,yL.push({relevant:mL.heightXS,state:function(t,e){if(t instanceof gB){var n=t.states.create(e);return n.properties.inside=!0,n.properties.maxLabelPosition=.9,n.properties.minLabelPosition=.1,n}return null}}),yL.push({relevant:mL.heightXXS,state:function(t,e){if(t instanceof gB){var n=t.states.create(e);return n.properties.disabled=!0,n}return null}});var yB=function(t){function e(){var e=t.call(this)||this;return e.className="CategoryAxisBreak",e.properties.startLocation=.5,e.properties.endLocation=.5,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedStartValue,this.startLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedEndValue,this.endLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startCategory",{get:function(){return this.getPropertyValue("startCategory")},set:function(t){this.setPropertyValue("startCategory",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endCategory",{get:function(){return this.getPropertyValue("endCategory")},set:function(t){this.setPropertyValue("endCategory",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startValue",{get:function(){var t=this.getPropertyValue("startCategory");return t?this.axis.categoryToIndex(t):this.getPropertyValue("startValue")},set:function(t){this.setPropertyValue("startValue",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){var t=this.getPropertyValue("endCategory");return t?this.axis.categoryToIndex(t):this.getPropertyValue("endValue")},set:function(t){this.setPropertyValue("endValue",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),e}(QU);QM.registeredClasses.CategoryAxisBreak=yB;var mB=function(t){function e(){var e=t.call(this)||this;return e.seriesDataItems={},e.className="CategoryAxisDataItem",e.text="{category}",e.locations.category=0,e.locations.endCategory=1,e.deltaPosition=0,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"category",{get:function(){return this._adapterO&&this._adapterO.isEnabled("category")?this._adapterO.apply("category",this.properties.category):this.properties.category},set:function(t){var e=this.properties.category;this.setProperty("category",t),cR(e)&&e!=t&&this.component&&this.component.validateDataElement(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endCategory",{get:function(){return this.properties.endCategory},set:function(t){this.setProperty("endCategory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaPosition",{get:function(){return this.properties.deltaCoordinate},set:function(t){t!=this.properties.deltaCoordinate&&(this.setProperty("deltaCoordinate",t),this.component&&(this.component.invalidateDataItems(),this.component.invalidateSeries()))},enumerable:!0,configurable:!0}),e}(ZU),vB=function(t){function e(){var e=t.call(this)||this;e.dataItemsByCategory=new YM,e.className="CategoryAxis",e.axisFieldName="category",e._lastDataItem=e.createDataItem(),e._lastDataItem.component=e,e._disposers.push(e._lastDataItem),e.applyTheme();var n=e.dataItemsByCategory;return e.addDisposer(e.mainDataSet.events.on("removed",(function(t){n.removeKey(t.oldValue.category)}))),e}return Qj(e,t),e.prototype.createDataItem=function(){return new mB},e.prototype.createAxisBreak=function(){return new yB},e.prototype.processSeriesDataItem=function(e,n){t.prototype.processSeriesDataItem.call(this,e,n);var i=e["category"+this.axisLetter];if(cR(i)){var r=this.dataItemsByCategory.getKey(i);if(r){var o=e.component.uid,s=r.seriesDataItems[o];s||(r.seriesDataItems[o]=s=[]),s.push(e)}}else e.component.dataItems.remove(e)},e.prototype.validateDataRange=function(){var n=this;t.prototype.validateDataRange.call(this),VM(this._series.iterator(),(function(t){if(t.xAxis instanceof e&&t.yAxis instanceof e)t.invalidateDataRange();else{var i=n.positionToIndex(n.start),r=n.positionToIndex(n.end);r>=n.dataItems.length&&r--;for(var o=t.uid,s=void 0,a=void 0,u=i;u<=r;u++){var l=n.dataItems.getIndex(u);if(l){var h=l.seriesDataItems[o];if(h)for(var c=0;c<h.length;c++){var p=h[c];if(p){var d=p.index;(!yR(s)||d<s)&&(s=d),(!yR(a)||d>a)&&(a=d)}}}}yR(s)?t.startIndex=s:t.start=n.start,yR(a)?t.endIndex=a+1:t.end=n.end,n._axisBreaks&&n._axisBreaks.length>0&&t.invalidateDataRange()}}))},e.prototype.validate=function(){var e=this;t.prototype.validate.call(this);var n=this.dataItems.length,i=OR(Math.floor(this.start*n-1),0,n),r=OR(Math.ceil(this.end*n),0,n);this.renderer.invalid&&this.renderer.validate();var o=this.renderer.axisLength/Math.max(this.renderer.minGridDistance,1/Number.MAX_SAFE_INTEGER),s=Math.min(this.dataItems.length,Math.ceil((r-i)/o));if(this._startIndex=Math.floor(i/s)*s,this._endIndex=Math.ceil(this.end*n),this.fixAxisBreaks(),this._startIndex==this._endIndex&&this._endIndex++,this._frequency=s,!(this.axisLength<=0)){this.maxZoomFactor=this.dataItems.length,this.dataItems.length<=0&&(this.maxZoomFactor=1),this.resetIterators(),i=kR(0,this._startIndex-this._frequency),r=AR(this.dataItems.length,this._endIndex+this._frequency);for(var a=0,u=0;u<i;u++)(h=this.dataItems.getIndex(u)).__disabled=!0;u=r;for(var l=this.dataItems.length;u<l;u++)(h=this.dataItems.getIndex(u)).__disabled=!0;for(u=i;u<r;u++)if(u<this.dataItems.length){var h=this.dataItems.getIndex(u);u/this._frequency==Math.round(u/this._frequency)?(this.isInBreak(u)||(this.appendDataItem(h),this.validateDataElement(h,a)),a++):h.__disabled=!0}this.appendDataItem(this._lastDataItem),this.validateDataElement(this._lastDataItem,a+1,this.dataItems.length),this._axisBreaks&&this._axisBreaks.each((function(t){var n=t.adjustedStartValue,i=t.adjustedEndValue;if(DR({start:n,end:i},{start:e._startIndex,end:e._endIndex})){for(var r=n;r<=i;r++)(a=e.dataItems.getIndex(r)).__disabled=!0;var o=OR(Math.ceil(e._frequency/t.breakSize),1,i-n),s=0;if(t.breakSize>0)for(r=n;r<=i;r+=o){var a;(a=e.dataItems.getIndex(r)).__disabled=!1,e.appendDataItem(a),e.validateDataElement(a,s),s++}}})),this.validateBreaks(),this.validateAxisRanges(),this.ghostLabel.invalidate(),this.renderer.invalidateLayout()}},e.prototype.validateDataElement=function(e,n,i){t.prototype.validateDataElement.call(this,e),e.itemIndex=this._axisItemCount,this._axisItemCount++;var r=this.renderer;yR(i)||(i=this.categoryToIndex(e.category));var o=this.categoryToIndex(e.endCategory);yR(o)||(o=i);var s,a,u,l=this.indexToPosition(i,e.locations.category),h=this.indexToPosition(o,e.locations.endCategory);e.position=l,e.isRange&&(s=o,a=this.indexToPosition(i,e.locations.category),u=this.indexToPosition(s,e.locations.endCategory)),e.point=r.positionToPoint(l);var c=e.tick;c&&!c.disabled&&r.updateTickElement(c,l,h);var p=e.grid;p&&!p.disabled&&r.updateGridElement(p,l,h);var d=e.label;d&&!d.disabled&&(e.isRange&&null!=d.text||(e.text=e.text),r.updateLabelElement(d,l,h),(r instanceof uB&&e.label.measuredWidth>this.ghostLabel.measuredWidth||r instanceof gB&&e.label.measuredHeight>this.ghostLabel.measuredHeight)&&(e.label.html?this.ghostLabel.html=e.label.currentText:this.ghostLabel.text=e.label.currentText));var f=e.axisFill;f&&!f.disabled&&(e.isRange||(s=i+this._frequency,a=this.indexToPosition(i,f.location),u=this.indexToPosition(s,f.location)),r.updateFillElement(f,a,u),e.isRange||this.fillRule(e,n)),e.bullet&&r.updateBullet(e.bullet,l,h);var g=e.mask;g&&r.updateFillElement(g,a,u)},e.prototype.disposeData=function(){this.dataItemsByCategory.clear(),t.prototype.disposeData.call(this)},e.prototype.processDataItem=function(e,n){e&&(t.prototype.processDataItem.call(this,e,n),cR(e.category)&&this.dataItemsByCategory.setKey(e.category,e))},e.prototype.getDataItem=function(t){var e=t[this.dataFields.category];if(cR(e))return this.dataItemsByCategory.getKey(e)||this.dataItems.create()},e.prototype.indexToPosition=function(t,e){yR(e)||(e=.5);var n=this.startIndex,i=this.endIndex,r=this.adjustDifference(n,i),o=this.startLocation;r-=o,r-=1-this.endLocation,this._axisBreaks&&FM(this._axisBreaks.iterator(),(function(e){var r=e.adjustedStartValue,o=e.adjustedEndValue;if(t<n||!yR(r)||!yR(o))return!1;if(DR({start:r,end:o},{start:n,end:i})){r=Math.max(n,r),o=Math.min(i,o);var s=e.breakSize;t>o?n+=(o-r)*(1-s):t<r||(t=r+(t-r)*s)}return!0}));var s=0,a=this.dataItems.getIndex(t);return a&&(s=a.deltaPosition),CR(s+(t+e-o-n)/r,5)},e.prototype.categoryToPosition=function(t,e){var n=this.categoryToIndex(t);return this.indexToPosition(n,e)},e.prototype.categoryToPoint=function(t,e){var n=this.categoryToPosition(t,e),i=this.renderer.positionToPoint(n),r=this.renderer.positionToAngle(n);return{x:i.x,y:i.y,angle:r}},e.prototype.anyToPoint=function(t,e){return this.categoryToPoint(t,e)},e.prototype.anyToPosition=function(t,e){return this.categoryToPosition(t,e)},e.prototype.categoryToIndex=function(t){if(cR(t)){var e=this.dataItemsByCategory.getKey(t);if(e)return e.index}},e.prototype.zoomToCategories=function(t,e){this.zoomToIndexes(this.categoryToIndex(t),this.categoryToIndex(e)+1)},e.prototype.getAnyRangePath=function(t,e,n,i){var r=this.categoryToPosition(t,n),o=this.categoryToPosition(e,i);return this.getPositionRangePath(r,o)},e.prototype.roundPosition=function(t,e){var n=this.positionToIndex(t);return this.indexToPosition(n,e)},e.prototype.getFirstSeriesDataItem=function(t,e){for(var n=0;n<t.dataItems.length;n++){var i=t.dataItems.getIndex(n);if(t.xAxis==this&&i.categoryX==e)return i;if(t.yAxis==this&&i.categoryY==e)return i}},e.prototype.getLastSeriesDataItem=function(t,e){for(var n=t.dataItems.length-1;n>=0;n--){var i=t.dataItems.getIndex(n);if(t.xAxis==this&&i.categoryX==e)return i;if(t.yAxis==this&&i.categoryY==e)return i}},e.prototype.getSeriesDataItemByCategory=function(t,e){var n,i=this;return e.dataItems.each((function(r){e.xAxis==i?r.categoryX==t&&(n=r):e.yAxis==i&&r.categoryY==t&&(n=r)})),n},e.prototype.getSeriesDataItem=function(t,e,n){var i=this;if(yR(e)){var r=this.positionToIndex(e);r>=this.dataItems.length&&r--;var o=this.dataItems.getIndex(r);if(o){var s,a=o.category,u=t.dataItems.getIndex(r);if(u){if(t.xAxis==this&&u.categoryX==a)return u;if(t.yAxis==this&&u.categoryY==a)return u}return t.dataItems.each((function(e){t.xAxis==i&&e.categoryX==a&&(s||(s=e),Math.abs(r-s.index)>Math.abs(r-e.index)&&(s=e)),t.yAxis==i&&e.categoryY==a&&(s||(s=e),Math.abs(r-s.index)>Math.abs(r-e.index)&&(s=e))})),s}}},e.prototype.getX=function(t,e,n,i,r){var o=this.getPositionX(t,e,n,i,r);return oR(o)?this.basePoint.x:this.renderer.positionToPoint(o).x},e.prototype.getPositionX=function(t,e,n,i,r){var o;return cR(e)&&(o=this.categoryToPosition(t.categories[e],n)),r&&(o=OR(o,r.start,r.end)),o},e.prototype.getY=function(t,e,n,i,r){var o=this.getPositionY(t,e,n,i,r);return oR(o)?this.basePoint.y:this.renderer.positionToPoint(o).y},e.prototype.getPositionY=function(t,e,n,i,r){var o;return cR(e)&&(o=this.categoryToPosition(t.categories[e],n)),r&&(o=OR(o,r.start,r.end)),o},e.prototype.getAngle=function(t,e,n,i,r){var o=this.categoryToPosition(t.categories[e],n);return r&&(o=OR(o,r.start,r.end)),this.positionToAngle(o)},e.prototype.getCellStartPosition=function(t){return this.roundPosition(t,0)},e.prototype.getCellEndPosition=function(t){return this.roundPosition(t,1)},e.prototype.getTooltipText=function(t){var e=this.dataItems.getIndex(this.positionToIndex(t));if(e)return this.tooltipDataItem=e,this.tooltip.dataItem=e,this.tooltipText?this.tooltipText:this._adapterO?this._adapterO.apply("getTooltipText",e.category):e.category},e.prototype.positionToIndex=function(t){(t=CR(t,10))<0&&(t=0),t>1&&(t=1);var e=this.startIndex,n=this.endIndex,i=n-e-this.startLocation-(1-this.endLocation);t+=1/i*this.startLocation;var r=null;return this._axisBreaks&&FM(this._axisBreaks.iterator(),(function(o){var s=o.startPosition,a=o.endPosition,u=o.adjustedStartValue,l=o.adjustedEndValue;u=kR(u,e),l=AR(l,n);var h=o.breakSize;if(i-=(l-u)*(1-h),t>a)e+=(l-u)*(1-h);else if(!(t<s))return r=u+Math.round((t-s)/(a-s)*(l-u)),!1;return!0})),yR(r)||(r=Math.floor(t*i+e)),r>=this.dataItems.length&&(r=this.dataItems.length-1),r},e.prototype.positionToCategory=function(t){return this.getPositionLabel(t)},e.prototype.getPositionLabel=function(t){var e=this.dataItems.getIndex(this.positionToIndex(t));if(e)return e.category},Object.defineProperty(e.prototype,"basePoint",{get:function(){return this.renderer.positionToPoint(1)},enumerable:!0,configurable:!0}),e.prototype.initRenderer=function(){t.prototype.initRenderer.call(this),this.renderer.baseGrid.disabled=!0},Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortBySeries",{get:function(){return this.getPropertyValue("sortBySeries")},set:function(t){this.setPropertyValue("sortBySeries",t,!0)},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){e&&cR(e.sortBySeries)&&gR(e.sortBySeries)&&(this.map.hasKey(e.sortBySeries)?e.sortBySeries=this.map.getKey(e.sortBySeries):(this.addDelayedMap("sortBySeries",e.sortBySeries),delete e.sortBySeries)),t.prototype.processConfig.call(this,e)},e}(JU);QM.registeredClasses.CategoryAxis=vB,QM.registeredClasses.CategoryAxisDataItem=mB;var bB=function(t){function e(){var e=t.call(this)||this;return e.className="XYSeriesDataItem",e.values.customValue={},e.values.valueX={stack:0},e.values.valueY={stack:0},e.values.openValueX={},e.values.openValueY={},e.values.dateX={},e.values.dateY={},e.values.openDateX={},e.values.openDateY={},e.setLocation("dateX",.5,0),e.setLocation("dateY",.5,0),e.setLocation("categoryX",.5,0),e.setLocation("categoryY",.5,0),e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"valueX",{get:function(){return this.values.valueX.value},set:function(t){this.setValue("valueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customValue",{get:function(){return this.values.customValue.value},set:function(t){this.setValue("customValue",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueY",{get:function(){return this.values.valueY.value},set:function(t){this.setValue("valueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateX",{get:function(){return this.getDate("dateX")},set:function(t){this.setDate("dateX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateY",{get:function(){return this.getDate("dateY")},set:function(t){this.setDate("dateY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryX",{get:function(){return this.categories.categoryX},set:function(t){this.setCategory("categoryX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryY",{get:function(){return this.categories.categoryY},set:function(t){this.setCategory("categoryY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openValueX",{get:function(){return this.values.openValueX.value},set:function(t){this.setValue("openValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openValueY",{get:function(){return this.values.openValueY.value},set:function(t){this.setValue("openValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openDateX",{get:function(){return this.getDate("openDateX")},set:function(t){this.setDate("openDateX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openDateY",{get:function(){return this.getDate("openDateY")},set:function(t){this.setDate("openDateY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openCategoryX",{get:function(){return this.categories.openCategoryX},set:function(t){this.setCategory("openCategoryX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openCategoryY",{get:function(){return this.categories.openCategoryY},set:function(t){this.setCategory("openCategoryY",t)},enumerable:!0,configurable:!0}),e.prototype.getMin=function(t,e,n){var i,r=this;return yR(n)||(n=0),tM(t,(function(t){var o;o=e?r.getWorkingValue(t):r.getValue(t),((o+=n)<i||!yR(i))&&(i=o)})),i},e.prototype.getMax=function(t,e,n){var i,r=this;return yR(n)||(n=0),tM(t,(function(t){var o;o=e?r.getWorkingValue(t):r.getValue(t),((o+=n)>i||!yR(i))&&(i=o)})),i},e}(GU),_B=function(t){function e(){var e=t.call(this)||this;return e.groupFields={},e._xAxis=new fM,e._yAxis=new fM,e._xValueFields=[],e._yValueFields=[],e._baseInterval={},e.dataGrouped=!1,e.usesShowFields=!1,e._dataSetChanged=!1,e._maxxX=1e5,e._maxxY=1e5,e._propertiesChanged=!1,e.className="XYSeries",e.isMeasured=!1,e.groupFields.valueX="close",e.groupFields.valueY="close",e.groupFields.customValue="close",e.groupFields.openValueX="open",e.groupFields.openValueY="open",e.cursorTooltipEnabled=!0,e.cursorHoverEnabled=!0,e.excludeFromTotal=!1,e.mainContainer.mask=new oL,e.mainContainer.mask.setElement(e.paper.add("path")),e.stacked=!1,e.snapTooltip=!1,e._showBullets=!1,e.tooltip.pointerOrientation="horizontal",e.properties.stackToNegative=!0,e.hideTooltipWhileZooming=!0,e.setPropertyValue("maskBullets",!0),e.tooltip.events.on("hidden",(function(){e.returnBulletDefaultState()}),void 0,!1),e._disposers.push(e._xAxis),e._disposers.push(e._yAxis),e.observe(rL,(function(){e.inited&&(e._propertiesChanged=!0,e.legendDataItem&&(e.legendDataItem.childrenCreated=!1),e.chart&&e.chart.legend&&e.chart.legend.invalidateDataItems(),e.invalidate())}),void 0,!1),e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y Series"))},e.prototype.createDataItem=function(){return new bB},e.prototype.resetExtremes=function(){this._tmin.clear(),this._tmax.clear(),this._smin.clear(),this._smax.clear()},e.prototype.dataChangeUpdate=function(){this.dataGrouped=!1,this._baseInterval={},this._currentDataSetId="",this.resetExtremes(),this.xAxis&&this.xAxis.seriesDataChangeUpdate(this),this.yAxis&&this.yAxis.seriesDataChangeUpdate(this)},e.prototype.validateData=function(){this._baseInterval={};var e=this.dataFields;if(this.usesShowFields=!!(e.valueYShow||e.openValueXShow||e.openValueXShow||e.openValueYShow),this.defineFields(),this.data.length>0&&this.dataChangeUpdate(),t.prototype.validateData.call(this),this.updateItemReaderText(),this.chart&&(!cR(this.dataFields[this._xField])||!cR(this.dataFields[this._yField])))throw Error('Data fields for series "'+(this.name?this.name:this.uid)+'" are not properly defined.');this.inited&&this.isHidden&&this.hide(0),this.dataGrouped=!1},e.prototype.processDataItem=function(e,n){try{t.prototype.processDataItem.call(this,e,n),this.xAxis.processSeriesDataItem(e,"X"),this.yAxis.processSeriesDataItem(e,"Y"),this.setInitialWorkingValues(e)}catch(i){this._chart&&this._chart.raiseCriticalError(i)}},e.prototype.updateDataItem=function(e){t.prototype.updateDataItem.call(this,e),this.xAxis.processSeriesDataItem(e,"X"),this.yAxis.processSeriesDataItem(e,"Y")},e.prototype.setInitialWorkingValues=function(t){},e.prototype.disposeData=function(){t.prototype.disposeData.call(this);var e=this.xAxis,n=this.yAxis;if(e){var i=this.dataItemsByAxis.getKey(e.uid);i&&i.clear(),e instanceof vB&&this.clearCatAxis(e)}if(n){var r=this.dataItemsByAxis.getKey(n.uid);r&&r.clear(),n instanceof vB&&this.clearCatAxis(n)}},e.prototype.clearCatAxis=function(t){var e=this.uid;t.dataItems.each((function(t){t.seriesDataItems[e]&&(t.seriesDataItems[e]=[])}))},e.prototype.defineFields=function(){var t=this.xAxis,e=this.yAxis;if(t&&e){var n=t.axisFieldName,i=n+"X",r="open"+MN(n)+"X",o=e.axisFieldName,s=o+"Y",a="open"+MN(o)+"Y";this._xField=i,this._yField=s,this.dataFields[r]&&(this._xOpenField=r),this.dataFields[a]&&(this._yOpenField=a),this.dataFields[a]||this.baseAxis!=e||(this._yOpenField=s),this.dataFields[r]||this.baseAxis!=t||(this._xOpenField=i),this.stacked&&this.baseAxis==t&&(this._xOpenField=i),this.stacked&&this.baseAxis==e&&(this._yOpenField=s),t instanceof vB&&e instanceof vB&&(this._yOpenField||(this._yOpenField=s)),this._xValueFields=[],this._yValueFields=[],this.addValueField(t,this._xValueFields,this._xField),this.addValueField(t,this._xValueFields,this._xOpenField),this.addValueField(e,this._yValueFields,this._yField),this.addValueField(e,this._yValueFields,this._yOpenField)}},e.prototype.addValueField=function(t,e,n){t instanceof cB&&cR(this.dataFields[n])&&-1==e.indexOf(n)&&e.push(n)},e.prototype.setCategoryAxisField=function(t,e){cR(this.dataFields[t])||(this.dataFields[t]=e.dataFields.category)},e.prototype.setDateAxisField=function(t,e){cR(this.dataFields[t])||(this.dataFields[t]=e.dataFields.date)},e.prototype.afterDraw=function(){t.prototype.afterDraw.call(this),this.createMask()},e.prototype.createMask=function(){if(this.mainContainer.mask){var t=this.getMaskPath();VM(this.axisRanges.iterator(),(function(e){e.axisFill.fillPath&&(e.axisFill.validate(),t+=e.axisFill.fillPath)})),this.mainContainer.mask.path=t}},e.prototype.getMaskPath=function(){return this.xAxis&&this.yAxis?FL({x:0,y:0,width:this.xAxis.axisLength,height:this.yAxis.axisLength}):""},e.prototype.getAxisField=function(t){return t==this.xAxis?this.xField:t==this.yAxis?this.yField:void 0},e.prototype.validateDataItems=function(){var e=this.chart;e&&(this._maxxX=kR(1e5,2*e.plotContainer.maxWidth),this._maxxY=kR(1e5,2*e.plotContainer.maxHeight));var n=this.xAxis,i=this.yAxis;n&&i&&(n.updateAxisBySeries(),i.updateAxisBySeries()),t.prototype.validateDataItems.call(this),n&&i&&(n.postProcessSeriesDataItems(this),i.postProcessSeriesDataItems(this))},e.prototype.validateDataRange=function(){var e=this.xAxis,n=this.yAxis;e&&n&&(e.dataRangeInvalid&&e.validateDataRange(),n.dataRangeInvalid&&n.validateDataRange()),t.prototype.validateDataRange.call(this)},e.prototype.validate=function(){var e=this.xAxis,n=this.yAxis;if(e&&n){e.invalid&&e.validate(),n.invalid&&n.validate(),this.y=n.pixelY,this.x=e.pixelX,this._showBullets=!0;var i=this.minBulletDistance;yR(i)&&this.baseAxis.axisLength/(this.endIndex-this.startIndex)<i&&(this._showBullets=!1)}if(this.updateTooltip(),!(e instanceof fB&&e.groupData&&!this.dataGrouped||n instanceof fB&&n.groupData&&!this.dataGrouped)){t.prototype.validate.call(this);var r=this.chart;r&&this.maskBullets&&"XYChart"==r.className&&("vertical"!=r.leftAxesContainer.layout&&"vertical"!=r.rightAxesContainer.layout||(this.bulletsContainer.mask=this.yAxis?this.yAxis.renderer.gridContainer:void 0),"horizontal"!=r.topAxesContainer.layout&&"horizontal"!=r.bottomAxesContainer.layout||(this.bulletsContainer.mask=this.xAxis?this.xAxis.renderer.gridContainer:void 0))}},Object.defineProperty(e.prototype,"xAxis",{get:function(){if(this.chart){if(!this._xAxis.get()){var t=this.chart.xAxes.getIndex(0);if(!t)throw Error("There are no X axes on chart.");this.xAxis=t}return this._xAxis.get()}},set:function(t){this.setXAxis(t)},enumerable:!0,configurable:!0}),e.prototype.setXAxis=function(t){var e=this._xAxis.get();e!=t&&(e&&(this.dataItemsByAxis.removeKey(e.uid),this._xAxis.dispose(),e.series.removeValue(this)),this._xAxis.set(t,t.registerSeries(this)),this.dataItemsByAxis.setKey(t.uid,new YM),this.invalidateData())},Object.defineProperty(e.prototype,"yAxis",{get:function(){if(this.chart){if(!this._yAxis.get()){var t=this.chart.yAxes.getIndex(0);if(!t)throw Error("There are no Y axes on chart.");this.yAxis=t}return this._yAxis.get()}},set:function(t){this.setYAxis(t)},enumerable:!0,configurable:!0}),e.prototype.setYAxis=function(t){var e=this._yAxis.get();e!=t&&(e&&(this.dataItemsByAxis.removeKey(e.uid),this._yAxis.dispose(),e.series.removeValue(this)),this._yAxis.set(t,t.registerSeries(this)),t.chart instanceof PB&&t.chart.handleYAxisSet(this),this.dataItemsByAxis.setKey(t.uid,new YM),this.invalidateData())},Object.defineProperty(e.prototype,"baseAxis",{get:function(){var t=this.xAxis,e=this.yAxis;return!this._baseAxis&&t&&e&&(e instanceof fB&&(this._baseAxis=e),t instanceof fB&&(this._baseAxis=t),e instanceof vB&&(this._baseAxis=e),t instanceof vB&&(this._baseAxis=t),this._baseAxis||(this._baseAxis=t)),this._baseAxis},set:function(t){this._baseAxis!=t&&(this._baseAxis=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.addData=function(e,n,i){t.prototype.addData.call(this,e,n,i),this.scrollbarSeries&&this.scrollbarSeries.addData(e,n,!0)},e.prototype.setData=function(e){t.prototype.setData.call(this,e),this.scrollbarSeries&&this.scrollbarSeries.setData(e)},e.prototype.setDataSet=function(e){var n=t.prototype.setDataSet.call(this,e);if(n){this._dataSetChanged=!0;var i=this.dataItems;if(this.resetExtremes(),i&&i.length>0){var r=this.xAxis,o=this.yAxis;this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.appeared||this.processValues(!1),r instanceof fB&&r==this.baseAxis&&(this._tmin.setKey(r.uid,i.getIndex(0).dateX.getTime()),this._tmax.setKey(r.uid,i.getIndex(i.length-1).dateX.getTime()),this.dispatch("extremeschanged")),o instanceof fB&&o==this.baseAxis&&(this._tmin.setKey(o.uid,i.getIndex(0).dateY.getTime()),this._tmax.setKey(o.uid,i.getIndex(i.length-1).dateY.getTime()),this.dispatch("extremeschanged"))}}return n},e.prototype.processValues=function(e){t.prototype.processValues.call(this,e);var n=this.xAxis,i=this.yAxis;if(n&&i){var r=this.dataItems,o=1/0,s=-1/0,a=1/0,u=-1/0,l=this.startIndex,h=this.endIndex,c=l,p=h;e||(l=0,h=this.dataItems.length);for(var d=l;d<h;d++){var f=r.getIndex(d);this.getStackValue(f,e);var g=f.getValue("valueX","stack"),y=f.getValue("valueY","stack");o=AR(f.getMin(this._xValueFields,e,g),o),a=AR(f.getMin(this._yValueFields,e,y),a),s=kR(f.getMax(this._xValueFields,e,g),s),u=kR(f.getMax(this._yValueFields,e,y),u),this.stacked&&(this.baseAxis==n&&(y<a&&(a=y),y>u&&(u=y)),this.baseAxis==i&&(g<o&&(o=g),g>s&&(s=g)))}n.processSeriesDataItems(),i.processSeriesDataItems();var m=n.uid,v=i.uid;if(this.xAxis instanceof cB&&(o==1/0||s==-1/0))return this._smin.setKey(m,void 0),this._smax.setKey(m,void 0),void this.dispatchImmediately("selectionextremeschanged");if(this.yAxis instanceof cB&&(a==1/0||u==-1/0))return this._smin.setKey(v,void 0),this._smax.setKey(v,void 0),void this.dispatchImmediately("selectionextremeschanged");if(!e&&(this._tmin.getKey(m)!=o||this._tmax.getKey(m)!=s||this._tmin.getKey(v)!=a||this._tmax.getKey(v)!=u)){this._tmin.setKey(m,o),this._tmax.setKey(m,s),this._tmin.setKey(v,a),this._tmax.setKey(v,u);var b=this.stackedSeries;b&&(b.isDisposed()?this.stackedSeries=void 0:b.processValues(!1)),this.dispatchImmediately("extremeschanged")}if(l!=c||h!=p)for(o=1/0,s=-1/0,a=1/0,u=-1/0,d=c;d<p;d++)f=r.getIndex(d),this.getStackValue(f,e),g=f.getValue("valueX","stack"),y=f.getValue("valueY","stack"),o=AR(f.getMin(this._xValueFields,e,g),o),a=AR(f.getMin(this._yValueFields,e,y),a),s=kR(f.getMax(this._xValueFields,e,g),s),u=kR(f.getMax(this._yValueFields,e,y),u),this.stacked&&(this.baseAxis==n&&(y<a&&(a=y),y>u&&(u=y)),this.baseAxis==i&&(g<o&&(o=g),g>s&&(s=g)));if(this.xAxis instanceof cB&&(o==1/0||s==-1/0))return this._smin.setKey(m,void 0),this._smax.setKey(m,void 0),void this.dispatchImmediately("selectionextremeschanged");if(this.yAxis instanceof cB&&(a==1/0||u==-1/0))return this._smin.setKey(v,void 0),this._smax.setKey(v,void 0),void this.dispatchImmediately("selectionextremeschanged");if((this._smin.getKey(m)!=o||this._smax.getKey(m)!=s||this._smin.getKey(v)!=a||this._smax.getKey(v)!=u)&&(this._smin.setKey(m,o),this._smax.setKey(m,s),this._smin.setKey(v,a),this._smax.setKey(v,u),this.appeared||0!=this.start||1!=this.end||this.dataItems!=this.mainDataSet)){var _,w,x=!1;i instanceof cB&&!(i instanceof fB)&&((!yR(_=this._tmin.getKey(v))||(this.usesShowFields||this._dataSetChanged||n instanceof fB&&n.groupData&&this.isShowing)&&a<_||this.stackedSeries&&!this.isHidden)&&(this._tmin.setKey(v,a),x=!0),(!yR(w=this._tmax.getKey(v))||(this.usesShowFields||this._dataSetChanged||n instanceof fB&&n.groupData&&this.isShowing)&&u>w||this.stackedSeries&&!this.isHidden)&&(this._tmax.setKey(v,u),x=!0)),n instanceof cB&&!(n instanceof fB)&&((!yR(_=this._tmin.getKey(m))||(this.usesShowFields||this._dataSetChanged||i instanceof fB&&i.groupData&&this.isShowing)&&o<_||this.stackedSeries&&!this.isHidden)&&(this._tmin.setKey(m,o),x=!0),(!yR(w=this._tmax.getKey(m))||(this.usesShowFields||this._dataSetChanged||i instanceof fB&&i.groupData&&this.isShowing)&&s>w||this.stackedSeries&&!this.isHidden)&&(this._tmax.setKey(m,s),x=!0)),x&&this.dispatchImmediately("extremeschanged"),0==this.start&&1==this.end&&(this._dataSetChanged=!1),this.dispatchImmediately("selectionextremeschanged")}!e&&this.stacked&&this.processValues(!0)}},e.prototype.hideTooltip=function(e){t.prototype.hideTooltip.call(this,e),this.returnBulletDefaultState(),this._prevTooltipDataItem=void 0},e.prototype.showTooltipAtPosition=function(t,e){var n;if(this.visible&&!this.isHiding&&!this.isShowing){var i=this._xAxis.get(),r=this._yAxis.get();i==this.baseAxis&&(n=i.getSeriesDataItem(this,i.toAxisPosition(t),this.snapTooltip)),r==this.baseAxis&&(n=r.getSeriesDataItem(this,r.toAxisPosition(e),this.snapTooltip));var o=this.showTooltipAtDataItem(n);if(o)return o;if(!this.tooltipText&&!this.tooltipHTML)return}this.hideTooltip()},e.prototype.getAdjustedXLocation=function(t,e,n){return t.locations[e]},e.prototype.getAdjustedYLocation=function(t,e,n){return t.locations[e]},e.prototype.showTooltipAtDataItem=function(t){var e,n,i=this.chart.cursor;if(i&&i.hideSeriesTooltipsOnSelection&&i.selection.visible&&i.downPoint)this.hideTooltip();else if(this.returnBulletDefaultState(t),t&&t.visible){if(this.updateLegendValue(t),this.cursorTooltipEnabled){this.tooltipDataItem=t;var r=this.tooltipXField,o=this.tooltipYField;if(cR(t[r])&&cR(t[o])){var s=this.getPoint(t,r,o,this.getAdjustedXLocation(t,r),this.getAdjustedYLocation(t,o));if(s&&("XYChart"!=this.chart.className||!(s.y<-1||s.y>this.yAxis.pixelHeight+1||s.x<-1||s.x>this.xAxis.pixelWidth+1))){if(this.tooltipX=s.x,this.tooltipY=s.y,this._prevTooltipDataItem!=t&&(this.dispatchImmediately("tooltipshownat",{type:"tooltipshownat",target:this,dataItem:t}),this._prevTooltipDataItem=t),this.cursorHoverEnabled)try{for(var a=tR(t.sprites),u=a.next();!u.done;u=a.next()){var l=u.value;!l.parent.visible||l.isHidden||l.__disabled||l.disabled||l.isHiding||(l.interactions.isRealHover||(l.dispatchImmediately("over"),l.interactions.isRealHover=!0),l.isHover=!0)}}catch(h){e={error:h}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return this.showTooltip()?nF({x:s.x,y:s.y},this):void 0}}}}else this.updateLegendValue(t,!0)},e.prototype.returnBulletDefaultState=function(t){var e,n;if(this._prevTooltipDataItem&&this._prevTooltipDataItem!=t)try{for(var i=tR(this._prevTooltipDataItem.sprites),r=i.next();!r.done;r=i.next()){var o=r.value;if(o.isDisposed())this._prevTooltipDataItem=void 0;else{var s=o.interactions.isRealHover;o.isHover=!1,s&&o.dispatchImmediately("out")}}}catch(a){e={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},e.prototype.shouldCreateBullet=function(t,e){var n=e.xField;cR(n)||(n=this.xField);var i=e.yField;if(cR(i)||(i=this.yField),this.xAxis instanceof cB&&!t.hasValue([n])||this.yAxis instanceof cB&&!t.hasValue([i]))return!1;if(e.disabled){var r=t.dataContext;return!(!r||!1!==r[e.propertyFields.disabled])}return!0},e.prototype.updateTooltip=function(){this.hideTooltipWhileZooming||!this.tooltip||this.tooltip.isHidden||this.isHiding||this.isHidden||!this.tooltipDataItem||this.showTooltipAtDataItem(this.tooltipDataItem)},e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e);var n=e.dataItem,i=e.xField;cR(i)||(i=this.xField);var r=e.yField;cR(r)||(r=this.yField);var o=this.xAxis,s=this.yAxis;if(o instanceof cB&&!n.hasValue([i])||s instanceof cB&&!n.hasValue([r]))e.visible=!1;else{var a=this.getBulletLocationX(e,i),u=this.getBulletLocationY(e,r);if(this.getPoint(n,i,r,a,u)){var l=this.xOpenField,h=this.yOpenField,c=void 0,p=void 0;if(o instanceof fB){yR(a)||(a=0);var d=void 0,f=n.getWorkingValue(i);if(l?d=n.getWorkingValue(l):o==this.baseAxis&&(d=o.baseValue),yR(d)||(d=f),(d+=_=n.getValue("valueX","stack"))==(f+=_)){var g=o.baseInterval,y=o.dateFormatter;d=vV(new Date(d),g.timeUnit,g.count,y.firstDayOfWeek,y.utc).getTime(),f=mV(new Date(d),g.timeUnit,g.count,y.utc).getTime()}c=o.valueToPosition(o==this.baseAxis?d+(f-d)*a:d+(f-d)*(1-a))}else if(o instanceof cB)yR(a)||(a=0),d=void 0,f=n.getWorkingValue(i),d=l?n.getWorkingValue(l):o.baseValue,d+=_=n.getValue("valueX","stack"),c=o.valueToPosition(d+((f+=_)-d)*(1-a));else if(o instanceof vB){var m=this.getAdjustedXLocation(n,i,e.locationX),v=this.getAdjustedXLocation(n,l,e.locationX);c=o.categoryToPosition(n[i],m);var b=void 0;l&&(b=o.categoryToPosition(n[l],v)),yR(b)||(b=1),c=b+(c-b)*a}if(s instanceof fB)yR(u)||(u=0),d=void 0,f=n.getWorkingValue(r),h?d=n.getWorkingValue(h):s==this.baseAxis&&(d=s.baseValue),yR(d)||(d=f),(d+=_=n.getValue("valueY","stack"))==(f+=_)&&(g=s.baseInterval,y=s.dateFormatter,d=vV(new Date(d),g.timeUnit,g.count,y.firstDayOfWeek,y.utc).getTime(),f=mV(new Date(d),g.timeUnit,g.count,y.utc).getTime()),p=s.valueToPosition(s==this.baseAxis?d+(f-d)*u:d+(f-d)*(1-u));else if(s instanceof cB){var _;yR(u)||(u=0),d=void 0,f=n.getWorkingValue(r),d=h?n.getWorkingValue(h):s.baseValue,d+=_=n.getValue("valueY","stack"),p=s.valueToPosition(d+((f+=_)-d)*(1-u))}else if(s instanceof vB){p=s.categoryToPosition(n[r],u);var w=this.getAdjustedYLocation(n,r,e.locationY),x=this.getAdjustedYLocation(n,h,e.locationY);p=s.categoryToPosition(n[r],w);var P=void 0;h&&(P=s.categoryToPosition(n[h],x)),yR(P)||(P=1),p=P+(p-P)*u}e.visible=!0,this.positionBulletReal(e,c,p)}else e.visible=!1}},e.prototype.positionBulletReal=function(t,e,n){t.x=this.xAxis.renderer.positionToPoint(e,n).x,t.y=this.yAxis.renderer.positionToPoint(n,e).y},e.prototype.getBulletLocationX=function(t,e){var n=t.locationX,i=t.dataItem;return yR(n)||(n=i.workingLocations[e]),n},e.prototype.getBulletLocationY=function(t,e){var n=t.locationY,i=t.dataItem;return yR(n)||(n=i.workingLocations[e]),n},e.prototype.updateStacking=function(){var t=this;this.invalidateDataItems(),this.chart&&this.chart.series.each((function(e){e.baseAxis==t.baseAxis&&(e.stackedSeries=void 0,e.invalidateDataItems(),e.invalidateProcessedData())}))},Object.defineProperty(e.prototype,"stacked",{get:function(){return this.getPropertyValue("stacked")},set:function(t){if(this.setPropertyValue("stacked",t,!0)){this.updateStacking();var e,n=this.xAxis,i=this.yAxis;t||(n!=this.baseAxis&&n instanceof cB&&(e=this.xField),i!=this.baseAxis&&i instanceof cB&&(e=this.yField),e&&this.dataItems.each((function(t){t.setCalculatedValue(e,0,"stack")})))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(t){this.setPropertyValue("snapTooltip",t)},enumerable:!0,configurable:!0}),e.prototype.show=function(e){var n,i=this;this.appeared&&this.xAxis instanceof fB&&this.xAxis.groupData&&(this._tmin.setKey(this.yAxis.uid,void 0),this._tmax.setKey(this.yAxis.uid,void 0)),this.appeared&&this.yAxis instanceof fB&&this.yAxis.groupData&&(this._tmin.setKey(this.xAxis.uid,void 0),this._tmax.setKey(this.xAxis.uid,void 0)),this.xAxis instanceof cB&&this.xAxis!=this.baseAxis&&(n=this._xValueFields),this.yAxis instanceof cB&&this.yAxis!=this.baseAxis&&(n=this._yValueFields);var r,o=this.startIndex,s=this.endIndex,a=0,u=this.defaultState.transitionDuration;yR(e)&&(u=e),kF.animationsEnabled||(u=0),VM(BM(this.dataItems.iterator()),(function(t){var e=t[0],l=u;(e<i.startIndex-10||e>i.endIndex+10)&&(l=0,a=0),i.sequencedInterpolation&&l>0&&(a=i.sequencedInterpolationDelay*e+u*(e-o)/(s-o)),r=t[1].show(l,a,n)})),this.dataSets.each((function(t,e){e!=i.dataItems&&e.each((function(t){t.events.disable(),t.show(0,0,n),t.events.enable()}))})),this.mainDataSet!=this.dataItems&&this.mainDataSet.each((function(t){t.events.disable(),t.show(0,0,n),t.events.enable()}));var l=t.prototype.show.call(this,e);return r&&!r.isFinished()&&(l=r),this.hidden&&(this.dispatchImmediately("selectionextremeschanged"),this.hidden=!1),l},e.prototype.hide=function(e){var n,i,r=this,o=this.xAxis;o instanceof cB&&o!=this.baseAxis&&(n=this._xValueFields,i=this.stacked||o.minZoomed<o.baseValue&&o.maxZoomed>o.baseValue||this.stackedSeries?o.baseValue:o.min);var s=this.yAxis;s instanceof cB&&s!=this.baseAxis&&(n=this._yValueFields,i=this.stacked||s.minZoomed<s.baseValue&&s.maxZoomed>s.baseValue||this.stackedSeries?s.baseValue:s.min);var a=this.startIndex,u=this.endIndex,l=this.hiddenState.transitionDuration;yR(e)&&(l=e),kF.animationsEnabled||(l=0);var h,c=0;VM(BM(this.dataItems.iterator()),(function(t){var e=t[0],o=t[1],s=l;(e<r.startIndex-10||e>r.endIndex+10)&&(s=0),0==s?o.hide(0,0,i,n):(r.sequencedInterpolation&&s>0&&(c=r.sequencedInterpolationDelay*e+l*(e-a)/(u-a)),h=o.hide(s,c,i,n))})),this.dataSets.each((function(t,e){e!=r.dataItems&&e.each((function(t){t.events.disable(),t.hide(0,0,i,n),t.events.enable()}))})),this.mainDataSet!=this.dataItems&&this.mainDataSet.each((function(t){t.events.disable(),t.hide(0,0,i,n),t.events.enable()}));var p=t.prototype.hide.call(this,l);return p&&!p.isFinished()&&p.delay(c),h&&!h.isFinished()&&(p=h),this.validateDataElements(),p},e.prototype.handleDataItemWorkingValueChange=function(e,n){t.prototype.handleDataItemWorkingValueChange.call(this,e,n),VM(this.baseAxis.series.iterator(),(function(t){(t.stacked||t.stackedSeries)&&t.invalidateProcessedData()}))},e.prototype.getStackValue=function(t,e){var n=this,i=this.xAxis,r=this.yAxis;if(this.stacked&&i&&r){var o,s=this.chart,a=s.series.indexOf(this);i!=this.baseAxis&&i instanceof cB&&(o=this.xField),r!=this.baseAxis&&r instanceof cB&&(o=this.yField),o&&(t.setCalculatedValue(o,0,"stack"),FM(s.series.range(0,a).backwards().iterator(),(function(s){if(s.xAxis==i&&s.yAxis==r&&s.className==n.className){s.stackedSeries=n;var a=s.dataItems.getIndex(t.index);if(a&&a.hasValue(n._xValueFields)&&a.hasValue(n._yValueFields)){var u,l=t.getValue(o),h=a.getValue(o)+a.getValue(o,"stack");if(u=e?a.getWorkingValue(o)+a.getValue(o,"stack"):a.getValue(o)+a.getValue(o,"stack"),!n.stackToNegative)return t.setCalculatedValue(o,u,"stack"),!1;if(l>=0&&h>=0||l<0&&h<0)return t.setCalculatedValue(o,u,"stack"),!1}else if(!s.stacked)return!1}return!0})))}},Object.defineProperty(e.prototype,"stackToNegative",{get:function(){return this.getPropertyValue("stackToNegative")},set:function(t){this.setPropertyValue("stackToNegative",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xField",{get:function(){return this._xField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yField",{get:function(){return this._yField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xOpenField",{get:function(){return this._xOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yOpenField",{get:function(){return this._yOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipXField",{get:function(){return this._tooltipXField?this._tooltipXField:this._xField},set:function(t){this._tooltipXField=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipYField",{get:function(){return this._tooltipYField?this._tooltipYField:this._yField},set:function(t){this._tooltipYField=t},enumerable:!0,configurable:!0}),e.prototype.min=function(t){return this._tmin.getKey(t.uid)},e.prototype.max=function(t){return this._tmax.getKey(t.uid)},e.prototype.selectionMin=function(t){return this._smin.getKey(t.uid)},e.prototype.selectionMax=function(t){return this._smax.getKey(t.uid)},e.prototype.processConfig=function(e){if(e){if(cR(e.baseAxis)&&gR(e.baseAxis)&&(this.map.hasKey(e.baseAxis)?e.baseAxis=this.map.getKey(e.baseAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+e.baseAxis+'" found for `baseAxis`.'),delete e.baseAxis)),cR(e.xAxis)&&gR(e.xAxis)&&(this.map.hasKey(e.xAxis)?e.xAxis=this.map.getKey(e.xAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+e.xAxis+'" found for `xAxis`.'),delete e.xAxis)),cR(e.yAxis)&&gR(e.yAxis)&&(this.map.hasKey(e.yAxis)?e.yAxis=this.map.getKey(e.yAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+e.yAxis+'" found for `yAxis`.'),delete e.yAxis)),cR(e.axisRanges)&&vR(e.axisRanges))for(var n=0,i=e.axisRanges.length;n<i;n++){var r=e.axisRanges[n];cR(r.type)||(r.type="AxisDataItem"),cR(r.axis)&&gR(r.axis)&&this.map.hasKey(r.axis)?r.component=this.map.getKey(r.axis):cR(r.component)&&gR(r.component)&&this.map.hasKey(r.component)&&(r.component=this.map.getKey(r.component))}cR(e.dataFields)&&mR(e.dataFields)||this.processingErrors.push("`dataFields` is not set for series ["+(this.name||"unnamed")+"]")}t.prototype.processConfig.call(this,e)},e.prototype.getPoint=function(t,e,n,i,r,o,s){if(this.xAxis&&this.yAxis){var a=this.xAxis.getX(t,e,i),u=this.yAxis.getY(t,n,r);return{x:a=OR(a,-this._maxxX,this._maxxX),y:u=OR(u,-this._maxxY,this._maxxY)}}},e.prototype.updateItemReaderText=function(){if(!this._itemReaderTextChanged){var t="";kM(this.dataFields,(function(e,n){t+="{"+e+"} "})),this.itemReaderText=t,this._itemReaderTextChanged=!1}},Object.defineProperty(e.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(t){this.setPropertyValue("cursorTooltipEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorHoverEnabled",{get:function(){return this.getPropertyValue("cursorHoverEnabled")},set:function(t){this.setPropertyValue("cursorHoverEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excludeFromTotal",{get:function(){return this.getPropertyValue("excludeFromTotal")},set:function(t){this.setPropertyValue("excludeFromTotal",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(t){this.setPropertyValue("hideTooltipWhileZooming",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t);var e=this.chart;e&&(this.bulletsContainer.parent=t?e.bulletsContainer:e.axisBulletsContainer)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){this.groupFields=EN(e.groupFields,{}),t.prototype.copyFrom.call(this,e)},e.prototype.dispose=function(){this.scrollbarSeries&&this.scrollbarSeries.dispose(),t.prototype.dispose.call(this)},e}(YU);QM.registeredClasses.XYSeries=_B,QM.registeredClasses.XYSeriesDataItem=bB;var wB=function(t){function e(){var e=t.call(this)||this;e._chart=new fM,e.className="XYChartScrollbar";var n=new rV;e.padding(0,0,0,0);var i=e.createChild(PB);if(i.shouldClone=!1,i.margin(0,0,0,0),i.padding(0,0,0,0),i.interactionsEnabled=!1,e._scrollbarChart=i,!fF()){var r=new SU;r.filterUnits="userSpaceOnUse",i.plotContainer.filters.push(r)}e._disposers.push(e._scrollbarChart),e.minHeight=60,e.minWidth=60;var o=e.createChild(oL);o.shouldClone=!1,o.setElement(e.paper.add("path")),o.fill=n.getFor("background"),o.fillOpacity=.8,o.interactionsEnabled=!1,o.isMeasured=!1,o.toBack(),e._unselectedOverlay=o,e._disposers.push(e._unselectedOverlay),i.toBack(),e.background.cornerRadius(0,0,0,0);var s=e.thumb.background;s.cornerRadius(0,0,0,0),s.fillOpacity=0,s.fill=n.getFor("background");var a=s.states.getKey("hover");a&&(a.properties.fillOpacity=.2);var u=s.states.getKey("down");return u&&(u.properties.fillOpacity=.4),e._disposers.push(e._chart),e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new eN,this._disposers.push(this._series.events.on("inserted",this.handleSeriesAdded,this,!1)),this._disposers.push(this._series.events.on("removed",this.handleSeriesRemoved,this,!1))),this._series},enumerable:!0,configurable:!0}),e.prototype.handleSeriesAdded=function(t){var e=this,n=t.newValue;if(n.xAxis&&n.yAxis){var i=this.scrollbarChart;i.zoomOutButton.disabled=!0,this.chart=n.chart,i.language.locale=this.chart.language.locale;var r=!0,o=!0;VM(this.series.iterator(),(function(t){t!=n&&(t.xAxis==n.xAxis&&e.scrollbarChart.xAxes.length>0&&(r=!1),t.yAxis==n.yAxis&&e.scrollbarChart.yAxes.length>0&&(o=!1))})),n.events.on("beforedisposed",(function(){e.series.removeValue(n)}));var s=new rV,a=n.clone();if((kF.onlyShowOnViewport||kF.queue)&&this.addDisposer(this.chart.events.on("removedfromqueue",(function(){i.invalidateData()}))),fF()&&(a.stroke=bN("#aaaaaa"),a.fill=a.stroke,a.propertyFields.fill=void 0,a.propertyFields.stroke=void 0),n.scrollbarSeries=a,r){var u=n.xAxis.clone();if(i.xAxes.moveValue(u),u.title.disabled=!0,u.rangeChangeDuration=0,(c=u.renderer).ticks.template.disabled=!0,c.inside=!0,c.labels.template.inside=!0,c.line.strokeOpacity=0,c.minLabelPosition=.02,c.maxLabelPosition=.98,c.line.disabled=!0,c.axisFills.template.disabled=!0,c.baseGrid.disabled=!0,c.grid.template.strokeOpacity=.05,c.minWidth=void 0,c.minHeight=void 0,c.padding(0,0,0,0),c.chart=i,c.margin(0,0,0,0),u.width=rR(100),c.labels.template.fillOpacity=.5,u.maxZoomCount=void 0,u.minZoomCount=void 0,u instanceof fB){var l=u;l.groupCount=5*n.xAxis.groupCount,l.min=void 0,l.max=void 0,this._disposers.push(l.clonedFrom.events.on("extremeschanged",(function(){yR(l.clonedFrom.minDefined)&&(l.min=l.clonedFrom.minDefined),yR(l.clonedFrom.maxDefined)&&(l.max=l.clonedFrom.maxDefined)}),void 0,!1))}else if(u instanceof cB){var h=u;h.min=void 0,h.max=void 0,yR(h.clonedFrom.minDefined)||(h.min=void 0),yR(h.clonedFrom.maxDefined)||(h.max=void 0),this._disposers.push(h.clonedFrom.events.on("extremeschanged",(function(){yR(h.clonedFrom.minDefined)&&(h.min=h.clonedFrom.min),yR(h.clonedFrom.maxDefined)&&(h.max=h.clonedFrom.max)}),void 0,!1))}a.xAxis=u}else this.scrollbarChart.xAxes.each((function(t){t.clonedFrom==n.xAxis&&(a.xAxis=t)}));if(o){var c,p=n.yAxis.clone();if(i.yAxes.moveValue(p),p.title.disabled=!0,p.rangeChangeDuration=0,(c=p.renderer).ticks.template.disabled=!0,c.inside=!0,c.labels.template.inside=!0,c.line.strokeOpacity=0,c.minLabelPosition=.02,c.maxLabelPosition=.98,c.line.disabled=!0,c.axisFills.template.disabled=!0,c.grid.template.stroke=s.getFor("background"),c.baseGrid.disabled=!0,c.grid.template.strokeOpacity=.05,c.minWidth=void 0,c.minHeight=void 0,c.chart=i,c.padding(0,0,0,0),c.margin(0,0,0,0),p.height=rR(100),c.labels.template.fillOpacity=.5,a.yAxis=p,p.maxZoomCount=void 0,p.minZoomCount=void 0,p instanceof fB){var d=p;d.min=void 0,d.max=void 0,p.groupCount=5*n.yAxis.groupCount,this._disposers.push(d.clonedFrom.events.on("extremeschanged",(function(){yR(d.clonedFrom.minDefined)&&(d.min=d.clonedFrom.minDefined),yR(d.clonedFrom.maxDefined)&&(d.max=d.clonedFrom.maxDefined)})))}else if(p instanceof cB){var f=p;f.min=void 0,f.max=void 0,yR(f.clonedFrom.minDefined)||(f.min=void 0),yR(f.clonedFrom.maxDefined)||(f.max=void 0),this._disposers.push(f.clonedFrom.events.on("extremeschanged",(function(){yR(f.clonedFrom.minDefined)&&(f.min=f.clonedFrom.minDefined),yR(f.clonedFrom.maxDefined)&&(f.max=f.clonedFrom.maxDefined)})))}}else this.scrollbarChart.yAxes.each((function(t){t.clonedFrom==n.yAxis&&(a.yAxis=t)}));a.rangeChangeDuration=0,a.interpolationDuration=0,a.defaultState.transitionDuration=0,a.showOnInit=!1,this._disposers.push(a.events.on("validated",this.zoomOutAxes,this,!1)),this._disposers.push(n.events.on("datavalidated",(function(){a.data!=n.data&&(a.data=n.data)}),void 0,!1)),a.defaultState.properties.visible=!0,i.series.push(a),this.updateByOrientation()}},e.prototype.updateByOrientation=function(){var t=this;this._scrollbarChart&&(VM(this._scrollbarChart.xAxes.iterator(),(function(e){var n=e.renderer;"vertical"==t.orientation?(n.grid.template.disabled=!0,n.labels.template.disabled=!0,n.minGridDistance=10):(n.grid.template.disabled=!1,n.labels.template.disabled=!1,n.minGridDistance=e.clonedFrom.renderer.minGridDistance)})),VM(this._scrollbarChart.yAxes.iterator(),(function(e){var n=e.renderer;"horizontal"==t.orientation?(n.grid.template.disabled=!0,n.labels.template.disabled=!0,n.minGridDistance=10):(n.grid.template.disabled=!1,n.labels.template.disabled=!1,n.minGridDistance=e.clonedFrom.renderer.minGridDistance)})))},e.prototype.handleSeriesRemoved=function(t){var e=t.oldValue,n=this.scrollbarChart;n.series.each((function(t){t&&t.clonedFrom==e&&n.series.removeValue(t)})),0==n.series.length&&(n.xAxes.clear(),n.yAxes.clear());try{e.events.off("validated",this.zoomOutAxes,this)}catch(i){}},Object.defineProperty(e.prototype,"scrollbarChart",{get:function(){return this._scrollbarChart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.get()!==t&&(this._chart.set(t,t.events.on("datavalidated",this.handleDataChanged,this,!1)),this.handleDataChanged(),this._scrollbarChart.dataProvider=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unselectedOverlay",{get:function(){return this._unselectedOverlay},enumerable:!0,configurable:!0}),e.prototype.handleDataChanged=function(){this.chart.data!=this.scrollbarChart.data?this.scrollbarChart.data=this.chart.data:this.scrollbarChart.invalidateRawData()},e.prototype.zoomOutAxes=function(){var t=this.scrollbarChart;VM(t.xAxes.iterator(),(function(t){t.zoom({start:0,end:1},!0,!0)})),VM(t.yAxes.iterator(),(function(t){t.zoom({start:0,end:1},!0,!0)}))},e.prototype.updateThumb=function(){if(t.prototype.updateThumb.call(this),this._unselectedOverlay){var e=this.thumb,n=e.pixelX||0,i=e.pixelY||0,r=e.pixelWidth||0,o=e.pixelHeight||0,s="";"horizontal"==this.orientation?(s=FL({x:-1,y:0,width:n,height:o}),s+=FL({x:n+r,y:0,width:(this.pixelWidth||0)-n-r,height:o})):(s=FL({x:0,y:0,width:r,height:i}),s+=FL({x:0,y:i+o,width:r,height:(this.pixelHeight||0)-i-o})),this._unselectedOverlay.path=s}},e.prototype.processConfig=function(e){if(e&&cR(e.series)&&vR(e.series))for(var n=0,i=e.series.length;n<i;n++){var r=e.series[n];if(cR(r)&&gR(r)){if(!this.map.hasKey(r))throw Error("XYChartScrollbar error: Series with id `"+r+"` does not exist.");e.series[n]=this.map.getKey(r)}}t.prototype.processConfig.call(this,e)},e}(KL);QM.registeredClasses.XYChartScrollbar=wB;var xB=function(t){function e(){var e=t.call(this)||this;return e.className="XYChartDataItem",e.applyTheme(),e}return Qj(e,t),e}(KU),PB=function(t){function e(){var e=t.call(this)||this;e._axisRendererX=gB,e._axisRendererY=uB,e._seriesPoints=[],e.className="XYChart",e.maskBullets=!0,e.arrangeTooltips=!0;var n=e.chartContainer;n.layout="vertical",e.padding(15,15,15,15);var i=n.createChild(aL);i.shouldClone=!1,i.layout="vertical",i.width=rR(100),i.zIndex=1,e.topAxesContainer=i;var r=n.createChild(aL);r.shouldClone=!1,r.layout="horizontal",r.width=rR(100),r.height=rR(100),r.zIndex=0,e.yAxesAndPlotContainer=r;var o=n.createChild(aL);o.shouldClone=!1,o.width=rR(100),o.layout="vertical",o.zIndex=1,e.bottomAxesContainer=o;var s=r.createChild(aL);s.shouldClone=!1,s.layout="horizontal",s.height=rR(100),s.contentAlign="right",s.events.on("transformed",e.updateXAxesMargins,e,!1),s.zIndex=1,e.leftAxesContainer=s;var a=r.createChild(aL);a.shouldClone=!1,a.height=rR(100),a.width=rR(100),a.background.fillOpacity=0,e.plotContainer=a,e.mouseWheelBehavior="none",e._cursorContainer=a;var u=r.createChild(aL);u.shouldClone=!1,u.layout="horizontal",u.height=rR(100),u.zIndex=1,u.events.on("transformed",e.updateXAxesMargins,e,!1),e.rightAxesContainer=u,e.seriesContainer.parent=a,e.bulletsContainer.parent=a;var l=a.createChild(dU);l.shouldClone=!1,l.align="right",l.valign="top",l.zIndex=Number.MAX_SAFE_INTEGER,l.marginTop=5,l.marginRight=5,l.hide(0),e.zoomOutButton=l;var h=e.plotContainer.createChild(aL);return h.shouldClone=!1,h.width=rR(100),h.height=rR(100),h.isMeasured=!1,h.zIndex=4,h.layout="none",e.axisBulletsContainer=h,e._bulletMask=e.plotContainer,e.events.on("beforedatavalidated",(function(){e.series.each((function(t){t.dataGrouped=!1,t._baseInterval={}}))}),e,!1),e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),this.zoomOutButton.exportable=!1,cR(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y chart"))},e.prototype.draw=function(){t.prototype.draw.call(this),this.seriesContainer.toFront(),this.bulletsContainer.toFront(),this.maskBullets&&(this.bulletsContainer.mask=this._bulletMask),this.updateSeriesLegend()},e.prototype.updatePlotElements=function(){VM(this.series.iterator(),(function(t){t.invalidate()}))},e.prototype.validateData=function(){0==this._parseDataFrom&&(VM(this.xAxes.iterator(),(function(t){t.dataChangeUpdate()})),VM(this.yAxes.iterator(),(function(t){t.dataChangeUpdate()})),VM(this.series.iterator(),(function(t){t.dataChangeUpdate()}))),t.prototype.validateData.call(this)},e.prototype.updateXAxesMargins=function(){var t=this.leftAxesContainer.measuredWidth,e=this.rightAxesContainer.measuredWidth,n=this.bottomAxesContainer;n.paddingLeft==t&&n.paddingRight==e||(n.paddingLeft=t,n.paddingRight=e);var i=this.topAxesContainer;i.paddingLeft==t&&i.paddingRight==e||(i.paddingLeft=t,i.paddingRight=e)},e.prototype.reinit=function(){t.prototype.reinit.call(this),this.series.each((function(t){t.appeared=!1}))},e.prototype.handleXAxisChange=function(t){this.updateXAxis(t.target)},e.prototype.handleYAxisChange=function(t){this.updateYAxis(t.target)},e.prototype.processXAxis=function(t){var e=t.newValue;e.chart=this,e.renderer||(e.renderer=new this._axisRendererX,e.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleXAxisChange,this,!1)),e.axisLetter="X",e.events.on("startendchanged",this.handleXAxisRangeChange,this,!1),e.dataProvider=this,this.updateXAxis(e.renderer),this.processAxis(e)},e.prototype.processYAxis=function(t){var e=t.newValue;e.chart=this,e.renderer||(e.renderer=new this._axisRendererY,e.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleYAxisChange,this,!1)),e.axisLetter="Y",e.events.on("startendchanged",this.handleYAxisRangeChange,this,!1),e.dataProvider=this,this.updateYAxis(e.renderer),this.processAxis(e)},e.prototype.handleXAxisRangeChange=function(){var t=this.getCommonAxisRange(this.xAxes);this.scrollbarX&&this.zoomAxes(this.xAxes,t,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarX,t)},e.prototype.toggleZoomOutButton=function(){if(this.zoomOutButton){var t=!1;FM(this.xAxes.iterator(),(function(e){if(e.toggleZoomOutButton)if(e.maxZoomCount>0){var n=e.maxZoomFactor/e.maxZoomCount;if(CR(e.end-e.start,3)<1/n)return t=!0,!1}else if(CR(e.start,3)>0||CR(e.end,3)<1)return t=!0,!1;return!0})),FM(this.yAxes.iterator(),(function(e){if(e.toggleZoomOutButton){if(e.maxZoomCount>0){var n=e.maxZoomFactor/e.maxZoomCount;if(CR(e.end-e.start,3)<1/n)return t=!0,!1}else if(CR(e.start,3)>0||CR(e.end,3)<1)return t=!0,!1;return!0}})),this.seriesAppeared||(t=!1),t?this.zoomOutButton.show():this.zoomOutButton.hide()}},e.prototype.seriesAppeared=function(){var t=!1;return VM(this.series.iterator(),(function(e){if(!e.appeared)return t=!1,!1})),t},e.prototype.handleYAxisRangeChange=function(){var t=this.getCommonAxisRange(this.yAxes);this.scrollbarY&&this.zoomAxes(this.yAxes,t,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarY,t)},e.prototype.updateScrollbar=function(t,e){t&&(t.skipRangeEvents(),t.start=e.start,t.end=e.end)},e.prototype.getCommonAxisRange=function(t){var e,n;return t.each((function(t){if(!t.zoomable||t instanceof cB&&t.syncWithAxis);else{var i=t.start,r=t.end;t.renderer.inversed&&(i=1-t.end,r=1-t.start),(!yR(e)||i<e)&&(e=i),(!yR(n)||r>n)&&(n=r)}})),{start:e,end:n}},e.prototype.updateXAxis=function(t){var e=t.axis;t.opposite?(e.parent=this.topAxesContainer,e.toFront()):(e.parent=this.bottomAxesContainer,e.toBack()),e.renderer&&e.renderer.processRenderer()},e.prototype.updateYAxis=function(t){var e=t.axis;t.opposite?(e.parent=this.rightAxesContainer,e.toBack()):(e.parent=this.leftAxesContainer,e.toFront()),e.renderer&&e.renderer.processRenderer()},e.prototype.processAxis=function(t){var e=this;t instanceof vB&&this._dataUsers.moveValue(t);var n=t.renderer;n.gridContainer.parent=this.plotContainer,n.gridContainer.toBack(),n.breakContainer.parent=this.plotContainer,n.breakContainer.toFront(),n.breakContainer.zIndex=10,t.addDisposer(new pM((function(){e.dataUsers.removeValue(t)}))),n.bulletsContainer.parent=this.axisBulletsContainer,this._disposers.push(t.events.on("positionchanged",(function(){var i=iF({x:0,y:0},t,e.axisBulletsContainer);t.renderer instanceof uB&&(n.bulletsContainer.y=i.y),t.renderer instanceof gB&&(n.bulletsContainer.x=i.x)}),void 0,!1)),this.plotContainer.events.on("maxsizechanged",(function(){e.inited&&(t.invalidateDataItems(),e.updateSeriesMasks())}),t,!1)},e.prototype.updateSeriesMasks=function(){fF()&&this.series.each((function(t){var e=t.mainContainer.mask;t.mainContainer.mask=void 0,t.mainContainer.mask=e}))},e.prototype.handleSeriesRemoved=function(e){var n=e.oldValue;n&&(n.xAxis&&(n.xAxis.series.removeValue(n),n.xAxis.invalidateProcessedData()),n.yAxis&&(n.yAxis.series.removeValue(n),n.yAxis.invalidateProcessedData()),this.series.each((function(t){t.resetExtremes()}))),t.prototype.handleSeriesRemoved.call(this,e)},Object.defineProperty(e.prototype,"xAxes",{get:function(){return this._xAxes||(this._xAxes=new eN,this._xAxes.events.on("inserted",this.processXAxis,this,!1),this._xAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new JM(this._xAxes,!1))),this._xAxes},enumerable:!0,configurable:!0}),e.prototype.handleAxisRemoval=function(t){var e=t.oldValue;this.dataUsers.removeValue(e),e.autoDispose&&e.dispose()},Object.defineProperty(e.prototype,"yAxes",{get:function(){return this._yAxes||(this._yAxes=new eN,this._yAxes.events.on("inserted",this.processYAxis,this,!1),this._yAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new JM(this._yAxes,!1))),this._yAxes},enumerable:!0,configurable:!0}),e.prototype.handleSeriesAdded=function(e){try{t.prototype.handleSeriesAdded.call(this,e);var n=e.newValue;0!=this.xAxes.length&&0!=this.yAxes.length||(QM.removeFromInvalidComponents(n),n.dataInvalid=!1),n.maskBullets=n.maskBullets,null==n.fill&&(this.patterns?(cR(n.stroke)||(n.stroke=this.colors.next()),n.fill=this.patterns.next(),cR(n.fillOpacity)&&(n.fill.backgroundOpacity=n.fillOpacity),n.stroke instanceof vN&&(n.fill.stroke=n.stroke,n.fill.fill=n.stroke)):n.fill=this.colors.next()),cR(n.stroke)||(n.stroke=n.fill)}catch(i){this.raiseCriticalError(i)}},Object.defineProperty(e.prototype,"cursor",{get:function(){return this._cursor},set:function(t){this._cursor!=t&&(this._cursor&&this.removeDispose(this._cursor),this._cursor=t,t&&(this._disposers.push(t),t.chart=this,t.shouldClone=!1,t.parent=this._cursorContainer,t.events.on("cursorpositionchanged",this.handleCursorPositionChange,this,!1),t.events.on("zoomstarted",this.handleCursorZoomStart,this,!1),t.events.on("zoomended",this.handleCursorZoomEnd,this,!1),t.events.on("panstarted",this.handleCursorPanStart,this,!1),t.events.on("panning",this.handleCursorPanning,this,!1),t.events.on("panended",this.handleCursorPanEnd,this,!1),t.events.on("behaviorcanceled",this.handleCursorCanceled,this,!1),t.events.on("hidden",this.handleHideCursor,this,!1),t.zIndex=Number.MAX_SAFE_INTEGER-1,this.tapToActivate&&this.setTapToActivate(this.tapToActivate)))},enumerable:!0,configurable:!0}),e.prototype.handleCursorPositionChange=function(){var t=this.cursor;if(t.visible&&!t.isHiding){var e=this.cursor.xPosition,n=this.cursor.yPosition;this.showSeriesTooltip({x:e,y:n});var i=[],r=t.snapToSeries;if(r&&!t.downPoint){r instanceof _B&&(r=[r]);var o=[];tM(r,(function(t){if(!t.isHidden&&!t.isHiding){var r=t.xAxis,s=t.yAxis;r instanceof cB&&!(r instanceof fB)&&s instanceof cB&&!(s instanceof fB)?(t.dataItems.each((function(t){o.push(t)})),iM(i,t.yAxis),iM(i,t.xAxis)):(t.baseAxis==t.xAxis&&(iM(i,t.yAxis),o.push(r.getSeriesDataItem(t,r.toAxisPosition(e),!0))),t.baseAxis==t.yAxis&&(iM(i,t.xAxis),o.push(s.getSeriesDataItem(t,s.toAxisPosition(n),!0))))}}));var s=this.getClosest(o,e,n);s&&(this.series.each((function(t){var e=s.component;t!=e&&(t.hideTooltip(),t.xAxis!=e.xAxis&&t.xAxis.hideTooltip(),t.yAxis!=e.yAxis&&t.yAxis.hideTooltip())})),s.component.showTooltipAtDataItem(s),t.handleSnap(s.component))}this._seriesPoints=[],this._cursorXPosition!=e&&this.showAxisTooltip(this.xAxes,e,i),this._cursorYPosition!=n&&this.showAxisTooltip(this.yAxes,n,i),this.arrangeTooltips&&this.sortSeriesTooltips(this._seriesPoints),this.legend&&this.legend.afterDraw()}},e.prototype.getClosest=function(t,e,n){var i,r=1/0;return eM(t,(function(t){if(t){var o=t.component.xAxis,s=t.component.yAxis,a=o.positionToCoordinate(o.toGlobalPosition(o.toAxisPosition(e))),u=s.positionToCoordinate(s.toGlobalPosition(s.toAxisPosition(n))),l=t.component.xField,h=t.component.yField;if(o instanceof cB&&!yR(t.getValue(l)))return!0;if(s instanceof cB&&!yR(t.getValue(h)))return!0;var c=o.positionToCoordinate(o.toGlobalPosition(o.getPositionX(t,l,t.locations[l],"valueX"))),p=s.positionToCoordinate(s.toGlobalPosition(s.getPositionY(t,h,t.locations[h],"valueY"))),d=Math.sqrt(Math.pow(a-c,2)+Math.pow(u-p,2));return d<r&&(r=d,i=t),!0}})),i},e.prototype.handleHideCursor=function(){this.hideObjectTooltip(this.xAxes),this.hideObjectTooltip(this.yAxes),this.hideObjectTooltip(this.series),this._cursorXPosition=void 0,this._cursorYPosition=void 0,this.updateSeriesLegend()},e.prototype.updateSeriesLegend=function(){VM(this.series.iterator(),(function(t){t.updateLegendValue()}))},e.prototype.hideObjectTooltip=function(t){VM(t.iterator(),(function(t){t.cursorTooltipEnabled&&t.hideTooltip(0)}))},e.prototype.showSeriesTooltip=function(t){var e=this;if(t){var n=[];this.series.each((function(i){if(i.xAxis instanceof fB&&i.xAxis.snapTooltip||i.yAxis instanceof fB&&i.yAxis.snapTooltip);else{var r=i.showTooltipAtPosition(t.x,t.y);r&&(i.tooltip.setBounds(rF({x:0,y:0,width:e.pixelWidth,height:e.pixelHeight},e)),n.push({series:i,point:r}))}})),this.arrangeTooltips&&this.sortSeriesTooltips(n)}else this.series.each((function(t){t.hideTooltip()}))},e.prototype.sortSeriesTooltips=function(t){if(t.length>0){var e=this.cursor;if(e&&yR(e.maxTooltipDistance)){var n,i,r=nF({x:e.point.x,y:e.point.y},e),o=1/0;tM(t,(function(t){var e=t.series,s=t.point;if(s){var a={x:s.x,y:s.y},u=Math.abs(RR(a,r));u<o&&(i=a,o=u,n=e)}}));var s=[];n&&(tM(t,(function(t){if(Math.abs(RR(t.point,i))<=Math.abs(e.maxTooltipDistance))s.push({series:t.series,point:t.point});else{var n=t.series.tooltipDataItem;n&&tM(n.sprites,(function(t){t.isHover=!1,t.handleOutReal()})),t.series.hideTooltip(0)}})),e.maxTooltipDistance<0&&(s.length>0&&tM(s,(function(t){n!=t.series&&t.series.hideTooltip(0)})),s=[{series:n,point:i}])),t=s}var a=nF({x:-.5,y:-.5},this.plotContainer),u=nF({x:this.plotContainer.pixelWidth+.5,y:this.plotContainer.pixelHeight+.5},this.plotContainer),l=0,h=[];tM(t,(function(t){var e=t.point;e&&QR(e,{x:a.x,y:a.y,width:u.x-a.x,height:u.y-a.y})&&(h.push({point:e,series:t.series}),l+=e.y)})),t=h;var c=this.series.getIndex(0),p=!1;c&&c.yAxis&&c.yAxis.renderer.inversed&&(p=!0),p?t.sort((function(t,e){return aN(t.point.y,e.point.y)})):(t.sort((function(t,e){return aN(e.point.y,t.point.y)})),t.reverse());var d=l/t.length,f=sF({x:0,y:0},this.svgContainer.SVGContainer).y;if(t.length>0){var g=a.y,y=u.y;uF({x:0,y:g},this);var m=!1;if(d>g+(y-g)/2)for(var v=y,b=t.length-1;b>=0;b--){var _=t[b].point.y;if((P=t[b].series.tooltip).setBounds({x:0,y:-f,width:this.pixelWidth,height:v+f}),P.invalid&&P.validate(),P.toBack(),(v=nF({x:0,y:P.label.pixelY-P.pixelY+_-P.pixelMarginTop},P).y)<-f){m=!0;break}}if(d<=g+(y-g)/2||m)for(var w=g,x=(b=0,t.length);b<x;b++){var P;_=t[b].point.y,(P=t[b].series.tooltip).setBounds({x:0,y:w,width:this.pixelWidth,height:y}),P.invalid&&P.validate(),P.toBack(),w=nF({x:0,y:P.label.pixelY+P.label.measuredHeight-P.pixelY+_+P.pixelMarginBottom},P).y}}}},e.prototype.showAxisTooltip=function(t,e,n){var i=this;VM(t.iterator(),(function(t){n&&-1!=n.indexOf(t)||(i.dataItems.length>0||t.dataItems.length>0)&&t.showTooltipAtPosition(e)}))},e.prototype.getUpdatedRange=function(t,e){if(t){var n,i;t.renderer.inversed?(jR(e),n=1-t.end,i=1-t.start):(n=t.start,i=t.end);var r=i-n;return{start:n+e.start*r,end:n+e.end*r}}},e.prototype.handleCursorZoomEnd=function(t){var e=this.cursor,n=e.behavior;if("zoomX"==n||"zoomXY"==n){var i=e.xRange;i&&this.xAxes.length>0&&((i=this.getUpdatedRange(this.xAxes.getIndex(0),i)).priority="start",this.zoomAxes(this.xAxes,i))}if("zoomY"==n||"zoomXY"==n){var r=e.yRange;r&&this.yAxes.length>0&&((r=this.getUpdatedRange(this.yAxes.getIndex(0),r)).priority="start",this.zoomAxes(this.yAxes,r))}this.handleHideCursor()},e.prototype.handleCursorPanStart=function(t){var e=this.xAxes.getIndex(0);e&&(this._panStartXRange={start:e.start,end:e.end});var n=this.yAxes.getIndex(0);n&&(this._panStartYRange={start:n.start,end:n.end})},e.prototype.handleCursorPanEnd=function(t){var e,n=this.cursor.behavior;if(this._panEndXRange&&("panX"==n||"panXY"==n)){var i=0;(e=this._panEndXRange).start<0&&(i=e.start),e.end>1&&(i=e.end-1),this.zoomAxes(this.xAxes,{start:e.start-i,end:e.end-i},!1,!0),this._panEndXRange=void 0,this._panStartXRange=void 0}!this._panEndYRange||"panY"!=n&&"panXY"!=n||(i=0,(e=this._panEndYRange).start<0&&(i=e.start),e.end>1&&(i=e.end-1),this.zoomAxes(this.yAxes,{start:e.start-i,end:e.end-i},!1,!0),this._panEndYRange=void 0,this._panStartYRange=void 0)},e.prototype.handleCursorCanceled=function(){this._panEndXRange=void 0,this._panStartXRange=void 0},e.prototype.handleCursorPanning=function(t){var e,n=this.cursor,i=n.behavior,r=n.maxPanOut;if(this._panStartXRange&&("panX"==i||"panXY"==i)){var o=this._panStartXRange,s=n.xRange,a=this.getCommonAxisRange(this.xAxes),u=o.end-o.start,l=s.start*(a.end-a.start),h=Math.max(-r,l+o.start),c=Math.min(l+o.end,1+r);h<=0&&(c=h+u),c>=1&&(h=c-u),this._panEndXRange=e={start:h,end:c},this.zoomAxes(this.xAxes,e,!1,!1,n.maxPanOut)}!this._panStartYRange||"panY"!=i&&"panXY"!=i||(o=this._panStartYRange,s=n.yRange,a=this.getCommonAxisRange(this.yAxes),u=o.end-o.start,l=s.start*(a.end-a.start),h=Math.max(-r,l+o.start),c=Math.min(l+o.end,1+r),h<=0&&(c=h+u),c>=1&&(h=c-u),this._panEndYRange=e={start:h,end:c},this.zoomAxes(this.yAxes,e,!1,!1,n.maxPanOut)),this.handleHideCursor()},e.prototype.handleYAxisSet=function(t){},e.prototype.handleCursorZoomStart=function(t){},Object.defineProperty(e.prototype,"scrollbarX",{get:function(){return this._scrollbarX},set:function(t){var e=this;this._scrollbarX&&this.removeDispose(this._scrollbarX),this._scrollbarX=t,t&&(this._disposers.push(t),t.parent=this.topAxesContainer,t.shouldClone=!1,t.startGrip.exportable=!1,t.endGrip.exportable=!1,t.toBack(),t.orientation="horizontal",t.events.on("rangechanged",this.handleXScrollbarChange,this,!1),t.adapter.add("positionValue",(function(t){var n=e.xAxes.getIndex(0);return n&&(t.value=n.getPositionLabel(n.renderer.inversed?1-t.position:t.position)),t})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollbarY",{get:function(){return this._scrollbarY},set:function(t){var e=this;this._scrollbarY&&this.removeDispose(this._scrollbarY),this._scrollbarY=t,t&&(this._disposers.push(t),t.parent=this.rightAxesContainer,t.startGrip.exportable=!1,t.shouldClone=!1,t.endGrip.exportable=!1,t.toFront(),t.orientation="vertical",t.events.on("rangechanged",this.handleYScrollbarChange,this,!1),t.adapter.add("positionValue",(function(t){var n=e.yAxes.getIndex(0);return n&&(t.value=n.getPositionLabel(t.position)),t})))},enumerable:!0,configurable:!0}),e.prototype.handleXScrollbarChange=function(t){if(this.inited){var e=t.target,n=e.range;0==n.start&&(n.priority="start"),1==n.end&&(n.priority="end"),n=this.zoomAxes(this.xAxes,n),e.fixRange(n)}},e.prototype.handleYScrollbarChange=function(t){if(this.inited){var e=t.target,n=e.range;1==n.end&&(n.priority="end"),0==n.start&&(n.priority="start"),n=this.zoomAxes(this.yAxes,n),e.fixRange(n)}},e.prototype.zoomAxes=function(t,e,n,i,r){var o={start:0,end:1};return this.showSeriesTooltip(),this.dataInvalid||VM(t.iterator(),(function(t){if(t.zoomable){if(t.renderer.inversed&&(e=jR(e)),t.hideTooltip(0),i)if(t instanceof vB){var s=t.getCellEndPosition(0)-t.getCellStartPosition(0);e.start=t.roundPosition(e.start+s/2-t.startLocation*s,t.startLocation),e.end=t.roundPosition(e.end-s/2+(1-t.endLocation)*s,t.endLocation)}else e.start=t.roundPosition(e.start+1e-4,0,t.startLocation),e.end=t.roundPosition(e.end+1e-4,0,t.endLocation);var a=t.zoom(e,n,n,r);t.renderer.inversed&&(a=jR(a)),o=a}})),o},Object.defineProperty(e.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t,!0)&&this.bulletsContainer&&(this.bulletsContainer.mask=t?this._bulletMask:void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arrangeTooltips",{get:function(){return this.getPropertyValue("arrangeTooltips")},set:function(t){this.setPropertyValue("arrangeTooltips",t,!0)},enumerable:!0,configurable:!0}),e.prototype.handleWheel=function(t){var e=this.plotContainer,n=eF(oF(t.point,this.htmlContainer,this.svgContainer.cssScale),e);this.handleWheelReal(t.shift.y,this.mouseWheelBehavior,n)},e.prototype.handleHorizontalWheel=function(t){var e=this.plotContainer,n=eF(oF(t.point,this.htmlContainer,this.svgContainer.cssScale),e);this.handleWheelReal(t.shift.x,this.horizontalMouseWheelBehavior,n)},e.prototype.handleWheelReal=function(t,e,n){if(0!=t){var i=this.plotContainer,r=this.getCommonAxisRange(this.xAxes),o=this.getCommonAxisRange(this.yAxes),s=.1;if("panX"==e||"panXY"==e){var a=r.end-r.start,u=Math.max(-0,r.start+s*t/100*(r.end-r.start)),l=Math.min(r.end+s*t/100*(r.end-r.start),1);u<=0&&(l=u+a),l>=1&&(u=l-a),this.zoomAxes(this.xAxes,{start:u,end:l})}if("panY"==e||"panXY"==e){t*=-1;var h=o.end-o.start,c=Math.max(-0,o.start+s*t/100*(o.end-o.start)),p=Math.min(o.end+s*t/100*(o.end-o.start),1);c<=0&&(p=c+h),p>=1&&(c=p-h),this.zoomAxes(this.yAxes,{start:c,end:p})}if("zoomX"==e||"zoomXY"==e){var d=n.x/i.maxWidth,f=this.xAxes.getIndex(0).toAxisPosition(d);u=Math.max(-0,r.start-s*(r.end-r.start)*t/100*d),u=Math.min(u,f),l=Math.min(r.end+s*(r.end-r.start)*t/100*(1-d),1),l=Math.max(l,f),this.zoomAxes(this.xAxes,{start:u,end:l})}if("zoomY"==e||"zoomXY"==e){var g=n.y/i.maxHeight,y=this.yAxes.getIndex(0).toAxisPosition(g);c=Math.max(-0,o.start-s*(o.end-o.start)*t/100*(1-g)),c=Math.min(c,y),p=Math.min(o.end+s*t/100*g*(o.end-o.start),1),p=Math.max(p,y),this.zoomAxes(this.yAxes,{start:c,end:p})}}},Object.defineProperty(e.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(t){this.setPropertyValue("mouseWheelBehavior",t)&&("none"!=t?(this._mouseWheelDisposer=this.plotContainer.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer)):this._mouseWheelDisposer&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer.dispose()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalMouseWheelBehavior",{get:function(){return this.getPropertyValue("horizontalMouseWheelBehavior")},set:function(t){this.setPropertyValue("horizontalMouseWheelBehavior",t)&&("none"!=t?(this._mouseWheelDisposer2=this.plotContainer.events.on("wheel",this.handleHorizontalWheel,this,!1),this._disposers.push(this._mouseWheelDisposer2)):this._mouseWheelDisposer2&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer2.dispose()))},enumerable:!0,configurable:!0}),e.prototype.dataSourceDateFields=function(e){var n=this;return e=t.prototype.dataSourceDateFields.call(this,e),VM(this.series.iterator(),(function(t){e=n.populateDataSourceFields(e,t.dataFields,["dateX","dateY","openDateX","openDateY"])})),e},e.prototype.dataSourceNumberFields=function(e){var n=this;return e=t.prototype.dataSourceDateFields.call(this,e),VM(this.series.iterator(),(function(t){e=n.populateDataSourceFields(e,t.dataFields,["valueX","valueY","openValueX","openValueY"])})),e},e.prototype.processConfig=function(e){if(e){var n=[],i=[];if(cR(e.xAxes)&&vR(e.xAxes))for(var r=0,o=e.xAxes.length;r<o;r++){if(!e.xAxes[r].type)throw Error("[XYChart error] No type set for xAxes["+r+"].");if(cR(e.xAxes[r].axisRanges)){for(var s=0,a=e.xAxes[r].axisRanges.length;s<a;s++)cR((l=e.xAxes[r].axisRanges[s]).date)&&gR(l.date)&&(l.date=this.dateFormatter.parse(l.date)),cR(l.endDate)&&gR(l.endDate)&&(l.endDate=this.dateFormatter.parse(l.endDate));n.push({axisRanges:e.xAxes[r].axisRanges,index:r}),delete e.xAxes[r].axisRanges}}if(cR(e.yAxes)&&vR(e.yAxes))for(r=0,o=e.yAxes.length;r<o;r++){if(!e.yAxes[r].type)throw Error("[XYChart error] No type set for yAxes["+r+"].");if(cR(e.yAxes[r].axisRanges)){s=0;for(var u=e.yAxes[r].axisRanges.length;s<u;s++){var l;cR((l=e.yAxes[r].axisRanges[s]).date)&&gR(l.date)&&(l.date=this.dateFormatter.parse(l.date)),cR(l.endDate)&&gR(l.endDate)&&(l.endDate=this.dateFormatter.parse(l.endDate))}i.push({axisRanges:e.yAxes[r].axisRanges,index:r}),delete e.yAxes[r].axisRanges}}if(cR(e.series)&&vR(e.series))for(r=0,o=e.series.length;r<o;r++)e.series[r].type=e.series[r].type||"LineSeries";if(cR(e.cursor)&&!cR(e.cursor.type)&&(e.cursor.type="XYCursor"),cR(e.scrollbarX)&&!cR(e.scrollbarX.type)&&(e.scrollbarX.type="Scrollbar"),cR(e.scrollbarY)&&!cR(e.scrollbarY.type)&&(e.scrollbarY.type="Scrollbar"),t.prototype.processConfig.call(this,e),i.length)for(r=0,o=i.length;r<o;r++)this.yAxes.getIndex(i[r].index).config={axisRanges:i[r].axisRanges};if(n.length)for(r=0,o=n.length;r<o;r++)this.xAxes.getIndex(n[r].index).config={axisRanges:n[r].axisRanges}}},e.prototype.configOrder=function(e,n){return e==n?0:"scrollbarX"==e?1:"scrollbarX"==n?-1:"scrollbarY"==e?1:"scrollbarY"==n?-1:"cursor"==e?1:"cursor"==n?-1:"series"==e?1:"series"==n?-1:t.prototype.configOrder.call(this,e,n)},e.prototype.createSeries=function(){return new _B},Object.defineProperty(e.prototype,"zoomOutButton",{get:function(){return this._zoomOutButton},set:function(t){var e=this;this._zoomOutButton=t,t&&t.events.on("hit",(function(){e.zoomAxes(e.xAxes,{start:0,end:1}),e.zoomAxes(e.yAxes,{start:0,end:1})}),void 0,!1)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){var n=this;e.xAxes.each((function(t){var e=n.xAxes.push(t.clone());e.chart=n,e.renderer.chart=n})),e.yAxes.each((function(t){var e=n.yAxes.push(t.clone());e.renderer.chart=n,e.chart=n})),t.prototype.copyFrom.call(this,e),e.cursor&&(this.cursor=e.cursor.clone()),e.scrollbarX&&(this.scrollbarX=e.scrollbarX.clone()),e.scrollbarY&&(this.scrollbarY=e.scrollbarY.clone())},e.prototype.disposeData=function(){t.prototype.disposeData.call(this);var e=this.scrollbarX;e&&e instanceof wB&&e.scrollbarChart.disposeData();var n=this.scrollbarY;n&&n instanceof wB&&n.scrollbarChart.disposeData(),this.xAxes.each((function(t){t instanceof vB&&t.disposeData()})),this.yAxes.each((function(t){t instanceof vB&&t.disposeData()}))},e.prototype.addData=function(e,n){this.scrollbarX instanceof wB&&this.addScrollbarData(this.scrollbarX,n),this.scrollbarY instanceof wB&&this.addScrollbarData(this.scrollbarY,n),t.prototype.addData.call(this,e,n)},e.prototype.addScrollbarData=function(t,e){var n=t.scrollbarChart;n._parseDataFrom=n.data.length,n.invalidateData()},e.prototype.removeScrollbarData=function(t,e){var n=t.scrollbarChart;if(yR(e)){for(;e>0;){var i=this.dataItems.getIndex(0);i&&n.dataItems.remove(i),n.dataUsers.each((function(t){var e=t.dataItems.getIndex(0);e&&t.dataItems.remove(e)})),n._parseDataFrom--,e--}n.invalidateData()}},e.prototype.removeData=function(e){this.scrollbarX instanceof wB&&this.removeScrollbarData(this.scrollbarX,e),this.scrollbarY instanceof wB&&this.removeScrollbarData(this.scrollbarY,e),t.prototype.removeData.call(this,e)},e.prototype.setTapToActivate=function(e){t.prototype.setTapToActivate.call(this,e),this.cursor&&(this.cursor.interactions.isTouchProtected=e,this.plotContainer.interactions.isTouchProtected=e)},e.prototype.handleTapToActivate=function(){t.prototype.handleTapToActivate.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!1,this.plotContainer.interactions.isTouchProtected=!1)},e.prototype.handleTapToActivateDeactivation=function(){t.prototype.handleTapToActivateDeactivation.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!0,this.plotContainer.interactions.isTouchProtected=!0)},e}(XU);QM.registeredClasses.XYChart=PB,yL.push({relevant:mL.maybeXS,state:function(t,e){if(t instanceof PB&&t.scrollbarX){var n=t.states.create(e);return t.scrollbarX.states.create(e).properties.disabled=!0,n}return null}}),yL.push({relevant:mL.maybeXS,state:function(t,e){if(t instanceof PB&&t.scrollbarY){var n=t.states.create(e);return t.scrollbarY.states.create(e).properties.disabled=!0,n}return null}});var CB=function(t){function e(){var e=t.call(this)||this;e.className="LineSeriesSegment",e.isMeasured=!1,e.interactionsEnabled=!1,e.layout="none";var n=e.createChild(oL);e.fillSprite=n,n.shouldClone=!1,n.setElement(e.paper.add("path")),n.isMeasured=!1,e._disposers.push(n);var i=e.createChild(oL);return e.strokeSprite=i,i.shouldClone=!1,i.fill=bN(),i.setElement(e.paper.add("path")),i.isMeasured=!1,e._disposers.push(i),e}return Qj(e,t),e.prototype.drawSegment=function(t,e,n,i){if(!this.disabled)if(t.length>0&&e.length>0&&yR(t[0].x)&&yR(t[0].y)){var r=EL({x:t[0].x-.2,y:t[0].y-.2})+EL(t[0]),o=this.series;"bezier"==o.smoothing?r+=new nU(n,i).smooth(t):"monotoneX"==o.smoothing?r+=new uU({closed:!1}).smooth(t):"monotoneY"==o.smoothing&&(r+=new lU({closed:!1}).smooth(t)),0==this.strokeOpacity||0==this.strokeSprite.strokeOpacity||(this.strokeSprite.path=r),(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&yR(e[0].x)&&yR(e[0].y)&&(r+=kL(e[0]),"bezier"==o.smoothing?r+=new nU(n,i).smooth(e):"monotoneX"==o.smoothing?r+=new uU({closed:!1}).smooth(e):"monotoneY"==o.smoothing&&(r+=new lU({closed:!1}).smooth(e)),r+=kL(t[0]),this.fillSprite.path=r+=" Z")}else this.fillSprite.path="",this.strokeSprite.path=""},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e);var n=this.strokeSprite;jM(e,n.properties,rL),n.events.copyFrom(e.strokeSprite.events),n.fillOpacity=0;var i=this.fillSprite;jM(e,i.properties,rL),i.events.copyFrom(e.fillSprite.events),i.strokeOpacity=0},e}(aL);QM.registeredClasses.LineSeriesSegment=CB;var IB=function(t){function e(){var e=t.call(this)||this;return e.className="DurationAxisDataItem",e.applyTheme(),e}return Qj(e,t),e}(hB),OB=function(t){function e(){var e=t.call(this)||this;return e._baseUnit="second",e.className="DurationAxis",e.setPropertyValue("maxZoomFactor",1e6),e.applyTheme(),e}return Qj(e,t),e.prototype.formatLabel=function(t,e){return this.durationFormatter.format(t,e||this.axisDurationFormat)},e.prototype.adjustMinMax=function(e,n,i,r,o){var s,a,u,l,h=this.baseUnit;if(this.setPropertyValue("maxPrecision",0),"millisecond"==h||"second"==h||"minute"==h||"hour"==h){r<=1&&(r=1),r=Math.round(r);var c=e,p=n;0===i&&(i=Math.abs(n));var d,f=[60,30,20,15,10,2,1],g=1;"hour"==h&&(f=[24,12,6,4,2,1]);try{for(var y=tR(f),m=y.next();!m.done;m=y.next()){var v=m.value;if(i/v>r){g=v;break}}}catch(P){s={error:P}}finally{try{m&&!m.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}var b=Math.ceil((n-e)/g/r),_=Math.log(Math.abs(b))*Math.LOG10E,w=Math.pow(10,Math.floor(_))/10,x=(l=b/w,f.reduce((function(t,e){return Math.abs(e-l)<Math.abs(t-l)?e:t})));this.durationFormatter.getValueUnit(d=g*(b=x*w),this.baseUnit),e=Math.floor(e/d)*d,n=Math.ceil(n/d)*d,o&&((e-=d)<0&&c>=0&&(e=0),(n+=d)>0&&p<=0&&(n=0)),u={min:e,max:n,step:d}}else u=t.prototype.adjustMinMax.call(this,e,n,i,r,o);return this.axisDurationFormat=this.durationFormatter.getFormat(u.step,u.max,this.baseUnit),u},Object.defineProperty(e.prototype,"tooltipDurationFormat",{get:function(){return this._tooltipDurationFormat},set:function(t){this._tooltipDurationFormat=t},enumerable:!0,configurable:!0}),e.prototype.getTooltipText=function(t){var e=CR(this.positionToValue(t),this._stepDecimalPlaces),n=this.formatLabel(e,this.tooltipDurationFormat);return this._adapterO?this._adapterO.apply("getTooltipText",n):n},Object.defineProperty(e.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(t){this._baseUnit!=t&&(this._baseUnit=t,this.durationFormatter.baseUnit=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.baseUnit=e.baseUnit},e}(cB);QM.registeredClasses.DurationAxis=OB,QM.registeredClasses.DurationAxisDataItem=IB;var SB=function(t){function e(){var e=t.call(this)||this;return e.className="LineSeriesDataItem",e}return Qj(e,t),e}(bB),TB=function(t){function e(){var e=t.call(this)||this;return e.minDistance=.5,e.segments=new nN(e.createSegment()),e.segments.template.applyOnClones=!0,e._disposers.push(new JM(e.segments)),e._disposers.push(e.segments.template),e._segmentsIterator=new WM(e.segments,(function(){return e.segments.create()})),e._segmentsIterator.createNewItems=!0,e.className="LineSeries",e.strokeOpacity=1,e.fillOpacity=0,e.connect=!0,e.tensionX=1,e.tensionY=1,e.autoGapCount=1.1,e.smoothing="bezier",e.segmentsContainer=e.mainContainer.createChild(aL),e.segmentsContainer.isMeasured=!1,e.bulletsContainer.toFront(),e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Line Series"))},e.prototype.createSegment=function(){return new CB},e.prototype.createDataItem=function(){return new SB},e.prototype.setInitialWorkingValues=function(t){var e=this._yAxis.get(),n=this._xAxis.get();if(this.appeared&&this.visible){var i=this.dataItems.getIndex(t.index-1);if(t.component=this,this.baseAxis==n&&e instanceof cB){var r=e.minZoomed;if(i&&(r=i.values.valueY.workingValue),t.setWorkingValue("valueY",r,0),t.setWorkingValue("valueY",t.values.valueY.value),n instanceof fB)t.setWorkingLocation("dateX",t.locations.dateX-1,0),t.setWorkingLocation("dateX",t.locations.dateX);else if(n instanceof OB&&i){var o=t.valueX;t.setWorkingValue("valueX",i.valueX,0),t.setWorkingValue("valueX",o)}}if(this.baseAxis==e&&n instanceof cB){var s=n.minZoomed;i&&(s=i.values.valueX.workingValue),t.setWorkingValue("valueX",s,0),t.setWorkingValue("valueX",t.values.valueX.value),e instanceof fB?(t.setWorkingLocation("dateY",t.locations.dateX-1,0),t.setWorkingLocation("dateY",t.locations.dateY)):e instanceof OB&&i&&(o=t.valueY,t.setWorkingValue("valueY",i.valueY,0),t.setWorkingValue("valueY",o))}}else this.baseAxis==n&&e instanceof cB&&(n instanceof fB&&t.setWorkingLocation("dateX",t.locations.dateX),n instanceof vB&&t.setWorkingLocation("categoryX",t.locations.categoryX)),this.baseAxis==e&&n instanceof cB&&(e instanceof fB&&t.setWorkingLocation("dateY",t.locations.dateY),e instanceof vB&&t.setWorkingLocation("categoryY",t.locations.categoryY))},e.prototype.updateLegendValue=function(e,n){t.prototype.updateLegendValue.call(this,e,n),e&&e.segment&&(this.tooltipColorSource=e.segment)},e.prototype.validate=function(){var e=this;t.prototype.validate.call(this),this.xAxis&&this.yAxis&&(this._segmentsIterator.reset(),this.openSegmentWrapper(this._adjustedStartIndex),VM(this.axisRanges.iterator(),(function(t){e.openSegmentWrapper(e._adjustedStartIndex,t)})),VM(this._segmentsIterator.iterator(),(function(t){t.__disabled=!0})))},e.prototype.sliceData=function(){for(var t=this.startIndex,e=this.endIndex,n=this.startIndex-1;n>=0;n--)if((r=this.dataItems.getIndex(n))&&r.hasValue(this._xValueFields)&&r.hasValue(this._yValueFields)){t=n;break}this._adjustedStartIndex=this.findAdjustedIndex(t,["stroke","strokeWidth","strokeDasharray","strokeOpacity","fill","fillOpacity","opacity"]),n=this.endIndex;for(var i=this.dataItems.length;n<i;n++){var r;if((r=this.dataItems.getIndex(n))&&r.hasValue(this._xValueFields)&&r.hasValue(this._yValueFields)){e=n+1;break}}this._workingStartIndex=t,this._workingEndIndex=e},e.prototype.findAdjustedIndex=function(t,e){var n=this,i=this.propertyFields,r=t;return tM(e,(function(e){if(cR(i[e]))for(var o=r;o>=0;o--){var s=n.dataItems.getIndex(o);if(s&&cR(s.properties[e])){t>o&&(t=o);break}}})),t},e.prototype.openSegmentWrapper=function(t,e){var n={index:t,axisRange:e};do{n=this.openSegment(n.index,n.axisRange)}while(n)},e.prototype.getSegment=function(){var t=this._segmentsIterator.getFirst();return t.series=this,t.isDisposed()?(this.segments.removeValue(t),this.getSegment()):t},e.prototype.openSegment=function(t,e){var n=!1,i=[];t=Math.min(t,this.dataItems.length);var r,o=Math.min(this._workingEndIndex,this.dataItems.length);this._workingEndIndex=Math.min(this._workingEndIndex,this.dataItems.length);var s=!1,a=this.getSegment();a.strokeDasharray=void 0,a.__disabled=!1,e?(a.parent=e.contents,jM(e.contents,a,rL)):(jM(this,a,rL),a.filters.clear(),a.parent=this.segmentsContainer),this.group.node.removeAttribute("fill");for(var u=this.connect,l=!1,h=t;h<o;h++){var c=this.dataItems.getIndex(h);if(c.segment=a,c.hasProperties&&(h==t?this.updateSegmentProperties(c.properties,a):s=this.updateSegmentProperties(c.properties,a,!0)),c.hasValue(this._xValueFields)&&c.hasValue(this._yValueFields))this.addPoints(i,c,this.xField,this.yField),l=!0;else{if(h==t)continue;if(!u&&l){r=h;break}}if(r=h,this.baseAxis instanceof fB){var p=this.dataItems.getIndex(h+1);if(p&&this.baseAxis.makeGap(p,c)){n=!0;break}}if(s)break}return this.closeSegment(a,i,t,r,e,n)},e.prototype.addPoints=function(t,e,n,i,r){var o=this.getPoint(e,n,i,e.workingLocations[n],e.workingLocations[i]);r||(e.point=o),t.push(o)},e.prototype.closeSegment=function(t,e,n,i,r,o){var s=[];if(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)for(var a=i;a>=n;a--){var u=this.dataItems.getIndex(a);u.hasValue(this._xValueFields)&&u.hasValue(this._yValueFields)&&this.addPoints(s,u,this.xOpenField,this.yOpenField,!0)}else{var l=e.length,h=this.xAxis,c=this.yAxis;l>0&&(this.baseAxis==h?(s.push({x:e[l-1].x,y:c.basePoint.y}),s.push({x:e[0].x,y:c.basePoint.y})):(s.push({x:h.basePoint.x,y:e[l-1].y}),s.push({x:h.basePoint.x,y:e[0].y})))}return this.drawSegment(t,e,s),o&&i++,i<this._workingEndIndex-1?{index:i,axisRange:r}:null},e.prototype.drawSegment=function(t,e,n){t.drawSegment(e,n,this.tensionX,this.tensionY)},e.prototype.updateSegmentProperties=function(t,e,n){var i=!1;return kM(t,(function(t,r){if(cR(r)){var o=e[t],s=void 0;o&&(s=o.toString?o.toString():o);var a=void 0;r&&(a=r.toString?r.toString():r),o==r||null!=s&&null!=a&&s==a||(n||(e[t]=r),i=!0)}})),i},Object.defineProperty(e.prototype,"connect",{get:function(){return this.getPropertyValue("connect")},set:function(t){this.setPropertyValue("connect",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(t){this.setPropertyValue("tensionX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(t){this.setPropertyValue("tensionY",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){var e=this,n=t.pixelWidth,i=t.pixelHeight;t.disposeChildren();var r=t.createChild(OL);if(r.shouldClone=!1,jM(this,r,rL),r.x2=n,r.y=i/2,r.y2=1e-5,r.visible=!0,this.fillOpacity>0){var o=t.createChild(sL);jM(this,o,rL),o.width=n,o.height=i,o.y=0,o.strokeOpacity=0,o.visible=!0,r.y=0}var s=t.dataItem;s.color=this.stroke,s.colorOrig=this.fill,FM(this.bullets.iterator(),(function(r){if(r instanceof HU&&!r.copyToLegendMarker)return!1;var o=!1;if(r instanceof aL&&VM(r.children.iterator(),(function(t){if(t instanceof _L)return o=!0,!0})),!o){var s=r.clone();return s.parent=t,s.isMeasured=!0,s.tooltipText=void 0,s.x=n/2,s.y=e.fillOpacity>0?0:i/2,s.visible=!0,cR(s.fill)||(s.fill=e.fill),cR(s.stroke)||(s.stroke=e.stroke),!1}}))},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this.segments.clear()},Object.defineProperty(e.prototype,"autoGapCount",{get:function(){return this.getPropertyValue("autoGapCount")},set:function(t){this.setPropertyValue("autoGapCount",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothing",{get:function(){return this.getPropertyValue("smoothing")},set:function(t){this.setPropertyValue("smoothing",t,!0)},enumerable:!0,configurable:!0}),e}(_B);QM.registeredClasses.LineSeries=TB,QM.registeredClasses.LineSeriesDataItem=SB;var EB=function(t){function e(){var e=t.call(this)||this;return e.className="RadarSeriesDataItem",e.setLocation("dateX",0,0),e.setLocation("dateY",0,0),e.setLocation("categoryX",0,0),e.setLocation("categoryY",0,0),e.applyTheme(),e}return Qj(e,t),e}(SB),kB=function(t){function e(){var e=t.call(this)||this;return e.className="RadarSeries",e.connectEnds=!0,e.applyTheme(),e}return Qj(e,t),e.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},e.prototype.createDataItem=function(){return new EB},e.prototype.getPoint=function(t,e,n,i,r,o,s){o||(o="valueX"),s||(s="valueY");var a=RR({x:this.yAxis.getX(t,n,r,s),y:this.yAxis.getY(t,n,r,s)});0==a&&(a=1e-5);var u=this.xAxis.getAngle(t,e,i,o);return u<this.chart.startAngle||u>this.chart.endAngle?void 0:{x:a*ER(u),y:a*SR(u)}},e.prototype.addPoints=function(t,e,n,i,r){var o=this.getPoint(e,n,i,e.locations[n],e.locations[i]);o&&t.push(o)},e.prototype.getMaskPath=function(){var t=this.yAxis.renderer;return RL(t.startAngle,t.endAngle-t.startAngle,t.pixelRadius,t.pixelInnerRadius)},e.prototype.drawSegment=function(e,n,i){var r=this.yAxis.renderer;this.connectEnds&&360==Math.abs(r.endAngle-r.startAngle)&&(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)&&(n.push(n[0]),i.length>0&&i.unshift(i[i.length-1])),t.prototype.drawSegment.call(this,e,n,i)},Object.defineProperty(e.prototype,"connectEnds",{get:function(){return this.getPropertyValue("connectEnds")},set:function(t){this.setPropertyValue("connectEnds",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionBulletReal=function(t,e,n){var i=this.xAxis,r=this.yAxis;(e<i.start||e>i.end||n<r.start||n>r.end)&&(t.visible=!1),t.moveTo(this.xAxis.renderer.positionToPoint(e,n))},e.prototype.setXAxis=function(e){t.prototype.setXAxis.call(this,e),this.updateRendererRefs()},e.prototype.setYAxis=function(e){t.prototype.setYAxis.call(this,e),this.updateRendererRefs()},e.prototype.updateRendererRefs=function(){this.xAxis.renderer.axisRendererY=this.yAxis.renderer},e}(TB);QM.registeredClasses.RadarSeries=kB,QM.registeredClasses.RadarSeriesDataItem=EB;var AB=function(t){function e(e){var n=t.call(this,e)||this;return n.className="AxisFillCircular",n.element=n.paper.add("path"),n.radius=rR(100),n.applyTheme(),n}return Qj(e,t),e.prototype.draw=function(){if(t.prototype.draw.call(this),!this.__disabled&&!this.disabled&&this.axis){var e=this.axis.renderer;this.fillPath=e.getPositionRangePath(this.startPosition,this.endPosition,this.radius,cR(this.innerRadius)?this.innerRadius:e.innerRadius,this.cornerRadius),this.path=this.fillPath}},Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(t){this.setPropertyValue("cornerRadius",t,!0)},enumerable:!0,configurable:!0}),e}(eB);QM.registeredClasses.AxisFillCircular=AB;var DB=function(t){function e(){var e=t.call(this)||this;return e.className="GridCircular",e.pixelPerfect=!1,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),e}(nB);QM.registeredClasses.GridCircular=DB;var jB=function(t){function e(){var e=t.call(this)||this;return e.fdx=0,e.fdy=0,e.className="AxisLabelCircular",e.padding(0,0,0,0),e.location=.5,e.locationOnPath=.5,e.radius=0,e.isMeasured=!1,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"relativeRotation",{get:function(){return this.getPropertyValue("relativeRotation")},set:function(t){if(this.setPropertyValue("relativeRotation",t,!0),!cR(t)){this.rotation=void 0;var e=this.dataItem;e&&e.component&&e.component.invalidateDataItems()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bent",{get:function(){return this.getPropertyValue("bent")},set:function(t){this.setPropertyValue("bent",t,!0),this.setPropertyValue("wrap",!1),this.setPropertyValue("horizontalCenter","none"),this.setPropertyValue("verticalCenter","none"),t?(this.setPropertyValue("dx",0),this.setPropertyValue("dy",0),this.setPropertyValue("x",0),this.setPropertyValue("y",0),this.setPropertyValue("rotation",0),this.fdx=0,this.fdy=0,this.textAlign="middle"):this.textPathElement&&(this.textPathElement.dispose(),this.textPathElement=void 0)},enumerable:!0,configurable:!0}),e.prototype.pixelRadius=function(t){var e=1;return this.inside&&(e=-1),jN(this.radius,t)*e},e.prototype.pixelRadiusY=function(t,e){var n=1;this.inside&&(n=-1);var i=this.radius;return yR(i)?jN(i*=e/t,t)*n:jN(i,e)*n},e.prototype.fixPosition=function(t,e,n,i,r){yR(n)||(n=e),yR(i)||(i=0),yR(r)||(r=0);var o={x:e*ER(t),y:n*SR(t)};this.invalid&&this.validate();var s=!1,a=this.radius;(a instanceof iR&&a.value<0||a<0)&&(s=!0);var u=this.relativeRotation,l=this.pixelRadius(e);if(this.bent){var h={x:(e+l)*ER(t+180),y:(n+l*n/e)*SR(t+180)};return this.path=EL(h)+jL(t+180,360,e+l,n+l*n/e),void(this.textPathElement&&this.textPathElement.attr({startOffset:100*this.locationOnPath+"%"}))}if(yR(u)){this.horizontalCenter="none",this.verticalCenter="none",t=YR(t,-180,180);var c=this.bbox.width,p=this.bbox.height,d=this.pixelPaddingBottom,f=this.pixelPaddingTop,g=this.pixelPaddingLeft,y=this.pixelPaddingRight;t>90||t<-90?-90==u&&(u=90,c=0):(-90==u&&(p=-p),90==u&&(u=-90,c=-g-y,p=-p-f-d)),this.rotation=u+t+90;var m=SR(u)/2,v=ER(u)/2,b=this.rotation;this.dx=p*m*SR(b)-c*v*ER(b),this.dy=-p*m*ER(b)-c*v*SR(b),this.inside?t>90||t<-90?l-=(d+f)*ER(u)+(g+y)*SR(u):l+=(d+this.bbox.height+f)*ER(u)+(g+y+this.bbox.width)*SR(u):l+=(p+d+f)*ER(u)+(c+g+y)*SR(u),o.x+=ER(t)*l,o.y+=SR(t)*l*n/e}else this.horizontalCenter="middle",this.verticalCenter="middle",s?(this.dx=0,this.dy=0,o.x=(e+l)*ER(t),o.y=(n+l*n/e)*SR(t)):(this.dy=this._measuredHeight/2*SR(t),this.dx=this._measuredWidth/2*ER(t),o.x+=ER(t)*l,o.y+=SR(t)*l*n/e);o.x+=i,o.y+=r,this.fdx=this.dx,this.fdy=this.dy,this.moveTo(o)},e}(iB);QM.registeredClasses.AxisLabelCircular=jB;var RB=function(t){function e(){var e=t.call(this)||this;return e.pixelRadiusReal=0,e.layout="none",e.className="AxisRendererCircular",e.isMeasured=!1,e.startAngle=-90,e.endAngle=270,e.useChartAngles=!0,e.radius=rR(100),e.isMeasured=!1,e.grid.template.location=0,e.labels.template.location=0,e.labels.template.radius=15,e.ticks.template.location=0,e.ticks.template.pixelPerfect=!1,e.tooltipLocation=0,e.line.strokeOpacity=0,e.applyTheme(),e}return Qj(e,t),e.prototype.setAxis=function(e){var n=this;t.prototype.setAxis.call(this,e),e.isMeasured=!1;var i=e.tooltip;i.adapter.add("dx",(function(t,e){var i=eF({x:e.pixelX,y:e.pixelY},n);return n.pixelRadius*Math.cos(Math.atan2(i.y,i.x))-i.x})),i.adapter.add("dy",(function(t,e){var i=eF({x:e.pixelX,y:e.pixelY},n);return n.pixelRadius*Math.sin(Math.atan2(i.y,i.x))-i.y}))},e.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},Object.defineProperty(e.prototype,"axisLength",{get:function(){return 2*Math.PI*this.pixelRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return RN(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){var t=this.chart,e=this.getPropertyValue("innerRadius");if(t){if(cR(e)){if(e instanceof iR&&t){var n=t.mr,i=e.value;e=rR(100*(i=Math.max(n*i,n-Math.min(t.plotContainer.innerHeight,t.plotContainer.innerWidth))/n))}}else(e=t.innerRadius)instanceof iR&&t&&(e=rR(e.value*t.innerRadiusModifyer*100));return e}},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useChartAngles",{get:function(){return this.getPropertyValue("useChartAngles")},set:function(t){this.setPropertyValue("useChartAngles",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return RN(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){yR(e)||(e=1);var n=this.positionToCoordinate(t),i=this.startAngle+(this.endAngle-this.startAngle)*n/this.axisLength,r=this.pixelRadius,o=this.pixelInnerRadius;if(this.axisRendererY){var s=OR(this.axisRendererY.positionToCoordinate(e),0,1/0);return{x:s*ER(i),y:s*SR(i)}}return{x:ER(i)*o+(r-o)*ER(i)*e,y:SR(i)*o+(r-o)*SR(i)*e}},e.prototype.positionToAngle=function(t){var e=this.axis,n=(this.endAngle-this.startAngle)/(e.end-e.start);return CR(e.renderer.inversed?this.startAngle+(e.end-t)*n:this.startAngle+(t-e.start)*n,3)},e.prototype.angleToPosition=function(t){var e=this.axis,n=(this.endAngle-this.startAngle)/(e.end-e.start);return CR(e.renderer.inversed?e.end-(t-this.startAngle)/n:(t-this.startAngle)/n+e.start,5)},e.prototype.updateAxisLine=function(){var t=this.pixelRadius,e=this.startAngle,n=AR(360,this.endAngle-e);this.line.path=EL({x:t*ER(e),y:t*SR(e)})+jL(e,n,t,t)},e.prototype.updateGridElement=function(t,e,n){var i=this.positionToPoint(e+=(n-e)*t.location);if(yR(i.x)&&yR(i.y)&&t.element){var r=xR*Math.atan2(i.y,i.x),o=RN(cR(t.radius)?t.radius:rR(100),this.pixelRadius),s=RN(t.innerRadius,this.pixelRadius);t.zIndex=0;var a=RN(yR(s)?s:this.innerRadius,this.pixelRadiusReal,!0);yR(a)||(a=0),t.path=EL({x:a*ER(r),y:a*SR(r)})+kL({x:o*ER(r),y:o*SR(r)})}this.toggleVisibility(t,e,0,1)},e.prototype.updateTickElement=function(t,e,n){var i=this.positionToPoint(e+=(n-e)*t.location);if(t.element){var r=this.pixelRadius,o=xR*Math.atan2(i.y,i.x),s=t.length;t.inside&&(s=-s),t.zIndex=1,t.path=EL({x:r*ER(o),y:r*SR(o)})+kL({x:(r+s)*ER(o),y:(r+s)*SR(o)})}this.toggleVisibility(t,e,0,1)},e.prototype.updateBullet=function(t,e,n){var i=.5;t instanceof aB&&(i=t.location);var r=this.positionToPoint(e+=(n-e)*i),o=this.pixelRadius,s=xR*Math.atan2(r.y,r.x);r={x:o*ER(s),y:o*SR(s)},this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.updateLabelElement=function(t,e,n,i){cR(i)||(i=t.location),t.fixPosition(this.positionToAngle(e+=(n-e)*i),this.pixelRadius),t.zIndex=2,this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.fitsToBounds=function(t){return!0},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),e.prototype.getPositionRangePath=function(t,e,n,i,r){var o="";if(yR(t)&&yR(e)){cR(n)||(n=this.radius),t=kR(t,this.axis.start),(e=AR(e,this.axis.end))<t&&(e=t);var s=RN(n,this.pixelRadius),a=RN(i,this.pixelRadius,!0),u=this.positionToAngle(t);o=RL(u,this.positionToAngle(e)-u,s,a,s,r)}return o},e.prototype.createGrid=function(){return new DB},e.prototype.createFill=function(t){return new AB(t)},e.prototype.createLabel=function(){return new jB},e.prototype.pointToPosition=function(t){var e=YR(VR(t),this.startAngle,this.endAngle);return this.coordinateToPosition((e-this.startAngle)/360*this.axisLength)},e}(sB);QM.registeredClasses.AxisRendererCircular=RB;var MB=function(t){function e(){var e=t.call(this)||this;return e._chart=new fM,e.pixelRadiusReal=0,e.className="AxisRendererRadial",e.isMeasured=!1,e.startAngle=-90,e.endAngle=270,e.minGridDistance=30,e.gridType="circles",e.axisAngle=-90,e.isMeasured=!1,e.layout="none",e.radius=rR(100),e.line.strokeOpacity=0,e.labels.template.horizontalCenter="middle",e._disposers.push(e._chart),e.applyTheme(),e}return Qj(e,t),e.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},Object.defineProperty(e.prototype,"axisLength",{get:function(){return this.pixelRadius-this.pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return RN(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){var t=this.chart,e=this.getPropertyValue("innerRadius");if(t)if(cR(e)){if(e instanceof iR&&t){var n=t.mr,i=e.value;e=rR(100*(i=Math.max(n*i,n-Math.min(t.plotContainer.innerHeight,t.plotContainer.innerWidth))/n))}}else(e=t.innerRadius)instanceof iR&&t&&(e=rR(e.value*t.innerRadiusModifyer*100));return e},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return RN(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){var n=OR(this.positionToCoordinate(t),0,1/0);return{x:n*ER(this.axisAngle),y:n*SR(this.axisAngle)}},e.prototype.updateAxisLine=function(){this.line.path=EL({x:this.pixelInnerRadius*ER(this.axisAngle),y:this.pixelInnerRadius*SR(this.axisAngle)})+kL({x:this.pixelRadius*ER(this.axisAngle),y:this.pixelRadius*SR(this.axisAngle)});var t=this.axis.title;t.valign="none",t.horizontalCenter="middle",t.verticalCenter="bottom",t.y=-this.axisLength/2;var e=90;this.opposite?this.inside||(e=-90):this.inside&&(e=-90),t.rotation=e},e.prototype.updateGridElement=function(t,e,n){var i,r=RR(this.positionToPoint(e+=(n-e)*t.location)),o=this.startAngle,s=this.endAngle,a=this.chart;if(yR(r)&&t.element&&a){var u=a.xAxes.getIndex(0),l=0,h=a.series.getIndex(0);if(h&&(l=h.dataItems.length),"polygons"==this.gridType&&l>0&&h&&u&&u instanceof vB){var c=u.renderer.grid.template.location,p=u.getAngle(h.dataItems.getIndex(0),"categoryX",c);i=EL({x:r*ER(p),y:r*SR(p)});for(var d=1;d<l;d++)i+=kL({x:r*ER(p=u.getAngle(h.dataItems.getIndex(d),"categoryX",c)),y:r*SR(p)});i+=kL({x:r*ER(p=u.getAngle(h.dataItems.getIndex(l-1),"categoryX",u.renderer.cellEndLocation)),y:r*SR(p)})}else i=EL({x:r*ER(o),y:r*SR(o)})+jL(o,s-o,r,r);t.path=i}this.toggleVisibility(t,e,0,1)},e.prototype.updateLabelElement=function(t,e,n,i){cR(i)||(i=t.location);var r=this.positionToPoint(e+=(n-e)*i);this.positionItem(t,r),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.updateBaseGridElement=function(){},e.prototype.fitsToBounds=function(t){return!0},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisAngle",{get:function(){return this.getPropertyValue("axisAngle")},set:function(t){this.setPropertyValue("axisAngle",GR(t)),this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridType",{get:function(){return this.chart.xAxes.getIndex(0)instanceof vB?this.getPropertyValue("gridType"):"circles"},set:function(t){this.setPropertyValue("gridType",t,!0)},enumerable:!0,configurable:!0}),e.prototype.getPositionRangePath=function(t,e){var n,i=this.pixelInnerRadius,r=this.axisLength+i,o=OR(this.positionToCoordinate(t),i,r),s=OR(this.positionToCoordinate(e),i,r),a=this.startAngle,u=this.endAngle-a,l=this.chart,h=l.xAxes.getIndex(0),c=l.series.getIndex(0),p=0;if(c&&(p=c.dataItems.length),"polygons"==this.gridType&&p>0&&c&&h&&h instanceof vB){var d=h.renderer.grid.template.location,f=h.getAngle(c.dataItems.getIndex(0),"categoryX",d);n=EL({x:s*ER(f),y:s*SR(f)});for(var g=1;g<p;g++)n+=kL({x:s*ER(f=h.getAngle(c.dataItems.getIndex(g),"categoryX",d)),y:s*SR(f)});for(n+=kL({x:s*ER(f=h.getAngle(c.dataItems.getIndex(p-1),"categoryX",h.renderer.cellEndLocation)),y:s*SR(f)}),n+=EL({x:o*ER(f),y:o*SR(f)}),g=p-1;g>=0;g--)n+=kL({x:o*ER(f=h.getAngle(c.dataItems.getIndex(g),"categoryX",d)),y:o*SR(f)})}else n=RL(a,u,s,o);return n},e.prototype.updateBreakElement=function(t){var e=t.endLine,n=t.fillShape,i=t.startPoint,r=t.endPoint;t.startLine.radius=Math.abs(i.y),e.radius=Math.abs(r.y),n.radius=Math.abs(r.y),n.innerRadius=Math.abs(i.y)},e.prototype.createBreakSprites=function(t){t.startLine=new hU,t.endLine=new hU,t.fillShape=new hU},e.prototype.updateTooltip=function(){if(this.axis){var t=this.axisAngle;t<0&&(t+=360);var e="vertical";(t>45&&t<135||t>225&&t<315)&&(e="horizontal"),this.axis.updateTooltip(e,{x:-4e3,y:-4e3,width:8e3,height:8e3})}},e.prototype.updateTickElement=function(t,e,n){var i=this.positionToPoint(e+=(n-e)*t.location);if(t.element){var r=GR(this.axisAngle+90);t.pixelPerfect=r/90==Math.round(r/90);var o=-t.length;t.inside&&(o*=-1),t.path=EL({x:0,y:0})+kL({x:o*ER(r),y:o*SR(r)})}this.positionItem(t,i),this.toggleVisibility(t,e,0,1)},e.prototype.updateBullet=function(t,e,n){var i=.5;t instanceof aB&&(i=t.location);var r=this.positionToPoint(e+=(n-e)*i);this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.positionToCoordinate=function(t){var e=this.axis,n=e.axisFullLength,i=this.pixelInnerRadius;return CR(e.renderer.inversed?(e.end-t)*n+i:(t-e.start)*n+i,1)},e.prototype.pointToPosition=function(t){var e=RR(t)-this.pixelInnerRadius;return this.coordinateToPosition(e)},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.set(t,null)},enumerable:!0,configurable:!0}),e}(uB);QM.registeredClasses.AxisRendererRadial=MB;var NB=function(t){function e(){var e=t.call(this)||this;return e.className="RadarChartDataItem",e.applyTheme(),e}return Qj(e,t),e}(xB),FB=function(t){function e(){var e=t.call(this)||this;e._axisRendererX=RB,e._axisRendererY=MB,e.innerRadiusModifyer=1,e.mr=1,e.className="RadarChart",e.startAngle=-90,e.endAngle=270,e.radius=rR(80),e.innerRadius=0;var n=e.plotContainer.createChild(aL);return n.shouldClone=!1,n.layout="absolute",n.align="center",n.valign="middle",e.seriesContainer.parent=n,e.radarContainer=n,e.bulletsContainer.parent=n,e.axisBulletsContainer=n,e._cursorContainer=n,e.chartContainer.events.on("maxsizechanged",e.invalidate,e,!1),e._bulletMask=n.createChild(PL),e._bulletMask.shouldClone=!1,e._bulletMask.element=e.paper.add("path"),e._bulletMask.opacity=0,e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Radar chart"))},e.prototype.processAxis=function(e){t.prototype.processAxis.call(this,e);var n=e.renderer;n.gridContainer.parent=n,n.breakContainer.parent=n,e.parent=this.radarContainer,n.toBack()},e.prototype.handleXAxisRangeChange=function(){t.prototype.handleXAxisRangeChange.call(this),VM(this.yAxes.iterator(),(function(t){t.invalidate()}))},e.prototype.handleYAxisRangeChange=function(){t.prototype.handleYAxisRangeChange.call(this),VM(this.xAxes.iterator(),(function(t){t.invalidate()}))},e.prototype.processConfig=function(e){if(e&&(cR(e.cursor)&&!cR(e.cursor.type)&&(e.cursor.type="RadarCursor"),cR(e.series)&&vR(e.series)))for(var n=0,i=e.series.length;n<i;n++)e.series[n].type=e.series[n].type||"RadarSeries";t.prototype.processConfig.call(this,e)},e.prototype.beforeDraw=function(){t.prototype.beforeDraw.call(this);var e=this.plotContainer,n=KR(this.startAngle,this.endAngle,1),i={x:0,y:0,width:0,height:0},r=this.innerRadius;if(r instanceof iR){var o=r.value,s=Math.min(e.innerWidth/n.width,e.innerHeight/n.height);this.mr=s,o=Math.max(s*o,s-Math.min(e.innerHeight,e.innerWidth))/s,i=KR(this.startAngle,this.endAngle,o),this.innerRadiusModifyer=o/r.value,r=rR(100*o)}n=UR([n,i]);var a=Math.min(e.innerWidth/n.width,e.innerHeight/n.height),u=2*RN(this.radius,a)||0,l=u/2,h=this.startAngle,c=this.endAngle;this._pixelInnerRadius=RN(r,l),this._bulletMask.path=RL(h,c-h,l,this._pixelInnerRadius),VM(this.xAxes.iterator(),(function(t){t.renderer.useChartAngles&&(t.renderer.startAngle=h,t.renderer.endAngle=c),t.width=u,t.height=u,t.renderer.pixelRadiusReal=l})),VM(this.yAxes.iterator(),(function(t){t.renderer.startAngle=h,t.renderer.endAngle=c,t.width=u,t.height=u,t.renderer.pixelRadiusReal=l}));var p=this.cursor;p&&(p.width=u,p.height=u,p.startAngle=h,p.endAngle=c),this.radarContainer.definedBBox={x:l*n.x,y:l*n.y,width:l*n.width,height:l*n.height},this.radarContainer.validatePosition()},e.prototype.createSeries=function(){return new kB},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),e.prototype.updateXAxis=function(t){t&&t.processRenderer()},e.prototype.updateYAxis=function(t){t&&t.processRenderer()},e}(PB);QM.registeredClasses.RadarChart=FB;var VB,LB=function(t){function e(){var e=t.call(this)||this;e._axis=new fM,e.className="ClockHand";var n=new rV;e.fill=n.getFor("alternativeBackground"),e.stroke=e.fill;var i=new PL;i.radius=5,e.pin=i,e.isMeasured=!1,e.startWidth=5,e.endWidth=1,e.width=rR(100),e.height=rR(100),e.radius=rR(100),e.innerRadius=rR(0);var r=new tU;return e.hand=r,e._disposers.push(e._axis),e.applyTheme(),e}return Qj(e,t),e.prototype.validate=function(){t.prototype.validate.call(this);var e=this.hand;e.width=this.pixelWidth;var n=Math.max(this.startWidth,this.endWidth);if(e.height=n,e.leftSide=rR(this.startWidth/n*100),e.rightSide=rR(this.endWidth/n*100),this.axis){var i=this.axis.renderer,r=RN(this.innerRadius,i.pixelRadius),o=RN(this.radius,i.pixelRadius);e.x=r,e.y=-n/2,e.width=o-r}},Object.defineProperty(e.prototype,"pin",{get:function(){return this._pin},set:function(t){this._pin&&this.removeDispose(this._pin),t&&(this._pin=t,t.parent=this,this._disposers.push(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hand",{get:function(){return this._hand},set:function(t){this._hand&&this.removeDispose(this._hand),t&&(this._hand=t,t.parent=this,this._disposers.push(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWidth",{get:function(){return this.getPropertyValue("startWidth")},set:function(t){this.setPropertyValue("startWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endWidth",{get:function(){return this.getPropertyValue("endWidth")},set:function(t){this.setPropertyValue("endWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationDirection",{get:function(){return this.getPropertyValue("rotationDirection")},set:function(t){this.setPropertyValue("rotationDirection",t)},enumerable:!0,configurable:!0}),e.prototype.showValue=function(t,e,n){if(this._value=t,null!=t&&(yR(e)||(e=0),this.axis)){var i=this.axis.renderer.positionToAngle(this.axis.anyToPosition(t)),r=this.rotation;"clockWise"==this.rotationDirection&&i<r&&(this.rotation=r-360),"counterClockWise"==this.rotationDirection&&i>r&&(this.rotation=r+360),this.animate({property:"rotation",to:i},e,n)}},Object.defineProperty(e.prototype,"currentPosition",{get:function(){if(this.axis)return this.axis.renderer.angleToPosition(this.rotation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this.showValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axis",{get:function(){return this._axis.get()},set:function(t){if(this.axis!=t&&this._axis.set(t,new dM([t.events.on("datavalidated",this.updateValue,this,!1),t.events.on("datarangechanged",this.updateValue,this,!1),t.events.on("dataitemsvalidated",this.updateValue,this,!1),t.events.on("propertychanged",this.invalidate,this,!1)])),t){var e=t.chart;e&&(this.rotation=e.startAngle)}this.parent=t.renderer,this.zIndex=5},enumerable:!0,configurable:!0}),e.prototype.updateValue=function(){this.value=this.value},e.prototype.processConfig=function(e){e&&cR(e.axis)&&gR(e.axis)&&this.map.hasKey(e.axis)&&(e.axis=this.map.getKey(e.axis)),t.prototype.processConfig.call(this,e)},e}(aL);QM.registeredClasses.ClockHand=LB,Qj((function(){var t=VB.call(this)||this;return t.className="GaugeChartDataItem",t.applyTheme(),t}),VB=NB);var UB=function(t){function e(){var e=t.call(this)||this;return e.className="GaugeChart",e.startAngle=180,e.endAngle=360,e.hands=new nN(new LB),e.hands.events.on("inserted",e.processHand,e,!1),e._disposers.push(new JM(e.hands)),e._disposers.push(e.hands.template),e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Gauge chart"))},e.prototype.processHand=function(t){var e=t.newValue;e.axis||(e.axis=this.xAxes.getIndex(0))},e.prototype.configOrder=function(e,n){return e==n?0:"hands"==e?1:"hands"==n?-1:t.prototype.configOrder.call(this,e,n)},e}(FB);QM.registeredClasses.GaugeChart=UB;var BB=function(t){function e(){var e=t.call(this)||this;return e.className="PercentSeriesDataItem",e.applyTheme(),e}return Qj(e,t),e.prototype.uidAttr=function(){return this.slice.uidAttr()},e.prototype.hide=function(e,n,i,r){return r||(r=["value"]),t.prototype.hide.call(this,e,n,0,r)},e.prototype.setVisibility=function(e,n){n||this.setWorkingValue("value",e?this.values.value.value:0,0,0),t.prototype.setVisibility.call(this,e,n)},e.prototype.show=function(e,n,i){return i||(i=["value"]),t.prototype.show.call(this,e,n,i)},Object.defineProperty(e.prototype,"category",{get:function(){return this.properties.category},set:function(t){this.setProperty("category",t)},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){this.component.createLegendMarker(t,this)},Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,t.label&&(t.label.dataItem=this),t.valueLabel&&(t.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tick",{get:function(){var t=this;if(!this._tick){var e=this.component.ticks.create();this._tick=e,this.addSprite(e),this._disposers.push(e),e.parent=this.component.ticksContainer,this._disposers.push(new pM((function(){t.component&&t.component.ticks.removeValue(e)}))),e.visible=this.visible}return this._tick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){var t=this;if(!this._label){var e=this.component.labels.create();this.addSprite(e),this._label=e,this._disposers.push(e),e.parent=this.component.labelsContainer,this._disposers.push(new pM((function(){t.component&&t.component.labels.removeValue(e)}))),e.visible=this.visible}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slice",{get:function(){var t=this;if(!this._slice){var e=this.component,n=e.slices.create();this.addSprite(n),this._slice=n,this._disposers.push(n),n.parent=e.slicesContainer,this._disposers.push(new pM((function(){e.slices.removeValue(n)}))),n.visible=this.visible,e.itemsFocusable()?(cR(this.component.role)||(this.component.role="menu"),cR(n.role)||(n.role="menuitem"),n.focusable=!0):(cR(this.component.role)||(this.component.role="list"),cR(n.role)||(n.role="listitem"),n.focusable=!1),n.focusable&&(n.events.on("focus",(function(i){n.readerTitle=e.populateString(e.itemReaderText,t)}),void 0,!1),n.events.on("blur",(function(t){n.readerTitle=""}),void 0,!1)),n.hoverable&&(n.events.on("over",(function(i){n.readerTitle=e.populateString(e.itemReaderText,t)}),void 0,!1),n.events.on("out",(function(t){n.readerTitle=""}),void 0,!1))}return this._slice},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenInLegend",{get:function(){return this.properties.hiddenInLegend},set:function(t){this.setProperty("hiddenInLegend",t)},enumerable:!0,configurable:!0}),e}(GU),HB=function(t){function e(){var e=t.call(this)||this;e.className="PercentSeries",e._addAllDataItems=!1,e.colors=new kU,e.colors.step=1,e.isMeasured=!0,e.calculatePercent=!0;var n=e.createChild(aL);n.shouldClone=!1,n.isMeasured=!1,e.slicesContainer=n;var i=e.createChild(aL);i.shouldClone=!1,i.isMeasured=!1,i.layout="none",e.ticksContainer=i;var r=e.createChild(aL);return r.shouldClone=!1,r.isMeasured=!1,r.layout="none",e.labelsContainer=r,e.alignLabels=!1,e.bulletsContainer.toFront(),e.skipFocusThreshold=50,e.defaultState.transitionEasing=_F,e.itemReaderText="{category}: {value.percent.formatNumber('#.#')}%",e.applyTheme(),e}return Qj(e,t),e.prototype.createSlice=function(){return new oL},e.prototype.createTick=function(){return new rB},e.prototype.createLabel=function(){return new _L},Object.defineProperty(e.prototype,"slices",{get:function(){if(!this._slices){var t=this.createSlice();t.applyOnClones=!0,this._disposers.push(t),this.initSlice(t),this._slices=new nN(t),this._disposers.push(new JM(this._slices))}return this._slices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticks",{get:function(){if(!this._ticks){var t=this.createTick();t.applyOnClones=!0,this._disposers.push(t),this.initTick(t),this._ticks=new nN(t),this._disposers.push(new JM(this._ticks))}return this._ticks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labels",{get:function(){if(!this._labels){var t=this.createLabel();t.applyOnClones=!0,this._disposers.push(t),this.initLabel(t),this._labels=new nN(t),this._disposers.push(new JM(this._labels))}return this._labels},enumerable:!0,configurable:!0}),e.prototype.createDataItem=function(){return new BB},e.prototype.initSlice=function(t){},e.prototype.initLabel=function(t){t.text="{category}: {value.percent.formatNumber('#.0')}%",t.isMeasured=!1,t.padding(5,5,5,5)},e.prototype.initTick=function(t){},e.prototype.validateDataItems=function(){this.colors.reset(),this.patterns&&this.patterns.reset(),t.prototype.validateDataItems.call(this)},e.prototype.validateDataElement=function(e){var n=e.slice;n&&(null==n.fill?this.patterns?(cR(n.stroke)||(n.stroke=this.colors.next()),n.fill=this.patterns.next(),cR(n.fillOpacity)&&(n.fill.backgroundOpacity=n.fillOpacity),n.stroke instanceof vN&&(n.fill.stroke=n.stroke,n.fill.fill=n.stroke)):n.fill=this.colors.next():this.colors.currentStep+=this.colors.step,null==n.stroke&&(n.stroke=n.fill)),t.prototype.validateDataElement.call(this,e),n&&e.bullets.each((function(t,e){null==e.fill&&(e.fill=n.fill),null==e.stroke&&(e.stroke=n.stroke)})),this.updateLegendValue(e)},e.prototype.validateData=function(){t.prototype.validateData.call(this),this.chart&&this.chart.feedLegend()},e.prototype.arrangeLabels=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e].label;if(i){i.invalid&&i.validate();var r=i.measuredHeight;i.visible||(r=0),i.pixelY-r/2<-this.maxHeight/2&&(i.y=-this.maxHeight/2+r/2);var o=this.getNextLabel(e+1,t),s=i.pixelY+r;o&&o.y<s&&(o.y=s)}}},e.prototype.arrangeLabels2=function(t){for(var e=this.maxHeight/2,n=t.length-1;n>=0;n--){var i=t[n].label;if(i){i.invalid&&i.validate();var r=i.measuredHeight;i.visible||(r=0),n==t.length-1&&(e+=r/2),i.pixelY+r>e&&(i.y=e-r,e=i.y)}}},e.prototype.getNextLabel=function(t,e){if(e.length>=t){var n=e[t];if(n)return n.label&&n.visible?n.label:this.getNextLabel(t+1,e)}},Object.defineProperty(e.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(t){this.setPropertyValue("colors",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(t){this.setPropertyValue("patterns",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t,e){VM(t.children.iterator(),(function(n){var i=e.slice;n.defaultState.properties.fill=i.fill,n.defaultState.properties.stroke=i.stroke,n.defaultState.properties.fillOpacity=i.fillOpacity,n.defaultState.properties.strokeOpacity=i.strokeOpacity,n.fill=i.fill,n.stroke=i.stroke,n.fillOpacity=i.fillOpacity,n.strokeOpacity=i.strokeOpacity,null==n.fill&&(n.__disabled=!0);var r=t.dataItem;r.color=i.fill,r.colorOrig=i.fill,n.addDisposer(i.events.on("propertychanged",(function(t){"fill"==t.property&&(n.__disabled=!1,n.isActive||(n.fill=i.fill),n.defaultState.properties.fill=i.fill,r.color=i.fill,r.colorOrig=i.fill),"stroke"==t.property&&(n.isActive||(n.stroke=i.stroke),n.defaultState.properties.stroke=i.stroke)}),void 0,!1))}))},e.prototype.handleSliceScale=function(t){var e=this;VM(t.target.dataItem.bullets.iterator(),(function(t){e.positionBullet(t[1])}))},e.prototype.handleSliceMove=function(t){},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.slices.template.copyFrom(e.slices.template),this.labels.template.copyFrom(e.labels.template),this.ticks.template.copyFrom(e.ticks.template),this.colors=e.colors.clone()},Object.defineProperty(e.prototype,"alignLabels",{get:function(){return this.getPropertyValue("alignLabels")},set:function(t){this.setAlignLabels(t)},enumerable:!0,configurable:!0}),e.prototype.setAlignLabels=function(t){this.setPropertyValue("alignLabels",t,!0)},Object.defineProperty(e.prototype,"ignoreZeroValues",{get:function(){return this.getPropertyValue("ignoreZeroValues")},set:function(t){this.setPropertyValue("ignoreZeroValues",t,!0)},enumerable:!0,configurable:!0}),e.prototype.updateLegendValue=function(t){if(t){var e=t.legendDataItem,n=t.legendSettings;e&&n&&n&&(n.labelText&&(e.label.text=n.labelText),n.itemLabelText&&(e.label.text=n.itemLabelText),n.valueText&&(e.valueLabel.text=n.valueText),n.itemValueText&&(e.valueLabel.text=n.itemValueText))}},e}(YU);QM.registeredClasses.PercentSeries=HB,QM.registeredClasses.PercentSeriesDataItem=BB,yL.push({relevant:mL.maybeXS,state:function(t,e){if(t instanceof HB){var n=t.states.create(e);return t.labels.template.states.create(e).properties.disabled=!0,t.ticks.template.states.create(e).properties.disabled=!0,n}return null}});var WB=function(t){function e(){var e=t.call(this)||this;return e.className="PercentChartDataItem",e.applyTheme(),e}return Qj(e,t),e}(KU),zB=function(t){function e(){var e=t.call(this)||this;return e.className="PercentChart",e.align="none",e.valign="none",e.chartContainer.minHeight=50,e.chartContainer.minWidth=50,e.applyTheme(),e}return Qj(e,t),e.prototype.validateData=function(){t.prototype.validateData.call(this),this.feedLegend()},e.prototype.feedLegend=function(){var t=this.legend;if(t){var e=[];VM(this.series.iterator(),(function(t){t.hiddenInLegend||VM(t.dataItems.iterator(),(function(n){n.hiddenInLegend||(e.push(n),n.legendSettings||(n.legendSettings=t.legendSettings))}))})),t.data=e,t.dataFields.name="category"}},e.prototype.createSeries=function(){return new HB},e.prototype.setLegend=function(e){t.prototype.setLegend.call(this,e),e&&(e.labels.template.text="{category}",e.valueLabels.template.text="{value.percent.formatNumber('#.0')}%",e.itemContainers.template.events.on("over",(function(t){var e=t.target.dataItem.dataContext;if(e.visible&&!e.isHiding){var n=e.slice;n.dispatchImmediately("over"),n.isHover=!0,n.interactions.isRealHover=!0}})),e.itemContainers.template.events.on("out",(function(t){var e=t.target.dataItem.dataContext.slice;e.dispatchImmediately("out"),e.isHover=!1})))},e}(XU);QM.registeredClasses.PercentChart=zB,QM.registeredClasses.PercentChartDataItem=WB;var qB=function(t){function e(){var e=t.call(this)||this;return e._label=new fM,e._slice=new fM,e.className="PieTick",e.element=e.paper.add("polyline"),e._disposers.push(e._label),e._disposers.push(e._slice),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.slice,n=this.label;if(e&&e.radius>0&&n&&n.text){var i=e.dx+e.slice.dx+e.pixelX+e.ix*e.radius*e.scale,r=e.dy+e.slice.dy+e.pixelY+e.iy*e.radiusY*e.scale,o=void 0,s=void 0,a=void 0,u=void 0;if(e.dataItem.component.alignLabels)o=n.pixelX-this.length,a=n.pixelX,u=s=n.pixelY,"right"==n.horizontalCenter&&(a=(o+=2*this.length)-this.length);else{var l=n.pixelRadius(e.radius);a=o=i+l*e.ix,u=s=r+l*e.iy}this.element.attr({points:[i,r,o,s,a,u]})}},Object.defineProperty(e.prototype,"slice",{get:function(){return this._slice.get()},set:function(t){this._slice.set(t,new dM([t.events.on("transformed",this.invalidate,this),t.events.on("validated",this.invalidate,this)]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label.get()},set:function(t){this._label.set(t,t.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),e}(rB);QM.registeredClasses.PieTick=qB;var GB=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeriesDataItem",e.values.radiusValue={},e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"radiusValue",{get:function(){return this.values.radiusValue.value},set:function(t){this.setValue("radiusValue",t)},enumerable:!0,configurable:!0}),e.prototype.hide=function(e,n,i,r){return t.prototype.hide.call(this,e,n,0,["value","radiusValue"])},e.prototype.show=function(e,n,i){return t.prototype.show.call(this,e,n,["value","radiusValue"])},e}(BB),YB=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeries",e.alignLabels=!0,e.layout="none",e.labels.template.radius=rR(5),e.addDisposer(e.labels.template.events.on("enabled",e.invalidate,e,!1)),e.applyTheme(),e}return Qj(e,t),e.prototype.createSlice=function(){return new WL},e.prototype.createTick=function(){return new qB},e.prototype.createLabel=function(){return new jB},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Pie Slice Series"))},e.prototype.createDataItem=function(){return new GB},e.prototype.initSlice=function(t){t.isMeasured=!1,t.defaultState.properties.scale=1,t.observe("scale",this.handleSliceScale,this),t.observe(["dx","dy","x","y","shiftRadius"],this.handleSliceMove,this),t.tooltipText="{category}: {value.percent.formatNumber('#.#')}% ({value.value})",t.states.create("hover").properties.scale=1.05,t.defaultState.properties.shiftRadius=0,t.togglable=!0,t.events.on("toggled",(function(t){t.target.hideTooltip()})),t.states.create("active").properties.shiftRadius=.1},e.prototype.validate=function(){this._leftItems=[],this._rightItems=[],this._currentStartAngle=this.startAngle,this._arcRect=KR(this.startAngle,this.endAngle),this._maxRadiusPercent=0;for(var e=this.startIndex;e<this.endIndex;e++){var n=this.dataItems.getIndex(e).values.radiusValue.percent;n>this._maxRadiusPercent&&(this._maxRadiusPercent=n)}t.prototype.validate.call(this),this.alignLabels&&(this.startAngle>this.endAngle?this._rightItems.reverse():this._leftItems.reverse(),this._rightItems.sort((function(t,e){var n=(t.slice.middleAngle+360)%360,i=(e.slice.middleAngle+360)%360;return n>270&&(n-=360),i>270&&(i-=360),n<i?-1:n>i?1:0})),this._leftItems.sort((function(t,e){var n=(t.slice.middleAngle+360)%360,i=(e.slice.middleAngle+360)%360;return n<i?1:n>i?-1:0})),this.arrangeLabels(this._rightItems),this.arrangeLabels2(this._rightItems),this.arrangeLabels(this._leftItems),this.arrangeLabels2(this._leftItems))},e.prototype.validateDataElement=function(e){if(this.pixelRadius>0){e.__disabled=!(!this.ignoreZeroValues||0!=e.value);var n=e.slice;if(n.radius=this.pixelRadius,yR(e.radiusValue)&&(n.radius=this.pixelInnerRadius+(this.pixelRadius-this.pixelInnerRadius)*e.values.radiusValue.percent/this._maxRadiusPercent),n.innerRadius instanceof iR||(n.innerRadius=this.pixelInnerRadius),n.startAngle=this._currentStartAngle,n.arc=Math.abs(e.values.value.percent)*(this.endAngle-this.startAngle)/100,!this.labels.template.disabled){var i=e.label,r=e.tick;r.slice=n,r.label=i;var o=(n.middleAngle+360)%360;if(this.alignLabels){var s=i.pixelRadius(n.radius),a=r.length+s;i.dx=0,i.dy=0,i.verticalCenter="middle";var u=this._arcRect;o>270||o<=90?(a+=(u.width+u.x)*this.pixelRadius,i.horizontalCenter="left",this._rightItems.push(e)):(a-=u.x*this.pixelRadius,i.horizontalCenter="right",this._leftItems.push(e),a*=-1),i.moveTo({x:a,y:n.iy*(n.radius+r.length+s)})}else{var l=n.depth;yR(l)||(l=0),i.fixPosition(n.middleAngle,n.radius,n.radiusY,0,-l)}}this._currentStartAngle+=n.arc,t.prototype.validateDataElement.call(this,e)}},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return this._pixelRadius},set:function(t){this._pixelRadius!=t&&(this._pixelRadius=t,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},set:function(t){this._pixelInnerRadius!=t&&(this._pixelInnerRadius=t,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){var t=this.getPropertyValue("startAngle");return yR(t)?t:this._startAngleInternal},set:function(t){this.setPropertyValue("startAngle",GR(t),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){var t=this.getPropertyValue("endAngle");return yR(t)?t:this._endAngleInternal},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e);var n=e.dataItem.slice,i=e.locationX;yR(i)||(i=.5);var r=e.locationY;yR(r)||(r=1);var o=n.startAngle+n.arc*i;e.x=r*n.radius*ER(o),e.y=r*n.radiusY*SR(o)},e.prototype.handleSliceMove=function(t){if(!this.alignLabels){var e=t.target,n=e.dataItem;if(n){var i=n.label;i&&(i.dx=i.fdx+e.dx+e.pixelX,i.dy=i.fdy+e.dy+e.pixelY)}}},Object.defineProperty(e.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;var t=this.chart;return t?KR(t.startAngle,t.endAngle,this.pixelRadius):KR(this.startAngle,this.endAngle,this.pixelRadius)},enumerable:!0,configurable:!0}),e}(HB);QM.registeredClasses.PieSeries=YB,QM.registeredClasses.PieSeriesDataItem=GB;var KB=function(t){function e(){var e=t.call(this)||this;return e.className="PieChartDataItem",e.applyTheme(),e}return Qj(e,t),e}(WB),XB=function(t){function e(){var e=t.call(this)||this;e.className="PieChart",e.innerRadius=0,e.radius=rR(80),e.align="none",e.valign="none",e.startAngle=-90,e.endAngle=270;var n=e.seriesContainer;return n.isMeasured=!0,n.valign="middle",n.align="center",n.layout="absolute",n.width=void 0,n.height=void 0,e.chartContainer.minHeight=50,e.chartContainer.minWidth=50,e.chartContainer.events.on("maxsizechanged",e.updateRadius,e,!1),e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Pie chart"))},e.prototype.validateLayout=function(){t.prototype.validateLayout.call(this),this.updateRadius()},e.prototype.handleSeriesAdded=function(e){t.prototype.handleSeriesAdded.call(this,e),this._chartPixelRadius=void 0,this.updateSeriesAngles()},e.prototype.updateSeriesAngles=function(){var t=this;this.series.each((function(e){e._startAngleInternal=t.startAngle,e._endAngleInternal=t.endAngle}))},e.prototype.updateRadius=function(){var t=this.chartContainer,e=KR(this.startAngle,this.endAngle,1),n={x:0,y:0,width:0,height:0},i=this.innerRadius;i instanceof iR&&(n=KR(this.startAngle,this.endAngle,i.value)),e=UR([e,n]);var r=Math.min(t.innerWidth/e.width,t.innerHeight/e.height);yR(r)||(r=0);var o=RN(this.radius,r),s=RN(this.innerRadius,r),a=(o-s)/this.series.length;o==this._chartPixelRadius&&s==this._chartPixelInnerRadius||(this._chartPixelRadius=o,this._chartPixelInnerRadius=s,VM(BM(this.series.iterator()),(function(t){var e=t[0],n=t[1],i=s+RN(n.radius,o-s),r=s+RN(n.innerRadius,o-s);yR(i)||(i=s+a*(e+1)),yR(r)||(r=s+a*e),n.pixelRadius=i,n.pixelInnerRadius=r})),this.seriesContainer.definedBBox={x:o*e.x,y:o*e.y,width:o*e.width,height:o*e.height},this.seriesContainer.invalidateLayout(),this.bulletsContainer.x=this.seriesContainer.x,this.bulletsContainer.y=this.seriesContainer.y)},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),e.prototype.createSeries=function(){return new YB},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),e}(zB);QM.registeredClasses.PieChart=XB,QM.registeredClasses.PieChartDataItem=KB;var QB=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeries3DDataItem",e.values.depthValue={},e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"depthValue",{get:function(){return this.values.depthValue.value},set:function(t){this.setValue("depthValue",t)},enumerable:!0,configurable:!0}),e}(GB),$B=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeries3D",e.applyTheme(),e}return Qj(e,t),e.prototype.createDataItem=function(){return new QB},e.prototype.createSlice=function(){return new wU},e.prototype.validateDataElement=function(e){var n=e.slice,i=this.depth;yR(i)||(i=this.chart.depth);var r=e.values.depthValue.percent;yR(r)||(r=100),n.depth=r*i/100;var o=this.angle;yR(o)||(o=this.chart.angle),n.angle=o,t.prototype.validateDataElement.call(this,e)},e.prototype.validate=function(){t.prototype.validate.call(this);for(var e=this._workingStartIndex;e<this._workingEndIndex;e++){var n=this.dataItems.getIndex(e).slice,i=n.startAngle;i>=-90&&i<90?n.toFront():i>=90&&n.toBack()}},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t)},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e),e.y=e.pixelY-e.dataItem.slice.depth},e}(YB);QM.registeredClasses.PieSeries3D=$B,QM.registeredClasses.PieSeries3DDataItem=QB,function(t){Qj((function(){var e=t.call(this)||this;return e.className="PieChart3DDataItem",e.applyTheme(),e}),t)}(KB);var ZB=function(t){function e(){var e=t.call(this)||this;return e.className="PieChart3D",e.depth=20,e.angle=10,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){t=OR(t,0,90),this.setPropertyValue("angle",t)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),e.prototype.createSeries=function(){return new $B},e}(XB);QM.registeredClasses.PieChart3D=ZB;var JB=function(t){function e(){var e=t.call(this)||this;return e.className="SlicedChartDataItem",e.applyTheme(),e}return Qj(e,t),e}(WB),tH=function(t){function e(){var e=t.call(this)||this;return e.className="SlicedChart",e.seriesContainer.layout="horizontal",e.padding(15,15,15,15),e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Sliced chart"))},e.prototype.validate=function(){t.prototype.validate.call(this)},e}(zB);QM.registeredClasses.SlicedChart=tH,QM.registeredClasses.SlicedChartDataItem=JB;var eH=function(t){function e(){var e=t.call(this)||this;return e.legendSettings=new zU,e.className="FlowDiagramNode",e.isMeasured=!1,new rV,e.draggable=!0,e.inert=!0,e.setStateOnChildren=!0,e.events.on("positionchanged",e.invalidateLinks,e,!1),e.events.on("sizechanged",e.invalidateLinks,e,!1),e}return Qj(e,t),e.prototype.handleHit=function(t){this.isHidden||this.isHiding?this.show():this.hide()},e.prototype.show=function(e){var n=t.prototype.show.call(this,e);return this.outgoingDataItems.each((function(t){(!t.toNode||t.toNode&&!t.toNode.isHidden)&&t.setWorkingValue("value",t.getValue("value"),e)})),this.incomingDataItems.each((function(t){(!t.fromNode||t.fromNode&&!t.fromNode.isHidden)&&t.setWorkingValue("value",t.getValue("value"),e)})),n},e.prototype.hide=function(e){var n=t.prototype.hide.call(this,e);return this.outgoingDataItems.each((function(t){t.setWorkingValue("value",0,e)})),this.incomingDataItems.each((function(t){t.setWorkingValue("value",0,e)})),n},e.prototype.validate=function(){this.isDisposed()||(t.prototype.validate.call(this),this.invalidateLinks())},e.prototype.invalidateLinks=function(){var t=this;this.outgoingDataItems.each((function(e){var n=e.link;if("fromNode"==n.colorMode&&(n.fill=n.dataItem.fromNode.color),"gradient"==n.colorMode){n.fill=n.gradient,n.stroke=n.gradient;var i=n.gradient.stops.getIndex(0);i&&(i.color=t.color,n.gradient.validate())}})),this.incomingDataItems.each((function(e){var n=e.link;if("toNode"==n.colorMode&&(n.fill=n.dataItem.toNode.color),"gradient"==n.colorMode){n.fill=n.gradient,n.stroke=n.gradient;var i=n.gradient.stops.getIndex(1);i&&(i.color=t.color,n.gradient.validate())}}))},Object.defineProperty(e.prototype,"incomingDataItems",{get:function(){var t=this;if(!this._incomingDataItems){var e=new eN;e.events.on("inserted",(function(){t._incomingSorted="name"==t.chart.sortBy?LM(t._incomingDataItems.iterator(),(function(t,e){return zM(t.fromName,e.fromName)})):"value"==t.chart.sortBy?LM(t._incomingDataItems.iterator(),(function(t,e){return uN(aN(t.value,e.value))})):t._incomingDataItems.iterator()}),void 0,!1),this._incomingDataItems=e}return this._incomingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outgoingDataItems",{get:function(){var t=this;if(!this._outgoingDataItems){var e=new eN;e.events.on("inserted",(function(){t._outgoingSorted="name"==t.chart.sortBy?LM(t._outgoingDataItems.iterator(),(function(t,e){return zM(t.fromName,e.fromName)})):"value"==t.chart.sortBy?LM(t._outgoingDataItems.iterator(),(function(t,e){return uN(aN(t.value,e.value))})):t._outgoingDataItems.iterator()}),void 0,!1),this._outgoingDataItems=e}return this._outgoingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(t){this.setPropertyValue("name",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this.getPropertyValue("total")},set:function(t){this.setPropertyValue("total",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalIncoming",{get:function(){return this.getPropertyValue("totalIncoming")},set:function(t){this.setPropertyValue("totalIncoming",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalOutgoing",{get:function(){return this.getPropertyValue("totalOutgoing")},set:function(t){this.setPropertyValue("totalOutgoing",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.getPropertyValue("color")},set:function(t){this.setColorProperty("color",t),this._background&&(this._background.fill=t),this.fill=t},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,n=t.pixelHeight;t.removeChildren();var i=t.createChild(wL);i.shouldClone=!1,jM(this,i,rL),i.stroke=this.fill,i.copyFrom(this),i.padding(0,0,0,0),i.width=e,i.height=n;var r=t.dataItem;r.color=i.fill,r.colorOrig=i.fill},Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),e}(aL);QM.registeredClasses.FlowDiagramNode=eH;var nH=function(t){function e(){var e=t.call(this)||this;e.className="FlowDiagramLink";var n=new rV;return e.maskBullets=!1,e.colorMode="fromNode",e.layout="none",e.isMeasured=!1,e.startAngle=0,e.endAngle=0,e.strokeOpacity=0,e.verticalCenter="none",e.horizontalCenter="none",e.tooltipText="{fromName}\u2192{toName}:{value.value}",e.tooltipLocation=.5,e.link=e.createChild(oL),e.link.shouldClone=!1,e.link.setElement(e.paper.add("path")),e.link.isMeasured=!1,e.fillOpacity=.2,e.fill=n.getFor("alternativeBackground"),e.applyTheme(),e}return Qj(e,t),e.prototype.positionBullets=function(){var t=this;VM(this.bullets.iterator(),(function(e){e.parent=t.bulletsContainer,e.maxWidth=t.maxWidth,e.maxHeight=t.maxHeight,t.positionBullet(e)}))},Object.defineProperty(e.prototype,"bulletsContainer",{get:function(){if(!this._bulletsContainer){var t=this.createChild(aL);t.shouldClone=!1,t.layout="none",this._bulletsContainer=t}return this._bulletsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bulletsMask",{get:function(){if(!this._bulletsMask){var t=this.createChild(oL);t.shouldClone=!1,t.setElement(this.paper.add("path")),t.isMeasured=!1,this._bulletsMask=t}return this._bulletsMask},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(t){var e=t.locationX;yR(e)||(e=t.locationY),yR(e)||(e=.5);var n,i=this.middleLine.positionToPoint(e);t.moveTo(i),t.dataItem&&(n=t.dataItem.dataContext[t.propertyFields.rotation]),yR(n)||(n=i.angle),t.rotation=n},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorMode",{get:function(){return this.getPropertyValue("colorMode")},set:function(t){if("gradient"==t){var e=this.fill;this.gradient.stops.clear(),e instanceof vN&&(this.gradient.addColor(e),this.gradient.addColor(e)),this.fill=this.gradient,this.stroke=this.gradient}this.setPropertyValue("colorMode",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(t){this.setPropertyValue("tooltipLocation",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setFill=function(e){t.prototype.setFill.call(this,e);var n=this._gradient;n&&e instanceof vN&&(n.stops.clear(),n.addColor(e),n.addColor(e))},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"bullets",{get:function(){var t=this;return this._bullets||(this._bullets=new nN(new HU),this._disposers.push(new JM(this._bullets)),this._disposers.push(this._bullets.template),this._bullets.events.on("inserted",(function(e){e.newValue.events.on("propertychanged",(function(e){"locationX"!=e.property&&"locationY"!=e.property||t.positionBullet(e.target)}),void 0,!1)}),void 0,!1)),this._bullets},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.bullets.copyFrom(e.bullets);var n=this.middleLine;n&&(n instanceof OL&&e.middleLine instanceof OL&&n.copyFrom(e.middleLine),n instanceof VL&&e.middleLine instanceof VL&&n.copyFrom(e.middleLine)),this.link.copyFrom(e.link)},e.prototype.getTooltipX=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).x},e.prototype.getTooltipY=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).y},Object.defineProperty(e.prototype,"gradient",{get:function(){return this._gradient||(this._gradient=new NV),this._gradient},enumerable:!0,configurable:!0}),e}(aL);QM.registeredClasses.FlowDiagramLink=nH;var iH=function(t){function e(){var e=t.call(this)||this;return e.className="FlowDiagramDataItem",e.values.value={},e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"fromName",{get:function(){return this.properties.fromName},set:function(t){this.setProperty("fromName",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toName",{get:function(){return this.properties.toName},set:function(t){this.setProperty("toName",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.setProperty("color",_N(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"link",{get:function(){var t=this;if(!this._link){var e=this.component.links.create();this._link=e,this.addSprite(e),this._disposers.push(new pM((function(){t.component&&t.component.links.removeValue(e)})))}return this._link},enumerable:!0,configurable:!0}),e}(UU),rH=function(t){function e(){var e=t.call(this)||this;e.colors=new kU,e.className="FlowDiagram",e.nodePadding=20,e.sortBy="none",e.sequencedInterpolation=!0,e.colors.step=2,e.minNodeSize=.02;var n=e.chartContainer.createChild(aL);n.shouldClone=!1,n.layout="none",n.isMeasured=!1,e.linksContainer=n;var i=e.chartContainer.createChild(aL);return i.shouldClone=!1,i.layout="none",i.isMeasured=!1,e.nodesContainer=i,e.dataItem=e.createDataItem(),e.dataItem.component=e,e.applyTheme(),e}return Qj(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.dataItem.dispose()},e.prototype.validateData=function(){var e=this;0==this._parseDataFrom&&this.nodes.clear(),this.sortNodes(),this.colors.reset(),t.prototype.validateData.call(this);var n,i,r=0,o=0;VM(this.dataItems.iterator(),(function(t){var s=t.fromName;s&&((a=e.nodes.getKey(s))||((a=e.nodes.create(s)).name=s,a.chart=e,a.dataItem=t),t.fromNode=a,t.fromNode.outgoingDataItems.push(t));var a,u=t.toName;if(u&&((a=e.nodes.getKey(u))||((a=e.nodes.create(u)).name=u,a.chart=e,a.dataItem=t),t.toNode=a,t.toNode.incomingDataItems.push(t)),!t.fromNode){var l=new mU;l.opacities=[0,1],t.link.strokeModifier=l}if(!t.toNode){var h=new mU;h.opacities=[1,0],t.link.strokeModifier=h}var c=t.value;yR(c)&&(r+=c,o++,(n>c||!yR(n))&&(n=c),(i<c||!yR(i))&&(i=c))}));var s="value";this.dataItem.setCalculatedValue(s,i,"high"),this.dataItem.setCalculatedValue(s,n,"low"),this.dataItem.setCalculatedValue(s,r,"sum"),this.dataItem.setCalculatedValue(s,r/o,"average"),this.dataItem.setCalculatedValue(s,o,"count"),VM(this.nodes.iterator(),(function(t){var n=t[1];n.fill instanceof vN&&(n.color=n.fill),null==n.color&&(n.color=e.colors.next()),null!=n.dataItem.color&&(n.color=n.dataItem.color),n.dataItem.visible||n.hide(0),e.getNodeValue(n)})),this.sortNodes(),this.feedLegend()},e.prototype.handleDataItemWorkingValueChange=function(t,e){this.invalidate()},e.prototype.sortNodes=function(){this._sorted="name"==this.sortBy?this.nodes.sortedIterator():"value"==this.sortBy?LM(this.nodes.iterator(),(function(t,e){return uN(aN(t[1].total,e[1].total))})):this.nodes.iterator()},e.prototype.getNodeValue=function(t){var e=0,n=0;VM(t.incomingDataItems.iterator(),(function(t){var n=t.getWorkingValue("value");yR(n)&&(e+=n)})),VM(t.outgoingDataItems.iterator(),(function(t){var e=t.getWorkingValue("value");yR(e)&&(n+=e)})),t.total=e+n,t.totalIncoming=e,t.totalOutgoing=n},e.prototype.changeSorting=function(){this.sortNodes()},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Flow diagram"))},e.prototype.createDataItem=function(){return new iH},Object.defineProperty(e.prototype,"nodePadding",{get:function(){return this.getPropertyValue("nodePadding")},set:function(t){this.setPropertyValue("nodePadding",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortBy",{get:function(){return this.getPropertyValue("sortBy")},set:function(t){this.setPropertyValue("sortBy",t),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minNodeSize",{get:function(){return this.getPropertyValue("minNodeSize")},set:function(t){this.setPropertyValue("minNodeSize",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodes",{get:function(){if(!this._nodes){var t=this.createNode();t.events.on("hit",(function(t){t.target.handleHit(t)})),this._nodes=new KM(t),this._disposers.push(new GM(this._nodes))}return this._nodes},enumerable:!0,configurable:!0}),e.prototype.createNode=function(){var t=new eH;return this._disposers.push(t),t},Object.defineProperty(e.prototype,"links",{get:function(){return this._links||(this._links=new nN(this.createLink()),this._disposers.push(new JM(this._links))),this._links},enumerable:!0,configurable:!0}),e.prototype.createLink=function(){var t=new nH;return this._disposers.push(t),t},e.prototype.feedLegend=function(){var t=this.legend;if(t){var e=[];this.nodes.each((function(t,n){e.push(n)})),t.data=e,t.dataFields.name="name"}},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this.nodes.clear()},e}(BU);QM.registeredClasses.FlowDiagram=rH;var oH=function(t){function e(){var e=t.call(this)||this;e.className="LabelBullet";var n=e.createChild(_L);return n.shouldClone=!1,n.verticalCenter="middle",n.horizontalCenter="middle",n.truncate=!0,n.hideOversized=!1,n.maxWidth=500,n.maxHeight=500,n.stroke=bN(),n.strokeOpacity=0,n.fill=(new rV).getFor("text"),e.events.on("maxsizechanged",e.handleMaxSize,e,!1),e.label=n,e.applyTheme(),e}return Qj(e,t),e.prototype.handleMaxSize=function(){this.label.maxWidth=this.maxWidth,this.label.maxHeight=this.maxHeight},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.label.copyFrom(e.label)},e}(HU);QM.registeredClasses.LabelBullet=oH;var sH=function(t){function e(){var e=t.call(this)||this;e.nextInCoord=0,e.nextOutCoord=0,e.className="SankeyNode",e.width=10,e.height=10;var n=e.createChild(oH);n.shouldClone=!1,n.locationX=1,n.locationY=.5,n.label.text="{name}",n.width=150,n.height=150,n.label.horizontalCenter="left",n.label.padding(0,5,0,5),e.nameLabel=n;var i=e.createChild(oH);i.shouldClone=!1,i.label.hideOversized=!1,i.locationX=.5,i.locationY=.5,i.width=150,i.height=150,i.label.horizontalCenter="middle",e.valueLabel=i;var r=e.hiddenState;return r.properties.fill=(new rV).getFor("disabledBackground"),r.properties.opacity=.5,r.properties.visible=!0,e.background.hiddenState.copyFrom(r),e}return Qj(e,t),e.prototype.invalidateLinks=function(){var e=this;t.prototype.invalidateLinks.call(this),this.nextInCoord=0,this.nextOutCoord=0;var n=this.chart;if(n){var i=n.orientation;this._incomingSorted&&VM(this._incomingSorted,(function(t){var r=t.link,o=t.getWorkingValue("value");if(yR(o)){r.parent=e.chart.linksContainer;var s=void 0,a=void 0,u=void 0;if("horizontal"==i?(s=e.pixelX+e.dx,a=e.nextInCoord+e.pixelY+e.dy,u=0):(a=e.pixelY+e.dy,s=e.nextInCoord+e.pixelX+e.dx,u=90),r.endX=s,r.endY=a,r.startAngle=u,r.endAngle=u,r.gradient.rotation=u,r.linkWidth=o*n.valueHeight,!t.fromNode){"horizontal"==i?(r.maxWidth=200,r.startX=e.pixelX+e.dx-r.maxWidth,r.startY=r.endY):(r.maxHeight=200,r.startX=r.endX,r.startY=e.pixelY+e.dy-r.maxHeight),r.fill=t.toNode.color;var l=r.gradient.stops.getIndex(0);l&&("gradient"==r.colorMode&&(l.color=e.color),l.opacity=0,r.fill=r.gradient,r.stroke=r.gradient,r.gradient.validate())}e.nextInCoord+=r.linkWidth}})),this._outgoingSorted&&VM(this._outgoingSorted,(function(t){var n=t.link;n.parent=e.chart.linksContainer;var r=t.getWorkingValue("value");if(yR(r)){var o=void 0,s=void 0,a=void 0;if("horizontal"==i?(a=0,o=e.pixelX+e.pixelWidth+e.dx-1,s=e.nextOutCoord+e.pixelY+e.dy):(a=90,o=e.nextOutCoord+e.pixelX+e.dx,s=e.pixelY+e.pixelHeight+e.dy-1),n.startX=o,n.startY=s,n.startAngle=a,n.endAngle=a,n.gradient.rotation=a,n.linkWidth=r*e.chart.valueHeight,!t.toNode){"horizontal"==i?(n.maxWidth=200,n.endX=e.pixelX+n.maxWidth+e.dx,n.endY=n.startY):(n.maxHeight=200,n.endX=n.startX,n.endY=e.pixelY+n.maxHeight+e.dy),n.opacity=e.opacity;var u=n.gradient.stops.getIndex(1);u&&("gradient"==n.colorMode&&(u.color=e.color),u.opacity=0,n.fill=n.gradient,n.stroke=n.gradient,n.gradient.validate())}e.nextOutCoord+=n.linkWidth}}))}this.positionBullet(this.nameLabel),this.positionBullet(this.valueLabel)},e.prototype.positionBullet=function(t){t&&(t.x=this.measuredWidth*t.locationX,t.y=this.measuredHeight*t.locationY)},Object.defineProperty(e.prototype,"level",{get:function(){return this.getPropertyValue("level")},set:function(t){this.setPropertyValue("level",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.nameLabel.copyFrom(e.nameLabel),this.valueLabel.copyFrom(e.valueLabel)},e}(eH);QM.registeredClasses.SankeyNode=sH;var aH=function(t){function e(){var e=t.call(this)||this;return e.className="SankeyLink",new rV,e.tension=.8,e.controlPointDistance=.2,e.startAngle=0,e.endAngle=0,e.linkWidth=0,e.startX=0,e.endX=0,e.startY=0,e.endY=0,e.middleLine=e.createChild(HL),e.middleLine.shouldClone=!1,e.middleLine.strokeOpacity=0,e.applyTheme(),e}return Qj(e,t),e.prototype.makeBackwards=function(){null!=this.states.getKey("backwards")&&this.setState("backwards")},e.prototype.validate=function(){var e,n,i,r;if(t.prototype.validate.call(this),!this.isTemplate){var o=this.startX,s=this.startY,a=this.endX,u=this.endY;if(this.states.getKey("backwards")&&this.setState("default"),this.dataItem){var l=this.dataItem.component;l&&("horizontal"==l.orientation?a<o&&(o=(e=eR([a,o],2))[0],a=e[1],s=(n=eR([u,s],2))[0],u=n[1],this.makeBackwards()):u<s&&(s=(i=eR([u,s],2))[0],u=i[1],o=(r=eR([a,o],2))[0],a=r[1],this.makeBackwards()))}yR(a)||(a=o),yR(u)||(u=s);var h=this.startAngle,c=this.endAngle,p=this.linkWidth,d="",f=o,g=s,y=a,m=u,v=o+p*SR(h),b=a+p*SR(c),_=s+p*ER(h),w=u+p*ER(c),x=o+p/2*SR(h),P=a+p/2*SR(c),C=s+p/2*ER(h),I=u+p/2*ER(c);this.zIndex=this.zIndex||this.dataItem.index;var O=this.tension+(1-this.tension)*SR(h),S=this.tension+(1-this.tension)*ER(h);if(this.middleLine.tensionX=O,this.middleLine.tensionY=S,yR(p)&&yR(o)&&yR(a)&&yR(s)&&yR(u)){CR(f,3)==CR(y,3)&&(y+=.01),CR(g,3)==CR(m,3)&&(m+=.01),CR(v,3)==CR(b,3)&&(b+=.01),CR(_,3)==CR(w,3)&&(w+=.01);var T=Math.min(v,b,f,y),E=Math.min(_,w,g,m),k=Math.max(v,b,f,y),A=Math.max(_,w,g,m);this._bbox={x:T,y:E,width:k-T,height:A-E};var D=this.controlPointDistance,j=f+(y-f)*D*ER(h),R=g+(m-g)*D*SR(h),M=y-(y-f)*D*ER(c),N=m-(m-g)*D*SR(c),F=x+(P-x)*D*ER(h),V=C+(I-C)*D*SR(h),L=P-(P-x)*D*ER(c),U=I-(I-C)*D*SR(c),B=VR({x:j,y:R},{x:M,y:N}),H=(p/ER(B)-p)/TR(B)*ER(h),W=(p/SR(B)-p)*TR(B)*SR(h),z=-H/2+v+(b-v)*D*ER(h),q=-W/2+_+(w-_)*D*SR(h),G=-H/2+b-(b-v)*D*ER(c),Y=-W/2+w-(w-_)*D*SR(c);this.middleLine.segments=[[{x:x,y:C},{x:F,y:V},{x:L,y:U},{x:P,y:I}]],j+=H/2,R+=W/2,M+=H/2,N+=W/2,d+=EL({x:f,y:g}),d+=new nU(O,S).smooth([{x:f,y:g},{x:j,y:R},{x:M,y:N},{x:y,y:m}]),d+=kL({x:b,y:w}),d+=new nU(O,S).smooth([{x:b,y:w},{x:G,y:Y},{x:z,y:q},{x:v,y:_}]),d+=" Z"}this.link.path=d,this.maskBullets&&(this.bulletsMask.path=d,this.bulletsContainer.mask=this.bulletsMask),this.positionBullets()}},Object.defineProperty(e.prototype,"startX",{get:function(){return this.getPropertyValue("startX")},set:function(t){this.setPropertyValue("startX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endX",{get:function(){return this.getPropertyValue("endX")},set:function(t){this.setPropertyValue("endX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startY",{get:function(){return this.getPropertyValue("startY")},set:function(t){this.setPropertyValue("startY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endY",{get:function(){return this.getPropertyValue("endY")},set:function(t){this.setPropertyValue("endY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkWidth",{get:function(){return this.getPropertyValue("linkWidth")},set:function(t){this.setPropertyValue("linkWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(t){this.setPropertyValue("controlPointDistance",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t,!0)},enumerable:!0,configurable:!0}),e}(nH);QM.registeredClasses.SankeyLink=aH;var uH=function(t){function e(){var e=t.call(this)||this;return e.className="SankeyDiagramDataItem",e.applyTheme(),e}return Qj(e,t),e}(iH),lH=function(t){function e(){var e=t.call(this)||this;return e.className="SankeyDiagram",e.orientation="horizontal",e.nodeAlign="middle",e.nodesContainer.width=rR(100),e.nodesContainer.height=rR(100),e.linksContainer.width=rR(100),e.linksContainer.height=rR(100),e.applyTheme(),e}return Qj(e,t),e.prototype.validateData=function(){var e=this;t.prototype.validateData.call(this),this._levelCount=0,this.nodes.each((function(t,e){e.level=void 0})),this.nodes.each((function(t,n){n.level=e.getNodeLevel(n,0),e._levelCount=kR(e._levelCount,n.level)}))},e.prototype.getNodeLevel=function(t,e){var n=this,i=[e];return VM(t.incomingDataItems.iterator(),(function(t){t.fromNode&&(yR(t.fromNode.level)?i.push(t.fromNode.level+1):(n._counter=0,n.checkLoop(t.fromNode),n._counter<n.dataItems.length&&i.push(n.getNodeLevel(t.fromNode,e+1))))})),Math.max.apply(Math,nR(i))},e.prototype.checkLoop=function(t){var e=this;this._counter++,this._counter>this.dataItems.length||VM(t.incomingDataItems.iterator(),(function(t){e.checkLoop(t.fromNode)}))},e.prototype.calculateValueHeight=function(){var t=this;this._levelSum={},this._levelNodesCount={},this.maxSum=0;var e,n,i,r=this.dataItem.values.value.sum;VM(this._sorted,(function(e){t.getNodeValue(e[1])})),this.nodes.each((function(e,n){var i=n.level,o=Math.max(n.totalIncoming,n.totalOutgoing);o/r<t.minNodeSize&&(o=r*t.minNodeSize),yR(t._levelSum[i])?t._levelSum[i]+=o:t._levelSum[i]=o,yR(t._levelNodesCount[i])?t._levelNodesCount[i]++:t._levelNodesCount[i]=1})),e="horizontal"==this.orientation?this.chartContainer.maxHeight-1:this.chartContainer.maxWidth-1,kM(this._levelSum,(function(r,o){var s=o,a=(e-(t._levelNodesCount[r]-1)*t.nodePadding)/s;a==1/0&&(a=0),(i>a||!yR(i))&&(i=a,t.maxSum=s,n=lR(r))})),this._maxSumLevel=n;var o=(e-(this._levelNodesCount[this._maxSumLevel]-1)*this.nodePadding)/this.maxSum;if(o==1/0&&(o=0),yR(this.valueHeight)){var s=void 0;try{s=this._heightAnimation.animationOptions[0].to}catch(u){}if(s!=o){var a=this.interpolationDuration;try{a=this.nodes.template.states.getKey("active").transitionDuration}catch(u){}this._heightAnimation=new FF(this,{property:"valueHeight",from:this.valueHeight,to:o},a,this.interpolationEasing).start(),this._disposers.push(this._heightAnimation)}}else this.valueHeight=o},e.prototype.validate=function(){var e=this;t.prototype.validate.call(this),this.calculateValueHeight();var n,i=this.nodesContainer,r={},o=this._levelNodesCount[this._maxSumLevel],s=this.dataItem.values.value.sum;n="horizontal"==this.orientation?this.chartContainer.maxHeight-1:this.chartContainer.maxWidth-1,VM(this._sorted,(function(t){var a,u,l=t[1],h=l.level,c=0,p=e._levelNodesCount[h];switch(e.nodeAlign){case"bottom":c=(e.maxSum-e._levelSum[h])*e.valueHeight-(p-o)*e.nodePadding;break;case"middle":c=(e.maxSum-e._levelSum[h])*e.valueHeight/2-(p-o)*e.nodePadding/2}if(0==e.maxSum)switch(e.nodeAlign){case"bottom":c=n-p*(e.minNodeSize*n+e.nodePadding);break;case"middle":c=n/2-p/2*(e.minNodeSize*n+e.nodePadding)}l.parent=i;var d=Math.max(l.totalIncoming,l.totalOutgoing);if(d/s<e.minNodeSize&&(d=s*e.minNodeSize),"horizontal"==e.orientation){a=(e.innerWidth-l.pixelWidth)/e._levelCount*l.level,u=r[h]||c;var f=d*e.valueHeight;0==s&&0==f&&(f=e.minNodeSize*n),l.height=f,l.minX=a,l.maxX=a,r[h]=u+f+e.nodePadding}else{a=r[h]||c,u=(e.innerHeight-l.pixelHeight)/e._levelCount*l.level;var g=d*e.valueHeight;0==s&&0==g&&(g=e.minNodeSize*n),l.width=g,l.minY=u,l.maxY=u,r[h]=a+g+e.nodePadding}l.x=a,l.y=u}))},e.prototype.showReal=function(e){var n=this;if(!this.preventShow){if(this.interpolationDuration>0){var i=this.nodesContainer,r=0;VM(this.links.iterator(),(function(t){t.hide(0)})),VM(this._sorted,(function(t){var e,o=t[1];"horizontal"==n.orientation?(o.dx=-(i.pixelWidth-o.pixelWidth)/Math.max(n._levelCount,1),e="dx"):(o.dy=-(i.pixelHeight-o.pixelHeight)/Math.max(n._levelCount,1),e="dy");var s,a,u=0;n.sequencedInterpolation&&(u=n.sequencedInterpolationDelay*r+n.interpolationDuration*r/(s=n.nodes.iterator(),a=0,s((function(t){return++a,!0})),a)),o.opacity=0,o.invalidateLinks(),o.animate([{property:"opacity",from:0,to:1},{property:e,to:0}],n.interpolationDuration,n.interpolationEasing).delay(u),VM(o.outgoingDataItems.iterator(),(function(t){var e=t.link.show(n.interpolationDuration);e&&!e.isFinished()&&e.delay(u)})),VM(o.incomingDataItems.iterator(),(function(t){if(!t.fromNode){var e=t.link.show(n.interpolationDuration);e&&!e.isFinished()&&e.delay(u)}})),r++}))}return t.prototype.showReal.call(this)}},e.prototype.changeSorting=function(){var t=this;this.sortNodes();var e={};VM(this._sorted,(function(n){var i,r,o=n[1],s=o.level,a=(t.maxSum-t._levelSum[s])*t.valueHeight/2;"horizontal"==t.orientation?(i="y",r=o.pixelHeight):(i="x",r=o.pixelWidth),o.animate({property:i,to:e[s]||a},t.interpolationDuration,t.interpolationEasing),e[s]=(e[s]||a)+r+t.nodePadding,o.invalidateLinks()}))},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Sankey diagram"))},e.prototype.createDataItem=function(){return new uH},Object.defineProperty(e.prototype,"nodeAlign",{get:function(){return this.getPropertyValue("nodeAlign")},set:function(t){this.setPropertyValue("nodeAlign",t),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0);var e=this.nodes.template.nameLabel;"vertical"==t?(this.nodes.template.width=void 0,e.label.horizontalCenter="middle",e.locationX=.5):(this.nodes.template.height=void 0,e.label.horizontalCenter="left",e.locationX=1)},enumerable:!0,configurable:!0}),e.prototype.createNode=function(){var t=new sH;return this._disposers.push(t),t},e.prototype.createLink=function(){var t=new aH;return this._disposers.push(t),t},Object.defineProperty(e.prototype,"valueHeight",{get:function(){return this._valueHeight},set:function(t){t!=this._valueHeight&&(this._valueHeight=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this._sorted=this.nodes.iterator()},e}(rH);QM.registeredClasses.SankeyDiagram=lH;var hH=function(t){function e(){var e=t.call(this)||this;e.className="ChordNode";var n=e.createChild(jB);n.location=.5,n.radius=5,n.text="{name}",n.zIndex=1,n.shouldClone=!1,e.label=n,e.layout="none",e.events.on("positionchanged",e.updateRotation,e,!1),e.isMeasured=!1,e.slice=e.createChild(WL),e.slice.isMeasured=!1;var i=e.hiddenState;return i.properties.fill=(new rV).getFor("disabledBackground"),i.properties.opacity=.5,i.properties.visible=!0,e.setStateOnChildren=!1,e.slice.hiddenState.properties.visible=!0,e.adapter.add("tooltipX",(function(t,e){return e.slice.ix*(e.slice.radius-(e.slice.radius-e.slice.pixelInnerRadius)/2)})),e.adapter.add("tooltipY",(function(t,e){return e.slice.iy*(e.slice.radius-(e.slice.radius-e.slice.pixelInnerRadius)/2)})),e}return Qj(e,t),e.prototype.invalidateLinks=function(){var e=this;t.prototype.invalidateLinks.call(this);var n=this.label,i=this.slice,r=this.chart;if(r&&i){var o=this.total,s=i.arc,a=i.startAngle;this.children.each((function(t){if(t instanceof HU){var e=t.locationX;yR(e)||(e=.5);var n=t.locationY;yR(n)||(n=1);var r=a+s*e,o=n*i.radius;t.x=o*ER(r),t.y=o*SR(r)}}));var u=a+s*n.location,l=a+(1-o/this.adjustedTotal)*s*.5;oR(l)&&(l=a),n.fixPosition(u,i.radius),this.nextAngle=l,this._outgoingSorted&&VM(this._outgoingSorted,(function(t){var n=t.link;n.parent=e.chart.linksContainer;var o=t.getWorkingValue("value");if(yR(o)){if(r.nonRibbon){var u=n.percentWidth;yR(u)||(u=5),n.startAngle=a+s/2-s/2*(u/=100),n.arc=s*u}else n.arc=o*r.valueAngle,n.startAngle=e.nextAngle,e.nextAngle+=n.arc;t.toNode||(n.endAngle=n.startAngle),n.radius=i.pixelInnerRadius}})),this._incomingSorted&&VM(this._incomingSorted,(function(t){var n=t.link;if(n.radius=i.pixelInnerRadius,r.nonRibbon){var o=n.percentWidth;yR(o)||(o=5),n.endAngle=a+s/2-s/2*(o/=100),n.arc=s*o}else{n.endAngle=e.nextAngle;var u=t.getWorkingValue("value");yR(u)&&(n.arc=u*r.valueAngle,e.nextAngle+=n.arc)}t.fromNode||(n.startAngle=n.endAngle)}))}},e.prototype.updateRotation=function(){var t=this.slice,e=this.trueStartAngle+t.arc/2,n=t.radius,i=n*ER(e),r=n*SR(e),o=VR({x:i+this.pixelX,y:r+this.pixelY});t.startAngle=this.trueStartAngle+(o-e),this.dx=-this.pixelX,this.dy=-this.pixelY},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.label.copyFrom(e.label),this.slice.copyFrom(e.slice)},e}(eH);QM.registeredClasses.ChordNode=hH;var cH=function(t){function e(){var e=t.call(this)||this;return e.className="QuadraticCurve",e.element=e.paper.add("path"),e.pixelPerfect=!1,e.fill=bN(),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){if(yR(this.x1+this.x2+this.y1+this.y2+this.cpx+this.cpy)){var t={x:this.x2,y:this.y2},e={x:this.cpx,y:this.cpy},n=EL({x:this.x1,y:this.y1})+AL(t,e);this.path=n}},Object.defineProperty(e.prototype,"cpx",{get:function(){return this.getPropertyValue("cpx")},set:function(t){this.setPropertyValue("cpx",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cpy",{get:function(){return this.getPropertyValue("cpy")},set:function(t){this.setPropertyValue("cpy",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t){var e={x:this.x1,y:this.y1},n={x:this.cpx,y:this.cpy},i={x:this.x2,y:this.y2},r=BR(e,i,n,t),o=BR(e,i,n,t+.001);return{x:r.x,y:r.y,angle:VR(r,o)}},e}(OL),pH=function(t){function e(){var e=t.call(this)||this;return e.className="ChordLink",e.middleLine=e.createChild(cH),e.middleLine.shouldClone=!1,e.middleLine.strokeOpacity=0,e.applyTheme(),e}return Qj(e,t),e.prototype.validate=function(){if(t.prototype.validate.call(this),!this.isTemplate){var e=this.startAngle,n=this.endAngle,i=this.arc,r=this.radius,o=this.dataItem.fromNode,s=this.dataItem.toNode,a=0,u=0;o&&(a=o.pixelX+o.dx,u=o.pixelY+o.dy);var l=0,h=0;if(s&&(l=s.pixelX+s.dx,h=s.pixelY+s.dy),r>0){var c=r*ER(e)+a,p=r*SR(e)+u,d=r*ER(n)+l,f=r*SR(n)+h,g={x:0,y:0},y=EL({x:c,y:p});y+=jL(e,i,r),y+=AL({x:d,y:f},g),y+=jL(n,i,r),y+=AL({x:c,y:p},g),this.link.path=i>0?y:"",this.maskBullets&&(this.bulletsMask.path=y,this.bulletsContainer.mask=this.bulletsMask);var m=e+i/2,v=n+i/2,b=this.middleLine;b.x1=r*ER(m)+a,b.y1=r*SR(m)+u,b.x2=r*ER(v)+l,b.y2=r*SR(v)+h,b.cpx=0,b.cpy=0,b.stroke=this.fill,this.positionBullets()}}},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPropertyValue("radius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(t){this.setPropertyValue("arc",t,!0)},enumerable:!0,configurable:!0}),e}(nH);QM.registeredClasses.ChordLink=pH;var dH=function(t){function e(){var e=t.call(this)||this;return e.className="ChordDiagramDataItem",e.applyTheme(),e}return Qj(e,t),e}(iH),fH=function(t){function e(){var e=t.call(this)||this;e.valueAngle=0,e.className="ChordDiagram",e.startAngle=-90,e.endAngle=270,e.radius=rR(80),e.innerRadius=-15,e.nodePadding=5;var n=e.chartContainer.createChild(aL);return n.align="center",n.valign="middle",n.shouldClone=!1,n.layout="absolute",e.chordContainer=n,e.nodesContainer.parent=n,e.linksContainer.parent=n,e.chartContainer.events.on("maxsizechanged",e.invalidate,e,!1),e.applyTheme(),e}return Qj(e,t),e.prototype.validate=function(){var e=this,n=this.chartContainer,i=this.endAngle,r=this.startAngle+this.nodePadding/2,o=KR(this.startAngle,this.endAngle,1);o=UR([o,{x:0,y:0,width:0,height:0}]);var s=Math.min(n.innerWidth/o.width,n.innerHeight/o.height);yR(s)||(s=0);var a=RN(this.radius,s),u=RN(this.innerRadius,a,!0),l=this.dataItem.values.value.sum,h=0,c=0;VM(this._sorted,(function(t){var n=t[1];e.getNodeValue(n),h++;var i=n.total;n.total/l<e.minNodeSize&&(i=l*e.minNodeSize),c+=i})),this.valueAngle=(i-this.startAngle-this.nodePadding*h)/c,VM(this._sorted,(function(t){var n=t[1],o=n.slice;o.radius=a,o.innerRadius=u;var s,c=n.total;n.total/l<e.minNodeSize&&(c=l*e.minNodeSize),n.adjustedTotal=c,o.arc=s=e.nonRibbon?(i-e.startAngle)/h-e.nodePadding:e.valueAngle*c,o.startAngle=r,n.trueStartAngle=r,n.parent=e.nodesContainer,n.validate(),r+=s+e.nodePadding})),this.chordContainer.definedBBox={x:a*o.x,y:a*o.y,width:a*o.width,height:a*o.height},this.chordContainer.invalidateLayout(),t.prototype.validate.call(this)},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Chord diagram"))},e.prototype.createDataItem=function(){return new dH},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonRibbon",{get:function(){return this.getPropertyValue("nonRibbon")},set:function(t){this.setPropertyValue("nonRibbon",t,!0),this.links.template.middleLine.strokeOpacity=1,this.links.template.link.fillOpacity=0},enumerable:!0,configurable:!0}),e.prototype.createNode=function(){var t=new hH;return this._disposers.push(t),t},e.prototype.createLink=function(){var t=new pH;return this._disposers.push(t),t},e}(rH);QM.registeredClasses.ChordDiagram=fH;var gH=function(t){function e(){var e=t.call(this)||this;return e.className="Column",e.width=rR(80),e.height=rR(80),e.events.disableType("transformed"),e.applyOnClones=!0,e.strokeOpacity=1,e.layout="none",e.createAssets(),e.events.on("childadded",e.handleKidAdded,e,!1),e}return Qj(e,t),e.prototype.handleKidAdded=function(){"none"==this.layout&&(this.layout="absolute")},e.prototype.createAssets=function(){this.column=this.createChild(wL),this.column.shouldClone=!1,this.column.isMeasured=!1,this.column.cornerRadius(0,0,0,0),this._disposers.push(this.column)},e.prototype.validate=function(){t.prototype.validate.call(this);var e=this.column;e&&(e.width=AR(this.pixelWidth,this.maxWidth),e.height=AR(this.pixelHeight,this.maxHeight),e.invalid&&e.validate())},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.column&&this.column.copyFrom(e.column)},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.column?{x:0,y:0,width:this.column.measuredWidth,height:this.column.measuredHeight}:{x:0,y:0,width:AR(this.pixelWidth,this.maxWidth),height:AR(this.pixelHeight,this.maxHeight)}},enumerable:!0,configurable:!0}),e}(aL);QM.registeredClasses.Column=gH;var yH=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeriesDataItem",e.locations.dateX=.5,e.locations.dateY=.5,e.locations.categoryX=.5,e.locations.categoryY=.5,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"column",{get:function(){return this._column},set:function(t){this.setColumn(t)},enumerable:!0,configurable:!0}),e.prototype.setColumn=function(t){var e=this;if(this._column&&t!=this._column&&nM(this.sprites,this._column),this._column=t,t){var n=t.dataItem;n&&n!=this&&(n.column=void 0),this.addSprite(t),this._disposers.push(new pM((function(){e.component&&e.component.columns.removeValue(t)})))}},Object.defineProperty(e.prototype,"width",{get:function(){var t=this.properties.width;return this._adapterO&&(t=this._adapterO.apply("width",t)),t},set:function(t){this.properties.width!=t&&(this.properties.width=t,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangesColumns",{get:function(){return this._rangesColumns||(this._rangesColumns=new YM),this._rangesColumns},enumerable:!0,configurable:!0}),e}(bB),mH=function(t){function e(){var e=t.call(this)||this;e._startLocation=0,e._endLocation=1,e.className="ColumnSeries",e.width=rR(100),e.height=rR(100),e.strokeOpacity=0,e.fillOpacity=1,e.clustered=!0;var n=e.mainContainer.createChild(aL);return n.shouldClone=!1,n.isMeasured=!1,n.layout="none",e._columnsContainer=n,e.columns.template.pixelPerfect=!1,e.tooltipColorSource=e.columns.template,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"columnsContainer",{get:function(){return this._columnsContainer},enumerable:!0,configurable:!0}),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Column Series"))},e.prototype.createDataItem=function(){return new yH},e.prototype.validate=function(){var n=this;if(this.group.node.removeAttribute("fill"),this.chart&&this.xAxis&&this.yAxis){var i,r=0,o=0,s=[];VM(this.chart.series.iterator(),(function(t){var i;t instanceof e&&n.baseAxis==t.baseAxis&&(i=n.baseAxis==n.xAxis?n.chart.yAxes.indexOf(t.yAxis):n.chart.xAxes.indexOf(t.xAxis),s.push({series:t,axis:i}))})),s.sort((function(t,e){return t.axis-e.axis})),tM(s,(function(t){var s=t.series;s instanceof e&&((!s.stacked&&s.clustered||i!=t.axis&&s.clustered)&&r++,s==n&&(o=r-1)),i=t.axis})),this.clustered||(o=0,r=1);var a=this.baseAxis.renderer,u=a.cellStartLocation,l=a.cellEndLocation;this._startLocation=u+o/r*(l-u),this._endLocation=u+(o+1)/r*(l-u);var h=this.xAxis,c=this.yAxis;h instanceof vB&&c instanceof cB&&h.sortBySeries==this&&this.sortCategoryAxis(h,"valueY"),c instanceof vB&&h instanceof cB&&c.sortBySeries==this&&this.sortCategoryAxis(c,"valueX")}t.prototype.validate.call(this);for(var p=0;p<this.startIndex;p++){var d=this.dataItems.getIndex(p);this.disableUnusedColumns(d)}for(p=this.dataItems.length-1;p>this.endIndex;p--)d=this.dataItems.getIndex(p),this.disableUnusedColumns(d);this._propertiesChanged=!1},e.prototype.sortCategoryAxis=function(t,e){var n=this;this.dataItems.values.sort((function(t,n){return n.values[e].workingValue-t.values[e].workingValue}));var i=0;this.dataItems.each((function(t){t._index=i,i++})),t.dataItems.each((function(t){var e=t.component,i=e.categoryToPosition(t.category)-t.deltaPosition,r=e.getSeriesDataItemByCategory(t.category,n);if(r){var o=n.dataItems.indexOf(r);t._index=o;var s=CR((o+.5)/n.dataItems.length-i,3);t.deltaAnimation&&!t.deltaAnimation.isDisposed()&&t.deltaAnimation.animationOptions[0].to==s||s!=CR(t.deltaPosition,3)&&(t.deltaAnimation&&t.deltaAnimation.stop(),t.deltaAnimation=t.animate({property:"deltaPosition",from:-s,to:0},e.interpolationDuration,e.interpolationEasing),n._disposers.push(t.deltaAnimation))}})),t.dataItems.values.sort((function(t,e){return t.index-e.index}))},e.prototype.validateDataElement=function(e){this.chart&&this.xAxis&&this.yAxis&&(this.validateDataElementReal(e),t.prototype.validateDataElement.call(this,e))},e.prototype.getStartLocation=function(t){return this._startLocation+(this.baseAxis==this.xAxis?t.locations[this.xOpenField]-.5:t.locations[this.yOpenField]-.5)},e.prototype.getEndLocation=function(t){return this._endLocation+(this.baseAxis==this.xAxis?t.locations[this.xField]-.5:t.locations[this.yField]-.5)},e.prototype.validateDataElementReal=function(t){var e,n,i,r,o=this,s=this.getStartLocation(t),a=this.getEndLocation(t),u=this.xField,l=this.xOpenField,h=this.yField,c=this.yOpenField,p=this.columns.template,d=p.percentWidth,f=p.percentHeight,g=p.pixelWidth,y=p.pixelHeight,m=p.maxWidth,v=p.maxHeight,b=p.pixelPaddingLeft,_=p.pixelPaddingRight,w=p.pixelPaddingTop,x=p.pixelPaddingBottom,P=!1,C=t.width;if(cR(C)&&(yR(C)&&(g=C),C instanceof iR&&(d=100*C.value)),this.xAxis instanceof vB&&this.yAxis instanceof vB){if(!t.hasValue(this._xValueFields)||!t.hasValue(this._yValueFields))return;s=0,a=1,oR(d)||(s+=T=CR((a-s)*(1-d/100)/2,5),a-=T),e=this.xAxis.getX(t,l,s),n=this.xAxis.getX(t,u,a),oR(d)&&(e+=T=(n-e-g)/2,n-=T),!oR(m)&&m<Math.abs(n-e)&&(e+=T=(n-e-m)/2,n-=T),s=0,a=1,oR(f)||(s+=T=CR((1-f/100)/2,5),a-=T),i=this.yAxis.getY(t,c,s),r=this.yAxis.getY(t,h,a),oR(f)&&(r+=T=(r-i-y)/2,i-=T),!oR(v)&&v<Math.abs(r-i)&&(r+=T=(r-i-v)/2,i-=T),n=this.fixHorizontalCoordinate(n),e=this.fixHorizontalCoordinate(e),i=this.fixVerticalCoordinate(i),r=this.fixVerticalCoordinate(r)}else if(this.baseAxis==this.xAxis){if(!t.hasValue(this._yValueFields))return;oR(d)||(s+=T=CR((a-s)*(1-d/100)/2,5),a-=T),e=this.xAxis.getX(t,l,s),n=this.xAxis.getX(t,u,a),oR(d)&&(e+=T=(n-e-g)/2,n-=T),!oR(m)&&m<Math.abs(n-e)&&(e+=T=(n-e-m)/2,n-=T);var I=t.locations[c],O=t.locations[h];this.yAxis instanceof cB&&this.dataFields[this.yField]!=this.dataFields[this.yOpenField]&&(I=0,O=0),r=this.yAxis.getY(t,c,I),i=this.yAxis.getY(t,h,O);var S=Math.ceil(this.yAxis.axisLength);(i<0&&r<0||i>S&&r>S)&&(P=!0),i=this.fixVerticalCoordinate(i),r=this.fixVerticalCoordinate(r),Math.abs(n-e)-b-_==0&&(P=!0)}else{if(!t.hasValue(this._xValueFields))return;var T;oR(f)||(s+=T=CR((a-s)*(1-f/100)/2,5),a-=T),i=this.yAxis.getY(t,c,s),r=this.yAxis.getY(t,h,a),oR(f)&&(r-=T=(r-i-y)/2,i+=T),!oR(v)&&v<Math.abs(r-i)&&(r-=T=(r-i-v)/2,i+=T);var E=t.locations[u],k=t.locations[l];this.xAxis instanceof cB&&this.dataFields[this.xField]!=this.dataFields[this.xOpenField]&&(E=0,k=0),n=this.xAxis.getX(t,u,E),e=this.xAxis.getX(t,l,k),S=Math.ceil(this.xAxis.axisLength),(n<0&&e<0||n>S&&e>S)&&(P=!0),n=this.fixHorizontalCoordinate(n),e=this.fixHorizontalCoordinate(e),Math.abs(i-r)-w-x==0&&(P=!0)}var A,D=Math.abs(n-e),j=Math.abs(r-i),R=Math.min(e,n),M=Math.min(i,r);P?this.disableUnusedColumns(t):(t.column?(A=t.column,this._propertiesChanged&&(jM(this,A,rL),jM(this.columns.template,A,rL),tM(rL,(function(t){A[t]=A[t]})))):(jM(this,A=this.columns.create(),rL),jM(this.columns.template,A,rL),t.addSprite(A),t.column=A,A.paper=this.paper,this.itemsFocusable()?(cR(this.role)||(this.role="menu"),cR(A.role)||(A.role="menuitem"),A.focusable=!0):(cR(this.role)||(this.role="list"),cR(A.role)||(A.role="listitem"),A.focusable=!1),A.focusable&&(A.events.on("focus",(function(e){A.readerTitle=o.populateString(o.itemReaderText,t)}),void 0,!1),A.events.on("blur",(function(t){A.readerTitle=""}),void 0,!1)),A.hoverable&&(A.events.on("over",(function(e){A.readerTitle=o.populateString(o.itemReaderText,t)}),void 0,!1),A.events.on("out",(function(t){A.readerTitle=""}),void 0,!1)),A.parent=this.columnsContainer,A.virtualParent=this),A.width=D,A.height=j,A.x=R,A.y=M,A.realX=e,A.realY=i,A.realWidth=n-e,A.realHeight=r-i,this.setColumnStates(A),A.invalid&&A.validate(),A.__disabled=!1,VM(this.axisRanges.iterator(),(function(e){var n=t.rangesColumns.getKey(e.uid);n||(n=o.columns.create(),jM(e.contents,n,rL),t.addSprite(n),t.rangesColumns.setKey(e.uid,n),n.paper=o.paper),n.parent=e.contents,n.width=D,n.height=j,n.x=R,n.y=M,o.setColumnStates(n),n.invalid&&n.validate(),n.__disabled=!1}))),t.itemWidth=D,t.itemHeight=j},e.prototype.disableUnusedColumns=function(t){t&&(t.column&&(t.column.width=0,t.column.height=0,t.column.__disabled=!0),VM(this.axisRanges.iterator(),(function(e){var n=t.rangesColumns.getKey(e.uid);n&&(n.width=0,n.height=0,n.__disabled=!0)})))},e.prototype.setColumnStates=function(t){if(this._dropFromOpenState||this._dropFromPreviousState||this._riseFromOpenState||this._riseFromPreviousState){var e=t.dataItem;if(this.xAxis instanceof cB||this.yAxis instanceof cB){var n,i=void 0,r=void 0;this.baseAxis==this.yAxis?(this.xOpenField&&this.xField&&this.xAxis instanceof cB&&(n=e.getValue(this.xOpenField),i=e.getValue(this.xField)),r=e.getValue(this.xAxis.axisFieldName+"X","previousChange")):(this.yOpenField&&this.yField&&this.yAxis instanceof cB&&(n=e.getValue(this.yOpenField),i=e.getValue(this.yField)),r=e.getValue(this.yAxis.axisFieldName+"Y","previousChange")),i<n?(e.droppedFromOpen=!0,t.defaultState.copyFrom(this._dropFromOpenState),t.setState(this._dropFromOpenState,0)):(e.droppedFromOpen=!1,t.defaultState.copyFrom(this._riseFromOpenState),t.setState(this._riseFromOpenState,0)),r<0?(e.droppedFromPrevious=!0,t.defaultState.copyFrom(this._dropFromPreviousState),t.setState(this._dropFromPreviousState,0)):(e.droppedFromPrevious=!1,t.defaultState.copyFrom(this._riseFromPreviousState),t.setState(this._riseFromPreviousState,0))}}},Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns||(this._columns=new nN(this.createColumnTemplate()),this._disposers.push(new JM(this._columns)),this._disposers.push(this._columns.template)),this._columns},enumerable:!0,configurable:!0}),e.prototype.createColumnTemplate=function(){return new gH},Object.defineProperty(e.prototype,"clustered",{get:function(){return this.getPropertyValue("clustered")},set:function(t){this.setPropertyValue("clustered",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropFromOpenState",{get:function(){return this._dropFromOpenState||(this._dropFromOpenState=this.states.create("dropFromOpenState")),this._dropFromOpenState},set:function(t){this._dropFromOpenState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropFromPreviousState",{get:function(){return this._dropFromPreviousState||(this._dropFromPreviousState=this.states.create("dropFromPreviousState")),this._dropFromPreviousState},set:function(t){this._dropFromPreviousState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"riseFromOpenState",{get:function(){return this._riseFromOpenState||(this._riseFromOpenState=this.states.create("riseFromOpenState")),this._riseFromOpenState},set:function(t){this._riseFromOpenState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"riseFromPreviousState",{get:function(){return this._riseFromPreviousState||(this._riseFromPreviousState=this.states.create("riseFromPreviousState")),this._riseFromPreviousState},set:function(t){this._riseFromPreviousState=t},enumerable:!0,configurable:!0}),e.prototype.updateLegendValue=function(e,n){var i,r,o=this;t.prototype.updateLegendValue.call(this,e,n),this.legendDataItem&&(e&&(i=e.droppedFromOpen?this._dropFromOpenState:this._riseFromOpenState,r=e.droppedFromPrevious?this._dropFromPreviousState:this._riseFromPreviousState),VM(this.legendDataItem.marker.children.iterator(),(function(t){e?(t.setState(r),t.setState(i)):(t.setState(o._riseFromPreviousState),t.setState(o._riseFromOpenState))})))},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,n=t.pixelHeight;t.removeChildren();var i=t.createChild(wL);i.shouldClone=!1,jM(this,i,rL),i.copyFrom(this.columns.template),i.padding(0,0,0,0),i.width=e,i.height=n;var r=t.dataItem;r.color=this.fill,r.colorOrig=this.fill},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.columns.template.copyFrom(e.columns.template)},e.prototype.getBulletLocationX=function(e,n){if(this.baseAxis==this.xAxis){var i=e.locationX;yR(i)||(i=.5);var r=this.getEndLocation(e.dataItem);return r-(r-this.getStartLocation(e.dataItem))*i}return t.prototype.getBulletLocationX.call(this,e,n)},e.prototype.getBulletLocationY=function(e,n){if(this.baseAxis==this.yAxis){var i=e.locationY;yR(i)||(i=.5);var r=this.getEndLocation(e.dataItem);return r-(r-this.getStartLocation(e.dataItem))*i}return t.prototype.getBulletLocationY.call(this,e,n)},e.prototype.getAdjustedXLocation=function(t,e,n){return yR(n)||(n=t?t.locations[e]:.5),this._endLocation-(this._endLocation-this._startLocation)*(1-n)},e.prototype.getAdjustedYLocation=function(t,e,n){return yR(n)||(n=t?t.locations[e]:.5),this._endLocation-(this._endLocation-this._startLocation)*n},e.prototype.fixVerticalCoordinate=function(t){return OR(t,-this.columns.template.pixelPaddingTop,this.yAxis.axisLength+this.columns.template.pixelPaddingBottom)},e.prototype.fixHorizontalCoordinate=function(t){return OR(t,-this.columns.template.pixelPaddingLeft,this.xAxis.axisLength+this.columns.template.pixelPaddingRight)},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this.columns.clear()},e}(_B);QM.registeredClasses.ColumnSeries=mH,QM.registeredClasses.ColumnSeriesDataItem=yH;var vH=function(t){function e(){var e=t.call(this)||this;return e.className="TreeMapSeriesDataItem",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"parentName",{get:function(){var t=this.treeMapDataItem;if(t&&t.parent)return t.parent.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.treeMapDataItem;if(t)return t.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treeMapDataItem",{get:function(){return this._dataContext},enumerable:!0,configurable:!0}),e.prototype.hide=function(e,n,i,r){var o=this.treeMapDataItem;return o&&o.hide(e),t.prototype.hide.call(this,e,n,i,r)},e.prototype.show=function(e,n,i){var r=this.treeMapDataItem;return r&&r.show(e,n,i),t.prototype.show.call(this,e,n,i)},e}(yH),bH=function(t){function e(){var e=t.call(this)||this;e.className="TreeMapSeries",e.applyTheme(),e.fillOpacity=1,e.strokeOpacity=1,e.minBulletDistance=0,e.columns.template.tooltipText="{parentName} {name}: {value}",e.columns.template.configField="config";var n=new rV;return e.stroke=n.getFor("background"),e.dataFields.openValueX="x0",e.dataFields.valueX="x1",e.dataFields.openValueY="y0",e.dataFields.valueY="y1",e.sequencedInterpolation=!1,e.showOnInit=!1,e.columns.template.pixelPerfect=!1,e}return Qj(e,t),e.prototype.processDataItem=function(e,n){n.seriesDataItem=e,t.prototype.processDataItem.call(this,e,n)},e.prototype.createDataItem=function(){return new vH},e.prototype.show=function(e){if(!this.preventShow){var n=this.defaultState.transitionDuration;return yR(e)&&(n=e),this.dataItems.each((function(t){t.show(e)})),t.prototype.showReal.call(this,n)}},e.prototype.hide=function(e){var n=this.defaultState.transitionDuration;yR(e)&&(n=e);var i=t.prototype.hideReal.call(this,n);return this.dataItems.each((function(t){t.hide(e)})),i},e.prototype.processValues=function(){},e.prototype.getStartLocation=function(t){return 0},e.prototype.getEndLocation=function(t){return 1},e.prototype.dataChangeUpdate=function(){},e.prototype.processConfig=function(e){e&&(cR(e.dataFields)&&mR(e.dataFields)||(e.dataFields={})),t.prototype.processConfig.call(this,e)},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,n=t.pixelHeight;t.removeChildren();var i=t.createChild(wL);i.shouldClone=!1,jM(this,i,rL),i.padding(0,0,0,0),i.width=e,i.height=n;var r=t.dataItem;r.color=i.fill,r.colorOrig=i.fill},e.prototype.disableUnusedColumns=function(e){t.prototype.disableUnusedColumns.call(this,e),e.column&&(e.column.__disabled=!1)},e}(mH);QM.registeredClasses.TreeMapSeries=bH,QM.registeredClasses.TreeMapSeriesDataItem=vH;var _H=function(t){function e(){var e=t.call(this)||this;return e.rows=[],e.className="TreeMapDataItem",e.values.value={},e.values.x0={},e.values.y0={},e.values.x1={},e.values.y1={},e.hasChildren.children=!0,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,t.label&&(t.label.dataItem=this),t.valueLabel&&(t.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),e.prototype.getDuration=function(){return 0},Object.defineProperty(e.prototype,"value",{get:function(){var t=0;return this.children&&0!=this.children.length?VM(this.children.iterator(),(function(e){var n=e.value;yR(n)&&(t+=n)})):t=this.values.value.workingValue,t},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"percent",{get:function(){return this.parent?this.value/this.parent.value*100:100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x0",{get:function(){return this.values.x0.value},set:function(t){this.setValue("x0",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x1",{get:function(){return this.values.x1.value},set:function(t){this.setValue("x1",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y0",{get:function(){return this.values.y0.value},set:function(t){this.setValue("y0",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.values.y1.value},set:function(t){this.setValue("y1",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.properties.name},set:function(t){this.setProperty("name",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.properties.children},set:function(t){this.setProperty("children",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.parent?this.parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){var t=this.properties.color;return null==t&&this.parent&&(t=this.parent.color),null==t&&this.component&&(t=this.component.colors.getIndex(this.component.colors.step*this.index)),t},set:function(t){this.setProperty("color",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},set:function(t){t!=this._series&&(this._series&&(this.component.series.removeValue(this._series),this._series.dispose()),this._series=t,this._disposers.push(t))},enumerable:!0,configurable:!0}),e.prototype.hide=function(e,n,i,r){this.setWorkingValue("value",0),this.children&&this.children.each((function(t){t.hide(e,n,i,r)}));var o=this.seriesDataItem;return o&&o.bullets.each((function(t,e){e.hide(),e.preventShow=!0})),t.prototype.hide.call(this,e,n,i,r)},e.prototype.show=function(e,n,i){this.setWorkingValue("value",this.values.value.value),this.children&&this.children.each((function(t){t.show(e,n,i)}));var r=this.seriesDataItem;return r&&r.bullets.each((function(t,e){e.preventShow=!1})),t.prototype.show.call(this,e,n,i)},e}(xB),wH=function(t){function e(){var e=t.call(this)||this;e.layoutAlgorithm=e.squarify,e.zoomable=!0,e.className="TreeMap",e._usesData=!0,e.maxLevels=2,e.currentLevel=0,e.hideParentColumns=!1,e.colors=new kU,e.sorting="descending";var n=e.xAxes.push(new cB);n.title.disabled=!0,n.strictMinMax=!0;var i=n.renderer;i.inside=!0,i.labels.template.disabled=!0,i.ticks.template.disabled=!0,i.grid.template.disabled=!0,i.axisFills.template.disabled=!0,i.minGridDistance=100,i.line.disabled=!0,i.baseGrid.disabled=!0;var r=e.yAxes.push(new cB);r.title.disabled=!0,r.strictMinMax=!0;var o=r.renderer;o.inside=!0,o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.grid.template.disabled=!0,o.axisFills.template.disabled=!0,o.minGridDistance=100,o.line.disabled=!0,o.baseGrid.disabled=!0,o.inversed=!0,e.xAxis=n,e.yAxis=r;var s=new bH;return e.seriesTemplates=new KM(s),s.virtualParent=e,e._disposers.push(new GM(e.seriesTemplates)),e._disposers.push(s),e.zoomOutButton.events.on("hit",(function(){e.zoomToChartDataItem(e._homeDataItem)}),void 0,!1),e.seriesTemplates.events.on("insertKey",(function(t){t.newValue.isTemplate=!0}),void 0,!1),e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"navigationBar",{get:function(){return this._navigationBar},set:function(t){var e=this;this._navigationBar!=t&&(this._navigationBar=t,t.parent=this,t.toBack(),t.links.template.events.on("hit",(function(t){var n=t.target.dataItem.dataContext;n.isDisposed()||(e.zoomToChartDataItem(n),e.createTreeSeries(n))}),void 0,!0),this._disposers.push(t))},enumerable:!0,configurable:!0}),e.prototype.validateData=function(){this.series.clear(),this._tempSeries=[],t.prototype.validateData.call(this),this._homeDataItem&&this._homeDataItem.dispose();var e=this.dataItems.template.clone();this._homeDataItem=e,VM(this.dataItems.iterator(),(function(t){t.parent=e})),e.children=this.dataItems,e.x0=0,e.y0=0,e.name=this._homeText;var n=1e3,i=10*Math.round(n*this.pixelHeight/this.pixelWidth/10)||1e3;e.x1=n,e.y1=i,this.xAxis.min=0,this.xAxis.max=n,this.xAxis.getMinMax(),this.yAxis.min=0,this.yAxis.max=i,this.yAxis.getMinMax(),this.layoutItems(e),this.createTreeSeries(e),this.feedLegend()},e.prototype.layoutItems=function(t,e){if(t){var n=t.children;e||(e=this.sorting),"ascending"==e&&n.values.sort((function(t,e){return t.value-e.value})),"descending"==e&&n.values.sort((function(t,e){return e.value-t.value})),this._updateDataItemIndexes(0),this.layoutAlgorithm(t);for(var i=0,r=n.length;i<r;i++){var o=n.getIndex(i);o.children&&this.layoutItems(o)}}},e.prototype.createTreeSeries=function(t){var e=this;this._tempSeries=[];for(var n=[t],i=t.parent;null!=i;)this.initSeries(i),n.push(i),i=i.parent;n.reverse(),this.navigationBar&&(this.navigationBar.data=n),this.createTreeSeriesReal(t),tM(this._tempSeries,(function(t){-1==e.series.indexOf(t)&&e.series.push(t),t.zIndex=t.level}))},e.prototype.createTreeSeriesReal=function(t){if(t.children&&t.level<this.currentLevel+this.maxLevels){this.initSeries(t);for(var e=0;e<t.children.length;e++){var n=t.children.getIndex(e);n.children&&this.createTreeSeriesReal(n)}}},e.prototype.setData=function(e){this.currentLevel=0,this.currentlyZoomed=void 0,this.xAxis.start=0,this.xAxis.end=1,this.yAxis.start=0,this.yAxis.end=1,t.prototype.setData.call(this,e)},e.prototype.seriesAppeared=function(){return!0},e.prototype.initSeries=function(t){var e=this;if(!t.series){var n=void 0,i=this.seriesTemplates.getKey(t.level.toString());(n=i?i.clone():this.series.create()).dataItem.dataContext=t,n.name=t.name,n.parentDataItem=t,t.series=n,n.level=t.level;var r=t.dataContext;r&&(n.config=r.config),this.dataUsers.removeValue(n),n.data=t.children.values,n.fill=t.color,n.columnsContainer.hide(0),n.bulletsContainer.hide(0),n.columns.template.adapter.add("fill",(function(t,e){var n=e.dataItem;if(n){var i=n.treeMapDataItem;if(i)return e.fill=i.color,e.adapter.remove("fill"),i.color}})),this.zoomable&&(t.level>this.currentLevel||t.children&&t.children.length>0)&&(n.columns.template.cursorOverStyle=LV.pointer,this.zoomable&&n.columns.template.events.on("hit",(function(n){var i=n.target.dataItem;t.level>e.currentLevel?e.zoomToChartDataItem(i.treeMapDataItem.parent):e.zoomToSeriesDataItem(i)}),this,void 0))}this._tempSeries.push(t.series)},e.prototype.toggleBullets=function(t){var e=this;VM(this.series.iterator(),(function(n){-1==e._tempSeries.indexOf(n)?(n.columnsContainer.hide(),n.bulletsContainer.hide(t)):(n.columnsContainer.show(),n.bulletsContainer.show(t),n.dataItems.each((function(t){t.bullets.each((function(t,e){e.show()}))})),n.level<e.currentLevel?(e.hideParentColumns&&n.columnsContainer.hide(),n.bulletsContainer.hide(t)):n.level==e.currentLevel&&e.maxLevels>1&&n.dataItems.each((function(t){t.treeMapDataItem.children&&t.bullets.each((function(t,e){e.hide()}))})))}))},e.prototype.zoomToSeriesDataItem=function(t){this.zoomToChartDataItem(t.treeMapDataItem)},e.prototype.zoomToChartDataItem=function(t){var e=this;t||(t=this._homeDataItem);var n=this.zoomOutButton;if(n&&(t!=this._homeDataItem?n.show():n.hide()),t&&t.children){this.xAxis.zoomToValues(t.x0,t.x1),this.yAxis.zoomToValues(t.y0,t.y1),this.currentLevel=t.level,this.currentlyZoomed=t,this.createTreeSeries(t);var i=this.xAxis.rangeChangeAnimation||this.yAxis.rangeChangeAnimation;!i||i.isDisposed()||i.isFinished()?this.toggleBullets():(this._dataDisposers.push(i),i.events.once("animationended",(function(){e.toggleBullets()})))}},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("TreeMap chart"))},e.prototype.createDataItem=function(){return new _H},Object.defineProperty(e.prototype,"maxLevels",{get:function(){return this.getPropertyValue("maxLevels")},set:function(t){this.setPropertyValue("maxLevels",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLevel",{get:function(){return this.getPropertyValue("currentLevel")},set:function(t){this.setPropertyValue("currentLevel",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideParentColumns",{get:function(){return this.getPropertyValue("hideParentColumns")},set:function(t){this.setPropertyValue("hideParentColumns",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorting",{get:function(){return this.getPropertyValue("sorting")},set:function(t){this.setPropertyValue("sorting",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createSeries=function(){return new bH},Object.defineProperty(e.prototype,"homeText",{get:function(){return this._homeText},set:function(t){this._homeText=t,this._homeDataItem&&(this._homeDataItem.name=this._homeText)},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){if(e){if(cR(e.layoutAlgorithm)&&gR(e.layoutAlgorithm))switch(e.layoutAlgorithm){case"squarify":e.layoutAlgorithm=this.squarify;break;case"binaryTree":e.layoutAlgorithm=this.binaryTree;break;case"slice":e.layoutAlgorithm=this.slice;break;case"dice":e.layoutAlgorithm=this.dice;break;case"sliceDice":e.layoutAlgorithm=this.sliceDice;break;default:delete e.layoutAlgorithm}cR(e.navigationBar)&&!cR(e.navigationBar.type)&&(e.navigationBar.type="NavigationBar"),t.prototype.processConfig.call(this,e)}},e.prototype.validateLayout=function(){t.prototype.validateLayout.call(this),this.layoutItems(this.currentlyZoomed)},e.prototype.validateDataItems=function(){t.prototype.validateDataItems.call(this),this.layoutItems(this._homeDataItem),VM(this.series.iterator(),(function(t){t.validateRawData()})),this.zoomToChartDataItem(this._homeDataItem)},e.prototype.binaryTree=function(t){var e,n,i=t.children,r=i.length,o=new Array(r+1);for(o[0]=n=e=0;e<r;++e)o[e+1]=n+=i.getIndex(e).value;r>0&&function t(e,n,r,s,a,u,l){if(e>=n-1){var h=i.getIndex(e);return h.x0=s,h.y0=a,h.x1=u,void(h.y1=l)}for(var c=o[e],p=r/2+c,d=e+1,f=n-1;d<f;){var g=d+f>>>1;o[g]<p?d=g+1:f=g}p-o[d-1]<o[d]-p&&e+1<d&&--d;var y=o[d]-c,m=r-y;if(u-s>l-a){var v=(s*m+u*y)/r;t(e,d,y,s,a,v,l),t(d,n,m,v,a,u,l)}else{var b=(a*m+l*y)/r;t(e,d,y,s,a,u,b),t(d,n,m,s,b,u,l)}}(0,r,t.value,t.x0,t.y0,t.x1,t.y1)},e.prototype.slice=function(t){for(var e,n=t.x0,i=t.x1,r=t.y0,o=t.children,s=-1,a=o.length,u=t.value&&(t.y1-r)/t.value;++s<a;)(e=o.getIndex(s)).x0=n,e.x1=i,e.y0=r,e.y1=r+=e.value*u},e.prototype.dice=function(t){for(var e,n=t.x0,i=t.y0,r=t.y1,o=t.children,s=-1,a=o.length,u=t.value&&(t.x1-n)/t.value;++s<a;)(e=o.getIndex(s)).y0=i,e.y1=r,e.x0=n,e.x1=n+=e.value*u},e.prototype.sliceDice=function(t){1&t.level?this.slice(t):this.dice(t)},e.prototype.squarify=function(t){for(var e,n,i,r,o,s,a,u,l,h,c=(1+Math.sqrt(5))/2,p=t.x0,d=t.x1,f=t.y0,g=t.y1,y=t.children,m=0,v=0,b=y.length,_=t.value;m<b;){n=d-p,i=g-f;do{r=y.getIndex(v++).value}while(!r&&v<b);for(o=s=r,h=r*r*(l=Math.max(i/n,n/i)/(_*c)),u=Math.max(s/h,h/o);v<b;++v){if(r+=e=y.getIndex(v).value,e<o&&(o=e),e>s&&(s=e),h=r*r*l,(a=Math.max(s/h,h/o))>u){r-=e;break}u=a}var w=this.dataItems.template.clone();w.value=r,w.dice=n<i,w.children=y.slice(m,v),w.x0=p,w.y0=f,w.x1=d,w.y1=g,w.dice?(w.y1=_?f+=i*r/_:g,this.dice(w)):(w.x1=_?p+=n*r/_:d,this.slice(w)),_-=r,m=v}},e.prototype.handleSeriesAdded2=function(){},e.prototype.handleDataItemValueChange=function(t,e){"value"==e&&this.invalidateDataItems()},e.prototype.handleDataItemWorkingValueChange=function(t,e){"value"==e&&this.invalidateDataItems()},e.prototype.getLegendLevel=function(t){if(t&&t.children){if(t.children.length>1)return t;if(1==t.children.length){var e=t.children.getIndex(0);return e.children?this.getLegendLevel(e):t}return t}},Object.defineProperty(e.prototype,"homeDataItem",{get:function(){return this._homeDataItem},enumerable:!0,configurable:!0}),e.prototype.feedLegend=function(){var t=this.legend;if(t){t.dataFields.name="name";var e=this.getLegendLevel(this._homeDataItem);if(e){var n=[];e.children.each((function(t){n.push(t)})),t.data=n}}},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this._homeDataItem=void 0,this.series.clear(),this.navigationBar&&this.navigationBar.disposeData(),this.xAxis.disposeData(),this.yAxis.disposeData()},e.prototype.getExporting=function(){var e=this,n=t.prototype.getExporting.call(this);return n.adapter.add("formatDataFields",(function(t){return"csv"!=t.format&&"xlsx"!=t.format||cR(e.dataFields.children)&&delete t.dataFields[e.dataFields.children],t})),n},e}(PB);QM.registeredClasses.TreeMap=wH;var xH=function(t){function e(){var e=t.call(this)||this;return e._chart=new fM,e.className="AxisRendererX3D",e._disposers.push(e._chart),e.applyTheme(),e}return Qj(e,t),e.prototype.updateGridElement=function(t,e,n){var i=this.positionToPoint(e+=(n-e)*t.location);if(t.element){var r=this.chart.dx3D||0,o=this.chart.dy3D||0,s=this.getHeight();t.path=EL({x:r,y:o})+kL({x:r,y:s+o})+kL({x:0,y:s})}this.positionItem(t,i),this.toggleVisibility(t,e,0,1)},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.getHeight();this.baseGrid.path=EL({x:this.chart.dx3D||0,y:this.chart.dy3D||0})+kL({x:0,y:0})+kL({x:0,y:e})},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){t&&this._chart.set(t,t.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),e.prototype.handle3DChanged=function(t){"depth"!=t.property&&"angle"!=t.property||this.invalidate()},e}(gB);QM.registeredClasses.AxisRendererX3D=xH;var PH=function(t){function e(){var e=t.call(this)||this;return e._chart=new fM,e.className="AxisRendererY3D",e._disposers.push(e._chart),e.applyTheme(),e}return Qj(e,t),e.prototype.updateGridElement=function(t,e,n){var i=this.positionToPoint(e+=(n-e)*t.location);if(t.element){var r=this.chart.dx3D||0,o=this.chart.dy3D||0,s=this.getWidth();t.path=EL({x:0,y:0})+kL({x:r,y:o})+kL({x:s+r,y:o})}this.positionItem(t,i),this.toggleVisibility(t,e,0,1)},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.chart.dx3D||0,n=this.chart.dy3D||0,i=this.getWidth();this.baseGrid.path=EL({x:0,y:0})+kL({x:i,y:0})+kL({x:i+e,y:n})},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){t&&this._chart.set(t,t.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),e.prototype.handle3DChanged=function(t){"depth"!=t.property&&"angle"!=t.property||this.invalidate()},e}(uB),CH=function(t){function e(){var e=t.call(this)||this;return e.className="Column3D",e}return Qj(e,t),e.prototype.createAssets=function(){this.column3D=this.createChild(_U),this.column3D.shouldClone=!1,this.column3D.strokeOpacity=0,this.column=this.column3D},e.prototype.validate=function(){t.prototype.validate.call(this),this.column3D&&(this.column3D.width=this.pixelWidth,this.column3D.height=this.pixelHeight,this.column3D.invalid&&this.column3D.validate())},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.column3D&&this.column3D.copyFrom(e.column3D)},e.prototype.setFill=function(e){t.prototype.setFill.call(this,e),this.column.fill=e},e}(gH);QM.registeredClasses.Column3D=CH;var IH=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeries3DDataItem",e.applyTheme(),e}return Qj(e,t),e}(yH),OH=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeries3D",e.columns.template.column3D.applyOnClones=!0,e.columns.template.hiddenState.properties.visible=!0,e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"columnsContainer",{get:function(){var t=this.chart;return t&&t.columnsContainer&&"vertical"!=t.leftAxesContainer.layout&&"vertical"!=t.rightAxesContainer.layout&&"horizontal"!=t.bottomAxesContainer.layout&&"horizontal"!=t.topAxesContainer.layout?t.columnsContainer:this._columnsContainer},enumerable:!0,configurable:!0}),e.prototype.validateDataElementReal=function(e){t.prototype.validateDataElementReal.call(this,e),e.column&&(e.column.dx=this.dx,e.column.dy=this.dy)},e.prototype.validateDataElements=function(){t.prototype.validateDataElements.call(this),this.chart&&this.chart.invalidateLayout()},e.prototype.createColumnTemplate=function(){return new CH},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0),this.columns.template.column3D.depth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t),this.columns.template.column3D.angle=t},enumerable:!0,configurable:!0}),e}(mH);QM.registeredClasses.ColumnSeries3D=OH,QM.registeredClasses.ColumnSeries3DDataItem=IH,function(t){Qj((function(){var e=t.call(this)||this;return e.className="XYChart3DDataItem",e.applyTheme(),e}),t)}(xB);var SH=function(t){function e(){var e=t.call(this)||this;e._axisRendererX=xH,e._axisRendererY=PH,e.className="XYChart3D",e.depth=30,e.angle=30;var n=e.seriesContainer.createChild(aL);return n.shouldClone=!1,n.isMeasured=!1,n.layout="none",e.columnsContainer=n,e.columnsContainer.mask=e.createChild(oL),e.applyTheme(),e}return Qj(e,t),e.prototype.updateSeriesMasks=function(){if(t.prototype.updateSeriesMasks.call(this),fF()){var e=this.columnsContainer,n=e.mask;e.mask=void 0,e.mask=n}},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx3D",{get:function(){return ER(this.angle)*this.depth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy3D",{get:function(){return-SR(this.angle)*this.depth},enumerable:!0,configurable:!0}),e.prototype.validateLayout=function(){t.prototype.validateLayout.call(this),this.fixColumns()},e.prototype.fixLayout=function(){this.chartContainer.marginTop=-this.dy3D,this.chartContainer.paddingRight=this.dx3D,this.scrollbarX&&(this.scrollbarX.dy=this.dy3D,this.scrollbarX.dx=this.dx3D),this.scrollbarY&&(this.scrollbarY.dy=this.dy3D,this.scrollbarY.dx=this.dx3D),this.fixColumns(),t.prototype.fixLayout.call(this)},e.prototype.fixColumns=function(){var t=this,e=1,n=0;VM(this.series.iterator(),(function(t){t instanceof OH&&(!t.clustered&&n>0&&e++,t.depthIndex=e-1,n++)}));var i=0;VM(this.series.iterator(),(function(n){if(n instanceof OH){n.depth=t.depth/e,n.angle=t.angle,n.columnsContainer==t.columnsContainer&&(n.dx=t.depth/e*ER(t.angle)*n.depthIndex,n.dy=-t.depth/e*SR(t.angle)*n.depthIndex);var r=!1;(n.baseAxis==n.xAxis&&n.xAxis.renderer.inversed||n.baseAxis==n.yAxis&&n.yAxis.renderer.inversed)&&(r=!0);var o=1;n.dataItems.each((function(t){var e=t.column;e&&(e.zIndex=r?1e3*(1e3-o)+i-100*n.depthIndex:1e3*o+i-100*n.depthIndex),o++})),r?i--:i++}})),this.maskColumns()},e.prototype.processConfig=function(e){if(e&&cR(e.series)&&vR(e.series))for(var n=0,i=e.series.length;n<i;n++)e.series[n].type=e.series[n].type||"ColumnSeries3D";t.prototype.processConfig.call(this,e)},e.prototype.maskColumns=function(){var t=this.plotContainer.pixelWidth,e=this.plotContainer.pixelHeight,n=this.dx3D,i=this.dy3D,r=EL({x:0,y:0})+kL({x:n,y:i})+kL({x:t+n,y:i})+kL({x:t+n,y:e+i})+kL({x:t,y:e})+kL({x:t,y:e})+kL({x:0,y:e})+" Z",o=this.columnsContainer;o&&o.mask&&(o.mask.path=r)},e}(PB);QM.registeredClasses.XYChart3D=SH;var TH=function(t){function e(){var e=t.call(this)||this;e.className="HeatLegend",e.markerContainer=e.createChild(aL),e.markerContainer.shouldClone=!1,e.markerCount=1;var n=new wL;return n.minHeight=20,n.minWidth=20,n.interactionsEnabled=!1,n.fillOpacity=1,n.cornerRadius(0,0,0,0),e.markerContainer.minHeight=20,e.markerContainer.minWidth=20,e.orientation="horizontal",e.markers=new nN(n),e._disposers.push(new JM(e.markers)),e._disposers.push(e.markers.template),e.applyTheme(),e}return Qj(e,t),e.prototype.getMinFromRules=function(t){var e,n=this.series;if(n)return FM(n.heatRules.iterator(),(function(n){return n.property!=t||(e=n.min,!1)})),e},e.prototype.getMaxFromRules=function(t){var e,n=this.series;if(n)return VM(n.heatRules.iterator(),(function(n){return n.property!=t||(e=n.max,!1)})),e},e.prototype.validate=function(){t.prototype.validate.call(this),this.valueAxis.renderer.inversed=this.reverseOrder;var e=this.series,n=this.minColor,i=this.maxColor;if(cR(n)||(n=_N(this.getMinFromRules("fill"))),cR(i)||(i=_N(this.getMaxFromRules("fill"))),e){var r=e.fill;!cR(n)&&r instanceof vN&&(n=r),!cR(i)&&r instanceof vN&&(i=r)}cR(i)||(i=_N(this.getMaxFromRules("fill")));var o=lR(this.getMinFromRules("fillOpacity"));yR(o)||(o=1);var s=lR(this.getMaxFromRules("fillOpacity"));yR(s)||(s=1);var a=lR(this.getMinFromRules("strokeOpacity"));yR(a)||(a=1);var u=lR(this.getMaxFromRules("strokeOpacity"));yR(u)||(u=1);for(var l=_N(this.getMinFromRules("stroke")),h=_N(this.getMaxFromRules("stroke")),c=0;c<this.markerCount;c++){var p=this.markers.getIndex(c);if(p||((p=this.markers.create()).parent=this.markerContainer,p.height=rR(100),p.width=rR(100)),1==this.markerCount){var d=new NV;if(this.reverseOrder?(d.addColor(i,s),d.addColor(n,o)):(d.addColor(n,o),d.addColor(i,s)),"vertical"==this.orientation&&(d.rotation=-90),p.fill=d,cR(l)&&cR(h)){var f=new NV;this.reverseOrder?(f.addColor(h,u),f.addColor(l,a)):(f.addColor(l,a),f.addColor(h,u)),"vertical"==this.orientation&&(f.rotation=-90),p.stroke=f}}else{var g=c;this.reverseOrder&&(g=this.markerCount-c-1);var y=new vN(fN(n.rgb,i.rgb,g/this.markerCount));if(p.fill=y,p.fillOpacity=o+(s-o)*g/this.markerCount,cR(l)&&cR(h)){var m=new vN(fN(l.rgb,h.rgb,g/this.markerCount));p.stroke=m,p.strokeOpacity=a+(u-a)*g/this.markerCount}}}this.markerCount>1&&(this.valueAxis.renderer.minGridDistance="horizontal"==this.orientation?this.measuredWidth/this.markerCount:this.measuredHeight/this.markerCount),this.valueAxis.invalidate(),c=this.markerCount;for(var v=this.markers.length;c<v;c++)this.markers.getIndex(c).parent=void 0},Object.defineProperty(e.prototype,"minColor",{get:function(){return this.getPropertyValue("minColor")},set:function(t){t instanceof vN||(t=_N(t)),this.setColorProperty("minColor",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxColor",{get:function(){return this.getPropertyValue("maxColor")},set:function(t){t instanceof vN||(t=_N(t)),this.setColorProperty("maxColor",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markerCount",{get:function(){return this.getPropertyValue("markerCount")},set:function(t){this.setPropertyValue("markerCount",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(t){this.setPropertyValue("minValue",t),this.valueAxis.min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(t){this.setPropertyValue("maxValue",t),this.valueAxis.max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0);var e=this.markerContainer,n=this.valueAxis;"horizontal"==t?(cR(this.width)||(this.width=200),this.height=void 0,n.width=rR(100),n.height=void 0,n.tooltip.pointerOrientation="vertical",this.layout="vertical",e.width=rR(100),e.height=void 0,n.renderer instanceof gB||(n.renderer=new gB)):(cR(this.height)||(this.height=200),this.width=void 0,this.layout="horizontal",e.width=void 0,e.height=rR(100),n.height=rR(100),n.width=void 0,n.tooltip.pointerOrientation="horizontal",n.renderer instanceof uB||(n.renderer=new uB),n.renderer.inside=!0,n.renderer.labels.template.inside=!0,this.markerContainer.reverseOrder=!0);var i=n.renderer;i.grid.template.disabled=!0,i.axisFills.template.disabled=!0,i.baseGrid.disabled=!0,i.labels.template.padding(2,3,2,3),i.minHeight=void 0,i.minWidth=void 0,this.markerContainer.layout=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueAxis",{get:function(){return this._valueAxis||(this.valueAxis=this.createChild(cB),this.valueAxis.shouldClone=!1),this._valueAxis},set:function(t){this._valueAxis=t,t.parent=this,t.strictMinMax=!0,this.orientation=this.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},set:function(t){var e=this;this._series=t;var n="value";try{var i=t.heatRules.getIndex(0).dataField;i&&(n=i)}catch(r){}this.updateMinMax(t.dataItem.values[n].low,t.dataItem.values[n].high),t.dataItem.events.on("calculatedvaluechanged",(function(i){e.updateMinMax(t.dataItem.values[n].low,t.dataItem.values[n].high)}),void 0,!1),t.heatRules.events.on("inserted",this.invalidate,this,!1),t.heatRules.events.on("removed",this.invalidate,this,!1)},enumerable:!0,configurable:!0}),e.prototype.updateMinMax=function(t,e){var n=this.valueAxis;yR(this.minValue)||(n.min=t,n.invalidate()),yR(this.maxValue)||(n.max=e,n.invalidate())},e.prototype.processConfig=function(e){if(e&&cR(e.series)&&gR(e.series)&&gR(e.series))if(this.map.hasKey(e.series))e.series=this.map.getKey(e.series);else{var n=e.series,i=this.map.events.on("insertKey",(function(t){t.key==n&&(this.series=t.newValue,i.dispose())}),this);this._disposers.push(i),delete e.series}t.prototype.processConfig.call(this,e)},e}(aL);QM.registeredClasses.HeatLegend=TH;var EH=function(t){function e(){var e=t.call(this)||this;return e.className="Candlestick",e.layout="none",e}return Qj(e,t),e.prototype.createAssets=function(){t.prototype.createAssets.call(this),this.lowLine=this.createChild(OL),this.lowLine.shouldClone=!1,this.highLine=this.createChild(OL),this.highLine.shouldClone=!1},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.lowLine&&this.lowLine.copyFrom(e.lowLine),this.highLine&&this.highLine.copyFrom(e.highLine)},e}(gH);QM.registeredClasses.Candlestick=EH;var kH=function(t){function e(){var e=t.call(this)||this;return e.values.lowValueX={},e.values.lowValueY={},e.values.highValueX={},e.values.highValueY={},e.className="CandlestickSeriesDataItem",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"lowValueX",{get:function(){return this.values.lowValueX.value},set:function(t){this.setValue("lowValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lowValueY",{get:function(){return this.values.lowValueY.value},set:function(t){this.setValue("lowValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highValueX",{get:function(){return this.values.highValueX.value},set:function(t){this.setValue("highValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highValueY",{get:function(){return this.values.highValueY.value},set:function(t){this.setValue("highValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeValueX",{get:function(){return this.values.valueX.value},set:function(t){this.setValue("valueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeValueY",{get:function(){return this.values.valueY.value},set:function(t){this.setValue("valueY",t)},enumerable:!0,configurable:!0}),e}(yH),AH=function(t){function e(){var e=t.call(this)||this;e.className="CandlestickSeries",e.groupFields.lowValueX="low",e.groupFields.lowValueY="low",e.groupFields.highValueX="high",e.groupFields.highValueY="high",e.strokeOpacity=1;var n=new rV,i=n.getFor("positive"),r=n.getFor("negative");return e.dropFromOpenState.properties.fill=r,e.dropFromOpenState.properties.stroke=r,e.riseFromOpenState.properties.fill=i,e.riseFromOpenState.properties.stroke=i,e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Candlestick Series"))},e.prototype.createDataItem=function(){return new kH},e.prototype.validateDataElementReal=function(e){t.prototype.validateDataElementReal.call(this,e),this.validateCandlestick(e)},e.prototype.validateCandlestick=function(t){var e=t.column;if(e){var n=e.lowLine,i=e.highLine;if(this.baseAxis==this.xAxis){var r=e.pixelWidth/2;n.x=r,i.x=r;var o=t.getWorkingValue(this.yOpenField),s=t.getWorkingValue(this.yField),a=this.yAxis.getY(t,this.yOpenField),u=this.yAxis.getY(t,this.yField),l=this.yAxis.getY(t,this.yLowField),h=this.yAxis.getY(t,this.yHighField),c=e.pixelY;n.y1=l-c,i.y1=h-c,o<s?(n.y2=a-c,i.y2=u-c):(n.y2=u-c,i.y2=a-c)}if(this.baseAxis==this.yAxis){var p=e.pixelHeight/2;n.y=p,i.y=p;var d=t.getWorkingValue(this.xOpenField),f=t.getWorkingValue(this.xField),g=this.xAxis.getX(t,this.xOpenField),y=this.xAxis.getX(t,this.xField),m=this.xAxis.getX(t,this.xLowField),v=this.xAxis.getX(t,this.xHighField),b=e.pixelX;n.x1=m-b,i.x1=v-b,d<f?(n.x2=g-b,i.x2=y-b):(n.x2=y-b,i.x2=g-b)}VM(this.axisRanges.iterator(),(function(e){var r=t.rangesColumns.getKey(e.uid);if(r){var o=r.lowLine;o.x=n.x,o.y=n.y,o.x1=n.x1,o.x2=n.x2,o.y1=n.y1,o.y2=n.y2;var s=r.highLine;s.x=i.x,s.y=i.y,s.x1=i.x1,s.x2=i.x2,s.y1=i.y1,s.y2=i.y2}}))}},Object.defineProperty(e.prototype,"xLowField",{get:function(){return this._xLowField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yLowField",{get:function(){return this._yLowField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xHighField",{get:function(){return this._xHighField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yHighField",{get:function(){return this._yHighField},enumerable:!0,configurable:!0}),e.prototype.defineFields=function(){t.prototype.defineFields.call(this);var e=this.xAxis,n=this.yAxis;if(e&&n){if(this.baseAxis==e){var i=MN(n.axisFieldName);this._yLowField="low"+i+"Y",this._yHighField="high"+i+"Y"}if(this.baseAxis==n){var r=MN(e.axisFieldName);this._xLowField="low"+r+"X",this._xHighField="high"+r+"X"}this.addValueField(e,this._xValueFields,this._xLowField),this.addValueField(e,this._xValueFields,this._xHighField),this.addValueField(n,this._yValueFields,this._yLowField),this.addValueField(n,this._yValueFields,this._yHighField)}},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,n=t.pixelHeight;t.removeChildren();var i,r,o=t.createChild(EH);o.shouldClone=!1,o.copyFrom(this.columns.template);var s=o.lowLine,a=o.highLine;this.baseAxis==this.yAxis?(i=e/3,r=n,s.y=n/2,a.y=n/2,s.x2=e/3,a.x2=e/3,a.x=e/3*2,o.column.x=e/3):(i=e,r=n/3,s.x=e/2,a.x=e/2,s.y2=n/3,a.y2=n/3,a.y=n/3*2,o.column.y=n/3),o.width=i,o.height=r,jM(this,t,rL),jM(this.columns.template,o,rL),o.stroke=this.riseFromOpenState.properties.stroke,o.fill=o.stroke;var u=t.dataItem;u.color=o.fill,u.colorOrig=o.fill},e.prototype.createColumnTemplate=function(){return new EH},e}(mH);QM.registeredClasses.CandlestickSeries=AH,QM.registeredClasses.CandlestickSeriesDataItem=kH;var DH=function(t){function e(){var e=t.call(this)||this;return e.className="OHLC",e.layout="none",e}return Qj(e,t),e.prototype.createAssets=function(){this.openLine=this.createChild(OL),this.openLine.shouldClone=!1,this.highLowLine=this.createChild(OL),this.highLowLine.shouldClone=!1,this.closeLine=this.createChild(OL),this.closeLine.shouldClone=!1},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.openLine&&this.openLine.copyFrom(e.openLine),this.highLowLine&&this.highLowLine.copyFrom(e.highLowLine),this.closeLine&&this.closeLine.copyFrom(e.closeLine)},e}(EH);QM.registeredClasses.OHLC=DH;var jH=function(t){function e(){var e=t.call(this)||this;return e.className="OHLCSeriesDataItem",e.applyTheme(),e}return Qj(e,t),e}(kH),RH=function(t){function e(){var e=t.call(this)||this;return e.className="OHLCSeries",e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("OHLC Series"))},e.prototype.createDataItem=function(){return new jH},e.prototype.validateCandlestick=function(t){var e=t.column;if(e){var n=e.openLine,i=e.highLowLine,r=e.closeLine;if(this.baseAxis==this.xAxis){var o=e.pixelWidth/2;i.x=o,t.getWorkingValue(this.yOpenField),t.getWorkingValue(this.yField);var s=this.yAxis.getY(t,this.yOpenField),a=this.yAxis.getY(t,this.yField),u=this.yAxis.getY(t,this.yLowField),l=this.yAxis.getY(t,this.yHighField),h=e.pixelY;n.y1=s-h,n.y2=s-h,n.x1=0,n.x2=o,r.y1=a-h,r.y2=a-h,r.x1=o,r.x2=2*o,i.y1=l-h,i.y2=u-h}if(this.baseAxis==this.yAxis){var c=e.pixelHeight/2;i.y=c,t.getWorkingValue(this.xOpenField),t.getWorkingValue(this.xField);var p=this.xAxis.getX(t,this.xOpenField),d=this.xAxis.getX(t,this.xField),f=this.xAxis.getX(t,this.xLowField),g=this.xAxis.getX(t,this.xHighField),y=e.pixelX;n.x1=p-y,n.x2=p-y,n.y1=c,n.y2=2*c,r.x1=d-y,r.x2=d-y,r.y1=0,r.y2=c,i.x1=g-y,i.x2=f-y}VM(this.axisRanges.iterator(),(function(e){var o=t.rangesColumns.getKey(e.uid);if(o){var s=o.openLine;s.x=n.x,s.y=n.y,s.x1=n.x1,s.x2=n.x2,s.y1=n.y1,s.y2=n.y2;var a=o.closeLine;a.x=r.x,a.y=r.y,a.x1=r.x1,a.x2=r.x2,a.y1=r.y1,a.y2=r.y2;var u=o.highLowLine;u.x=i.x,u.y=i.y,u.x1=i.x1,u.x2=i.x2,u.y1=i.y1,u.y2=i.y2}}))}},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,n=t.pixelHeight;t.removeChildren();var i,r,o=t.createChild(DH);o.shouldClone=!1,o.copyFrom(this.columns.template);var s=o.openLine,a=o.closeLine,u=o.highLowLine;this.baseAxis==this.yAxis?(i=e/3,r=n,u.y=n/2,u.x2=e,s.x=e/3*2,s.y2=n/2,a.x=e/3,a.y2=n,a.y1=n/2):(i=e,r=n/3,u.x=e/2,u.y2=n,s.y=n/3*2,s.x2=e/2,a.y=n/3,a.x2=e,a.x1=e/2),o.width=i,o.height=r,jM(this,t,rL),jM(this.columns.template,o,rL),o.stroke=this.riseFromOpenState.properties.stroke;var l=t.dataItem;l.color=o.stroke,l.colorOrig=o.stroke},e.prototype.createColumnTemplate=function(){return new DH},e}(AH);QM.registeredClasses.OHLCSeries=RH,QM.registeredClasses.OHLCSeriesDataItem=jH;var MH=function(t){function e(){var e=t.call(this)||this;return e.className="StepLineSeriesSegment",e}return Qj(e,t),e.prototype.drawSegment=function(t,e,n,i,r,o){if(t.length>0&&e.length>0)if(r){var s=EL(t[0]);if(t.length>0)for(var a=1;a<t.length;a++){var u=t[a];a/2==Math.round(a/2)?s+=EL(u):s+=kL(u)}this.strokeSprite.path=s,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(s=EL(t[0])+TL(t),s+=kL(e[0])+TL(e),s+=kL(t[0]),this.fillSprite.path=s+=" Z")}else s=EL(t[0])+TL(t),this.strokeSprite.path=s,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(s+=kL(e[0])+TL(e),s+=kL(t[0]),this.fillSprite.path=s+=" Z")},e}(CB);QM.registeredClasses.StepLineSeriesSegment=MH;var NH=function(t){function e(){var e=t.call(this)||this;return e.className="StepLineSeriesDataItem",e.applyTheme(),e}return Qj(e,t),e}(SB),FH=function(t){function e(){var e=t.call(this)||this;return e.className="StepLineSeries",e.applyTheme(),e.startLocation=0,e.endLocation=1,e}return Qj(e,t),e.prototype.createDataItem=function(){return new NH},e.prototype.addPoints=function(t,e,n,i,r){var o,s,a,u;this.baseAxis==this.xAxis&&(o=this.startLocation,s=this.endLocation,a=this.getAdjustedXLocation(e,this.yOpenField),u=this.getAdjustedXLocation(e,this.yField)),this.baseAxis==this.yAxis&&(a=this.startLocation,u=this.endLocation,o=this.getAdjustedXLocation(e,this.xOpenField),s=this.getAdjustedXLocation(e,this.xField));var l=this.xAxis.getX(e,n,o),h=this.yAxis.getY(e,i,a),c=this.xAxis.getX(e,n,s),p=this.yAxis.getY(e,i,u);if(l=OR(l,-1e5,1e5),h=OR(h,-1e5,1e5),c=OR(c,-1e5,1e5),p=OR(p,-1e5,1e5),!this.noRisers&&t.length>1){var d=t[t.length-1];this.baseAxis==this.xAxis&&t.push(r?{x:d.x,y:p}:{x:l,y:d.y}),this.baseAxis==this.yAxis&&t.push(r?{x:c,y:d.y}:{x:d.x,y:h})}var f={x:l,y:h},g={x:c,y:p};r?t.push(g,f):t.push(f,g)},e.prototype.drawSegment=function(t,e,n){var i=!1;this.yAxis==this.baseAxis&&(i=!0),t.drawSegment(e,n,this.tensionX,this.tensionY,this.noRisers,i)},e.prototype.createSegment=function(){return new MH},Object.defineProperty(e.prototype,"noRisers",{get:function(){return this.getPropertyValue("noRisers")},set:function(t){this.setPropertyValue("noRisers",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t,!0)},enumerable:!0,configurable:!0}),e}(TB);QM.registeredClasses.StepLineSeries=FH,QM.registeredClasses.StepLineSeriesDataItem=NH;var VH=function(t){function e(){var e=t.call(this)||this;return e.className="RadarColumn",e}return Qj(e,t),e.prototype.createAssets=function(){this.radarColumn=this.createChild(WL),this.radarColumn.shouldClone=!1,this.radarColumn.strokeOpacity=void 0,this.column=this.radarColumn},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.radarColumn&&this.radarColumn.copyFrom(e.radarColumn)},e.prototype.getTooltipX=function(){var t=this.getPropertyValue("tooltipX");return yR(t)?t:this.radarColumn.getTooltipX()},e.prototype.getTooltipY=function(){var t=this.getPropertyValue("tooltipX");return yR(t)?t:this.radarColumn.getTooltipY()},e}(gH);QM.registeredClasses.RadarColumn=VH;var LH=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeriesDataItem",e.applyTheme(),e}return Qj(e,t),e}(yH),UH=function(t){function e(){var e=t.call(this)||this;return e.className="RadarColumnSeries",e.applyTheme(),e}return Qj(e,t),e.prototype.createColumnTemplate=function(){return new VH},e.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},e.prototype.disableUnusedColumns=function(t){t&&(t.column&&(t.column.__disabled=!0),VM(this.axisRanges.iterator(),(function(e){var n=t.rangesColumns.getKey(e.uid);n&&(n.__disabled=!0)})))},e.prototype.validateDataElementReal=function(t){var e,n,i,r,o=this,s=this.chart.startAngle,a=this.chart.endAngle,u=this.yField,l=this.yOpenField,h=this.xField,c=this.xOpenField,p=this.getStartLocation(t),d=this.getEndLocation(t),f=(a-s)/(this.dataItems.length*(this.end-this.start)),g=t.column;g||(g=this.columns.create(),t.column=g,jM(this,g,rL),jM(this.columns.template,g,rL),t.addSprite(g),g.paper=this.paper,this.setColumnStates(g));var y=g.width,m=100;y instanceof iR&&(m=y.percent);var v=CR((d-p)*(1-m/100)/2,5);if(p+=v,d-=v,this.xAxis instanceof vB&&this.yAxis instanceof vB?(i=RR({x:this.yAxis.getX(t,u,0,"valueY"),y:this.yAxis.getY(t,u,0,"valueY")}),r=RR({x:this.yAxis.getX(t,l,1,"valueY"),y:this.yAxis.getY(t,l,1,"valueY")}),e=this.xAxis.getAngle(t,c,0,"valueX"),n=this.xAxis.getAngle(t,h,1,"valueX"),s+=p*f,a-=(1-d)*f):this.baseAxis==this.xAxis?(i=RR({x:this.yAxis.getX(t,u,t.locations[u],"valueY"),y:this.yAxis.getY(t,u,t.locations[u],"valueY")}),r=RR({x:this.yAxis.getX(t,l,t.locations[l],"valueY"),y:this.yAxis.getY(t,l,t.locations[l],"valueY")}),e=this.xAxis.getAngle(t,c,p,"valueX"),n=this.xAxis.getAngle(t,h,d,"valueX"),s+=p*f,a-=(1-d)*f):(i=RR({x:this.yAxis.getX(t,u,p,"valueY"),y:this.yAxis.getY(t,u,p,"valueY")}),r=RR({x:this.yAxis.getX(t,l,d,"valueY"),y:this.yAxis.getY(t,l,d,"valueY")}),e=this.xAxis.getAngle(t,h,t.locations[h],"valueX"),n=this.xAxis.getAngle(t,c,t.locations[c],"valueX")),n<e){var b=n;n=e,e=b}e=OR(e,s,a),n=OR(n,s,a);var _=g.radarColumn;_.startAngle=e;var w=n-e;w>0?(_.arc=w,_.radius=i,_.innerRadius=r,g.__disabled=!1,g.parent=this.columnsContainer,VM(this.axisRanges.iterator(),(function(n){var s,a,u=t.rangesColumns.getKey(n.uid);u||(u=o.columns.create(),s=o.columns.template,a=u,tM(rL,(function(t){a[t]=s[t]})),jM(n.contents,u,rL),u.dataItem&&nM(u.dataItem.sprites,u),t.addSprite(u),u.paper=o.paper,o.setColumnStates(u),t.rangesColumns.setKey(n.uid,u));var l=u.radarColumn;l.startAngle=e,l.arc=w,l.radius=i,l.innerRadius=r,l.invalid&&(l.paper=o.paper,l.validate()),u.__disabled=!1,u.parent=n.contents}))):this.disableUnusedColumns(t)},e.prototype.getPoint=function(t,e,n,i,r,o,s){o||(o="valueX"),s||(s="valueY");var a=RR({x:this.yAxis.getX(t,n,r,s),y:this.yAxis.getY(t,n,r,s)});0==a&&(a=1e-5);var u=this.xAxis.getAngle(t,e,i,o);return{x:a*ER(u),y:a*SR(u)}},e.prototype.getMaskPath=function(){var t=this.yAxis.renderer;return RL(t.startAngle,t.endAngle-t.startAngle,t.pixelRadius,t.pixelInnerRadius)},e.prototype.positionBulletReal=function(t,e,n){var i=this.xAxis,r=this.yAxis;(e<i.start||e>i.end||n<r.start||n>r.end)&&(t.visible=!1),t.moveTo(this.xAxis.renderer.positionToPoint(e,n))},e.prototype.setXAxis=function(e){t.prototype.setXAxis.call(this,e),this.updateRendererRefs()},e.prototype.setYAxis=function(e){t.prototype.setYAxis.call(this,e),this.updateRendererRefs()},e.prototype.updateRendererRefs=function(){this.xAxis.renderer.axisRendererY=this.yAxis.renderer},e}(mH);QM.registeredClasses.RadarColumnSeries=UH,QM.registeredClasses.RadarColumnSeriesDataItem=LH;var BH=function(t){function e(){var e=t.call(this)||this;return e.slice=e.createChild(oL),e.slice.shouldClone=!1,e.slice.setElement(e.paper.add("path")),e.slice.isMeasured=!1,e.orientation="vertical",e.bottomWidth=rR(100),e.topWidth=rR(100),e.isMeasured=!1,e.width=10,e.height=10,e.expandDistance=0,e.className="FunnelSlice",e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.pixelPaddingTop,n=this.pixelPaddingLeft,i=this.pixelWidth-this.pixelPaddingRight-n,r=this.pixelHeight-e-this.pixelPaddingBottom,o=this.expandDistance,s="";if("vertical"==this.orientation){var a={x:(i-(g=jN(this.topWidth,i)))/2+n,y:e},u={x:(i+g)/2+n,y:e},l={x:(i+(y=jN(this.bottomWidth,i)))/2+n,y:e+r},h={x:(i-y)/2+n,y:e+r},c={x:u.x+(l.x-u.x)/2+o*r,y:u.y+.5*r},p={x:a.x+(h.x-a.x)/2-o*r,y:a.y+.5*r},d=kL(l),f="";0!=o&&(d=AL(l,c),f=AL(a,p)),s=EL(a)+kL(u)+d+kL(h)+f,this.tickPoint={x:u.x+(l.x-u.x)/2,y:u.y+(l.y-u.y)/2}}else{var g,y,m={x:n,y:(r-(g=jN(this.topWidth,r)))/2+e},v={x:n,y:(r+g)/2+e},b={x:n+i,y:(r-(y=jN(this.bottomWidth,r)))/2+e},_={x:n+i,y:(r+y)/2+e};c={y:m.y+(b.y-m.y)/2-o*i,x:m.x+.5*i},p={y:v.y+(_.y-v.y)/2+o*i,x:v.x+.5*i},d=kL(b),f="",0!=o&&(d=AL(b,c),f=AL(v,p)),s=EL(v)+kL(m)+d+kL(_)+f,this.tickPoint={y:v.y+(_.y-v.y)/2,x:v.x+(_.x-v.x)/2}}this.slice.path=s,this.invalidateLayout()},e.prototype.getPoint=function(t,e){var n=this.pixelPaddingTop,i=this.pixelPaddingLeft,r=this.pixelWidth-this.pixelPaddingRight-i,o=this.pixelHeight-n-this.pixelPaddingBottom;if("vertical"==this.orientation){var s={x:(r-(h=jN(this.topWidth,r)))/2+i,y:n},a={x:(r+h)/2+i,y:n},u={x:(r+(c=jN(this.bottomWidth,r)))/2+i,y:n+o},l=s.x+((r-c)/2+i-s.x)*e;return{x:l+(a.x+(u.x-a.x)*e-l)*t,y:a.y+(u.y-a.y)*e}}var h,c,p=i,d=(o-(h=jN(this.topWidth,o)))/2+n,f=(o+h)/2+n,g=i+r,y=d+((o-(c=jN(this.bottomWidth,o)))/2+n-d)*t;return{y:y+(f+((o+c)/2+n-f)*t-y)*e,x:p+(g-p)*t}},Object.defineProperty(e.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(t){this.setPercentProperty("bottomWidth",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(t){this.setPercentProperty("topWidth",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandDistance",{get:function(){return this.getPropertyValue("expandDistance")},set:function(t){this.setPropertyValue("expandDistance",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.slice&&this.slice.copyFrom(e.slice)},e}(aL);QM.registeredClasses.FunnelSlice=BH;var HH=function(t){function e(){var e=t.call(this)||this;return e._label=new fM,e._slice=new fM,e.className="FunnelTick",e.element=e.paper.add("path"),e._disposers.push(e._label),e._disposers.push(e._slice),e.setPropertyValue("locationX",0),e.setPropertyValue("locationY",0),e.applyTheme(),e}return Qj(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.slice,n=e.getPoint(this.locationX,this.locationY);if(n){var i=this.label,r=e.dataItem.component,o=void 0,s=void 0,a=void 0;if("vertical"==r.orientation){var u=i.pixelX,l=i.pixelY;r.labelsOpposite||(u+=i.maxRight),o=iF(n,e,this.parent),a=iF({x:u,y:l},i.parent,this.parent),s={x:i.parent.pixelX-this.length,y:a.y},r.labelsOpposite||(s.x=i.parent.measuredWidth+this.length)}else u=i.pixelX,l=i.pixelY,r.labelsOpposite||(l+=i.maxBottom),o=iF(n,e,this.parent),s={x:(a=iF({x:u,y:l},i.parent,this.parent)).x,y:i.parent.pixelY-this.length},r.labelsOpposite||(s.y=i.parent.measuredHeight+this.length);this.path=EL(o)+kL(s)+kL(a)}},Object.defineProperty(e.prototype,"slice",{get:function(){return this._slice.get()},set:function(t){this._slice.set(t,new dM([t.events.on("transformed",this.invalidate,this,!1),t.events.on("validated",this.invalidate,this,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label.get()},set:function(t){this._label.set(t,t.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(t){this.setPropertyValue("locationX",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(t){this.setPropertyValue("locationY",t,!1,!0)},enumerable:!0,configurable:!0}),e}(rB);QM.registeredClasses.FunnelTick=HH;var WH=function(t){function e(){var e=t.call(this)||this;return e.className="FunnelSeriesDataItem",e.events.on("visibilitychanged",(function(){e.component&&e.component.invalidateDataItems()}),e,!1),e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"sliceLink",{get:function(){var t=this;if(!this._sliceLink){var e=this.component.sliceLinks.create();this._sliceLink=e,this._disposers.push(e),e.parent=this.component.slicesContainer,this._disposers.push(new pM((function(){t.component&&t.component.sliceLinks.removeValue(e)}))),this.addSprite(e),e.visible=this.visible}return this._sliceLink},enumerable:!0,configurable:!0}),e}(BB),zH=function(t){function e(){var e=t.call(this)||this;return e._nextY=0,e.className="FunnelSeries",e.orientation="vertical",e.width=rR(100),e.height=rR(100),e.slicesContainer.width=rR(100),e.slicesContainer.height=rR(100),e._disposers.push(e.slicesContainer.events.on("maxsizechanged",e.invalidateDataItems,e,!1)),e.labelsOpposite=!0,e.labelsContainer.layout="absolute",e.bottomRatio=0,e.applyTheme(),e}return Qj(e,t),e.prototype.createSlice=function(){return new BH},e.prototype.createTick=function(){return new HH},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Funnel Series"))},e.prototype.createDataItem=function(){return new WH},e.prototype.initSlice=function(t){t.isMeasured=!1,t.defaultState.properties.scale=1,t.observe("scale",this.handleSliceScale,this),t.observe(["dx","dy","x","y"],this.handleSliceMove,this),t.tooltipText="{category}: {value.percent.formatNumber('#.#')}% ({value.value})",t.states.create("hover").properties.expandDistance=.2},e.prototype.initLabel=function(e){t.prototype.initLabel.call(this,e),e.verticalCenter="middle",e.horizontalCenter="middle",e.isMeasured=!0,e.padding(5,5,5,5)},e.prototype.validate=function(){t.prototype.validate.call(this),this._nextY=0},e.prototype.validateDataElements=function(){var e=this,n=this.slicesContainer,i=this.labelsContainer,r=this.labels.template;this.alignLabels?(r.interactionsEnabled=!0,n.isMeasured=!0,i.isMeasured=!0):(r.interactionsEnabled=!1,n.isMeasured=!1,i.isMeasured=!1);var o=0,s=0;this.dataItems.each((function(t){cR(t.value)&&(s++,t.value>0?o+=Math.abs(t.getWorkingValue("value")/t.value):e.ignoreZeroValues||!t.visible||t.__disabled||t.isHiding?s--:o+=1)})),this._total=1/s*o,this._count=s,t.prototype.validateDataElements.call(this),this.arrangeLabels()},e.prototype.getNextValue=function(t){var e=t.index,n=t.getWorkingValue("value");if(e<this.dataItems.length-1){var i=this.dataItems.getIndex(e+1);if(n=i.getWorkingValue("value"),!i.visible||i.isHiding||i.__disabled||0==i.value&&this.ignoreZeroValues)return this.getNextValue(i)}return n},e.prototype.formDataElement=function(){},e.prototype.validateDataElement=function(e){var n=this,i=e.slice;i.orientation=this.orientation;var r=e.sliceLink;r.orientation=this.orientation;var o=e.tick,s=e.label;o.slice=i,o.label=s,cR(e.value)?(this.decorateSlice(e),tM(e.sprites,(function(t){t.__disabled=!(0!=e.value||!n.ignoreZeroValues)}))):tM(e.sprites,(function(t){t.__disabled=!0})),e.index==this.dataItems.length-1&&(r.disabled=!0),t.prototype.validateDataElement.call(this,e),r.fill=i.fill},e.prototype.decorateSlice=function(t){var e=t.slice,n=t.sliceLink,i=t.label,r=t.tick,o=this.slicesContainer.innerWidth,s=this.slicesContainer.innerHeight,a=this.getNextValue(t),u=Math.abs(t.getWorkingValue("value")),l=this.bottomRatio,h=1;if(0!=t.value?h=u/Math.abs(t.value):(t.__disabled||t.isHiding||!t.visible)&&(h=1e-6),this.ignoreZeroValues&&0==t.value)t.__disabled=!0;else if(t.__disabled=!1,this._nextY==1/0&&(this._nextY=0),"vertical"==this.orientation){var c=n.pixelHeight*h;s+=c,e.topWidth=u/this.dataItem.values.value.high*o,e.bottomWidth=(u-(u-a)*l)/this.dataItem.values.value.high*o,n.topWidth=e.bottomWidth,n.bottomWidth=(u-(u-a))/this.dataItem.values.value.high*o,e.y=this._nextY,e.height=Math.min(1e5,kR(0,s/this._count*h/this._total-c)),e.x=o/2,i.x=this.alignLabels?void 0:e.x,i.y=e.pixelY+e.pixelHeight*r.locationY,this._nextY+=e.pixelHeight+c,n.y=this._nextY-c,n.x=e.x}else{var p=n.pixelWidth*h;o+=p,e.topWidth=u/this.dataItem.values.value.high*s,e.bottomWidth=(u-(u-a)*l)/this.dataItem.values.value.high*s,n.topWidth=e.bottomWidth,n.bottomWidth=(u-(u-a))/this.dataItem.values.value.high*s,e.x=this._nextY,e.width=Math.min(1e5,o/this._count*h*1/this._total-p),e.y=s/2,i.y=this.alignLabels?this.labelsContainer.measuredHeight:e.y,i.x=e.pixelX+e.pixelWidth*r.locationX,this._nextY+=e.pixelWidth+p,n.x=this._nextY-p,n.y=e.y}},e.prototype.getLastLabel=function(t){if(t>0){var e=this.labels.getIndex(t);return e.__disabled||!e.visible?this.getLastLabel(t-1):e}},e.prototype.arrangeLabels=function(){if(this.alignLabels){var t=this.labels.length;if(t>1){var e=this.getLastLabel(t-1);if(e){var n=e.pixelY,i=e.pixelX;if(t>1){for(var r=t-2;r>=0;r--)(o=this.labels.getIndex(r)).visible&&!o.__disabled&&(o.invalid&&o.validate(),"vertical"==this.orientation?o.pixelY+o.measuredHeight>n&&(o.y=Math.min(1e6,n-o.measuredHeight)):o.pixelX+o.measuredWidth>i&&(o.x=Math.min(1e6,i-o.measuredWidth)),n=o.pixelY,i=o.pixelX);for(n=0,i=0,r=0;r<t;r++){var o;(o=this.labels.getIndex(r)).visible&&!o.__disabled&&(o.invalid&&o.validate(),"vertical"==this.orientation?o.pixelY<n&&(o.y=Math.min(1e6,n)):o.pixelX<i&&(o.x=Math.min(1e6,i)),n+=o.measuredHeight,i+=o.measuredWidth)}}}}}},e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e);var n=e.dataItem.slice,i=e.locationX;yR(i)||(i=.5);var r=e.locationY;yR(r)||(r=1),e.x=n.pixelX+n.measuredWidth*i,e.y=n.pixelY+n.measuredHeight*r},Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t)&&(this.labelsOpposite=this.labelsOpposite,this.invalidate(),"vertical"==t?(this.ticks.template.locationX=1,this.ticks.template.locationY=.5,this.labels.template.rotation=0,this.layout="horizontal"):(this.ticks.template.locationX=.5,this.ticks.template.locationY=1,this.labels.template.rotation=-90,this.layout="vertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRatio",{get:function(){return this.getPropertyValue("bottomRatio")},set:function(t){this.setPropertyValue("bottomRatio",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceLinks",{get:function(){if(!this._sliceLinks){var t=new BH;t.applyOnClones=!0,t.fillOpacity=.5,t.expandDistance=-.3,t.hiddenState.properties.opacity=0,this._disposers.push(t),this._sliceLinks=new nN(t),this._disposers.push(new JM(this._sliceLinks))}return this._sliceLinks},enumerable:!0,configurable:!0}),e.prototype.show=function(e){var n=this,i=this.startIndex,r=this.endIndex,o=this.defaultState.transitionDuration;yR(e)&&(o=e),kF.animationsEnabled||(o=0);var s=0;return VM(BM(this.dataItems.iterator()),(function(t){var e=t[0];n.sequencedInterpolation&&(s=n.sequencedInterpolationDelay*e+o*(e-i)/(r-i)),t[1].show(o,s,["value"])})),t.prototype.show.call(this,e)},e.prototype.hide=function(e){var n=this,i=["value"],r=this.startIndex,o=this.endIndex,s=0,a=this.hiddenState.transitionDuration;yR(e)&&(a=e),kF.animationsEnabled||(a=0),VM(BM(this.dataItems.iterator()),(function(t){var e=t[0];n.sequencedInterpolation&&(s=n.sequencedInterpolationDelay*e+a*(e-r)/(o-r)),t[1].hide(a,s,0,i)}));var u=t.prototype.hide.call(this,e);return u&&!u.isFinished()&&u.delay(s),u},e.prototype.setAlignLabels=function(e){t.prototype.setAlignLabels.call(this,e),this.ticks.template.disabled=!e;var n=this.labelsContainer;n&&(e?(n.height=void 0,n.width=void 0,n.margin(10,10,10,10)):(n.width=rR(100),n.height=rR(100))),this.labelsOpposite=this.labelsOpposite},Object.defineProperty(e.prototype,"labelsOpposite",{get:function(){return this.getPropertyValue("labelsOpposite")},set:function(t){this.setPropertyValue("labelsOpposite",t);var e=this.labels.template,n="none",i="none";this.alignLabels?t?(this.labelsContainer.toFront(),"vertical"==this.orientation?(this.ticks.template.locationX=1,e.horizontalCenter="left",n="right"):(this.ticks.template.locationY=1,e.horizontalCenter="right",i="bottom")):(this.labelsContainer.toBack(),"vertical"==this.orientation?(this.ticks.template.locationX=0,n="left"):(i="top",this.ticks.template.locationY=0)):"vertical"==this.orientation?n="center":i="middle",e.align=n,e.valign=i,this.validateLayout(),this.ticks.each((function(t){t.invalidate()})),this.invalidateDataItems()},enumerable:!0,configurable:!0}),e}(HB);QM.registeredClasses.FunnelSeries=zH,QM.registeredClasses.FunnelSeriesDataItem=WH;var qH=function(t){function e(){var e=t.call(this)||this;return e.className="PyramidSeriesDataItem",e.applyTheme(),e}return Qj(e,t),e}(WH),GH=function(t){function e(){var e=t.call(this)||this;return e.className="PyramidSeries",e.topWidth=rR(0),e.bottomWidth=rR(100),e.pyramidHeight=rR(100),e.valueIs="area",e.sliceLinks.template.width=0,e.sliceLinks.template.height=0,e.applyTheme(),e}return Qj(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},e.prototype.createDataItem=function(){return new qH},e.prototype.validate=function(){t.prototype.validate.call(this),this._nextWidth=void 0},e.prototype.getNextValue=function(t){var e=t.index,n=t.getWorkingValue("value");return e<this.dataItems.length-1&&(n=this.dataItems.getIndex(e+1).getWorkingValue("value")),0==n&&(n=1e-6),n},e.prototype.validateDataElements=function(){var e=this,n=this.slicesContainer.innerWidth,i=this.slicesContainer.innerHeight;if(this.dataItems.each((function(t){if(t.value>0){var r=t.getWorkingValue("value")/t.value,o=t.sliceLink;"vertical"==e.orientation?i-=o.pixelHeight*r:n-=o.pixelWidth*r}})),this._pyramidHeight=jN(this.pyramidHeight,i),this._pyramidWidth=jN(this.pyramidHeight,n),"vertical"==this.orientation){var r=(i-this._pyramidHeight)/2;this.slicesContainer.y=r,this.labelsContainer.y=r,this.ticksContainer.y=r}else{var o=(n-this._pyramidWidth)/2;this.slicesContainer.x=o,this.labelsContainer.x=o,this.ticksContainer.x=o}t.prototype.validateDataElements.call(this)},e.prototype.decorateSlice=function(t){var e=this.dataItem.values.value.absoluteSum;if(0!=e){var n=t.slice,i=t.sliceLink,r=t.label,o=t.tick;this.getNextValue(t);var s=Math.abs(t.getWorkingValue("value")),a=this._pyramidWidth,u=this._pyramidHeight,l=this.slicesContainer.innerWidth,h=this.slicesContainer.innerHeight,c=i.pixelWidth,p=i.pixelHeight;if(t.__disabled=!(0!=t.value||!this.ignoreZeroValues),"vertical"==this.orientation){var d=jN(this.topWidth,l);yR(this._nextWidth)||(this._nextWidth=d);var f=jN(this.bottomWidth,l),g=this._nextWidth,y=Math.atan2(u,d-f);0==(w=Math.tan(Math.PI/2-y))&&(w=1e-8);var m=void 0,v=void 0;if("area"==this.valueIs){var b=(d+f)/2*u*s/e,_=Math.abs(g*g-2*b*w);v=(m=(g-Math.sqrt(_))/w)>0?(2*b-m*g)/m:g}else v=g-(m=u*s/e)*w;n.height=m,n.width=l,n.bottomWidth=v,n.topWidth=g,i.topWidth=n.bottomWidth,i.bottomWidth=n.bottomWidth,n.y=this._nextY,r.x=this.alignLabels?0:l/2,r.y=n.pixelY+n.pixelHeight*o.locationY+n.dy,this._nextY+=n.pixelHeight+p*s/Math.max(Math.abs(t.value),1e-8),i.y=this._nextY-p,i.x=l/2}else{var w;d=jN(this.topWidth,h),yR(this._nextWidth)||(this._nextWidth=d),f=jN(this.bottomWidth,h),g=this._nextWidth,y=Math.atan2(a,d-f),0==(w=Math.tan(Math.PI/2-y))&&(w=1e-8);var x=void 0;v=void 0,v="area"==this.valueIs?(2*(b=(d+f)/2*a*s/e)-(x=(g-Math.sqrt(g*g-2*b*w))/w)*g)/x:g-(x=a*s/e)*w,n.width=x,n.height=h,n.bottomWidth=v,n.topWidth=g,i.topWidth=n.bottomWidth,i.bottomWidth=n.bottomWidth,n.x=this._nextY,r.y=this.alignLabels?this.labelsContainer.measuredHeight:h/2,r.x=n.pixelX+n.pixelWidth*o.locationX+n.dx,this._nextY+=n.pixelWidth+c*s/Math.max(Math.abs(t.value),1e-8),i.x=this._nextY-c,i.y=h/2}this._nextWidth=n.bottomWidth}},Object.defineProperty(e.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(t){this.setPercentProperty("topWidth",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pyramidHeight",{get:function(){return this.getPropertyValue("pyramidHeight")},set:function(t){this.setPercentProperty("pyramidHeight",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(t){this.setPercentProperty("bottomWidth",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueIs",{get:function(){return this.getPropertyValue("valueIs")},set:function(t){this.setPropertyValue("valueIs",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e}(zH);QM.registeredClasses.PyramidSeries=GH,QM.registeredClasses.PyramidSeriesDataItem=qH;var YH=function(t){function e(){var e=t.call(this)||this;return e.className="PictorialStackedSeriesDataItem",e.applyTheme(),e}return Qj(e,t),e}(qH),KH=function(t){function e(){var e=t.call(this)||this;return e.className="PictorialStackedSeries",e.topWidth=rR(100),e.bottomWidth=rR(100),e.valueIs="height",e.applyTheme(),e.startLocation=0,e.endLocation=1,e.align="center",e.valign="middle",e._maskSprite=e.slicesContainer.createChild(oL),e._maskSprite.visible=!1,e._maskSprite.zIndex=100,e._maskSprite.shouldClone=!1,e}return Qj(e,t),e.prototype.validateDataElements=function(){var e=this.slicesContainer.maxWidth,n=this.slicesContainer.maxHeight,i=this._maskSprite,r=i.measuredWidth/i.scale,o=i.measuredHeight/i.scale,s=AR(n/o,e/r);s==1/0&&(s=1),s=kR(.001,s);var a,u,l=this.startLocation,h=this.endLocation,c=AR(e,r*s),p=AR(n,o*s);i.scale=s,"vertical"==this.orientation?(this.topWidth=c+4,this.bottomWidth=c+4,this.pyramidHeight=p*(h-l),i.x=e/2,i.y=p/2):(this.topWidth=p+4,this.bottomWidth=p+4,this.pyramidHeight=c*(h-l),i.valign="middle",i.x=c/2,i.y=n/2),i.verticalCenter="middle",i.horizontalCenter="middle",t.prototype.validateDataElements.call(this),"vertical"==this.orientation?("bottom"==this.valign&&(a=n-p),"middle"==this.valign&&(a=(n-p)/2),"top"==this.valign&&(a=0),"left"==this.align&&(u=-(e-c)/2),"center"==this.align&&(u=0),"right"==this.align&&(u=(e-c)/2),this.slices.template.dy=l*p,this.alignLabels&&(this.slicesContainer.dx=u)):("bottom"==this.valign&&(a=(n-p)/2),"middle"==this.valign&&(a=0),"top"==this.valign&&(a=-(n-p)/2),"left"==this.align&&(u=0),"center"==this.align&&(u=(e-c)/2),"right"==this.align&&(u=e-c),this.slices.template.dx=l*c,this.alignLabels&&(this.slicesContainer.dy=a)),this.slicesContainer.x=u,this.labelsContainer.x=u,this.ticksContainer.x=u,this.slicesContainer.y=a,this.labelsContainer.y=a,this.ticksContainer.y=a,c>0&&p>0&&(this.slicesContainer.mask=i)},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),cR(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},e.prototype.createDataItem=function(){return new YH},Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},enumerable:!0,configurable:!0}),e.prototype.initSlice=function(e){t.prototype.initSlice.call(this,e);var n=e.states.getKey("hover");n&&(n.properties.expandDistance=0)},Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),e}(GH);QM.registeredClasses.PictorialStackedSeries=KH,QM.registeredClasses.PictorialStackedSeriesDataItem=YH;var XH=function(t){function e(){var e=t.call(this)||this;return e.className="ConeColumn",e}return Qj(e,t),e.prototype.createAssets=function(){this.coneColumn=this.createChild(vU),this.coneColumn.shouldClone=!1,this.column=this.coneColumn},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.coneColumn&&this.coneColumn.copyFrom(e.coneColumn)},e}(gH);QM.registeredClasses.ConeColumn=XH;var QH=function(t){function e(){var e=t.call(this)||this;return e.className="ConeSeriesDataItem",e.applyTheme(),e}return Qj(e,t),e}(yH),$H=function(t){function e(){var e=t.call(this)||this;return e.className="ConeSeries",e.applyTheme(),e}return Qj(e,t),e.prototype.createColumnTemplate=function(){return new XH},e.prototype.getMaskPath=function(){var t=0,e=0,n=this.columns.getIndex(0);if(n)return this.baseAxis==this.xAxis?e=n.coneColumn.innerWidth/2+1:t=n.coneColumn.innerHeight/2+1,FL({x:-t,y:0,width:this.xAxis.axisLength+t,height:this.yAxis.axisLength+e})},e.prototype.validateDataElementReal=function(e){if(t.prototype.validateDataElementReal.call(this,e),e.column){var n=e.column.coneColumn;n.fill=e.column.fill,n.orientation=this.baseAxis==this.yAxis?"horizontal":"vertical"}},e}(mH);QM.registeredClasses.ConeSeries=$H,QM.registeredClasses.ConeSeriesDataItem=QH;var ZH=function(t){function e(){var e=t.call(this)||this;return e.className="CurvedColumn",e}return Qj(e,t),e.prototype.createAssets=function(){this.curvedColumn=this.createChild(oL),this.curvedColumn.shouldClone=!1,this.setPropertyValue("tension",.7),this.width=rR(120),this.height=rR(120),this.column=this.curvedColumn},e.prototype.draw=function(){t.prototype.draw.call(this);var e,n=this.realWidth,i=this.realHeight,r=this.realX-this.pixelX,o=this.realY-this.pixelY,s=1,a=1;"vertical"==this.orientation?(s=this.tension,e=[{x:0,y:i+o},{x:n/2,y:o},{x:n,y:i+o}]):(a=this.tension,e=[{x:r,y:i=Math.abs(i)},{x:r+n,y:i/2},{x:r,y:0}]);var u=EL(e[0])+new nU(s,a).smooth(e);this.column.path=u},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.curvedColumn&&this.curvedColumn.copyFrom(e.curvedColumn)},Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),e}(gH);QM.registeredClasses.CurvedColumn=ZH;var JH=function(t){function e(){var e=t.call(this)||this;return e.className="CurvedColumnSeriesDataItem",e.applyTheme(),e}return Qj(e,t),e}(yH),tW=function(t){function e(){var e=t.call(this)||this;return e.className="CurvedColumnSeries",e.applyTheme(),e}return Qj(e,t),e.prototype.createColumnTemplate=function(){return new ZH},e.prototype.validateDataElementReal=function(e){t.prototype.validateDataElementReal.call(this,e);var n=e.column;(n=e.column)&&(e.column.curvedColumn.fill=e.column.fill,n.orientation=this.baseAxis==this.yAxis?"horizontal":"vertical")},e}(mH);QM.registeredClasses.CurvedColumnSeries=tW,QM.registeredClasses.CurvedColumnSeriesDataItem=JH;var eW=function(t){function e(){var e=t.call(this)||this;e.className="CircleBullet";var n=e.createChild(PL);return n.shouldClone=!1,n.radius=5,n.isMeasured=!1,e.circle=n,e.applyTheme(),e}return Qj(e,t),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.circle.copyFrom(e.circle)},e}(HU);QM.registeredClasses.CircleBullet=eW;var nW=function(t){function e(){var e=t.call(this)||this;return e.className="ErrorBullet",e.errorLine=e.createChild(oL),e.errorLine.shouldClone=!1,e.width=20,e.height=20,e.strokeOpacity=1,e.isDynamic=!0,e}return Qj(e,t),e.prototype.validatePosition=function(){t.prototype.validatePosition.call(this);var e=this.pixelWidth/2,n=this.pixelHeight/2;this.errorLine.path=EL({x:-e,y:-n})+kL({x:e,y:-n})+EL({x:0,y:-n})+kL({x:0,y:n})+EL({x:-e,y:n})+kL({x:e,y:n})},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.errorLine.copyFrom(e.errorLine)},e}(HU);QM.registeredClasses.ErrorBullet=nW;var iW=function(t){function e(){var e=t.call(this)||this;return e.className="NavigationBarDataItem",e.applyTheme(),e}return Qj(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this.properties.name},set:function(t){this.setProperty("name",t)},enumerable:!0,configurable:!0}),e}(vL),rW=function(t){function e(){var e=t.call(this)||this;e.className="NavigationBar";var n=new rV,i=new QL;i.valign="middle",i.paddingTop=8,i.paddingBottom=8,e.paddingBottom=2,e.links=new nN(i),e._disposers.push(new JM(e.links)),e._disposers.push(i),e._linksIterator=new WM(e.links,(function(){return e.links.create()})),e._linksIterator.createNewItems=!0;var r=new eU;r.direction="right",r.width=8,r.height=12,r.fill=n.getFor("alternativeBackground"),r.fillOpacity=.5,r.valign="middle",r.marginLeft=10,r.marginRight=10,e.separators=new nN(r),e._disposers.push(new JM(e.separators)),e._disposers.push(r);var o=new QL;return e.activeLink=o,o.copyFrom(i),o.valign="middle",o.fontWeight="bold",e.width=rR(100),e.layout="grid",e.dataFields.name="name",e.applyTheme(),e}return Qj(e,t),e.prototype.validateDataElements=function(){this.removeChildren(),this._linksIterator.reset(),t.prototype.validateDataElements.call(this)},e.prototype.validateDataElement=function(e){var n;if(t.prototype.validateDataElement.call(this,e),e.index<this.dataItems.length-1){(n=this._linksIterator.getLast()).parent=this;var i=this.separators.create();i.parent=this,i.valign="middle"}else(n=this.activeLink).events.copyFrom(this.links.template.events),n.hide(0),n.show(),n.parent=this;n.dataItem=e,n.text=e.name,n.validate()},e}(bL);QM.registeredClasses.NavigationBar=rW,QM.registeredClasses.NavigationBarDataItem=iW;var oW=function(t){function e(){var e=t.call(this)||this;e.point={x:0,y:0},e._stick="none",e.className="Cursor",e.width=rR(100),e.height=rR(100),e.shouldClone=!1,e.hide(0),e.trackable=!0,e.clickable=!0,e.isMeasured=!1;var n=xV();return e._disposers.push(n.body.events.on("down",e.handleCursorDown,e)),e._disposers.push(n.body.events.on("up",e.handleCursorUp,e)),e._disposers.push(n.body.events.on("track",e.handleCursorMove,e)),e.applyTheme(),e}return Qj(e,t),e.prototype.handleCursorMove=function(t){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&t.touch)){if(("zoom"==this._generalBehavior||"pan"==this._generalBehavior)&&this.downPoint||xV().isLocalElement(t.pointer,this.paper.svg,this.uid)){var e=aF(t.pointer.point,this);return"hard"==this._stick&&this._stickPoint&&(e=this._stickPoint),"soft"==this._stick&&this._stickPoint&&(this.fitsToBounds(e)||(e=this._stickPoint)),this._adapterO&&this._adapterO.apply("cursorPoint",e),this.triggerMove(e),e}this.isHidden&&this.isHiding||this.hide()}},e.prototype.hideReal=function(e){if("hard"!=this._stick&&"soft"!=this._stick||!this._stickPoint)return t.prototype.hideReal.call(this,e)},e.prototype.triggerMove=function(t,e,n){t.x=CR(t.x,1),t.y=CR(t.y,1),e&&(this._stick=e),"hard"!=e&&"soft"!=e||(this._stickPoint=t),this.triggerMoveReal(t,n)},e.prototype.triggerMoveReal=function(t,e){(this.point.x!=t.x||this.point.y!=t.y||e)&&(this.point=t,this.invalidatePosition(),this.fitsToBounds(t)?this.show(0):this.downPoint||this.hide(0),this.visible&&(this.getPositions(),this.dispatch("cursorpositionchanged")))},e.prototype.triggerDown=function(t){this.triggerDownReal(t)},e.prototype.triggerDownReal=function(t){switch(this._generalBehavior){case"zoom":this.dispatchImmediately("zoomstarted");break;case"select":this.dispatchImmediately("selectstarted");break;case"pan":this.dispatchImmediately("panstarted"),xV().setGlobalStyle(LV.grabbing)}},e.prototype.triggerUp=function(t){this.triggerUpReal(t)},e.prototype.triggerUpReal=function(t){uL.requestFrame(),this.updatePoint(this.upPoint);var e=xV();if(RR(this._upPointOrig,this._downPointOrig)>e.getHitOption(this.interactions,"hitTolerance")){switch(this._generalBehavior){case"zoom":this.dispatch("zoomended");break;case"select":this.dispatch("selectended");break;case"pan":this.dispatch("panended"),e.setGlobalStyle(LV.default)}this.downPoint=void 0,this.updateSelection()}},e.prototype.updateSelection=function(){},e.prototype.getPositions=function(){this.xPosition=this.point.x/this.innerWidth,this.yPosition=1-this.point.y/this.innerHeight},e.prototype.handleCursorDown=function(t){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&t.touch)&&xV().isLocalElement(t.pointer,this.paper.svg,this.uid)){YF();var e=aF(t.pointer.point,this);"hard"==this._stick&&this._stickPoint&&(e=this._stickPoint),this._adapterO&&this._adapterO.apply("cursorPoint",e),this.fitsToBounds(e)&&(this._downPointOrig={x:e.x,y:e.y},t.event.cancelable&&this.shouldPreventGestures(t.touch)&&this.fitsToBounds(e)&&t.event.preventDefault(),this.triggerMove(e),this.triggerDown(e))}},e.prototype.shouldPreventGestures=function(t){return!0},e.prototype.updatePoint=function(t){},e.prototype.handleCursorUp=function(t){if(this.interactionsEnabled&&(this.downPoint||xV().isLocalElement(t.pointer,this.paper.svg,this.uid))){var e=aF(t.pointer.point,this);this._adapterO&&this._adapterO.apply("cursorPoint",e),this.downPoint&&this.fitsToBounds(this.downPoint)&&("hard"==this._stick&&this._stickPoint&&(e=this._stickPoint),this._upPointOrig={x:e.x,y:e.y},this.triggerMove(e),this.triggerUp(e))}},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t,cR(this._chart.plotContainer)&&xV().lockElement(this._chart.plotContainer.interactions)},enumerable:!0,configurable:!0}),e}(aL);QM.registeredClasses.Cursor=oW;var sW=function(t){function e(){var e=t.call(this)||this;e._lineX=new fM,e._lineY=new fM,e._xAxis=new fM,e._yAxis=new fM,e._snapToDisposers=[],e.className="XYCursor",e.behavior="zoomX",e.maxPanOut=.1;var n=new rV,i=e.createChild(oL);i.shouldClone=!1,i.fillOpacity=.2,i.fill=n.getFor("alternativeBackground"),i.isMeasured=!1,i.visible=!1,i.interactionsEnabled=!1,e.selection=i,e._disposers.push(e.selection);var r=e.createChild(oL);r.shouldClone=!1,r.stroke=n.getFor("grid"),r.fill=bN(),r.strokeDasharray="3,3",r.isMeasured=!1,r.strokeOpacity=.4,r.interactionsEnabled=!1,r.y=0,e.lineX=r,e._disposers.push(e.lineX);var o=e.createChild(oL);return o.shouldClone=!1,o.stroke=n.getFor("grid"),o.fill=bN(),o.strokeDasharray="3,3",o.isMeasured=!1,o.strokeOpacity=.4,o.interactionsEnabled=!1,o.x=0,e.lineY=o,e._disposers.push(e.lineY),e.events.on("sizechanged",e.updateSize,e,!1),e._disposers.push(e._lineX),e._disposers.push(e._lineY),e._disposers.push(e._xAxis),e._disposers.push(e._yAxis),e.mask=e,e.hideSeriesTooltipsOnSelection=!0,e.applyTheme(),e}return Qj(e,t),e.prototype.updateSize=function(){this.lineX&&(this.lineX.path=EL({x:0,y:0})+kL({x:0,y:this.innerHeight})),this.lineY&&(this.lineY.path=EL({x:0,y:0})+kL({x:this.innerWidth,y:0}))},e.prototype.updateSelection=function(){if(this._usesSelection){var t=this.downPoint,e=this.behavior;if(t){var n=this.point;this.lineX&&(n.x=this.lineX.pixelX),this.lineY&&(n.y=this.lineY.pixelY);var i=this.selection,r=Math.min(n.x,t.x),o=Math.min(n.y,t.y),s=CR(Math.abs(t.x-n.x),this._positionPrecision),a=CR(Math.abs(t.y-n.y),this._positionPrecision);switch(e){case"zoomX":o=0,a=this.pixelHeight;break;case"zoomY":r=0,s=this.pixelWidth;break;case"selectX":o=0,a=this.pixelHeight;break;case"selectY":r=0,s=this.pixelWidth}i.x=r,i.y=o,i.path=NL(s,a),i.validatePosition()}else"select"!=this._generalBehavior&&this.selection.hide()}},e.prototype.fixPoint=function(t){return t.x=Math.max(0,t.x),t.y=Math.max(0,t.y),t.x=Math.min(this.pixelWidth,t.x),t.y=Math.min(this.pixelHeight,t.y),t},e.prototype.triggerMoveReal=function(e,n){t.prototype.triggerMoveReal.call(this,e,n);var i=this.snapToSeries;if(i&&!this.downPoint)if(i instanceof _B)i.isHidden&&this.updateLinePositions(e);else{var r=!0;tM(i,(function(t){t.isHidden||(r=!1)})),r&&this.updateLinePositions(e)}else this.updateLinePositions(e);this.downPoint&&RR(this.downPoint,e)>3&&"pan"==this._generalBehavior&&(this.getPanningRanges(),this.dispatch("panning"))},e.prototype.updateLinePositions=function(t){t=this.fixPoint(this.point),this.lineX&&this.lineX.visible&&!this.xAxis&&(this.lineX.x=t.x),this.lineY&&this.lineY.visible&&!this.yAxis&&(this.lineY.y=t.y),this.updateSelection()},e.prototype.triggerDownReal=function(e){if(this.visible&&!this.isHiding)if("select"==this._generalBehavior&&(this.selection.parent=this.parent),this.fitsToBounds(e)){this.downPoint={x:e.x,y:e.y},this.updatePoint(e),this.point.x=this.downPoint.x,this.point.y=this.downPoint.y;var n=this.selection,i=this.downPoint.y;this._usesSelection&&(n.x=this.downPoint.x,n.y=i,n.path="",n.show()),t.prototype.triggerDownReal.call(this,e)}else this.downPoint=void 0;else this.downPoint=void 0},e.prototype.updatePoint=function(t){this.lineX&&(t.x=this.lineX.pixelX),this.lineY&&(t.y=this.lineY.pixelY)},e.prototype.triggerUpReal=function(e){this.hasMoved()?this.downPoint&&(this.upPoint=e,this.updatePoint(this.upPoint),"pan"!=this._generalBehavior&&this.getRanges(),"select"!=this._generalBehavior&&this.selection.hide(),t.prototype.triggerUpReal.call(this,e)):("select"!=this._generalBehavior?this.selection.hide(0):(this.xRange=void 0,this.yRange=void 0,this.dispatchImmediately("selectended")),"pan"==this._generalBehavior&&xV().setGlobalStyle(LV.default),this.dispatchImmediately("behaviorcanceled")),this.downPoint=void 0,this.dispatch("cursorpositionchanged")},e.prototype.hasMoved=function(){var t,e,n;return"zoomX"==this.behavior||"panX"==this.behavior?(n=this._downPointOrig,t=(e=this._upPointOrig)?(n||(n={x:0,y:0}),Math.abs(e.x-n.x)):0):t="zoomY"==this.behavior||"panY"==this.behavior?function(t,e){return t?(e||(e={x:0,y:0}),Math.abs(t.y-e.y)):0}(this._upPointOrig,this._downPointOrig):RR(this._upPointOrig,this._downPointOrig),t>xV().getHitOption(this.interactions,"hitTolerance")},e.prototype.getPanningRanges=function(){var t=CR(this.downPoint.x/this.innerWidth,5),e=1-CR(this.downPoint.y/this.innerHeight,5),n=t-CR(this.point.x/this.innerWidth,5),i=e-(1-CR(this.point.y/this.innerHeight,5));this.xRange={start:n,end:1+n},this.yRange={start:i,end:1+i},"panX"==this.behavior&&(this.yRange.start=0,this.yRange.end=1),"panY"==this.behavior&&(this.xRange.start=0,this.xRange.end=1)},e.prototype.getRanges=function(){this.lineX&&(this.upPoint.x=this.lineX.pixelX),this.lineY&&(this.upPoint.y=this.lineY.pixelY);var t=CR(this.downPoint.x/this.innerWidth,5),e=CR(this.upPoint.x/this.innerWidth,5),n=1-CR(this.downPoint.y/this.innerHeight,5),i=1-CR(this.upPoint.y/this.innerHeight,5);this.xRange={start:AR(t,e),end:kR(t,e)},this.yRange={start:AR(n,i),end:kR(n,i)}},Object.defineProperty(e.prototype,"behavior",{get:function(){return this.getPropertyValue("behavior")},set:function(t){this.setPropertyValue("behavior",t,!0),this._usesSelection=!1,-1!=t.indexOf("zoom")&&(this._generalBehavior="zoom",this._usesSelection=!0),-1!=t.indexOf("select")&&(this._generalBehavior="select",this._usesSelection=!0),-1!=t.indexOf("pan")&&(this._generalBehavior="pan",this._usesSelection=!1)},enumerable:!0,configurable:!0}),e.prototype.shouldPreventGestures=function(t){return!(this.interactions.isTouchProtected&&t||"none"==this.behavior)},Object.defineProperty(e.prototype,"fullWidthLineX",{get:function(){return this.getPropertyValue("fullWidthLineX")},set:function(t){this.setPropertyValue("fullWidthLineX",t),t||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullWidthLineY",{get:function(){return this.getPropertyValue("fullWidthLineY")},set:function(t){this.setPropertyValue("fullWidthLineY",t),t||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideSeriesTooltipsOnSelection",{get:function(){return this.getPropertyValue("hideSeriesTooltipsOnSelection")},set:function(t){this.setPropertyValue("hideSeriesTooltipsOnSelection",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTooltipDistance",{get:function(){return this.getPropertyValue("maxTooltipDistance")},set:function(t){this.setPropertyValue("maxTooltipDistance",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPanOut",{get:function(){return this.getPropertyValue("maxPanOut")},set:function(t){this.setPropertyValue("maxPanOut",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xAxis",{get:function(){return this._xAxis.get()},set:function(t){var e=this;this._xAxis.get()!=t&&this._xAxis.set(t,new dM([t.tooltip.events.on("positionchanged",this.handleXTooltipPosition,this,!1),t.events.on("rangechangestarted",(function(t){e.hide(0),e.preventShow=!0}),void 0,!1),t.events.on("rangechangeended",(function(t){e.preventShow=!1,e.hide(0),e.dispatch("cursorpositionchanged")}),void 0,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxis",{get:function(){return this._yAxis.get()},set:function(t){var e=this;this._yAxis.get()!=t&&this._yAxis.set(t,new dM([t.tooltip.events.on("positionchanged",this.handleYTooltipPosition,this,!1),t.events.on("rangechangestarted",(function(t){e.hide(0),e.__disabled=!0}),void 0,!1),t.events.on("rangechangeended",(function(t){e.__disabled=!1,e.hide(0),e.dispatch("cursorpositionchanged")}),void 0,!1)]))},enumerable:!0,configurable:!0}),e.prototype.handleXTooltipPosition=function(t){var e=this.xAxis.tooltip,n=eF({x:e.pixelX,y:e.pixelY},this),i=n.x;if(n.y=1,this.lineX&&(this.lineX.x=i,this.fitsToBounds(n)||this.hide()),this.xAxis&&this.fullWidthLineX){var r=this.xAxis.currentItemStartPoint,o=this.xAxis.currentItemEndPoint;if(r&&o){this.lineX.x=i;var s=o.x-r.x;this.lineX.path=NL(s,this.innerHeight,-s/2)}}},e.prototype.handleYTooltipPosition=function(t){var e=this.yAxis.tooltip,n=eF({x:e.pixelX,y:e.pixelY},this),i=n.y;if(n.x=1,this.lineY&&(this.lineY.y=i,this.fitsToBounds(n)||this.hide()),this.yAxis&&this.fullWidthLineY){var r=this.yAxis.currentItemStartPoint,o=this.yAxis.currentItemEndPoint;if(r&&o){this.lineY.y=i;var s=o.y-r.y;this.lineY.path=NL(this.innerWidth,s,0,-s/2)}}},Object.defineProperty(e.prototype,"lineX",{get:function(){return this._lineX.get()},set:function(t){t?(t.setElement(this.paper.add("path")),this._lineX.set(t,t.events.on("positionchanged",this.updateSelection,this,!1)),t.interactionsEnabled=!1,t.parent=this):this._lineX.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineY",{get:function(){return this._lineY.get()},set:function(t){t?(t.setElement(this.paper.add("path")),this._lineY.set(t,t.events.on("positionchanged",this.updateSelection,this,!1)),t.parent=this,t.interactionsEnabled=!1):this._lineY.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection},set:function(t){this._selection=t,t&&(t.element=this.paper.add("path"),t.parent=this)},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){var n=this;if(e&&(cR(e.xAxis)&&gR(e.xAxis)&&(this.map.hasKey(e.xAxis)?e.xAxis=this.map.getKey(e.xAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+e.xAxis+'" found for `xAxis`'),delete e.xAxis)),cR(e.yAxis)&&gR(e.yAxis)&&(this.map.hasKey(e.yAxis)?e.yAxis=this.map.getKey(e.yAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+e.yAxis+'" found for `yAxis`'),delete e.yAxis)),cR(e.snapToSeries))){var i=vR(e.snapToSeries)?e.snapToSeries:[e.snapToSeries],r=!1;tM(i,(function(t,e){gR(t)&&(n.map.hasKey(t)?i[e]=n.map.getKey(t):(n.processingErrors.push('[XYCursor] No series with id "'+t+'" found for `series`'),r=!0))})),r?delete e.snapToSeries:e.snapToSeries=i}t.prototype.processConfig.call(this,e)},Object.defineProperty(e.prototype,"snapToSeries",{get:function(){return this.getPropertyValue("snapToSeries")},set:function(t){var e=this;this.setPropertyValue("snapToSeries",t)&&(t instanceof _B&&(t=[t]),this._snapToDisposers&&tM(this._snapToDisposers,(function(t){t.dispose()})),this._snapToDisposers=[],t&&tM(t,(function(t){e._snapToDisposers.push(t.events.on("tooltipshownat",(function(){e.handleSnap(t)}),void 0,!1))})))},enumerable:!0,configurable:!0}),e.prototype.handleSnap=function(t){if(!this.downPoint){var e=t.getTooltipX()+t.xAxis.pixelX,n=t.getTooltipY()+t.yAxis.pixelY;this.xAxis&&this.xAxis.renderer.opposite&&(n-=this.pixelHeight),this.point={x:e,y:n},this.getPositions();var i=e,r=n;e-=this.pixelWidth,this.yAxis&&this.yAxis.renderer.opposite&&(e+=this.pixelWidth);var o=t.tooltip,s=o.animationDuration,a=o.animationEasing,u=t.xAxis,l=t.yAxis;u instanceof cB&&!(u instanceof fB)&&l instanceof cB&&!(l instanceof fB)?(t.yAxis.showTooltipAtPosition(this.yPosition),t.xAxis.showTooltipAtPosition(this.xPosition)):(t.baseAxis==t.xAxis&&t.yAxis.showTooltipAtPosition(this.yPosition),t.baseAxis==t.yAxis&&t.xAxis.showTooltipAtPosition(this.xPosition)),this.lineX.animate([{property:"y",to:n}],s,a),this.lineY.animate([{property:"x",to:e}],s,a),this.xAxis||this.lineX.animate([{property:"x",to:i}],s,a),this.yAxis||this.lineY.animate([{property:"y",to:r}],s,a)}},e.prototype.dispose=function(){this.hide(0),t.prototype.dispose.call(this)},e}(oW);QM.registeredClasses.XYCursor=sW;var aW=function(t){function e(){var e=t.call(this)||this;return e.className="RadarCursor",e.radius=rR(100),e.innerRadius=rR(0),e.applyTheme(),e.mask=void 0,e}return Qj(e,t),e.prototype.fitsToBounds=function(t){var e=RR(t);return e<this.truePixelRadius+1&&e>this.pixelInnerRadius-1},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),e.prototype.triggerMoveReal=function(e,n){this.xAxis&&(!this.xAxis||this.xAxis.cursorTooltipEnabled&&!this.xAxis.tooltip.disabled)||this.updateLineX(this.point),this.yAxis&&(!this.yAxis||this.yAxis.cursorTooltipEnabled&&!this.yAxis.tooltip.disabled)||this.updateLineY(this.point),this.updateSelection(),t.prototype.triggerMoveReal.call(this,e,n)},e.prototype.updateLineX=function(t){var e=this.pixelRadius,n=this.startAngle,i=this.endAngle,r=this.pixelInnerRadius;if(e>0&&yR(n)&&yR(i)&&yR(r)){var o=YR(VR(t),n,i),s=void 0;if(this.lineX&&this.lineX.visible){if(this.lineX.moveTo({x:0,y:0}),this.xAxis&&this.fullWidthLineX){var a=this.xAxis.currentItemStartPoint,u=this.xAxis.currentItemEndPoint;if(a&&u){var l=YR(VR(a),n,i),h=YR(VR(u),n,i)-l;n<i?h<0&&(h+=360):h>0&&(h-=360),s=EL({x:r*ER(o-=h/2),y:r*SR(o)})+kL({x:e*ER(o),y:e*SR(o)})+jL(o,h,e)+kL({x:r*ER(o+h),y:r*SR(o+h)})+jL(o+h,-h,r)}}s||(s=EL({x:r*ER(o),y:r*SR(o)})+kL({x:e*ER(o),y:e*SR(o)})),this.lineX.path=s}}},e.prototype.updateLineY=function(t){if(this.lineY&&this.lineY.visible){var e=this.startAngle,n=this.endAngle,i=this.truePixelRadius,r=OR(RR(t),0,this.truePixelRadius);if(yR(r)&&yR(e)){this.lineY.moveTo({x:0,y:0});var o=void 0,s=n-e;if(this.yAxis&&this.fullWidthLineY){var a=this.yAxis.currentItemStartPoint,u=this.yAxis.currentItemEndPoint;if(a&&u){var l=OR(RR(a),0,i);o=EL({x:(r=OR(RR(u),0,i))*ER(e),y:r*SR(e)})+jL(e,s,r),o+=EL({x:l*ER(n),y:l*SR(n)})+jL(n,-s,l)}}o||(o=EL({x:r*ER(e),y:r*SR(e)})+jL(e,n-e,r)),this.lineY.path=o}}},e.prototype.updateSelection=function(){if(this._usesSelection){var t=this.downPoint;if(t){var e=this.point,n=this.pixelRadius,i=this.truePixelRadius,r=this.pixelInnerRadius,o=Math.min(this.startAngle,this.endAngle),s=Math.max(this.startAngle,this.endAngle),a=YR(VR(t),o,s),u=YR(VR(e),o,s),l=RR(t);if(l<i){var h=OR(RR(e),0,i);this._prevAngle=u;var c=EL({x:0,y:0}),p=SR(a),d=ER(a),f=SR(u),g=ER(u),y=this.behavior;"zoomX"==y||"selectX"==y?c+=kL({x:n*d,y:n*p})+jL(a,u-a,n)+kL({x:r*g,y:r*f})+jL(u,a-u,r):"zoomY"==y||"selectY"==y?c=EL({x:h*ER(o),y:h*SR(o)})+jL(o,s-o,h)+kL({x:l*ER(s),y:l*SR(s)})+jL(s,o-s,l)+" Z":"zoomXY"==y&&(c=EL({x:h*ER(a),y:h*SR(a)})+jL(a,u-a,h)+kL({x:l*ER(u),y:l*SR(u)})+jL(u,a-u,l)+" Z"),this.selection.path=c}this.selection.moveTo({x:0,y:0})}}},e.prototype.getPositions=function(){if(this.chart){var t=this.pixelInnerRadius,e=this.truePixelRadius-t,n=this.startAngle,i=this.endAngle,r=YR(VR(this.point),n,i);this.xPosition=(r-n)/(i-n),this.yPosition=OR((RR(this.point)-t)/e,0,1)}},e.prototype.updatePoint=function(t){},e.prototype.handleXTooltipPosition=function(t){if(this.xAxis.cursorTooltipEnabled){var e=this.xAxis.tooltip;this.updateLineX(eF({x:e.pixelX,y:e.pixelY},this))}},e.prototype.handleYTooltipPosition=function(t){if(this.yAxis.cursorTooltipEnabled){var e=this.yAxis.tooltip;this.updateLineY(eF({x:e.pixelX,y:e.pixelY},this))}},e.prototype.updateLinePositions=function(t){},e.prototype.getRanges=function(){var t=this.downPoint;if(t){var e=this.upPoint;if(this.chart){var n=this.pixelRadius,i=this.startAngle,r=this.endAngle,o=YR(VR(t),this.startAngle,this.endAngle),s=YR(VR(e),this.startAngle,this.endAngle),a=OR(RR(t),0,n),u=OR(RR(e),0,n),l=0,h=1,c=0,p=1,d=this.behavior;if("zoomX"==d||"selectX"==d||"zoomXY"==d||"selectXY"==d){var f=r-i;l=CR((o-i)/f,5),h=CR((s-i)/f,5)}"zoomY"!=d&&"selectY"!=d&&"zoomXY"!=d&&"selectXY"!=d||(c=CR(a/n,5),p=CR(u/n,5)),this.xRange={start:Math.min(l,h),end:Math.max(l,h)},this.yRange={start:Math.min(c,p),end:Math.max(c,p)},"selectX"==this.behavior||"selectY"==this.behavior||"selectXY"==this.behavior||this.selection.hide()}}},e.prototype.updateSize=function(){},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return RN(this.radius,this.truePixelRadius)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"truePixelRadius",{get:function(){return jN(rR(100),AR(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){var t=this.innerRadius;return t instanceof iR&&(t=rR(100*t.value*this.chart.innerRadiusModifyer)),RN(t,this.truePixelRadius)||0},enumerable:!0,configurable:!0}),e.prototype.fixPoint=function(t){return t},e}(sW);QM.registeredClasses.RadarCursor=aW;var uW=function(t){$M(t,"SpriteState")&&(t.transitionDuration=400),$M(t,"Component")&&(t.rangeChangeDuration=500,t.interpolationDuration=500,t.sequencedInterpolation=!1,$M(t,"SankeyDiagram")&&(t.sequencedInterpolation=!0),$M(t,"FunnelSeries")&&(t.sequencedInterpolation=!0)),$M(t,"Chart")&&(t.defaultState.transitionDuration=2e3,t.hiddenState.transitionDuration=1e3),$M(t,"Tooltip")&&(t.animationDuration=400,t.defaultState.transitionDuration=400,t.hiddenState.transitionDuration=400),$M(t,"Scrollbar")&&(t.animationDuration=500),$M(t,"Series")&&(t.defaultState.transitionDuration=1e3,t.hiddenState.transitionDuration=700,t.hiddenState.properties.opacity=1,t.showOnInit=!0),$M(t,"MapSeries")&&(t.hiddenState.properties.opacity=0),$M(t,"PercentSeries")&&(t.hiddenState.properties.opacity=0),$M(t,"FunnelSlice")&&(t.defaultState.transitionDuration=800,t.hiddenState.transitionDuration=1e3,t.hiddenState.properties.opacity=1),$M(t,"Slice")&&(t.defaultState.transitionDuration=700,t.hiddenState.transitionDuration=1e3,t.hiddenState.properties.opacity=1),$M(t,"Preloader")&&(t.hiddenState.transitionDuration=2e3),$M(t,"Column")&&(t.defaultState.transitionDuration=700,t.hiddenState.transitionDuration=1e3,t.hiddenState.properties.opacity=1),$M(t,"Column3D")&&(t.hiddenState.properties.opacity=0)};class lW{}class hW{}class cW{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),i=n.toLowerCase(),r=t.slice(e+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const i=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof cW?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new cW;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof cW?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...n),this.headers.set(e,i);break;case"d":const r=t.value;if(r){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===r.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class pW{encodeKey(t){return dW(t)}encodeValue(t){return dW(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function dW(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class fW{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new pW,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const i=t.indexOf("="),[r,o]=-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],s=n.get(r)||[];s.push(o),n.set(r,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new fW({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function gW(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function yW(t){return"undefined"!=typeof Blob&&t instanceof Blob}function mW(t){return"undefined"!=typeof FormData&&t instanceof FormData}class vW{constructor(t,e,n,i){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new cW),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new fW,this.urlWithParams=e}serializeBody(){return null===this.body?null:gW(this.body)||yW(this.body)||mW(this.body)||"string"==typeof this.body?this.body:this.body instanceof fW?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||mW(this.body)?null:yW(this.body)?this.body.type||null:gW(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof fW?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,i=t.responseType||this.responseType,r=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new vW(e,n,r,{params:u,headers:a,reportProgress:s,responseType:i,withCredentials:o})}}var bW=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class _W{constructor(t,e=200,n="OK"){this.headers=t.headers||new cW,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class wW extends _W{constructor(t={}){super(t),this.type=bW.ResponseHeader}clone(t={}){return new wW({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class xW extends _W{constructor(t={}){super(t),this.type=bW.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new xW({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class PW extends _W{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function CW(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let IW=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let i;if(t instanceof vW)i=t;else{let r=void 0;r=n.headers instanceof cW?n.headers:new cW(n.headers);let o=void 0;n.params&&(o=n.params instanceof fW?n.params:new fW({fromObject:n.params})),i=new vW(t,e,void 0!==n.body?n.body:null,{headers:r,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=xl(i).pipe(ah(t=>this.handler.handle(t)));if(t instanceof vW||"events"===n.observe)return r;const o=r.pipe(Ml(t=>t instanceof xW));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return o.pipe(O(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(O(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(O(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(O(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new fW).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,CW(n,e))}post(t,e,n={}){return this.request("POST",t,CW(n,e))}put(t,e,n={}){return this.request("PUT",t,CW(n,e))}}return t.\u0275fac=function(e){return new(e||t)(Yt(lW))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class OW{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const SW=new Nt("HTTP_INTERCEPTORS");let TW=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const EW=/^\)\]\}',?\n/;class kW{}let AW=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),DW=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new v(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const i=t.serializeBody();let r=null;const o=()=>{if(null!==r)return r;const e=1223===n.status?204:n.status,i=n.statusText||"OK",o=new cW(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return r=new wW({headers:o,status:e,statusText:i,url:s}),r},s=()=>{let{headers:i,status:r,statusText:s,url:a}=o(),u=null;204!==r&&(u=void 0===n.response?n.responseText:n.response),0===r&&(r=u?200:0);let l=r>=200&&r<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(EW,"");try{u=""!==u?JSON.parse(u):null}catch(h){u=t,l&&(l=!1,u={error:h,text:u})}}l?(e.next(new xW({body:u,headers:i,status:r,statusText:s,url:a||void 0})),e.complete()):e.error(new PW({error:u,headers:i,status:r,statusText:s,url:a||void 0}))},a=t=>{const{url:i}=o(),r=new PW({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:i||void 0});e.error(r)};let u=!1;const l=i=>{u||(e.next(o()),u=!0);let r={type:bW.DownloadProgress,loaded:i.loaded};i.lengthComputable&&(r.total=i.total),"text"===t.responseType&&n.responseText&&(r.partialText=n.responseText),e.next(r)},h=t=>{let n={type:bW.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",l),null!==i&&n.upload&&n.upload.addEventListener("progress",h)),n.send(i),e.next({type:bW.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",l),null!==i&&n.upload&&n.upload.removeEventListener("progress",h)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(Yt(kW))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const jW=new Nt("XSRF_COOKIE_NAME"),RW=new Nt("XSRF_HEADER_NAME");class MW{}let NW=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=al(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(Yt(fu),Yt(wa),Yt(jW))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),FW=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const i=this.tokenService.getToken();return null===i||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,i)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(Yt(MW),Yt(RW))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),VW=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(SW,[]);this.chain=t.reduceRight((t,e)=>new OW(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(Yt(hW),Yt(co))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),LW=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:FW,useClass:TW}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:jW,useValue:e.cookieName}:[],e.headerName?{provide:RW,useValue:e.headerName}:[]]}}}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[FW,{provide:SW,useExisting:FW,multi:!0},{provide:MW,useClass:NW},{provide:jW,useValue:"XSRF-TOKEN"},{provide:RW,useValue:"X-XSRF-TOKEN"}]}),t})(),UW=(()=>{class t{}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[IW,{provide:lW,useClass:VW},DW,{provide:hW,useExisting:DW},AW,{provide:kW,useExisting:AW}],imports:[[LW.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),BW=(()=>{class t{constructor(t){this.http=t}getData(){return this.http.get("https://api.covidtracking.com/v1/us/daily.json")}}return t.\u0275fac=function(e){return new(e||t)(Yt(IW))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),HW=(()=>{class t{constructor(t,e){this.zone=t,this.service=e,this.items=[],this.total_url="https://api.covidtracking.com/v1/us/daily.json"}ngOnInit(){console.log(this.total_url),this.service.getData().subscribe(t=>{t.forEach(t=>{let e=t.date.toString(),n=e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,8);this.items.push({date:n,value:t.positive})}),this.items.reverse(),this.chart.data=this.items,console.log(this.chart.data)})}onChange(){console.log(this.status),this.service.getData().subscribe(t=>{this.items=[],t.forEach(t=>{let e=t.date.toString(),n=e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,8);this.items.push({date:n,value:t[this.status]})}),this.items.reverse(),this.chart.data=this.items})}browserOnly(t){this.zone.runOutsideAngular(()=>{t()})}ngAfterViewInit(){this.browserOnly(()=>{VU(uW);let t=FU("chartdiv",PB);this.chart=t,t.dateFormatter.inputDateFormat="yyyy-MM-dd";let e=t.xAxes.push(new fB),n=(t.yAxes.push(new cB),t.series.push(new TB));n.dataFields.valueY="value",n.dataFields.dateX="date",n.tooltipText="{value}",n.strokeWidth=1,n.minBulletDistance=10,n.tooltip.background.cornerRadius=20,n.tooltip.background.strokeOpacity=0,n.tooltip.pointerOrientation="vertical",n.tooltip.label.minWidth=40,n.tooltip.label.minHeight=40,n.tooltip.label.textAlign="middle",n.tooltip.label.textValign="middle";let i=n.bullets.push(new eW);i.circle.strokeWidth=2,i.circle.radius=4,i.circle.fill=bN("#fff"),i.states.create("hover").properties.scale=1.3,t.cursor=new sW,t.cursor.behavior="panXY",t.cursor.xAxis=e,t.cursor.snapToSeries=n,t.scrollbarY=new KL,t.scrollbarY.parent=t.leftAxesContainer,t.scrollbarY.toBack();let r=new wB;r.series.push(n),t.scrollbarX=r,e.start=.79,e.keepSelection=!0})}ngOnDestroy(){this.browserOnly(()=>{this.chart&&this.chart.dispose()})}}return t.\u0275fac=function(e){return new(e||t)(Ao(Na),Ao(BW))},t.\u0275cmp=he({type:t,selectors:[["app-chart"]],decls:15,vars:1,consts:[["name","status","id","status",3,"ngModel","change","ngModelChange"],["value","positive"],["value","death"],["value","recovered"],["id","chartdiv",2,"width","100%","height","500px"]],template:function(t,e){1&t&&(Mo(0,"h1"),Jo(1,"The Trend of National Covid Cases"),No(),Fo(2,"br"),Fo(3,"br"),Mo(4,"p"),Mo(5,"strong"),Jo(6,"Status Selection"),No(),No(),Mo(7,"select",0),Bo("change",(function(){return e.onChange()}))("ngModelChange",(function(t){return e.status=t})),Mo(8,"option",1),Jo(9,"Total Positive"),No(),Mo(10,"option",2),Jo(11,"Total Death"),No(),Mo(12,"option",3),Jo(13,"Total Recovered"),No(),No(),Fo(14,"div",4)),2&t&&(Mi(7),jo("ngModel",e.status))},directives:[hf,Bd,Lf,cf,gf],styles:[""]}),t})(),WW=(()=>{class t{constructor(t){this.http=t}getData(){return this.http.get("https://api.covidtracking.com/v1/states/current.json")}}return t.\u0275fac=function(e){return new(e||t)(Yt(IW))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),zW=(()=>{class t{constructor(t,e){this.zone=t,this.service=e,this.states_url="https://gist.githubusercontent.com/mshafrir/2646763/raw/8b0dbb93521f5d6889502305335104218454c2bf/states_hash.json",this.data_url="https://api.covidtracking.com/v1/states/current.json",this.states=["IL","NY","IA","CA"],this.inputState="",this.status="positive",this.buttonType="add"}ngOnInit(){let t=[];this.service.getData().subscribe(e=>{e.forEach(e=>{let n=e.state.toUpperCase();if(this.states.includes(n)){let i={state:n,value:e[this.status],color:this.chart.colors.next()};t.push(i)}}),this.chart.data=t,console.log(this.chart.data)})}add(){this.inputState=this.inputState.toUpperCase();let t=this.chart.data;this.service.getData().subscribe(e=>{this.states.includes(this.inputState)||e.forEach(e=>{let n=e.state.toUpperCase();if(n.includes(this.inputState)){let i={state:n,value:e[this.status],color:this.chart.colors.next()};t.push(i),this.states.push(n)}}),this.chart.data=t})}deleteState(){const t=this.states.indexOf(this.inputState);-1!==t&&this.states.splice(t,1)}delete(){this.deleteState(),console.log(this.states);let t=[];this.service.getData().subscribe(e=>{e.forEach(e=>{let n=e.state.toUpperCase();if(this.states.includes(n)){let i={state:n,value:e[this.status],color:this.chart.colors.next()};t.push(i)}}),this.chart.data=t,console.log(this.chart.data)})}onSubmit(t){"add"===t&&this.add(),"delete"===t&&this.delete()}statusChange(){let t=[];this.service.getData().subscribe(e=>{e.forEach(e=>{let n=e.state.toUpperCase();if(this.states.includes(n)){let i={state:n,value:e[this.status],color:this.chart.colors.next()};t.push(i)}}),this.chart.data=t,console.log(this.chart.data)})}browserOnly(t){this.zone.runOutsideAngular(()=>{t()})}ngAfterViewInit(){this.browserOnly(()=>{VU(uW);let t=FU("bardiv",SH);this.chart=t;let e=t.yAxes.push(new vB);e.dataFields.category="state",e.numberFormatter.numberFormat="#",e.renderer.inversed=!0,t.xAxes.push(new cB);let n=t.series.push(new OH);n.dataFields.valueX="value",n.dataFields.categoryY="state",n.name="value",n.columns.template.propertyFields.fill="color",n.columns.template.tooltipText="{valueX}",n.columns.template.column3D.stroke=bN("#fff"),n.columns.template.column3D.strokeOpacity=.2})}ngOnDestroy(){this.browserOnly(()=>{this.chart&&this.chart.dispose()})}}return t.\u0275fac=function(e){return new(e||t)(Ao(Na),Ao(WW))},t.\u0275cmp=he({type:t,selectors:[["app-bar"]],decls:39,vars:2,consts:[[1,"container-fluid",2,"text-align","center"],["id","bardrop",2,"text-align","left"],["name","status","id","status",3,"ngModel","change","ngModelChange"],["value","positive"],["value","death"],["value","recovered"],["id","bardiv",2,"width","100%","height","500px"],[1,"add-delete",2,"text-align","left"],[3,"ngSubmit"],["myForm","ngForm"],["id","add-group"],["type","text","name","inputState","value","",1,"center-block4",3,"ngModel","ngModelChange"],["type","submit",1,"add",3,"click"],["type","button",1,"delete",3,"click"]],template:function(t,e){1&t&&(Mo(0,"div",0),Mo(1,"div"),Mo(2,"h1"),Jo(3,"States Covid Status Comparison"),No(),No(),Mo(4,"div",1),Mo(5,"p"),Mo(6,"strong"),Jo(7,"Status Selection"),No(),No(),Mo(8,"select",2),Bo("change",(function(){return e.statusChange()}))("ngModelChange",(function(t){return e.status=t})),Mo(9,"option",3),Jo(10,"Total Positive"),No(),Mo(11,"option",4),Jo(12,"Total Death"),No(),Mo(13,"option",5),Jo(14,"Total Recovered"),No(),No(),No(),Fo(15,"div",6),Fo(16,"br"),Mo(17,"div",7),Mo(18,"div"),Mo(19,"h3"),Mo(20,"strong"),Jo(21,"Add and Delete States"),No(),No(),Jo(22,"(plese enter the abbreviations of the state ex. CA)"),No(),Fo(23,"br"),Mo(24,"form",8,9),Bo("ngSubmit",(function(){return e.onSubmit(e.buttonType)})),Mo(26,"div",10),Mo(27,"label"),Mo(28,"strong"),Jo(29,"enter the State:"),No(),No(),Fo(30,"br"),Mo(31,"input",11),Bo("ngModelChange",(function(t){return e.inputState=t})),No(),Mo(32,"button",12),Bo("click",(function(){return e.onSubmit("add")})),Jo(33,"ADD"),No(),Mo(34,"button",13),Bo("click",(function(){return e.onSubmit("delete")})),Jo(35,"DELETE"),No(),No(),No(),No(),Fo(36,"br"),Fo(37,"br"),Fo(38,"br"),No()),2&t&&(Mi(8),jo("ngModel",e.status),Mi(23),jo("ngModel",e.inputState))},directives:[hf,Bd,Lf,cf,gf,Uf,Hd,Nf,Md],styles:["#bardrop[_ngcontent-%COMP%], .add-delete[_ngcontent-%COMP%]{margin-left:60px}"]}),t})(),qW=(()=>{class t{constructor(){this.mustMatch=[]}validate(t){return(e=this.mustMatch[0],n=this.mustMatch[1],t=>{const i=t.controls[e],r=t.controls[n];return i&&r?r.errors&&!r.errors.mustMatch?null:void r.setErrors(i.value!==r.value?{mustMatch:!0}:null):null})(t);var e,n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","mustMatch",""]],inputs:{mustMatch:"mustMatch"},features:[bs([{provide:qd,useExisting:t,multi:!0}])]}),t})();function GW(t,e){1&t&&(Mo(0,"p"),Jo(1,"Name is required"),No())}function YW(t,e){if(1&t&&(Mo(0,"div",18),Eo(1,GW,2,0,"p",0),No()),2&t){zo();const t=ko(8);Mi(1),jo("ngIf",t.errors.required)}}function KW(t,e){1&t&&(Mo(0,"div"),Jo(1,"Email is required"),No())}function XW(t,e){1&t&&(Mo(0,"div"),Jo(1,"Must be a valid email address"),No())}function QW(t,e){if(1&t&&(Mo(0,"div",18),Eo(1,KW,2,0,"div",0),Eo(2,XW,2,0,"div",0),No()),2&t){zo();const t=ko(15);Mi(1),jo("ngIf",t.errors.required),Mi(1),jo("ngIf",t.errors.email)}}function $W(t,e){1&t&&(Mo(0,"div"),Jo(1,"Password is required"),No())}function ZW(t,e){1&t&&(Mo(0,"div"),Jo(1,"Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"),No())}function JW(t,e){1&t&&(Mo(0,"div"),Jo(1,"Confirm Password & Password must be same."),No())}function tz(t,e){if(1&t&&(Mo(0,"div",18),Eo(1,$W,2,0,"div",0),Eo(2,ZW,2,0,"div",0),Eo(3,JW,2,0,"div",0),No()),2&t){zo();const t=ko(22);Mi(1),jo("ngIf",t.errors.required),Mi(1),jo("ngIf",t.invalid),Mi(1),jo("ngIf",t.errors.matchValueError)}}function ez(t,e){1&t&&(Mo(0,"div"),Jo(1,"Passwords must match"),No())}function nz(t,e){if(1&t&&(Mo(0,"div",18),Eo(1,ez,2,0,"div",0),No()),2&t){zo();const t=ko(29);Mi(1),jo("ngIf",t.errors.mustMatch)}}const iz=function(){return["password","confirmPassword"]},rz=function(t){return{"is-invalid":t}};function oz(t,e){if(1&t){const t=Vo();Mo(0,"div"),Mo(1,"form",1,2),Bo("ngSubmit",(function(){sn(t);const e=ko(2),n=zo();return e.form.valid&&n.onSubmit(e)})),Mo(3,"div",3),Mo(4,"div",4),Mo(5,"label"),Jo(6,"Name"),No(),Mo(7,"input",5,6),Bo("ngModelChange",(function(e){return sn(t),zo().modelSignUp.userName=e})),No(),Eo(9,YW,2,1,"div",7),No(),No(),Mo(10,"div",3),Mo(11,"div",4),Mo(12,"label"),Jo(13,"Email"),No(),Mo(14,"input",8,9),Bo("ngModelChange",(function(e){return sn(t),zo().modelSignUp.email=e})),No(),Eo(16,QW,3,2,"div",7),No(),No(),Mo(17,"div",3),Mo(18,"div",4),Mo(19,"label"),Jo(20,"Password"),No(),Mo(21,"input",10,11),Bo("ngModelChange",(function(e){return sn(t),zo().modelSignUp.password=e})),No(),Eo(23,tz,4,3,"div",7),No(),No(),Mo(24,"div",3),Mo(25,"div",4),Mo(26,"label"),Jo(27,"Confirm Password"),No(),Mo(28,"input",12,13),Bo("ngModelChange",(function(e){return sn(t),zo().modelSignUp.confirmPassword=e})),No(),Eo(30,nz,2,1,"div",7),No(),No(),Mo(31,"div",14),Mo(32,"button",15),Jo(33,"SIGN UP"),No(),No(),No(),Mo(34,"p"),Mo(35,"button",16),Bo("click",(function(){return sn(t),zo().googleLogIn()})),Jo(36,"CONTINUE WITH GOOGLE"),No(),No(),Mo(37,"p"),Jo(38,"Already have an account? "),Mo(39,"button",17),Bo("click",(function(){return sn(t),zo().onGoToSignUp()})),Jo(40,"Go To Login"),No(),No(),No()}if(2&t){const t=ko(2),e=ko(8),n=ko(15),i=ko(22),r=ko(29),o=zo();Mi(1),jo("mustMatch",sa(13,iz)),Mi(6),jo("ngModel",o.modelSignUp.userName)("ngClass",aa(14,rz,t.submitted&&e.invalid)),Mi(2),jo("ngIf",t.submitted&&e.invalid),Mi(5),jo("ngModel",o.modelSignUp.email)("ngClass",aa(16,rz,t.submitted&&n.invalid)),Mi(2),jo("ngIf",t.submitted&&n.invalid),Mi(5),jo("ngModel",o.modelSignUp.password)("ngClass",aa(18,rz,t.submitted&&i.invalid)),Mi(2),jo("ngIf",t.submitted&&i.invalid),Mi(5),jo("ngModel",o.modelSignUp.confirmPassword)("ngClass",aa(20,rz,t.submitted&&r.invalid)),Mi(2),jo("ngIf",t.submitted&&r.invalid)}}function sz(t,e){1&t&&(Mo(0,"p"),Jo(1,"Name is required"),No())}function az(t,e){if(1&t&&(Mo(0,"div",18),Eo(1,sz,2,0,"p",0),No()),2&t){zo();const t=ko(8);Mi(1),jo("ngIf",t.errors.required)}}function uz(t,e){1&t&&(Mo(0,"div"),Jo(1,"Password is required"),No())}function lz(t,e){if(1&t&&(Mo(0,"div",18),Eo(1,uz,2,0,"div",0),No()),2&t){zo();const t=ko(15);Mi(1),jo("ngIf",t.errors.required)}}function hz(t,e){if(1&t){const t=Vo();Mo(0,"div"),Mo(1,"form",19,2),Bo("ngSubmit",(function(){sn(t);const e=ko(2),n=zo();return e.form.valid&&n.onSubmit(e)})),Mo(3,"div",3),Mo(4,"div",4),Mo(5,"label"),Jo(6,"User Name"),No(),Mo(7,"input",5,6),Bo("ngModelChange",(function(e){return sn(t),zo().modelLogin.userName=e})),No(),Eo(9,az,2,1,"div",7),No(),No(),Mo(10,"div",3),Mo(11,"div",4),Mo(12,"label"),Jo(13,"Password"),No(),Mo(14,"input",20,11),Bo("ngModelChange",(function(e){return sn(t),zo().modelLogin.password=e})),No(),Eo(16,lz,2,1,"div",7),No(),No(),Mo(17,"div",14),Mo(18,"button",15),Jo(19,"LOGIN"),No(),No(),No(),Mo(20,"p"),Mo(21,"button",16),Bo("click",(function(){return sn(t),zo().googleLogIn()})),Jo(22,"CONTINUE WITH GOOGLE"),No(),No(),Mo(23,"p"),Jo(24,"Don't have an account? "),Mo(25,"button",17),Bo("click",(function(){return sn(t),zo().onGoToSignUp()})),Jo(26,"Go To Sign Up"),No(),No(),No()}if(2&t){const t=ko(2),e=ko(8),n=ko(15),i=zo();Mi(7),jo("ngModel",i.modelLogin.userName)("ngClass",aa(5,rz,t.submitted&&e.invalid)),Mi(2),jo("ngIf",t.submitted&&e.invalid),Mi(5),jo("ngModel",i.modelLogin.password),Mi(2),jo("ngIf",t.submitted&&n.invalid)}}const cz=function(){return["/table"]};function pz(t,e){if(1&t){const t=Vo();Mo(0,"div"),Mo(1,"h1"),Jo(2),No(),Mo(3,"button",21),Jo(4,"go to first page"),No(),Mo(5,"p"),Jo(6),Mo(7,"button",17),Bo("click",(function(){return sn(t),zo().logOut()})),Jo(8,"LOGOUT"),No(),No(),No()}if(2&t){const t=zo();Mi(2),es("Welcome, ",t.auth.isLoggedIn()?t.auth.getUserName():t.userName,"!"),Mi(1),jo("routerLink",sa(3,cz)),Mi(3),es("you are not ",t.auth.isLoggedIn()?t.auth.getUserName():t.userName,"? ")}}class dz{}class fz{}let gz=(()=>{class t{constructor(t){this.auth=t,this.modelLogin=new fz,this.modelSignUp=new dz}ngOnInit(){this.signed=!0,this.isIn=this.auth.isLoggedIn()}onSubmit(t){this.userName=t.value.name,this.isIn=!0}onGoToSignUp(){this.signed=!this.signed}googleLogIn(){this.auth.login(),this.userName=this.auth.getUserName(),this.isIn=!0}logOut(){this.auth.logout(),this.isIn=!1,this.signed=!0}}return t.\u0275fac=function(e){return new(e||t)(Ao(Uj))},t.\u0275cmp=he({type:t,selectors:[["app-login"]],decls:3,vars:3,consts:[[4,"ngIf"],[1,"LoginNSignup",3,"mustMatch","ngSubmit"],["myForm","ngForm"],[1,"form-row"],[1,"form-group","col-md-4","mb-3"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["name","ngModel"],["class","invalid-feedback",4,"ngIf"],["type","email","name","email","email","","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["email","ngModel"],["type","password","name","password","pattern","(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["password","ngModel"],["type","password","name","confirmPassword","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["confirmPassword","ngModel"],[1,"form-group"],[1,"submit"],[1,"googleLogIn",3,"click"],[1,"switchForm",3,"click"],[1,"invalid-feedback"],[1,"LoginNSignup",3,"ngSubmit"],["type","password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"submit",3,"routerLink"]],template:function(t,e){1&t&&(Eo(0,oz,41,22,"div",0),Eo(1,hz,27,7,"div",0),Eo(2,pz,9,4,"div",0)),2&t&&(jo("ngIf",!e.signed&&!e.isIn),Mi(1),jo("ngIf",e.signed&&!e.isIn),Mi(1),jo("ngIf",e.isIn))},directives:[pl,Uf,Hd,Nf,qW,Md,Hf,Bd,Lf,ul,zf,Gf,jp],styles:["form[_ngcontent-%COMP%]{background-color:#f0f0f0;border-radius:300px;margin-bottom:20px;padding-top:20px}div[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{text-align:center}div[_ngcontent-%COMP%]{margin:auto}button.switchForm[_ngcontent-%COMP%]{background-color:#a9a9a9;color:#fff;border:4px solid grey;cursor:pointer;text-align:center}button.googleLogIn[_ngcontent-%COMP%]{border-radius:3px;border-color:#039be5;border-width:1px;background-color:#fff;color:#4d77ff;cursor:pointer;text-align:center}button.submit[_ngcontent-%COMP%]{width:20%;background-color:#6495ed;color:#fff;margin-top:20px;margin-bottom:50px;border:none;border-radius:4px;cursor:pointer;text-align:center;font-size:large;font-weight:700}label[_ngcontent-%COMP%]{color:grey}"]}),t})(),yz=(()=>{class t{constructor(t){this.httpClient=t,this.url="https://api.covidtracking.com/v1/states/current.json"}getList(){return this.httpClient.get(this.url)}}return t.\u0275fac=function(e){return new(e||t)(Yt(IW))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function mz(t,e){if(1&t&&(Mo(0,"tr"),Mo(1,"td"),Jo(2),No(),Mo(3,"td"),Jo(4),No(),Mo(5,"td"),Jo(6),No(),Mo(7,"td"),Jo(8),No(),No()),2&t){const t=e.$implicit;Mi(2),es("",t.state," "),Mi(2),ts(t.positive),Mi(2),es(" ",t.death,""),Mi(2),es(" ",(null==t?null:t.recovered)||0,"")}}let vz=(()=>{class t{constructor(t){this.service=t,this.items=[],this.mylist=[],this.sub=new c,this.title="Group-5 Project",this.dataType="Death",this.sortMethod="Highest",this.numberOfSelect=1,this.dateOfData=new Date("05/21/2020")}ngOnInit(){this.sub=this.service.getList().subscribe(t=>{t.map(t=>this.mylist.push(t))})}ngOnDestroy(){this.sub.unsubscribe()}SearchClick(){this.numberOfSelect>5&&(this.numberOfSelect=5),this.numberOfSelect<=0&&(this.numberOfSelect=1),console.log(this.dataType+" "+this.sortMethod+" "+Number(this.numberOfSelect))}}return t.\u0275fac=function(e){return new(e||t)(Ao(yz))},t.\u0275cmp=he({type:t,selectors:[["app-table"]],decls:19,vars:1,consts:[[2,"text-align","center"],[1,"h3",2,"font-family","Times, serif"],["border","0",2,"margin-left","auto","margin-right","auto","width","80%"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(Mo(0,"div",0),Mo(1,"p",1),Jo(2,"Tables of Each State"),No(),Fo(3,"hr"),Mo(4,"table",2),Mo(5,"thead"),Mo(6,"tr"),Mo(7,"th"),Jo(8,"States"),No(),Mo(9,"th"),Jo(10,"Total positieve cases"),No(),Mo(11,"th"),Jo(12,"Total death cases"),No(),Mo(13,"th"),Jo(14,"Total recoved cases"),No(),No(),No(),Mo(15,"tbody"),Eo(16,mz,9,4,"tr",3),No(),No(),Fo(17,"br"),Fo(18,"br"),No()),2&t&&(Mi(16),jo("ngForOf",e.mylist))},directives:[hl],styles:[""]}),t})();function bz(t,e){if(1&t&&(Mo(0,"option",17),Jo(1),No()),2&t){const t=e.$implicit;jo("value",t),Mi(1),es(" ",t," ")}}function _z(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_1=e})),Mo(1,"p",19),Jo(2,"Wrong Answer!!! Try Again!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_1)}function wz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_1=e})),Mo(1,"p",20),Jo(2,"Correct Answer!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_1)}function xz(t,e){if(1&t&&(Mo(0,"option",17),Jo(1),No()),2&t){const t=e.$implicit;jo("value",t),Mi(1),es(" ",t," ")}}function Pz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_2=e})),Mo(1,"p",19),Jo(2,"Wrong Answer!!! Try Again!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_2)}function Cz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_2=e})),Mo(1,"p",20),Jo(2,"Correct Answer!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_2)}function Iz(t,e){if(1&t&&(Mo(0,"option",17),Jo(1),No()),2&t){const t=e.$implicit;jo("value",t),Mi(1),es(" ",t," ")}}function Oz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_3=e})),Mo(1,"p",19),Jo(2,"Wrong Answer!!! Try Again!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_3)}function Sz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_3=e})),Mo(1,"p",20),Jo(2,"Correct Answer!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_3)}function Tz(t,e){if(1&t&&(Mo(0,"option",17),Jo(1),No()),2&t){const t=e.$implicit;jo("value",t),Mi(1),es(" ",t," ")}}function Ez(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_4=e})),Mo(1,"p",19),Jo(2,"Wrong Answer!!! Try Again!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_4)}function kz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_4=e})),Mo(1,"p",20),Jo(2,"Correct Answer!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_4)}function Az(t,e){if(1&t&&(Mo(0,"option",17),Jo(1),No()),2&t){const t=e.$implicit;jo("value",t),Mi(1),es(" ",t," ")}}function Dz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_5=e})),Mo(1,"p",19),Jo(2,"Wrong Answer!!! Try Again!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_5)}function jz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_5=e})),Mo(1,"p",20),Jo(2,"Correct Answer!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_5)}function Rz(t,e){if(1&t&&(Mo(0,"option",17),Jo(1),No()),2&t){const t=e.$implicit;jo("value",t),Mi(1),es(" ",t," ")}}function Mz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_6=e})),Mo(1,"p",19),Jo(2,"Wrong Answer!!! Try Again!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_6)}function Nz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_6=e})),Mo(1,"p",20),Jo(2,"Correct Answer!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_6)}function Fz(t,e){if(1&t&&(Mo(0,"option",17),Jo(1),No()),2&t){const t=e.$implicit;jo("value",t),Mi(1),es(" ",t," ")}}function Vz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_7=e})),Mo(1,"p",19),Jo(2,"Wrong Answer!!! Try Again!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_7)}function Lz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_7=e})),Mo(1,"p",20),Jo(2,"Correct Answer!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_7)}function Uz(t,e){if(1&t&&(Mo(0,"option",17),Jo(1),No()),2&t){const t=e.$implicit;jo("value",t),Mi(1),es(" ",t," ")}}function Bz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_8=e})),Mo(1,"p",19),Jo(2,"Wrong Answer!!! Try Again!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_8)}function Hz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_8=e})),Mo(1,"p",20),Jo(2,"Correct Answer!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_8)}function Wz(t,e){if(1&t&&(Mo(0,"option",17),Jo(1),No()),2&t){const t=e.$implicit;jo("value",t),Mi(1),es(" ",t," ")}}function zz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_9=e})),Mo(1,"p",19),Jo(2,"Wrong Answer!!! Try Again!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_9)}function qz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_9=e})),Mo(1,"p",20),Jo(2,"Correct Answer!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_9)}function Gz(t,e){if(1&t&&(Mo(0,"option",17),Jo(1),No()),2&t){const t=e.$implicit;jo("value",t),Mi(1),es(" ",t," ")}}function Yz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_10=e})),Mo(1,"p",19),Jo(2,"Wrong Answer!!! Try Again!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_10)}function Kz(t,e){if(1&t){const t=Vo();Mo(0,"div",18),Bo("ngModelChange",(function(e){return sn(t),zo().is_c_10=e})),Mo(1,"p",20),Jo(2,"Correct Answer!!!"),No(),No()}2&t&&jo("ngModel",zo().is_c_10)}class Xz{}class Qz{constructor(){this.scores=0}}const $z=[{path:"lineC",component:HW},{path:"barC",component:zW},{path:"table",component:vz},{path:"login",component:gz},{path:"quiz",component:(()=>{class t{constructor(t){this.quiz=t,this.model=new Qz,this.Question_sub=["1. What other viruses belong to the coronavirus family?","2. What are the common symptoms of COVID-19?","3. Can you always tell if someone has COVID-19?","4. Can washing your hands protect you from COVID-19?","5. Are people living with HIV always more at risk?","6. When should fabric face masks be worn?","7. Can COVID-19 be cured?","8. Which of the following is an example of physical distancing? ","9. How can people living with HIV protect themselves from COVID-19?","10. What does COVID-19 stand for?"],this.Question1=["SARS and influenza","SARS and MERS","SARS and HIV","All of the above"],this.Question2=["A new and continuous cough","Fever","Tiredness","All of the above"],this.Question3=["No \u2013 not everyone with COVID-19 has symptoms","Yes \u2013 it will be obvious, a person with COVID-19 coughs a lot","Yes \u2013 you can tell just by where a person comes from, their race and ethnicity"],this.Question4=["Yes \u2013 but only if you use a strong bleach","Yes \u2013 normal soap and water or hand sanitizer is enough","No \u2013 Washing your hands doesn\u2019t stop COVID-19"],this.Question5=["Yes \u2013 people with HIV have weaker immune systems","No \u2013 people who adhere to antiretroviral treatment (ART) and have a high CD4 count aren\u2019t more at risk"],this.Question6=["On public transport","In confined or crowded spaces","In small shops","All of the above"],this.Question7=["Yes \u2013 Hot drinks can cure COVID-19","No \u2013 COVID-19 is a death sentence","No \u2013 but most people get better by themselves"],this.Question8=["You stop going to crowded places and visiting other people\u2019s houses","You stop talking to the people you live with","You stop speaking to your friends on the phone"],this.Question9=["Wash their hands regularly and follow the physical distancing advice","Keep taking their antiretroviral treatment","Exercise regularly, eat well and look after their mental health","All of the above"],this.Question10=["It is a term for Coronavirus Disease 19, because it is the 19th strain of coronavirus discovered","It is a term that stands for Coronavirus Disease 2019, the year it was first identified"],this.correct=["SARS and influenza","All of the above","No \u2013 not everyone with COVID-19 has symptoms","Yes \u2013 normal soap and water or hand sanitizer is enough","No \u2013 people who adhere to antiretroviral treatment (ART) and have a high CD4 count aren\u2019t more at risk","All of the above","No \u2013 but most people get better by themselves","You stop going to crowded places and visiting other people\u2019s houses","All of the above","It is a term that stands for Coronavirus Disease 2019, the year it was first identified"]}ngOnInit(){this.model.address=new Xz}onSubmit(t){console.log(t.value),this.model.scores=0,this.model.question1==this.correct[0]?(this.is_c_1=!0,this.model.scores+=10):this.is_c_1=!1,this.model.question2==this.correct[1]?(this.is_c_2=!0,this.model.scores=this.model.scores+10):this.is_c_2=!1,this.model.question3==this.correct[2]?(this.is_c_3=!0,this.model.scores=this.model.scores+10):this.is_c_3=!1,this.model.question4==this.correct[3]?(this.is_c_4=!0,this.model.scores=this.model.scores+10):this.is_c_4=!1,this.model.question5==this.correct[4]?(this.is_c_5=!0,this.model.scores=this.model.scores+10):this.is_c_5=!1,this.model.question6==this.correct[5]?(this.is_c_6=!0,this.model.scores=this.model.scores+10):this.is_c_6=!1,this.model.question7==this.correct[6]?(this.is_c_7=!0,this.model.scores=this.model.scores+10):this.is_c_7=!1,this.model.question8==this.correct[7]?(this.is_c_8=!0,this.model.scores=this.model.scores+10):this.is_c_8=!1,this.model.question9==this.correct[8]?(this.is_c_9=!0,this.model.scores=this.model.scores+10):this.is_c_9=!1,this.model.question10==this.correct[9]?(this.is_c_10=!0,this.model.scores=this.model.scores+10):this.is_c_10=!1,this.quiz.setScore(this.model.scores)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Bj))},t.\u0275cmp=he({type:t,selectors:[["app-quiz"]],decls:97,vars:59,consts:[[2,"width","80%","height","120%","margin-left","10%",3,"ngSubmit"],["myForm","ngForm"],[1,"form-col"],[1,"form-group"],["name","Question1",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange",4,"ngIf"],["name","Question2",1,"form-control",3,"ngModel","ngModelChange"],["name","Question3",1,"form-control",3,"ngModel","ngModelChange"],["name","Question4",1,"form-control",3,"ngModel","ngModelChange"],["name","Question5",1,"form-control",3,"ngModel","ngModelChange"],["name","Question6",1,"form-control",3,"ngModel","ngModelChange"],["name","Question8",1,"form-control",3,"ngModel","ngModelChange"],["name","Question9",1,"form-control",3,"ngModel","ngModelChange"],["name","Question10",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-row"],[1,"btn","btn-primary","btn-block",2,"width","50%","margin","auto"],[3,"value"],[3,"ngModel","ngModelChange"],[2,"color","red"],[2,"color","green"]],template:function(t,e){if(1&t){const t=Vo();Mo(0,"form",0,1),Bo("ngSubmit",(function(){sn(t);const n=ko(1);return n.form.valid&&e.onSubmit(n)})),Mo(2,"div",2),Mo(3,"div",3),Mo(4,"label"),Jo(5),No(),Mo(6,"select",4),Bo("ngModelChange",(function(t){return e.model.question1=t})),Eo(7,bz,2,2,"option",5),No(),Eo(8,_z,3,1,"div",6),Eo(9,wz,3,1,"div",6),No(),Fo(10,"br"),Mo(11,"div",3),Mo(12,"label"),Jo(13),No(),Mo(14,"select",7),Bo("ngModelChange",(function(t){return e.model.question2=t})),Eo(15,xz,2,2,"option",5),No(),Eo(16,Pz,3,1,"div",6),Eo(17,Cz,3,1,"div",6),No(),Fo(18,"br"),Mo(19,"div",3),Mo(20,"label"),Jo(21),No(),Mo(22,"select",8),Bo("ngModelChange",(function(t){return e.model.question3=t})),Eo(23,Iz,2,2,"option",5),No(),Eo(24,Oz,3,1,"div",6),Eo(25,Sz,3,1,"div",6),No(),Fo(26,"br"),Mo(27,"div",3),Mo(28,"label"),Jo(29),No(),Mo(30,"select",9),Bo("ngModelChange",(function(t){return e.model.question4=t})),Eo(31,Tz,2,2,"option",5),No(),Eo(32,Ez,3,1,"div",6),Eo(33,kz,3,1,"div",6),No(),Fo(34,"br"),Mo(35,"div",3),Mo(36,"label"),Jo(37),No(),Mo(38,"select",10),Bo("ngModelChange",(function(t){return e.model.question5=t})),Eo(39,Az,2,2,"option",5),No(),Eo(40,Dz,3,1,"div",6),Eo(41,jz,3,1,"div",6),No(),Fo(42,"br"),Mo(43,"div",3),Mo(44,"label"),Jo(45),No(),Mo(46,"select",11),Bo("ngModelChange",(function(t){return e.model.question6=t})),Eo(47,Rz,2,2,"option",5),No(),Eo(48,Mz,3,1,"div",6),Eo(49,Nz,3,1,"div",6),No(),Fo(50,"br"),Mo(51,"div",3),Mo(52,"label"),Jo(53),No(),Mo(54,"select",8),Bo("ngModelChange",(function(t){return e.model.question7=t})),Eo(55,Fz,2,2,"option",5),No(),Eo(56,Vz,3,1,"div",6),Eo(57,Lz,3,1,"div",6),No(),Fo(58,"br"),Mo(59,"div",3),Mo(60,"label"),Jo(61),No(),Mo(62,"select",12),Bo("ngModelChange",(function(t){return e.model.question8=t})),Eo(63,Uz,2,2,"option",5),No(),Eo(64,Bz,3,1,"div",6),Eo(65,Hz,3,1,"div",6),No(),Fo(66,"br"),Mo(67,"div",3),Mo(68,"label"),Jo(69),No(),Mo(70,"select",13),Bo("ngModelChange",(function(t){return e.model.question9=t})),Eo(71,Wz,2,2,"option",5),No(),Eo(72,zz,3,1,"div",6),Eo(73,qz,3,1,"div",6),No(),Fo(74,"br"),Mo(75,"div",3),Mo(76,"label"),Jo(77),No(),Mo(78,"select",14),Bo("ngModelChange",(function(t){return e.model.question10=t})),Eo(79,Gz,2,2,"option",5),No(),Eo(80,Yz,3,1,"div",6),Eo(81,Kz,3,1,"div",6),No(),Fo(82,"br"),No(),Mo(83,"div",15),Mo(84,"div",3),Jo(85),ha(86,"uppercase"),ha(87,"date"),No(),Mo(88,"div",3),Jo(89),ha(90,"date"),No(),No(),Mo(91,"div",3),Mo(92,"button",16),Jo(93,"Submit"),No(),No(),Fo(94,"br"),Fo(95,"br"),Fo(96,"br"),No()}2&t&&(Mi(5),ts(e.Question_sub[0]),Mi(1),jo("ngModel",e.model.question1),Mi(1),jo("ngForOf",e.Question1),Mi(1),jo("ngIf",0==e.is_c_1),Mi(1),jo("ngIf",1==e.is_c_1),Mi(4),ts(e.Question_sub[1]),Mi(1),jo("ngModel",e.model.question2),Mi(1),jo("ngForOf",e.Question2),Mi(1),jo("ngIf",0==e.is_c_2),Mi(1),jo("ngIf",1==e.is_c_2),Mi(4),ts(e.Question_sub[2]),Mi(1),jo("ngModel",e.model.question3),Mi(1),jo("ngForOf",e.Question3),Mi(1),jo("ngIf",0==e.is_c_3),Mi(1),jo("ngIf",1==e.is_c_3),Mi(4),ts(e.Question_sub[3]),Mi(1),jo("ngModel",e.model.question4),Mi(1),jo("ngForOf",e.Question4),Mi(1),jo("ngIf",0==e.is_c_4),Mi(1),jo("ngIf",1==e.is_c_4),Mi(4),ts(e.Question_sub[4]),Mi(1),jo("ngModel",e.model.question5),Mi(1),jo("ngForOf",e.Question5),Mi(1),jo("ngIf",0==e.is_c_5),Mi(1),jo("ngIf",1==e.is_c_5),Mi(4),ts(e.Question_sub[5]),Mi(1),jo("ngModel",e.model.question6),Mi(1),jo("ngForOf",e.Question6),Mi(1),jo("ngIf",0==e.is_c_6),Mi(1),jo("ngIf",1==e.is_c_6),Mi(4),ts(e.Question_sub[6]),Mi(1),jo("ngModel",e.model.question7),Mi(1),jo("ngForOf",e.Question7),Mi(1),jo("ngIf",0==e.is_c_7),Mi(1),jo("ngIf",1==e.is_c_7),Mi(4),ts(e.Question_sub[7]),Mi(1),jo("ngModel",e.model.question8),Mi(1),jo("ngForOf",e.Question8),Mi(1),jo("ngIf",0==e.is_c_8),Mi(1),jo("ngIf",1==e.is_c_8),Mi(4),ts(e.Question_sub[8]),Mi(1),jo("ngModel",e.model.question9),Mi(1),jo("ngForOf",e.Question9),Mi(1),jo("ngIf",0==e.is_c_9),Mi(1),jo("ngIf",1==e.is_c_9),Mi(4),ts(e.Question_sub[9]),Mi(1),jo("ngModel",e.model.question10),Mi(1),jo("ngForOf",e.Question10),Mi(1),jo("ngIf",0==e.is_c_10),Mi(1),jo("ngIf",1==e.is_c_10),Mi(4),es(" ",ca(86,52,ca(87,54,e.model.regdate))," "),Mi(4),es(" ",function(t,e,n,i){const r=rn(),o=Ke(r,90);return da(r,pa(r,90)?function(t,e,n,i,r,o,s){const a=e+n;return function(t,e,n,i){const r=So(t,e,n);return So(t,e+1,i)||r}(t,a,r,o)?Oo(t,a+2,s?i.call(s,r,o):i(r,o)):ua(t,a+2)}(r,pn(),56,o.transform,n,i,o):o.transform(n,i))}(0,0,e.model.regdate,"MM/dd/yy")," "))},directives:[Uf,Hd,Nf,hf,Bd,Lf,hl,pl,cf,gf],pipes:[yl,ml],styles:[""]}),t})()},{path:"record",component:og}];let Zz=(()=>{class t{}return t.\u0275mod=fe({type:t,bootstrap:[Kj]}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[],imports:[[Td,Kf,Fj.initializeApp(cu),Lj,UW,Gp.forRoot($z)]]}),t})();Od().bootstrapModule(Zz).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);